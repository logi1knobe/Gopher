var Qr=Object.defineProperty;var Jr=(_,_e,et)=>_e in _?Qr(_,_e,{enumerable:!0,configurable:!0,writable:!0,value:et}):_[_e]=et;var kr=(_,_e,et)=>(Jr(_,typeof _e!="symbol"?_e+"":_e,et),et);(function(){const _e=document.createElement("link").relList;if(_e&&_e.supports&&_e.supports("modulepreload"))return;for(const rt of document.querySelectorAll('link[rel="modulepreload"]'))tt(rt);new MutationObserver(rt=>{for(const nt of rt)if(nt.type==="childList")for(const at of nt.addedNodes)at.tagName==="LINK"&&at.rel==="modulepreload"&&tt(at)}).observe(document,{childList:!0,subtree:!0});function et(rt){const nt={};return rt.integrity&&(nt.integrity=rt.integrity),rt.referrerpolicy&&(nt.referrerPolicy=rt.referrerpolicy),rt.crossorigin==="use-credentials"?nt.credentials="include":rt.crossorigin==="anonymous"?nt.credentials="omit":nt.credentials="same-origin",nt}function tt(rt){if(rt.ep)return;rt.ep=!0;const nt=et(rt);fetch(rt.href,nt)}})();var commonjsGlobal$1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(_){return _&&_.__esModule&&Object.prototype.hasOwnProperty.call(_,"default")?_.default:_}function getAugmentedNamespace(_){var _e=_.default;if(typeof _e=="function"){var et=function tt(){if(this instanceof tt){var rt=[null];rt.push.apply(rt,arguments);var nt=Function.bind.apply(_e,rt);return new nt}return _e.apply(this,arguments)};et.prototype=_e.prototype}else et={};return Object.defineProperty(et,"__esModule",{value:!0}),Object.keys(_).forEach(function(tt){var rt=Object.getOwnPropertyDescriptor(_,tt);Object.defineProperty(et,tt,rt.get?rt:{enumerable:!0,get:function(){return _[tt]}})}),et}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={};var getOwnPropertySymbols=Object.getOwnPropertySymbols,hasOwnProperty$c=Object.prototype.hasOwnProperty,propIsEnumerable=Object.prototype.propertyIsEnumerable;function toObject$6(_){if(_==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(_)}function shouldUseNative(){try{if(!Object.assign)return!1;var _=new String("abc");if(_[5]="de",Object.getOwnPropertyNames(_)[0]==="5")return!1;for(var _e={},et=0;et<10;et++)_e["_"+String.fromCharCode(et)]=et;var tt=Object.getOwnPropertyNames(_e).map(function(nt){return _e[nt]});if(tt.join("")!=="0123456789")return!1;var rt={};return"abcdefghijklmnopqrst".split("").forEach(function(nt){rt[nt]=nt}),Object.keys(Object.assign({},rt)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var objectAssign=shouldUseNative()?Object.assign:function(_,_e){for(var et,tt=toObject$6(_),rt,nt=1;nt<arguments.length;nt++){et=Object(arguments[nt]);for(var at in et)hasOwnProperty$c.call(et,at)&&(tt[at]=et[at]);if(getOwnPropertySymbols){rt=getOwnPropertySymbols(et);for(var it=0;it<rt.length;it++)propIsEnumerable.call(et,rt[it])&&(tt[rt[it]]=et[rt[it]])}}return tt},react={exports:{}},react_production_min={};var l$3=objectAssign,n$3=60103,p$5=60106;react_production_min.Fragment=60107;react_production_min.StrictMode=60108;react_production_min.Profiler=60114;var q$3=60109,r$6=60110,t$4=60112;react_production_min.Suspense=60113;var u$4=60115,v$2=60116;if(typeof Symbol=="function"&&Symbol.for){var w$2=Symbol.for;n$3=w$2("react.element"),p$5=w$2("react.portal"),react_production_min.Fragment=w$2("react.fragment"),react_production_min.StrictMode=w$2("react.strict_mode"),react_production_min.Profiler=w$2("react.profiler"),q$3=w$2("react.provider"),r$6=w$2("react.context"),t$4=w$2("react.forward_ref"),react_production_min.Suspense=w$2("react.suspense"),u$4=w$2("react.memo"),v$2=w$2("react.lazy")}var x$2=typeof Symbol=="function"&&Symbol.iterator;function y$3(_){return _===null||typeof _!="object"?null:(_=x$2&&_[x$2]||_["@@iterator"],typeof _=="function"?_:null)}function z$1(_){for(var _e="https://reactjs.org/docs/error-decoder.html?invariant="+_,et=1;et<arguments.length;et++)_e+="&args[]="+encodeURIComponent(arguments[et]);return"Minified React error #"+_+"; visit "+_e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var A$2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B$2={};function C$2(_,_e,et){this.props=_,this.context=_e,this.refs=B$2,this.updater=et||A$2}C$2.prototype.isReactComponent={};C$2.prototype.setState=function(_,_e){if(typeof _!="object"&&typeof _!="function"&&_!=null)throw Error(z$1(85));this.updater.enqueueSetState(this,_,_e,"setState")};C$2.prototype.forceUpdate=function(_){this.updater.enqueueForceUpdate(this,_,"forceUpdate")};function D$2(){}D$2.prototype=C$2.prototype;function E$1(_,_e,et){this.props=_,this.context=_e,this.refs=B$2,this.updater=et||A$2}var F$4=E$1.prototype=new D$2;F$4.constructor=E$1;l$3(F$4,C$2.prototype);F$4.isPureReactComponent=!0;var G$1={current:null},H$2=Object.prototype.hasOwnProperty,I$3={key:!0,ref:!0,__self:!0,__source:!0};function J$2(_,_e,et){var tt,rt={},nt=null,at=null;if(_e!=null)for(tt in _e.ref!==void 0&&(at=_e.ref),_e.key!==void 0&&(nt=""+_e.key),_e)H$2.call(_e,tt)&&!I$3.hasOwnProperty(tt)&&(rt[tt]=_e[tt]);var it=arguments.length-2;if(it===1)rt.children=et;else if(1<it){for(var ot=Array(it),st=0;st<it;st++)ot[st]=arguments[st+2];rt.children=ot}if(_&&_.defaultProps)for(tt in it=_.defaultProps,it)rt[tt]===void 0&&(rt[tt]=it[tt]);return{$$typeof:n$3,type:_,key:nt,ref:at,props:rt,_owner:G$1.current}}function K(_,_e){return{$$typeof:n$3,type:_.type,key:_e,ref:_.ref,props:_.props,_owner:_._owner}}function L$1(_){return typeof _=="object"&&_!==null&&_.$$typeof===n$3}function escape$2(_){var _e={"=":"=0",":":"=2"};return"$"+_.replace(/[=:]/g,function(et){return _e[et]})}var M$5=/\/+/g;function N$2(_,_e){return typeof _=="object"&&_!==null&&_.key!=null?escape$2(""+_.key):_e.toString(36)}function O$1(_,_e,et,tt,rt){var nt=typeof _;(nt==="undefined"||nt==="boolean")&&(_=null);var at=!1;if(_===null)at=!0;else switch(nt){case"string":case"number":at=!0;break;case"object":switch(_.$$typeof){case n$3:case p$5:at=!0}}if(at)return at=_,rt=rt(at),_=tt===""?"."+N$2(at,0):tt,Array.isArray(rt)?(et="",_!=null&&(et=_.replace(M$5,"$&/")+"/"),O$1(rt,_e,et,"",function(st){return st})):rt!=null&&(L$1(rt)&&(rt=K(rt,et+(!rt.key||at&&at.key===rt.key?"":(""+rt.key).replace(M$5,"$&/")+"/")+_)),_e.push(rt)),1;if(at=0,tt=tt===""?".":tt+":",Array.isArray(_))for(var it=0;it<_.length;it++){nt=_[it];var ot=tt+N$2(nt,it);at+=O$1(nt,_e,et,ot,rt)}else if(ot=y$3(_),typeof ot=="function")for(_=ot.call(_),it=0;!(nt=_.next()).done;)nt=nt.value,ot=tt+N$2(nt,it++),at+=O$1(nt,_e,et,ot,rt);else if(nt==="object")throw _e=""+_,Error(z$1(31,_e==="[object Object]"?"object with keys {"+Object.keys(_).join(", ")+"}":_e));return at}function P$2(_,_e,et){if(_==null)return _;var tt=[],rt=0;return O$1(_,tt,"","",function(nt){return _e.call(et,nt,rt++)}),tt}function Q(_){if(_._status===-1){var _e=_._result;_e=_e(),_._status=0,_._result=_e,_e.then(function(et){_._status===0&&(et=et.default,_._status=1,_._result=et)},function(et){_._status===0&&(_._status=2,_._result=et)})}if(_._status===1)return _._result;throw _._result}var R$1={current:null};function S$3(){var _=R$1.current;if(_===null)throw Error(z$1(321));return _}var T$4={ReactCurrentDispatcher:R$1,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:G$1,IsSomeRendererActing:{current:!1},assign:l$3};react_production_min.Children={map:P$2,forEach:function(_,_e,et){P$2(_,function(){_e.apply(this,arguments)},et)},count:function(_){var _e=0;return P$2(_,function(){_e++}),_e},toArray:function(_){return P$2(_,function(_e){return _e})||[]},only:function(_){if(!L$1(_))throw Error(z$1(143));return _}};react_production_min.Component=C$2;react_production_min.PureComponent=E$1;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=T$4;react_production_min.cloneElement=function(_,_e,et){if(_==null)throw Error(z$1(267,_));var tt=l$3({},_.props),rt=_.key,nt=_.ref,at=_._owner;if(_e!=null){if(_e.ref!==void 0&&(nt=_e.ref,at=G$1.current),_e.key!==void 0&&(rt=""+_e.key),_.type&&_.type.defaultProps)var it=_.type.defaultProps;for(ot in _e)H$2.call(_e,ot)&&!I$3.hasOwnProperty(ot)&&(tt[ot]=_e[ot]===void 0&&it!==void 0?it[ot]:_e[ot])}var ot=arguments.length-2;if(ot===1)tt.children=et;else if(1<ot){it=Array(ot);for(var st=0;st<ot;st++)it[st]=arguments[st+2];tt.children=it}return{$$typeof:n$3,type:_.type,key:rt,ref:nt,props:tt,_owner:at}};react_production_min.createContext=function(_,_e){return _e===void 0&&(_e=null),_={$$typeof:r$6,_calculateChangedBits:_e,_currentValue:_,_currentValue2:_,_threadCount:0,Provider:null,Consumer:null},_.Provider={$$typeof:q$3,_context:_},_.Consumer=_};react_production_min.createElement=J$2;react_production_min.createFactory=function(_){var _e=J$2.bind(null,_);return _e.type=_,_e};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(_){return{$$typeof:t$4,render:_}};react_production_min.isValidElement=L$1;react_production_min.lazy=function(_){return{$$typeof:v$2,_payload:{_status:-1,_result:_},_init:Q}};react_production_min.memo=function(_,_e){return{$$typeof:u$4,type:_,compare:_e===void 0?null:_e}};react_production_min.useCallback=function(_,_e){return S$3().useCallback(_,_e)};react_production_min.useContext=function(_,_e){return S$3().useContext(_,_e)};react_production_min.useDebugValue=function(){};react_production_min.useEffect=function(_,_e){return S$3().useEffect(_,_e)};react_production_min.useImperativeHandle=function(_,_e,et){return S$3().useImperativeHandle(_,_e,et)};react_production_min.useLayoutEffect=function(_,_e){return S$3().useLayoutEffect(_,_e)};react_production_min.useMemo=function(_,_e){return S$3().useMemo(_,_e)};react_production_min.useReducer=function(_,_e,et){return S$3().useReducer(_,_e,et)};react_production_min.useRef=function(_){return S$3().useRef(_)};react_production_min.useState=function(_){return S$3().useState(_)};react_production_min.version="17.0.2";(function(_){_.exports=react_production_min})(react);const React$1=getDefaultExportFromCjs(react.exports);var f$5=react.exports,g$1=60103;reactJsxRuntime_production_min.Fragment=60107;if(typeof Symbol=="function"&&Symbol.for){var h$2=Symbol.for;g$1=h$2("react.element"),reactJsxRuntime_production_min.Fragment=h$2("react.fragment")}var m$5=f$5.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,n$2=Object.prototype.hasOwnProperty,p$4={key:!0,ref:!0,__self:!0,__source:!0};function q$2(_,_e,et){var tt,rt={},nt=null,at=null;et!==void 0&&(nt=""+et),_e.key!==void 0&&(nt=""+_e.key),_e.ref!==void 0&&(at=_e.ref);for(tt in _e)n$2.call(_e,tt)&&!p$4.hasOwnProperty(tt)&&(rt[tt]=_e[tt]);if(_&&_.defaultProps)for(tt in _e=_.defaultProps,_e)rt[tt]===void 0&&(rt[tt]=_e[tt]);return{$$typeof:g$1,type:_,key:nt,ref:at,props:rt,_owner:m$5.current}}reactJsxRuntime_production_min.jsx=q$2;reactJsxRuntime_production_min.jsxs=q$2;(function(_){_.exports=reactJsxRuntime_production_min})(jsxRuntime);var reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};(function(_){var _e,et,tt,rt;if(typeof performance=="object"&&typeof performance.now=="function"){var nt=performance;_.unstable_now=function(){return nt.now()}}else{var at=Date,it=at.now();_.unstable_now=function(){return at.now()-it}}if(typeof window>"u"||typeof MessageChannel!="function"){var ot=null,st=null,lt=function(){if(ot!==null)try{var $t=_.unstable_now();ot(!0,$t),ot=null}catch(jt){throw setTimeout(lt,0),jt}};_e=function($t){ot!==null?setTimeout(_e,0,$t):(ot=$t,setTimeout(lt,0))},et=function($t,jt){st=setTimeout($t,jt)},tt=function(){clearTimeout(st)},_.unstable_shouldYield=function(){return!1},rt=_.unstable_forceFrameRate=function(){}}else{var gt=window.setTimeout,ct=window.clearTimeout;if(typeof console<"u"){var wt=window.cancelAnimationFrame;typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),typeof wt!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var Tt=!1,Rt=null,ht=-1,ut=5,ft=0;_.unstable_shouldYield=function(){return _.unstable_now()>=ft},rt=function(){},_.unstable_forceFrameRate=function($t){0>$t||125<$t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ut=0<$t?Math.floor(1e3/$t):5};var yt=new MessageChannel,xt=yt.port2;yt.port1.onmessage=function(){if(Rt!==null){var $t=_.unstable_now();ft=$t+ut;try{Rt(!0,$t)?xt.postMessage(null):(Tt=!1,Rt=null)}catch(jt){throw xt.postMessage(null),jt}}else Tt=!1},_e=function($t){Rt=$t,Tt||(Tt=!0,xt.postMessage(null))},et=function($t,jt){ht=gt(function(){$t(_.unstable_now())},jt)},tt=function(){ct(ht),ht=-1}}function Ct($t,jt){var Nt=$t.length;$t.push(jt);e:for(;;){var Ft=Nt-1>>>1,Bt=$t[Ft];if(Bt!==void 0&&0<vt(Bt,jt))$t[Ft]=jt,$t[Nt]=Bt,Nt=Ft;else break e}}function pt($t){return $t=$t[0],$t===void 0?null:$t}function dt($t){var jt=$t[0];if(jt!==void 0){var Nt=$t.pop();if(Nt!==jt){$t[0]=Nt;e:for(var Ft=0,Bt=$t.length;Ft<Bt;){var Ut=2*(Ft+1)-1,Ht=$t[Ut],Kt=Ut+1,Gt=$t[Kt];if(Ht!==void 0&&0>vt(Ht,Nt))Gt!==void 0&&0>vt(Gt,Ht)?($t[Ft]=Gt,$t[Kt]=Nt,Ft=Kt):($t[Ft]=Ht,$t[Ut]=Nt,Ft=Ut);else if(Gt!==void 0&&0>vt(Gt,Nt))$t[Ft]=Gt,$t[Kt]=Nt,Ft=Kt;else break e}}return jt}return null}function vt($t,jt){var Nt=$t.sortIndex-jt.sortIndex;return Nt!==0?Nt:$t.id-jt.id}var St=[],Et=[],mt=1,_t=null,bt=3,Ot=!1,Pt=!1,Dt=!1;function It($t){for(var jt=pt(Et);jt!==null;){if(jt.callback===null)dt(Et);else if(jt.startTime<=$t)dt(Et),jt.sortIndex=jt.expirationTime,Ct(St,jt);else break;jt=pt(Et)}}function kt($t){if(Dt=!1,It($t),!Pt)if(pt(St)!==null)Pt=!0,_e(Lt);else{var jt=pt(Et);jt!==null&&et(kt,jt.startTime-$t)}}function Lt($t,jt){Pt=!1,Dt&&(Dt=!1,tt()),Ot=!0;var Nt=bt;try{for(It(jt),_t=pt(St);_t!==null&&(!(_t.expirationTime>jt)||$t&&!_.unstable_shouldYield());){var Ft=_t.callback;if(typeof Ft=="function"){_t.callback=null,bt=_t.priorityLevel;var Bt=Ft(_t.expirationTime<=jt);jt=_.unstable_now(),typeof Bt=="function"?_t.callback=Bt:_t===pt(St)&&dt(St),It(jt)}else dt(St);_t=pt(St)}if(_t!==null)var Ut=!0;else{var Ht=pt(Et);Ht!==null&&et(kt,Ht.startTime-jt),Ut=!1}return Ut}finally{_t=null,bt=Nt,Ot=!1}}var At=rt;_.unstable_IdlePriority=5,_.unstable_ImmediatePriority=1,_.unstable_LowPriority=4,_.unstable_NormalPriority=3,_.unstable_Profiling=null,_.unstable_UserBlockingPriority=2,_.unstable_cancelCallback=function($t){$t.callback=null},_.unstable_continueExecution=function(){Pt||Ot||(Pt=!0,_e(Lt))},_.unstable_getCurrentPriorityLevel=function(){return bt},_.unstable_getFirstCallbackNode=function(){return pt(St)},_.unstable_next=function($t){switch(bt){case 1:case 2:case 3:var jt=3;break;default:jt=bt}var Nt=bt;bt=jt;try{return $t()}finally{bt=Nt}},_.unstable_pauseExecution=function(){},_.unstable_requestPaint=At,_.unstable_runWithPriority=function($t,jt){switch($t){case 1:case 2:case 3:case 4:case 5:break;default:$t=3}var Nt=bt;bt=$t;try{return jt()}finally{bt=Nt}},_.unstable_scheduleCallback=function($t,jt,Nt){var Ft=_.unstable_now();switch(typeof Nt=="object"&&Nt!==null?(Nt=Nt.delay,Nt=typeof Nt=="number"&&0<Nt?Ft+Nt:Ft):Nt=Ft,$t){case 1:var Bt=-1;break;case 2:Bt=250;break;case 5:Bt=1073741823;break;case 4:Bt=1e4;break;default:Bt=5e3}return Bt=Nt+Bt,$t={id:mt++,callback:jt,priorityLevel:$t,startTime:Nt,expirationTime:Bt,sortIndex:-1},Nt>Ft?($t.sortIndex=Nt,Ct(Et,$t),pt(St)===null&&$t===pt(Et)&&(Dt?tt():Dt=!0,et(kt,Nt-Ft))):($t.sortIndex=Bt,Ct(St,$t),Pt||Ot||(Pt=!0,_e(Lt))),$t},_.unstable_wrapCallback=function($t){var jt=bt;return function(){var Nt=bt;bt=jt;try{return $t.apply(this,arguments)}finally{bt=Nt}}}})(scheduler_production_min);(function(_){_.exports=scheduler_production_min})(scheduler);var aa=react.exports,m$4=objectAssign,r$5=scheduler.exports;function y$2(_){for(var _e="https://reactjs.org/docs/error-decoder.html?invariant="+_,et=1;et<arguments.length;et++)_e+="&args[]="+encodeURIComponent(arguments[et]);return"Minified React error #"+_+"; visit "+_e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!aa)throw Error(y$2(227));var ba=new Set,ca={};function da(_,_e){ea(_,_e),ea(_+"Capture",_e)}function ea(_,_e){for(ca[_]=_e,_=0;_<_e.length;_++)ba.add(_e[_])}var fa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ha=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ia=Object.prototype.hasOwnProperty,ja={},ka={};function la(_){return ia.call(ka,_)?!0:ia.call(ja,_)?!1:ha.test(_)?ka[_]=!0:(ja[_]=!0,!1)}function ma(_,_e,et,tt){if(et!==null&&et.type===0)return!1;switch(typeof _e){case"function":case"symbol":return!0;case"boolean":return tt?!1:et!==null?!et.acceptsBooleans:(_=_.toLowerCase().slice(0,5),_!=="data-"&&_!=="aria-");default:return!1}}function na(_,_e,et,tt){if(_e===null||typeof _e>"u"||ma(_,_e,et,tt))return!0;if(tt)return!1;if(et!==null)switch(et.type){case 3:return!_e;case 4:return _e===!1;case 5:return isNaN(_e);case 6:return isNaN(_e)||1>_e}return!1}function B$1(_,_e,et,tt,rt,nt,at){this.acceptsBooleans=_e===2||_e===3||_e===4,this.attributeName=tt,this.attributeNamespace=rt,this.mustUseProperty=et,this.propertyName=_,this.type=_e,this.sanitizeURL=nt,this.removeEmptyString=at}var D$1={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(_){D$1[_]=new B$1(_,0,!1,_,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(_){var _e=_[0];D$1[_e]=new B$1(_e,1,!1,_[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(_){D$1[_]=new B$1(_,2,!1,_.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(_){D$1[_]=new B$1(_,2,!1,_,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(_){D$1[_]=new B$1(_,3,!1,_.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(_){D$1[_]=new B$1(_,3,!0,_,null,!1,!1)});["capture","download"].forEach(function(_){D$1[_]=new B$1(_,4,!1,_,null,!1,!1)});["cols","rows","size","span"].forEach(function(_){D$1[_]=new B$1(_,6,!1,_,null,!1,!1)});["rowSpan","start"].forEach(function(_){D$1[_]=new B$1(_,5,!1,_.toLowerCase(),null,!1,!1)});var oa=/[\-:]([a-z])/g;function pa(_){return _[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(_){var _e=_.replace(oa,pa);D$1[_e]=new B$1(_e,1,!1,_,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(_){var _e=_.replace(oa,pa);D$1[_e]=new B$1(_e,1,!1,_,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(_){var _e=_.replace(oa,pa);D$1[_e]=new B$1(_e,1,!1,_,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(_){D$1[_]=new B$1(_,1,!1,_.toLowerCase(),null,!1,!1)});D$1.xlinkHref=new B$1("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(_){D$1[_]=new B$1(_,1,!1,_.toLowerCase(),null,!0,!0)});function qa(_,_e,et,tt){var rt=D$1.hasOwnProperty(_e)?D$1[_e]:null,nt=rt!==null?rt.type===0:tt?!1:!(!(2<_e.length)||_e[0]!=="o"&&_e[0]!=="O"||_e[1]!=="n"&&_e[1]!=="N");nt||(na(_e,et,rt,tt)&&(et=null),tt||rt===null?la(_e)&&(et===null?_.removeAttribute(_e):_.setAttribute(_e,""+et)):rt.mustUseProperty?_[rt.propertyName]=et===null?rt.type===3?!1:"":et:(_e=rt.attributeName,tt=rt.attributeNamespace,et===null?_.removeAttribute(_e):(rt=rt.type,et=rt===3||rt===4&&et===!0?"":""+et,tt?_.setAttributeNS(tt,_e,et):_.setAttribute(_e,et))))}var ra=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,sa=60103,ta=60106,ua=60107,wa=60108,xa=60114,ya=60109,za=60110,Aa=60112,Ba=60113,Ca=60120,Da=60115,Ea=60116,Fa=60121,Ga=60128,Ha=60129,Ia=60130,Ja=60131;if(typeof Symbol=="function"&&Symbol.for){var E=Symbol.for;sa=E("react.element"),ta=E("react.portal"),ua=E("react.fragment"),wa=E("react.strict_mode"),xa=E("react.profiler"),ya=E("react.provider"),za=E("react.context"),Aa=E("react.forward_ref"),Ba=E("react.suspense"),Ca=E("react.suspense_list"),Da=E("react.memo"),Ea=E("react.lazy"),Fa=E("react.block"),E("react.scope"),Ga=E("react.opaque.id"),Ha=E("react.debug_trace_mode"),Ia=E("react.offscreen"),Ja=E("react.legacy_hidden")}var Ka=typeof Symbol=="function"&&Symbol.iterator;function La(_){return _===null||typeof _!="object"?null:(_=Ka&&_[Ka]||_["@@iterator"],typeof _=="function"?_:null)}var Ma;function Na(_){if(Ma===void 0)try{throw Error()}catch(et){var _e=et.stack.trim().match(/\n( *(at )?)/);Ma=_e&&_e[1]||""}return`
`+Ma+_}var Oa=!1;function Pa(_,_e){if(!_||Oa)return"";Oa=!0;var et=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(_e)if(_e=function(){throw Error()},Object.defineProperty(_e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(_e,[])}catch(ot){var tt=ot}Reflect.construct(_,[],_e)}else{try{_e.call()}catch(ot){tt=ot}_.call(_e.prototype)}else{try{throw Error()}catch(ot){tt=ot}_()}}catch(ot){if(ot&&tt&&typeof ot.stack=="string"){for(var rt=ot.stack.split(`
`),nt=tt.stack.split(`
`),at=rt.length-1,it=nt.length-1;1<=at&&0<=it&&rt[at]!==nt[it];)it--;for(;1<=at&&0<=it;at--,it--)if(rt[at]!==nt[it]){if(at!==1||it!==1)do if(at--,it--,0>it||rt[at]!==nt[it])return`
`+rt[at].replace(" at new "," at ");while(1<=at&&0<=it);break}}}finally{Oa=!1,Error.prepareStackTrace=et}return(_=_?_.displayName||_.name:"")?Na(_):""}function Qa(_){switch(_.tag){case 5:return Na(_.type);case 16:return Na("Lazy");case 13:return Na("Suspense");case 19:return Na("SuspenseList");case 0:case 2:case 15:return _=Pa(_.type,!1),_;case 11:return _=Pa(_.type.render,!1),_;case 22:return _=Pa(_.type._render,!1),_;case 1:return _=Pa(_.type,!0),_;default:return""}}function Ra(_){if(_==null)return null;if(typeof _=="function")return _.displayName||_.name||null;if(typeof _=="string")return _;switch(_){case ua:return"Fragment";case ta:return"Portal";case xa:return"Profiler";case wa:return"StrictMode";case Ba:return"Suspense";case Ca:return"SuspenseList"}if(typeof _=="object")switch(_.$$typeof){case za:return(_.displayName||"Context")+".Consumer";case ya:return(_._context.displayName||"Context")+".Provider";case Aa:var _e=_.render;return _e=_e.displayName||_e.name||"",_.displayName||(_e!==""?"ForwardRef("+_e+")":"ForwardRef");case Da:return Ra(_.type);case Fa:return Ra(_._render);case Ea:_e=_._payload,_=_._init;try{return Ra(_(_e))}catch{}}return null}function Sa(_){switch(typeof _){case"boolean":case"number":case"object":case"string":case"undefined":return _;default:return""}}function Ta(_){var _e=_.type;return(_=_.nodeName)&&_.toLowerCase()==="input"&&(_e==="checkbox"||_e==="radio")}function Ua(_){var _e=Ta(_)?"checked":"value",et=Object.getOwnPropertyDescriptor(_.constructor.prototype,_e),tt=""+_[_e];if(!_.hasOwnProperty(_e)&&typeof et<"u"&&typeof et.get=="function"&&typeof et.set=="function"){var rt=et.get,nt=et.set;return Object.defineProperty(_,_e,{configurable:!0,get:function(){return rt.call(this)},set:function(at){tt=""+at,nt.call(this,at)}}),Object.defineProperty(_,_e,{enumerable:et.enumerable}),{getValue:function(){return tt},setValue:function(at){tt=""+at},stopTracking:function(){_._valueTracker=null,delete _[_e]}}}}function Va(_){_._valueTracker||(_._valueTracker=Ua(_))}function Wa(_){if(!_)return!1;var _e=_._valueTracker;if(!_e)return!0;var et=_e.getValue(),tt="";return _&&(tt=Ta(_)?_.checked?"true":"false":_.value),_=tt,_!==et?(_e.setValue(_),!0):!1}function Xa(_){if(_=_||(typeof document<"u"?document:void 0),typeof _>"u")return null;try{return _.activeElement||_.body}catch{return _.body}}function Ya(_,_e){var et=_e.checked;return m$4({},_e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:et??_._wrapperState.initialChecked})}function Za(_,_e){var et=_e.defaultValue==null?"":_e.defaultValue,tt=_e.checked!=null?_e.checked:_e.defaultChecked;et=Sa(_e.value!=null?_e.value:et),_._wrapperState={initialChecked:tt,initialValue:et,controlled:_e.type==="checkbox"||_e.type==="radio"?_e.checked!=null:_e.value!=null}}function $a(_,_e){_e=_e.checked,_e!=null&&qa(_,"checked",_e,!1)}function ab(_,_e){$a(_,_e);var et=Sa(_e.value),tt=_e.type;if(et!=null)tt==="number"?(et===0&&_.value===""||_.value!=et)&&(_.value=""+et):_.value!==""+et&&(_.value=""+et);else if(tt==="submit"||tt==="reset"){_.removeAttribute("value");return}_e.hasOwnProperty("value")?bb(_,_e.type,et):_e.hasOwnProperty("defaultValue")&&bb(_,_e.type,Sa(_e.defaultValue)),_e.checked==null&&_e.defaultChecked!=null&&(_.defaultChecked=!!_e.defaultChecked)}function cb(_,_e,et){if(_e.hasOwnProperty("value")||_e.hasOwnProperty("defaultValue")){var tt=_e.type;if(!(tt!=="submit"&&tt!=="reset"||_e.value!==void 0&&_e.value!==null))return;_e=""+_._wrapperState.initialValue,et||_e===_.value||(_.value=_e),_.defaultValue=_e}et=_.name,et!==""&&(_.name=""),_.defaultChecked=!!_._wrapperState.initialChecked,et!==""&&(_.name=et)}function bb(_,_e,et){(_e!=="number"||Xa(_.ownerDocument)!==_)&&(et==null?_.defaultValue=""+_._wrapperState.initialValue:_.defaultValue!==""+et&&(_.defaultValue=""+et))}function db(_){var _e="";return aa.Children.forEach(_,function(et){et!=null&&(_e+=et)}),_e}function eb(_,_e){return _=m$4({children:void 0},_e),(_e=db(_e.children))&&(_.children=_e),_}function fb(_,_e,et,tt){if(_=_.options,_e){_e={};for(var rt=0;rt<et.length;rt++)_e["$"+et[rt]]=!0;for(et=0;et<_.length;et++)rt=_e.hasOwnProperty("$"+_[et].value),_[et].selected!==rt&&(_[et].selected=rt),rt&&tt&&(_[et].defaultSelected=!0)}else{for(et=""+Sa(et),_e=null,rt=0;rt<_.length;rt++){if(_[rt].value===et){_[rt].selected=!0,tt&&(_[rt].defaultSelected=!0);return}_e!==null||_[rt].disabled||(_e=_[rt])}_e!==null&&(_e.selected=!0)}}function gb(_,_e){if(_e.dangerouslySetInnerHTML!=null)throw Error(y$2(91));return m$4({},_e,{value:void 0,defaultValue:void 0,children:""+_._wrapperState.initialValue})}function hb(_,_e){var et=_e.value;if(et==null){if(et=_e.children,_e=_e.defaultValue,et!=null){if(_e!=null)throw Error(y$2(92));if(Array.isArray(et)){if(!(1>=et.length))throw Error(y$2(93));et=et[0]}_e=et}_e==null&&(_e=""),et=_e}_._wrapperState={initialValue:Sa(et)}}function ib(_,_e){var et=Sa(_e.value),tt=Sa(_e.defaultValue);et!=null&&(et=""+et,et!==_.value&&(_.value=et),_e.defaultValue==null&&_.defaultValue!==et&&(_.defaultValue=et)),tt!=null&&(_.defaultValue=""+tt)}function jb(_){var _e=_.textContent;_e===_._wrapperState.initialValue&&_e!==""&&_e!==null&&(_.value=_e)}var kb={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function lb(_){switch(_){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function mb(_,_e){return _==null||_==="http://www.w3.org/1999/xhtml"?lb(_e):_==="http://www.w3.org/2000/svg"&&_e==="foreignObject"?"http://www.w3.org/1999/xhtml":_}var nb,ob=function(_){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(_e,et,tt,rt){MSApp.execUnsafeLocalFunction(function(){return _(_e,et,tt,rt)})}:_}(function(_,_e){if(_.namespaceURI!==kb.svg||"innerHTML"in _)_.innerHTML=_e;else{for(nb=nb||document.createElement("div"),nb.innerHTML="<svg>"+_e.valueOf().toString()+"</svg>",_e=nb.firstChild;_.firstChild;)_.removeChild(_.firstChild);for(;_e.firstChild;)_.appendChild(_e.firstChild)}});function pb(_,_e){if(_e){var et=_.firstChild;if(et&&et===_.lastChild&&et.nodeType===3){et.nodeValue=_e;return}}_.textContent=_e}var qb={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},rb=["Webkit","ms","Moz","O"];Object.keys(qb).forEach(function(_){rb.forEach(function(_e){_e=_e+_.charAt(0).toUpperCase()+_.substring(1),qb[_e]=qb[_]})});function sb(_,_e,et){return _e==null||typeof _e=="boolean"||_e===""?"":et||typeof _e!="number"||_e===0||qb.hasOwnProperty(_)&&qb[_]?(""+_e).trim():_e+"px"}function tb(_,_e){_=_.style;for(var et in _e)if(_e.hasOwnProperty(et)){var tt=et.indexOf("--")===0,rt=sb(et,_e[et],tt);et==="float"&&(et="cssFloat"),tt?_.setProperty(et,rt):_[et]=rt}}var ub=m$4({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vb(_,_e){if(_e){if(ub[_]&&(_e.children!=null||_e.dangerouslySetInnerHTML!=null))throw Error(y$2(137,_));if(_e.dangerouslySetInnerHTML!=null){if(_e.children!=null)throw Error(y$2(60));if(!(typeof _e.dangerouslySetInnerHTML=="object"&&"__html"in _e.dangerouslySetInnerHTML))throw Error(y$2(61))}if(_e.style!=null&&typeof _e.style!="object")throw Error(y$2(62))}}function wb(_,_e){if(_.indexOf("-")===-1)return typeof _e.is=="string";switch(_){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function xb(_){return _=_.target||_.srcElement||window,_.correspondingUseElement&&(_=_.correspondingUseElement),_.nodeType===3?_.parentNode:_}var yb=null,zb=null,Ab=null;function Bb(_){if(_=Cb(_)){if(typeof yb!="function")throw Error(y$2(280));var _e=_.stateNode;_e&&(_e=Db(_e),yb(_.stateNode,_.type,_e))}}function Eb(_){zb?Ab?Ab.push(_):Ab=[_]:zb=_}function Fb(){if(zb){var _=zb,_e=Ab;if(Ab=zb=null,Bb(_),_e)for(_=0;_<_e.length;_++)Bb(_e[_])}}function Gb(_,_e){return _(_e)}function Hb(_,_e,et,tt,rt){return _(_e,et,tt,rt)}function Ib(){}var Jb=Gb,Kb=!1,Lb=!1;function Mb(){(zb!==null||Ab!==null)&&(Ib(),Fb())}function Nb(_,_e,et){if(Lb)return _(_e,et);Lb=!0;try{return Jb(_,_e,et)}finally{Lb=!1,Mb()}}function Ob(_,_e){var et=_.stateNode;if(et===null)return null;var tt=Db(et);if(tt===null)return null;et=tt[_e];e:switch(_e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(tt=!tt.disabled)||(_=_.type,tt=!(_==="button"||_==="input"||_==="select"||_==="textarea")),_=!tt;break e;default:_=!1}if(_)return null;if(et&&typeof et!="function")throw Error(y$2(231,_e,typeof et));return et}var Pb=!1;if(fa)try{var Qb={};Object.defineProperty(Qb,"passive",{get:function(){Pb=!0}}),window.addEventListener("test",Qb,Qb),window.removeEventListener("test",Qb,Qb)}catch{Pb=!1}function Rb(_,_e,et,tt,rt,nt,at,it,ot){var st=Array.prototype.slice.call(arguments,3);try{_e.apply(et,st)}catch(lt){this.onError(lt)}}var Sb=!1,Tb=null,Ub=!1,Vb=null,Wb={onError:function(_){Sb=!0,Tb=_}};function Xb(_,_e,et,tt,rt,nt,at,it,ot){Sb=!1,Tb=null,Rb.apply(Wb,arguments)}function Yb(_,_e,et,tt,rt,nt,at,it,ot){if(Xb.apply(this,arguments),Sb){if(Sb){var st=Tb;Sb=!1,Tb=null}else throw Error(y$2(198));Ub||(Ub=!0,Vb=st)}}function Zb(_){var _e=_,et=_;if(_.alternate)for(;_e.return;)_e=_e.return;else{_=_e;do _e=_,_e.flags&1026&&(et=_e.return),_=_e.return;while(_)}return _e.tag===3?et:null}function $b(_){if(_.tag===13){var _e=_.memoizedState;if(_e===null&&(_=_.alternate,_!==null&&(_e=_.memoizedState)),_e!==null)return _e.dehydrated}return null}function ac(_){if(Zb(_)!==_)throw Error(y$2(188))}function bc(_){var _e=_.alternate;if(!_e){if(_e=Zb(_),_e===null)throw Error(y$2(188));return _e!==_?null:_}for(var et=_,tt=_e;;){var rt=et.return;if(rt===null)break;var nt=rt.alternate;if(nt===null){if(tt=rt.return,tt!==null){et=tt;continue}break}if(rt.child===nt.child){for(nt=rt.child;nt;){if(nt===et)return ac(rt),_;if(nt===tt)return ac(rt),_e;nt=nt.sibling}throw Error(y$2(188))}if(et.return!==tt.return)et=rt,tt=nt;else{for(var at=!1,it=rt.child;it;){if(it===et){at=!0,et=rt,tt=nt;break}if(it===tt){at=!0,tt=rt,et=nt;break}it=it.sibling}if(!at){for(it=nt.child;it;){if(it===et){at=!0,et=nt,tt=rt;break}if(it===tt){at=!0,tt=nt,et=rt;break}it=it.sibling}if(!at)throw Error(y$2(189))}}if(et.alternate!==tt)throw Error(y$2(190))}if(et.tag!==3)throw Error(y$2(188));return et.stateNode.current===et?_:_e}function cc(_){if(_=bc(_),!_)return null;for(var _e=_;;){if(_e.tag===5||_e.tag===6)return _e;if(_e.child)_e.child.return=_e,_e=_e.child;else{if(_e===_)break;for(;!_e.sibling;){if(!_e.return||_e.return===_)return null;_e=_e.return}_e.sibling.return=_e.return,_e=_e.sibling}}return null}function dc(_,_e){for(var et=_.alternate;_e!==null;){if(_e===_||_e===et)return!0;_e=_e.return}return!1}var ec,fc,gc,hc,ic=!1,jc=[],kc=null,lc=null,mc=null,nc=new Map,oc=new Map,pc=[],qc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function rc(_,_e,et,tt,rt){return{blockedOn:_,domEventName:_e,eventSystemFlags:et|16,nativeEvent:rt,targetContainers:[tt]}}function sc(_,_e){switch(_){case"focusin":case"focusout":kc=null;break;case"dragenter":case"dragleave":lc=null;break;case"mouseover":case"mouseout":mc=null;break;case"pointerover":case"pointerout":nc.delete(_e.pointerId);break;case"gotpointercapture":case"lostpointercapture":oc.delete(_e.pointerId)}}function tc(_,_e,et,tt,rt,nt){return _===null||_.nativeEvent!==nt?(_=rc(_e,et,tt,rt,nt),_e!==null&&(_e=Cb(_e),_e!==null&&fc(_e)),_):(_.eventSystemFlags|=tt,_e=_.targetContainers,rt!==null&&_e.indexOf(rt)===-1&&_e.push(rt),_)}function uc(_,_e,et,tt,rt){switch(_e){case"focusin":return kc=tc(kc,_,_e,et,tt,rt),!0;case"dragenter":return lc=tc(lc,_,_e,et,tt,rt),!0;case"mouseover":return mc=tc(mc,_,_e,et,tt,rt),!0;case"pointerover":var nt=rt.pointerId;return nc.set(nt,tc(nc.get(nt)||null,_,_e,et,tt,rt)),!0;case"gotpointercapture":return nt=rt.pointerId,oc.set(nt,tc(oc.get(nt)||null,_,_e,et,tt,rt)),!0}return!1}function vc(_){var _e=wc(_.target);if(_e!==null){var et=Zb(_e);if(et!==null){if(_e=et.tag,_e===13){if(_e=$b(et),_e!==null){_.blockedOn=_e,hc(_.lanePriority,function(){r$5.unstable_runWithPriority(_.priority,function(){gc(et)})});return}}else if(_e===3&&et.stateNode.hydrate){_.blockedOn=et.tag===3?et.stateNode.containerInfo:null;return}}}_.blockedOn=null}function xc(_){if(_.blockedOn!==null)return!1;for(var _e=_.targetContainers;0<_e.length;){var et=yc(_.domEventName,_.eventSystemFlags,_e[0],_.nativeEvent);if(et!==null)return _e=Cb(et),_e!==null&&fc(_e),_.blockedOn=et,!1;_e.shift()}return!0}function zc(_,_e,et){xc(_)&&et.delete(_e)}function Ac(){for(ic=!1;0<jc.length;){var _=jc[0];if(_.blockedOn!==null){_=Cb(_.blockedOn),_!==null&&ec(_);break}for(var _e=_.targetContainers;0<_e.length;){var et=yc(_.domEventName,_.eventSystemFlags,_e[0],_.nativeEvent);if(et!==null){_.blockedOn=et;break}_e.shift()}_.blockedOn===null&&jc.shift()}kc!==null&&xc(kc)&&(kc=null),lc!==null&&xc(lc)&&(lc=null),mc!==null&&xc(mc)&&(mc=null),nc.forEach(zc),oc.forEach(zc)}function Bc(_,_e){_.blockedOn===_e&&(_.blockedOn=null,ic||(ic=!0,r$5.unstable_scheduleCallback(r$5.unstable_NormalPriority,Ac)))}function Cc(_){function _e(rt){return Bc(rt,_)}if(0<jc.length){Bc(jc[0],_);for(var et=1;et<jc.length;et++){var tt=jc[et];tt.blockedOn===_&&(tt.blockedOn=null)}}for(kc!==null&&Bc(kc,_),lc!==null&&Bc(lc,_),mc!==null&&Bc(mc,_),nc.forEach(_e),oc.forEach(_e),et=0;et<pc.length;et++)tt=pc[et],tt.blockedOn===_&&(tt.blockedOn=null);for(;0<pc.length&&(et=pc[0],et.blockedOn===null);)vc(et),et.blockedOn===null&&pc.shift()}function Dc(_,_e){var et={};return et[_.toLowerCase()]=_e.toLowerCase(),et["Webkit"+_]="webkit"+_e,et["Moz"+_]="moz"+_e,et}var Ec={animationend:Dc("Animation","AnimationEnd"),animationiteration:Dc("Animation","AnimationIteration"),animationstart:Dc("Animation","AnimationStart"),transitionend:Dc("Transition","TransitionEnd")},Fc={},Gc={};fa&&(Gc=document.createElement("div").style,"AnimationEvent"in window||(delete Ec.animationend.animation,delete Ec.animationiteration.animation,delete Ec.animationstart.animation),"TransitionEvent"in window||delete Ec.transitionend.transition);function Hc(_){if(Fc[_])return Fc[_];if(!Ec[_])return _;var _e=Ec[_],et;for(et in _e)if(_e.hasOwnProperty(et)&&et in Gc)return Fc[_]=_e[et];return _}var Ic=Hc("animationend"),Jc=Hc("animationiteration"),Kc=Hc("animationstart"),Lc=Hc("transitionend"),Mc=new Map,Nc=new Map,Oc=["abort","abort",Ic,"animationEnd",Jc,"animationIteration",Kc,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Lc,"transitionEnd","waiting","waiting"];function Pc(_,_e){for(var et=0;et<_.length;et+=2){var tt=_[et],rt=_[et+1];rt="on"+(rt[0].toUpperCase()+rt.slice(1)),Nc.set(tt,_e),Mc.set(tt,rt),da(rt,[tt])}}var Qc=r$5.unstable_now;Qc();var F$3=8;function Rc(_){if(1&_)return F$3=15,1;if(2&_)return F$3=14,2;if(4&_)return F$3=13,4;var _e=24&_;return _e!==0?(F$3=12,_e):_&32?(F$3=11,32):(_e=192&_,_e!==0?(F$3=10,_e):_&256?(F$3=9,256):(_e=3584&_,_e!==0?(F$3=8,_e):_&4096?(F$3=7,4096):(_e=4186112&_,_e!==0?(F$3=6,_e):(_e=62914560&_,_e!==0?(F$3=5,_e):_&67108864?(F$3=4,67108864):_&134217728?(F$3=3,134217728):(_e=805306368&_,_e!==0?(F$3=2,_e):1073741824&_?(F$3=1,1073741824):(F$3=8,_))))))}function Sc(_){switch(_){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function Tc(_){switch(_){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(y$2(358,_))}}function Uc(_,_e){var et=_.pendingLanes;if(et===0)return F$3=0;var tt=0,rt=0,nt=_.expiredLanes,at=_.suspendedLanes,it=_.pingedLanes;if(nt!==0)tt=nt,rt=F$3=15;else if(nt=et&134217727,nt!==0){var ot=nt&~at;ot!==0?(tt=Rc(ot),rt=F$3):(it&=nt,it!==0&&(tt=Rc(it),rt=F$3))}else nt=et&~at,nt!==0?(tt=Rc(nt),rt=F$3):it!==0&&(tt=Rc(it),rt=F$3);if(tt===0)return 0;if(tt=31-Vc(tt),tt=et&((0>tt?0:1<<tt)<<1)-1,_e!==0&&_e!==tt&&!(_e&at)){if(Rc(_e),rt<=F$3)return _e;F$3=rt}if(_e=_.entangledLanes,_e!==0)for(_=_.entanglements,_e&=tt;0<_e;)et=31-Vc(_e),rt=1<<et,tt|=_[et],_e&=~rt;return tt}function Wc(_){return _=_.pendingLanes&-1073741825,_!==0?_:_&1073741824?1073741824:0}function Xc(_,_e){switch(_){case 15:return 1;case 14:return 2;case 12:return _=Yc(24&~_e),_===0?Xc(10,_e):_;case 10:return _=Yc(192&~_e),_===0?Xc(8,_e):_;case 8:return _=Yc(3584&~_e),_===0&&(_=Yc(4186112&~_e),_===0&&(_=512)),_;case 2:return _e=Yc(805306368&~_e),_e===0&&(_e=268435456),_e}throw Error(y$2(358,_))}function Yc(_){return _&-_}function Zc(_){for(var _e=[],et=0;31>et;et++)_e.push(_);return _e}function $c(_,_e,et){_.pendingLanes|=_e;var tt=_e-1;_.suspendedLanes&=tt,_.pingedLanes&=tt,_=_.eventTimes,_e=31-Vc(_e),_[_e]=et}var Vc=Math.clz32?Math.clz32:ad,bd=Math.log,cd=Math.LN2;function ad(_){return _===0?32:31-(bd(_)/cd|0)|0}var dd=r$5.unstable_UserBlockingPriority,ed=r$5.unstable_runWithPriority,fd=!0;function gd(_,_e,et,tt){Kb||Ib();var rt=hd,nt=Kb;Kb=!0;try{Hb(rt,_,_e,et,tt)}finally{(Kb=nt)||Mb()}}function id$2(_,_e,et,tt){ed(dd,hd.bind(null,_,_e,et,tt))}function hd(_,_e,et,tt){if(fd){var rt;if((rt=(_e&4)===0)&&0<jc.length&&-1<qc.indexOf(_))_=rc(null,_,_e,et,tt),jc.push(_);else{var nt=yc(_,_e,et,tt);if(nt===null)rt&&sc(_,tt);else{if(rt){if(-1<qc.indexOf(_)){_=rc(nt,_,_e,et,tt),jc.push(_);return}if(uc(nt,_,_e,et,tt))return;sc(_,tt)}jd(_,_e,tt,null,et)}}}}function yc(_,_e,et,tt){var rt=xb(tt);if(rt=wc(rt),rt!==null){var nt=Zb(rt);if(nt===null)rt=null;else{var at=nt.tag;if(at===13){if(rt=$b(nt),rt!==null)return rt;rt=null}else if(at===3){if(nt.stateNode.hydrate)return nt.tag===3?nt.stateNode.containerInfo:null;rt=null}else nt!==rt&&(rt=null)}}return jd(_,_e,tt,rt,et),null}var kd=null,ld=null,md=null;function nd(){if(md)return md;var _,_e=ld,et=_e.length,tt,rt="value"in kd?kd.value:kd.textContent,nt=rt.length;for(_=0;_<et&&_e[_]===rt[_];_++);var at=et-_;for(tt=1;tt<=at&&_e[et-tt]===rt[nt-tt];tt++);return md=rt.slice(_,1<tt?1-tt:void 0)}function od(_){var _e=_.keyCode;return"charCode"in _?(_=_.charCode,_===0&&_e===13&&(_=13)):_=_e,_===10&&(_=13),32<=_||_===13?_:0}function pd(){return!0}function qd(){return!1}function rd(_){function _e(et,tt,rt,nt,at){this._reactName=et,this._targetInst=rt,this.type=tt,this.nativeEvent=nt,this.target=at,this.currentTarget=null;for(var it in _)_.hasOwnProperty(it)&&(et=_[it],this[it]=et?et(nt):nt[it]);return this.isDefaultPrevented=(nt.defaultPrevented!=null?nt.defaultPrevented:nt.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return m$4(_e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var et=this.nativeEvent;et&&(et.preventDefault?et.preventDefault():typeof et.returnValue!="unknown"&&(et.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var et=this.nativeEvent;et&&(et.stopPropagation?et.stopPropagation():typeof et.cancelBubble!="unknown"&&(et.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),_e}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(_){return _.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=m$4({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=m$4({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(_){return _.relatedTarget===void 0?_.fromElement===_.srcElement?_.toElement:_.fromElement:_.relatedTarget},movementX:function(_){return"movementX"in _?_.movementX:(_!==yd&&(yd&&_.type==="mousemove"?(wd=_.screenX-yd.screenX,xd=_.screenY-yd.screenY):xd=wd=0,yd=_),wd)},movementY:function(_){return"movementY"in _?_.movementY:xd}}),Bd=rd(Ad),Cd=m$4({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=m$4({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=m$4({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=m$4({},sd,{clipboardData:function(_){return"clipboardData"in _?_.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=m$4({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(_){var _e=this.nativeEvent;return _e.getModifierState?_e.getModifierState(_):(_=Od[_])?!!_e[_]:!1}function zd(){return Pd}var Qd=m$4({},ud,{key:function(_){if(_.key){var _e=Md[_.key]||_.key;if(_e!=="Unidentified")return _e}return _.type==="keypress"?(_=od(_),_===13?"Enter":String.fromCharCode(_)):_.type==="keydown"||_.type==="keyup"?Nd[_.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(_){return _.type==="keypress"?od(_):0},keyCode:function(_){return _.type==="keydown"||_.type==="keyup"?_.keyCode:0},which:function(_){return _.type==="keypress"?od(_):_.type==="keydown"||_.type==="keyup"?_.keyCode:0}}),Rd=rd(Qd),Sd=m$4({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=m$4({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=m$4({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=m$4({},Ad,{deltaX:function(_){return"deltaX"in _?_.deltaX:"wheelDeltaX"in _?-_.wheelDeltaX:0},deltaY:function(_){return"deltaY"in _?_.deltaY:"wheelDeltaY"in _?-_.wheelDeltaY:"wheelDelta"in _?-_.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae=fa&&"CompositionEvent"in window,be$1=null;fa&&"documentMode"in document&&(be$1=document.documentMode);var ce=fa&&"TextEvent"in window&&!be$1,de=fa&&(!ae||be$1&&8<be$1&&11>=be$1),ee=String.fromCharCode(32),fe=!1;function ge$1(_,_e){switch(_){case"keyup":return $d.indexOf(_e.keyCode)!==-1;case"keydown":return _e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he(_){return _=_.detail,typeof _=="object"&&"data"in _?_.data:null}var ie$1=!1;function je$1(_,_e){switch(_){case"compositionend":return he(_e);case"keypress":return _e.which!==32?null:(fe=!0,ee);case"textInput":return _=_e.data,_===ee&&fe?null:_;default:return null}}function ke(_,_e){if(ie$1)return _==="compositionend"||!ae&&ge$1(_,_e)?(_=nd(),md=ld=kd=null,ie$1=!1,_):null;switch(_){case"paste":return null;case"keypress":if(!(_e.ctrlKey||_e.altKey||_e.metaKey)||_e.ctrlKey&&_e.altKey){if(_e.char&&1<_e.char.length)return _e.char;if(_e.which)return String.fromCharCode(_e.which)}return null;case"compositionend":return de&&_e.locale!=="ko"?null:_e.data;default:return null}}var le={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(_){var _e=_&&_.nodeName&&_.nodeName.toLowerCase();return _e==="input"?!!le[_.type]:_e==="textarea"}function ne$1(_,_e,et,tt){Eb(tt),_e=oe$1(_e,"onChange"),0<_e.length&&(et=new td("onChange","change",null,et,tt),_.push({event:et,listeners:_e}))}var pe=null,qe$1=null;function re$1(_){se(_,0)}function te(_){var _e=ue(_);if(Wa(_e))return _}function ve(_,_e){if(_==="change")return _e}var we=!1;if(fa){var xe$1;if(fa){var ye$1="oninput"in document;if(!ye$1){var ze$1=document.createElement("div");ze$1.setAttribute("oninput","return;"),ye$1=typeof ze$1.oninput=="function"}xe$1=ye$1}else xe$1=!1;we=xe$1&&(!document.documentMode||9<document.documentMode)}function Ae(){pe&&(pe.detachEvent("onpropertychange",Be$1),qe$1=pe=null)}function Be$1(_){if(_.propertyName==="value"&&te(qe$1)){var _e=[];if(ne$1(_e,qe$1,_,xb(_)),_=re$1,Kb)_(_e);else{Kb=!0;try{Gb(_,_e)}finally{Kb=!1,Mb()}}}}function Ce$1(_,_e,et){_==="focusin"?(Ae(),pe=_e,qe$1=et,pe.attachEvent("onpropertychange",Be$1)):_==="focusout"&&Ae()}function De(_){if(_==="selectionchange"||_==="keyup"||_==="keydown")return te(qe$1)}function Ee$1(_,_e){if(_==="click")return te(_e)}function Fe(_,_e){if(_==="input"||_==="change")return te(_e)}function Ge$1(_,_e){return _===_e&&(_!==0||1/_===1/_e)||_!==_&&_e!==_e}var He$1=typeof Object.is=="function"?Object.is:Ge$1,Ie=Object.prototype.hasOwnProperty;function Je$2(_,_e){if(He$1(_,_e))return!0;if(typeof _!="object"||_===null||typeof _e!="object"||_e===null)return!1;var et=Object.keys(_),tt=Object.keys(_e);if(et.length!==tt.length)return!1;for(tt=0;tt<et.length;tt++)if(!Ie.call(_e,et[tt])||!He$1(_[et[tt]],_e[et[tt]]))return!1;return!0}function Ke$1(_){for(;_&&_.firstChild;)_=_.firstChild;return _}function Le(_,_e){var et=Ke$1(_);_=0;for(var tt;et;){if(et.nodeType===3){if(tt=_+et.textContent.length,_<=_e&&tt>=_e)return{node:et,offset:_e-_};_=tt}e:{for(;et;){if(et.nextSibling){et=et.nextSibling;break e}et=et.parentNode}et=void 0}et=Ke$1(et)}}function Me(_,_e){return _&&_e?_===_e?!0:_&&_.nodeType===3?!1:_e&&_e.nodeType===3?Me(_,_e.parentNode):"contains"in _?_.contains(_e):_.compareDocumentPosition?!!(_.compareDocumentPosition(_e)&16):!1:!1}function Ne$1(){for(var _=window,_e=Xa();_e instanceof _.HTMLIFrameElement;){try{var et=typeof _e.contentWindow.location.href=="string"}catch{et=!1}if(et)_=_e.contentWindow;else break;_e=Xa(_.document)}return _e}function Oe(_){var _e=_&&_.nodeName&&_.nodeName.toLowerCase();return _e&&(_e==="input"&&(_.type==="text"||_.type==="search"||_.type==="tel"||_.type==="url"||_.type==="password")||_e==="textarea"||_.contentEditable==="true")}var Pe$1=fa&&"documentMode"in document&&11>=document.documentMode,Qe$1=null,Re=null,Se$1=null,Te=!1;function Ue$1(_,_e,et){var tt=et.window===et?et.document:et.nodeType===9?et:et.ownerDocument;Te||Qe$1==null||Qe$1!==Xa(tt)||(tt=Qe$1,"selectionStart"in tt&&Oe(tt)?tt={start:tt.selectionStart,end:tt.selectionEnd}:(tt=(tt.ownerDocument&&tt.ownerDocument.defaultView||window).getSelection(),tt={anchorNode:tt.anchorNode,anchorOffset:tt.anchorOffset,focusNode:tt.focusNode,focusOffset:tt.focusOffset}),Se$1&&Je$2(Se$1,tt)||(Se$1=tt,tt=oe$1(Re,"onSelect"),0<tt.length&&(_e=new td("onSelect","select",null,_e,et),_.push({event:_e,listeners:tt}),_e.target=Qe$1)))}Pc("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);Pc("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);Pc(Oc,2);for(var Ve$1="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),We$1=0;We$1<Ve$1.length;We$1++)Nc.set(Ve$1[We$1],0);ea("onMouseEnter",["mouseout","mouseover"]);ea("onMouseLeave",["mouseout","mouseover"]);ea("onPointerEnter",["pointerout","pointerover"]);ea("onPointerLeave",["pointerout","pointerover"]);da("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));da("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));da("onBeforeInput",["compositionend","keypress","textInput","paste"]);da("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));da("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));da("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xe$1="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ye$1=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xe$1));function Ze$1(_,_e,et){var tt=_.type||"unknown-event";_.currentTarget=et,Yb(tt,_e,void 0,_),_.currentTarget=null}function se(_,_e){_e=(_e&4)!==0;for(var et=0;et<_.length;et++){var tt=_[et],rt=tt.event;tt=tt.listeners;e:{var nt=void 0;if(_e)for(var at=tt.length-1;0<=at;at--){var it=tt[at],ot=it.instance,st=it.currentTarget;if(it=it.listener,ot!==nt&&rt.isPropagationStopped())break e;Ze$1(rt,it,st),nt=ot}else for(at=0;at<tt.length;at++){if(it=tt[at],ot=it.instance,st=it.currentTarget,it=it.listener,ot!==nt&&rt.isPropagationStopped())break e;Ze$1(rt,it,st),nt=ot}}}if(Ub)throw _=Vb,Ub=!1,Vb=null,_}function G(_,_e){var et=$e$1(_e),tt=_+"__bubble";et.has(tt)||(af(_e,_,2,!1),et.add(tt))}var bf="_reactListening"+Math.random().toString(36).slice(2);function cf(_){_[bf]||(_[bf]=!0,ba.forEach(function(_e){Ye$1.has(_e)||df(_e,!1,_,null),df(_e,!0,_,null)}))}function df(_,_e,et,tt){var rt=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,nt=et;if(_==="selectionchange"&&et.nodeType!==9&&(nt=et.ownerDocument),tt!==null&&!_e&&Ye$1.has(_)){if(_!=="scroll")return;rt|=2,nt=tt}var at=$e$1(nt),it=_+"__"+(_e?"capture":"bubble");at.has(it)||(_e&&(rt|=4),af(nt,_,rt,_e),at.add(it))}function af(_,_e,et,tt){var rt=Nc.get(_e);switch(rt===void 0?2:rt){case 0:rt=gd;break;case 1:rt=id$2;break;default:rt=hd}et=rt.bind(null,_e,et,_),rt=void 0,!Pb||_e!=="touchstart"&&_e!=="touchmove"&&_e!=="wheel"||(rt=!0),tt?rt!==void 0?_.addEventListener(_e,et,{capture:!0,passive:rt}):_.addEventListener(_e,et,!0):rt!==void 0?_.addEventListener(_e,et,{passive:rt}):_.addEventListener(_e,et,!1)}function jd(_,_e,et,tt,rt){var nt=tt;if(!(_e&1)&&!(_e&2)&&tt!==null)e:for(;;){if(tt===null)return;var at=tt.tag;if(at===3||at===4){var it=tt.stateNode.containerInfo;if(it===rt||it.nodeType===8&&it.parentNode===rt)break;if(at===4)for(at=tt.return;at!==null;){var ot=at.tag;if((ot===3||ot===4)&&(ot=at.stateNode.containerInfo,ot===rt||ot.nodeType===8&&ot.parentNode===rt))return;at=at.return}for(;it!==null;){if(at=wc(it),at===null)return;if(ot=at.tag,ot===5||ot===6){tt=nt=at;continue e}it=it.parentNode}}tt=tt.return}Nb(function(){var st=nt,lt=xb(et),gt=[];e:{var ct=Mc.get(_);if(ct!==void 0){var wt=td,Tt=_;switch(_){case"keypress":if(od(et)===0)break e;case"keydown":case"keyup":wt=Rd;break;case"focusin":Tt="focus",wt=Fd;break;case"focusout":Tt="blur",wt=Fd;break;case"beforeblur":case"afterblur":wt=Fd;break;case"click":if(et.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":wt=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":wt=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":wt=Vd;break;case Ic:case Jc:case Kc:wt=Hd;break;case Lc:wt=Xd;break;case"scroll":wt=vd;break;case"wheel":wt=Zd;break;case"copy":case"cut":case"paste":wt=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":wt=Td}var Rt=(_e&4)!==0,ht=!Rt&&_==="scroll",ut=Rt?ct!==null?ct+"Capture":null:ct;Rt=[];for(var ft=st,yt;ft!==null;){yt=ft;var xt=yt.stateNode;if(yt.tag===5&&xt!==null&&(yt=xt,ut!==null&&(xt=Ob(ft,ut),xt!=null&&Rt.push(ef(ft,xt,yt)))),ht)break;ft=ft.return}0<Rt.length&&(ct=new wt(ct,Tt,null,et,lt),gt.push({event:ct,listeners:Rt}))}}if(!(_e&7)){e:{if(ct=_==="mouseover"||_==="pointerover",wt=_==="mouseout"||_==="pointerout",ct&&!(_e&16)&&(Tt=et.relatedTarget||et.fromElement)&&(wc(Tt)||Tt[ff]))break e;if((wt||ct)&&(ct=lt.window===lt?lt:(ct=lt.ownerDocument)?ct.defaultView||ct.parentWindow:window,wt?(Tt=et.relatedTarget||et.toElement,wt=st,Tt=Tt?wc(Tt):null,Tt!==null&&(ht=Zb(Tt),Tt!==ht||Tt.tag!==5&&Tt.tag!==6)&&(Tt=null)):(wt=null,Tt=st),wt!==Tt)){if(Rt=Bd,xt="onMouseLeave",ut="onMouseEnter",ft="mouse",(_==="pointerout"||_==="pointerover")&&(Rt=Td,xt="onPointerLeave",ut="onPointerEnter",ft="pointer"),ht=wt==null?ct:ue(wt),yt=Tt==null?ct:ue(Tt),ct=new Rt(xt,ft+"leave",wt,et,lt),ct.target=ht,ct.relatedTarget=yt,xt=null,wc(lt)===st&&(Rt=new Rt(ut,ft+"enter",Tt,et,lt),Rt.target=yt,Rt.relatedTarget=ht,xt=Rt),ht=xt,wt&&Tt)t:{for(Rt=wt,ut=Tt,ft=0,yt=Rt;yt;yt=gf(yt))ft++;for(yt=0,xt=ut;xt;xt=gf(xt))yt++;for(;0<ft-yt;)Rt=gf(Rt),ft--;for(;0<yt-ft;)ut=gf(ut),yt--;for(;ft--;){if(Rt===ut||ut!==null&&Rt===ut.alternate)break t;Rt=gf(Rt),ut=gf(ut)}Rt=null}else Rt=null;wt!==null&&hf(gt,ct,wt,Rt,!1),Tt!==null&&ht!==null&&hf(gt,ht,Tt,Rt,!0)}}e:{if(ct=st?ue(st):window,wt=ct.nodeName&&ct.nodeName.toLowerCase(),wt==="select"||wt==="input"&&ct.type==="file")var Ct=ve;else if(me(ct))if(we)Ct=Fe;else{Ct=De;var pt=Ce$1}else(wt=ct.nodeName)&&wt.toLowerCase()==="input"&&(ct.type==="checkbox"||ct.type==="radio")&&(Ct=Ee$1);if(Ct&&(Ct=Ct(_,st))){ne$1(gt,Ct,et,lt);break e}pt&&pt(_,ct,st),_==="focusout"&&(pt=ct._wrapperState)&&pt.controlled&&ct.type==="number"&&bb(ct,"number",ct.value)}switch(pt=st?ue(st):window,_){case"focusin":(me(pt)||pt.contentEditable==="true")&&(Qe$1=pt,Re=st,Se$1=null);break;case"focusout":Se$1=Re=Qe$1=null;break;case"mousedown":Te=!0;break;case"contextmenu":case"mouseup":case"dragend":Te=!1,Ue$1(gt,et,lt);break;case"selectionchange":if(Pe$1)break;case"keydown":case"keyup":Ue$1(gt,et,lt)}var dt;if(ae)e:{switch(_){case"compositionstart":var vt="onCompositionStart";break e;case"compositionend":vt="onCompositionEnd";break e;case"compositionupdate":vt="onCompositionUpdate";break e}vt=void 0}else ie$1?ge$1(_,et)&&(vt="onCompositionEnd"):_==="keydown"&&et.keyCode===229&&(vt="onCompositionStart");vt&&(de&&et.locale!=="ko"&&(ie$1||vt!=="onCompositionStart"?vt==="onCompositionEnd"&&ie$1&&(dt=nd()):(kd=lt,ld="value"in kd?kd.value:kd.textContent,ie$1=!0)),pt=oe$1(st,vt),0<pt.length&&(vt=new Ld(vt,_,null,et,lt),gt.push({event:vt,listeners:pt}),dt?vt.data=dt:(dt=he(et),dt!==null&&(vt.data=dt)))),(dt=ce?je$1(_,et):ke(_,et))&&(st=oe$1(st,"onBeforeInput"),0<st.length&&(lt=new Ld("onBeforeInput","beforeinput",null,et,lt),gt.push({event:lt,listeners:st}),lt.data=dt))}se(gt,_e)})}function ef(_,_e,et){return{instance:_,listener:_e,currentTarget:et}}function oe$1(_,_e){for(var et=_e+"Capture",tt=[];_!==null;){var rt=_,nt=rt.stateNode;rt.tag===5&&nt!==null&&(rt=nt,nt=Ob(_,et),nt!=null&&tt.unshift(ef(_,nt,rt)),nt=Ob(_,_e),nt!=null&&tt.push(ef(_,nt,rt))),_=_.return}return tt}function gf(_){if(_===null)return null;do _=_.return;while(_&&_.tag!==5);return _||null}function hf(_,_e,et,tt,rt){for(var nt=_e._reactName,at=[];et!==null&&et!==tt;){var it=et,ot=it.alternate,st=it.stateNode;if(ot!==null&&ot===tt)break;it.tag===5&&st!==null&&(it=st,rt?(ot=Ob(et,nt),ot!=null&&at.unshift(ef(et,ot,it))):rt||(ot=Ob(et,nt),ot!=null&&at.push(ef(et,ot,it)))),et=et.return}at.length!==0&&_.push({event:_e,listeners:at})}function jf(){}var kf=null,lf=null;function mf(_,_e){switch(_){case"button":case"input":case"select":case"textarea":return!!_e.autoFocus}return!1}function nf(_,_e){return _==="textarea"||_==="option"||_==="noscript"||typeof _e.children=="string"||typeof _e.children=="number"||typeof _e.dangerouslySetInnerHTML=="object"&&_e.dangerouslySetInnerHTML!==null&&_e.dangerouslySetInnerHTML.__html!=null}var of=typeof setTimeout=="function"?setTimeout:void 0,pf=typeof clearTimeout=="function"?clearTimeout:void 0;function qf(_){_.nodeType===1?_.textContent="":_.nodeType===9&&(_=_.body,_!=null&&(_.textContent=""))}function rf(_){for(;_!=null;_=_.nextSibling){var _e=_.nodeType;if(_e===1||_e===3)break}return _}function sf(_){_=_.previousSibling;for(var _e=0;_;){if(_.nodeType===8){var et=_.data;if(et==="$"||et==="$!"||et==="$?"){if(_e===0)return _;_e--}else et==="/$"&&_e++}_=_.previousSibling}return null}var tf=0;function uf(_){return{$$typeof:Ga,toString:_,valueOf:_}}var vf=Math.random().toString(36).slice(2),wf="__reactFiber$"+vf,xf="__reactProps$"+vf,ff="__reactContainer$"+vf,yf="__reactEvents$"+vf;function wc(_){var _e=_[wf];if(_e)return _e;for(var et=_.parentNode;et;){if(_e=et[ff]||et[wf]){if(et=_e.alternate,_e.child!==null||et!==null&&et.child!==null)for(_=sf(_);_!==null;){if(et=_[wf])return et;_=sf(_)}return _e}_=et,et=_.parentNode}return null}function Cb(_){return _=_[wf]||_[ff],!_||_.tag!==5&&_.tag!==6&&_.tag!==13&&_.tag!==3?null:_}function ue(_){if(_.tag===5||_.tag===6)return _.stateNode;throw Error(y$2(33))}function Db(_){return _[xf]||null}function $e$1(_){var _e=_[yf];return _e===void 0&&(_e=_[yf]=new Set),_e}var zf=[],Af=-1;function Bf(_){return{current:_}}function H$1(_){0>Af||(_.current=zf[Af],zf[Af]=null,Af--)}function I$2(_,_e){Af++,zf[Af]=_.current,_.current=_e}var Cf={},M$4=Bf(Cf),N$1=Bf(!1),Df=Cf;function Ef(_,_e){var et=_.type.contextTypes;if(!et)return Cf;var tt=_.stateNode;if(tt&&tt.__reactInternalMemoizedUnmaskedChildContext===_e)return tt.__reactInternalMemoizedMaskedChildContext;var rt={},nt;for(nt in et)rt[nt]=_e[nt];return tt&&(_=_.stateNode,_.__reactInternalMemoizedUnmaskedChildContext=_e,_.__reactInternalMemoizedMaskedChildContext=rt),rt}function Ff(_){return _=_.childContextTypes,_!=null}function Gf(){H$1(N$1),H$1(M$4)}function Hf(_,_e,et){if(M$4.current!==Cf)throw Error(y$2(168));I$2(M$4,_e),I$2(N$1,et)}function If(_,_e,et){var tt=_.stateNode;if(_=_e.childContextTypes,typeof tt.getChildContext!="function")return et;tt=tt.getChildContext();for(var rt in tt)if(!(rt in _))throw Error(y$2(108,Ra(_e)||"Unknown",rt));return m$4({},et,tt)}function Jf(_){return _=(_=_.stateNode)&&_.__reactInternalMemoizedMergedChildContext||Cf,Df=M$4.current,I$2(M$4,_),I$2(N$1,N$1.current),!0}function Kf(_,_e,et){var tt=_.stateNode;if(!tt)throw Error(y$2(169));et?(_=If(_,_e,Df),tt.__reactInternalMemoizedMergedChildContext=_,H$1(N$1),H$1(M$4),I$2(M$4,_)):H$1(N$1),I$2(N$1,et)}var Lf=null,Mf=null,Nf=r$5.unstable_runWithPriority,Of=r$5.unstable_scheduleCallback,Pf=r$5.unstable_cancelCallback,Qf=r$5.unstable_shouldYield,Rf=r$5.unstable_requestPaint,Sf=r$5.unstable_now,Tf=r$5.unstable_getCurrentPriorityLevel,Uf=r$5.unstable_ImmediatePriority,Vf=r$5.unstable_UserBlockingPriority,Wf=r$5.unstable_NormalPriority,Xf=r$5.unstable_LowPriority,Yf=r$5.unstable_IdlePriority,Zf={},$f=Rf!==void 0?Rf:function(){},ag=null,bg=null,cg=!1,dg=Sf(),O=1e4>dg?Sf:function(){return Sf()-dg};function eg(){switch(Tf()){case Uf:return 99;case Vf:return 98;case Wf:return 97;case Xf:return 96;case Yf:return 95;default:throw Error(y$2(332))}}function fg(_){switch(_){case 99:return Uf;case 98:return Vf;case 97:return Wf;case 96:return Xf;case 95:return Yf;default:throw Error(y$2(332))}}function gg(_,_e){return _=fg(_),Nf(_,_e)}function hg(_,_e,et){return _=fg(_),Of(_,_e,et)}function ig(){if(bg!==null){var _=bg;bg=null,Pf(_)}jg()}function jg(){if(!cg&&ag!==null){cg=!0;var _=0;try{var _e=ag;gg(99,function(){for(;_<_e.length;_++){var et=_e[_];do et=et(!0);while(et!==null)}}),ag=null}catch(et){throw ag!==null&&(ag=ag.slice(_+1)),Of(Uf,ig),et}finally{cg=!1}}}var kg=ra.ReactCurrentBatchConfig;function lg(_,_e){if(_&&_.defaultProps){_e=m$4({},_e),_=_.defaultProps;for(var et in _)_e[et]===void 0&&(_e[et]=_[et]);return _e}return _e}var mg=Bf(null),ng=null,og=null,pg=null;function qg(){pg=og=ng=null}function rg(_){var _e=mg.current;H$1(mg),_.type._context._currentValue=_e}function sg(_,_e){for(;_!==null;){var et=_.alternate;if((_.childLanes&_e)===_e){if(et===null||(et.childLanes&_e)===_e)break;et.childLanes|=_e}else _.childLanes|=_e,et!==null&&(et.childLanes|=_e);_=_.return}}function tg(_,_e){ng=_,pg=og=null,_=_.dependencies,_!==null&&_.firstContext!==null&&(_.lanes&_e&&(ug=!0),_.firstContext=null)}function vg(_,_e){if(pg!==_&&_e!==!1&&_e!==0)if((typeof _e!="number"||_e===1073741823)&&(pg=_,_e=1073741823),_e={context:_,observedBits:_e,next:null},og===null){if(ng===null)throw Error(y$2(308));og=_e,ng.dependencies={lanes:0,firstContext:_e,responders:null}}else og=og.next=_e;return _._currentValue}var wg=!1;function xg(_){_.updateQueue={baseState:_.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function yg(_,_e){_=_.updateQueue,_e.updateQueue===_&&(_e.updateQueue={baseState:_.baseState,firstBaseUpdate:_.firstBaseUpdate,lastBaseUpdate:_.lastBaseUpdate,shared:_.shared,effects:_.effects})}function zg(_,_e){return{eventTime:_,lane:_e,tag:0,payload:null,callback:null,next:null}}function Ag(_,_e){if(_=_.updateQueue,_!==null){_=_.shared;var et=_.pending;et===null?_e.next=_e:(_e.next=et.next,et.next=_e),_.pending=_e}}function Bg(_,_e){var et=_.updateQueue,tt=_.alternate;if(tt!==null&&(tt=tt.updateQueue,et===tt)){var rt=null,nt=null;if(et=et.firstBaseUpdate,et!==null){do{var at={eventTime:et.eventTime,lane:et.lane,tag:et.tag,payload:et.payload,callback:et.callback,next:null};nt===null?rt=nt=at:nt=nt.next=at,et=et.next}while(et!==null);nt===null?rt=nt=_e:nt=nt.next=_e}else rt=nt=_e;et={baseState:tt.baseState,firstBaseUpdate:rt,lastBaseUpdate:nt,shared:tt.shared,effects:tt.effects},_.updateQueue=et;return}_=et.lastBaseUpdate,_===null?et.firstBaseUpdate=_e:_.next=_e,et.lastBaseUpdate=_e}function Cg(_,_e,et,tt){var rt=_.updateQueue;wg=!1;var nt=rt.firstBaseUpdate,at=rt.lastBaseUpdate,it=rt.shared.pending;if(it!==null){rt.shared.pending=null;var ot=it,st=ot.next;ot.next=null,at===null?nt=st:at.next=st,at=ot;var lt=_.alternate;if(lt!==null){lt=lt.updateQueue;var gt=lt.lastBaseUpdate;gt!==at&&(gt===null?lt.firstBaseUpdate=st:gt.next=st,lt.lastBaseUpdate=ot)}}if(nt!==null){gt=rt.baseState,at=0,lt=st=ot=null;do{it=nt.lane;var ct=nt.eventTime;if((tt&it)===it){lt!==null&&(lt=lt.next={eventTime:ct,lane:0,tag:nt.tag,payload:nt.payload,callback:nt.callback,next:null});e:{var wt=_,Tt=nt;switch(it=_e,ct=et,Tt.tag){case 1:if(wt=Tt.payload,typeof wt=="function"){gt=wt.call(ct,gt,it);break e}gt=wt;break e;case 3:wt.flags=wt.flags&-4097|64;case 0:if(wt=Tt.payload,it=typeof wt=="function"?wt.call(ct,gt,it):wt,it==null)break e;gt=m$4({},gt,it);break e;case 2:wg=!0}}nt.callback!==null&&(_.flags|=32,it=rt.effects,it===null?rt.effects=[nt]:it.push(nt))}else ct={eventTime:ct,lane:it,tag:nt.tag,payload:nt.payload,callback:nt.callback,next:null},lt===null?(st=lt=ct,ot=gt):lt=lt.next=ct,at|=it;if(nt=nt.next,nt===null){if(it=rt.shared.pending,it===null)break;nt=it.next,it.next=null,rt.lastBaseUpdate=it,rt.shared.pending=null}}while(1);lt===null&&(ot=gt),rt.baseState=ot,rt.firstBaseUpdate=st,rt.lastBaseUpdate=lt,Dg|=at,_.lanes=at,_.memoizedState=gt}}function Eg(_,_e,et){if(_=_e.effects,_e.effects=null,_!==null)for(_e=0;_e<_.length;_e++){var tt=_[_e],rt=tt.callback;if(rt!==null){if(tt.callback=null,tt=et,typeof rt!="function")throw Error(y$2(191,rt));rt.call(tt)}}}var Fg=new aa.Component().refs;function Gg(_,_e,et,tt){_e=_.memoizedState,et=et(tt,_e),et=et==null?_e:m$4({},_e,et),_.memoizedState=et,_.lanes===0&&(_.updateQueue.baseState=et)}var Kg={isMounted:function(_){return(_=_._reactInternals)?Zb(_)===_:!1},enqueueSetState:function(_,_e,et){_=_._reactInternals;var tt=Hg(),rt=Ig(_),nt=zg(tt,rt);nt.payload=_e,et!=null&&(nt.callback=et),Ag(_,nt),Jg(_,rt,tt)},enqueueReplaceState:function(_,_e,et){_=_._reactInternals;var tt=Hg(),rt=Ig(_),nt=zg(tt,rt);nt.tag=1,nt.payload=_e,et!=null&&(nt.callback=et),Ag(_,nt),Jg(_,rt,tt)},enqueueForceUpdate:function(_,_e){_=_._reactInternals;var et=Hg(),tt=Ig(_),rt=zg(et,tt);rt.tag=2,_e!=null&&(rt.callback=_e),Ag(_,rt),Jg(_,tt,et)}};function Lg(_,_e,et,tt,rt,nt,at){return _=_.stateNode,typeof _.shouldComponentUpdate=="function"?_.shouldComponentUpdate(tt,nt,at):_e.prototype&&_e.prototype.isPureReactComponent?!Je$2(et,tt)||!Je$2(rt,nt):!0}function Mg(_,_e,et){var tt=!1,rt=Cf,nt=_e.contextType;return typeof nt=="object"&&nt!==null?nt=vg(nt):(rt=Ff(_e)?Df:M$4.current,tt=_e.contextTypes,nt=(tt=tt!=null)?Ef(_,rt):Cf),_e=new _e(et,nt),_.memoizedState=_e.state!==null&&_e.state!==void 0?_e.state:null,_e.updater=Kg,_.stateNode=_e,_e._reactInternals=_,tt&&(_=_.stateNode,_.__reactInternalMemoizedUnmaskedChildContext=rt,_.__reactInternalMemoizedMaskedChildContext=nt),_e}function Ng(_,_e,et,tt){_=_e.state,typeof _e.componentWillReceiveProps=="function"&&_e.componentWillReceiveProps(et,tt),typeof _e.UNSAFE_componentWillReceiveProps=="function"&&_e.UNSAFE_componentWillReceiveProps(et,tt),_e.state!==_&&Kg.enqueueReplaceState(_e,_e.state,null)}function Og(_,_e,et,tt){var rt=_.stateNode;rt.props=et,rt.state=_.memoizedState,rt.refs=Fg,xg(_);var nt=_e.contextType;typeof nt=="object"&&nt!==null?rt.context=vg(nt):(nt=Ff(_e)?Df:M$4.current,rt.context=Ef(_,nt)),Cg(_,et,rt,tt),rt.state=_.memoizedState,nt=_e.getDerivedStateFromProps,typeof nt=="function"&&(Gg(_,_e,nt,et),rt.state=_.memoizedState),typeof _e.getDerivedStateFromProps=="function"||typeof rt.getSnapshotBeforeUpdate=="function"||typeof rt.UNSAFE_componentWillMount!="function"&&typeof rt.componentWillMount!="function"||(_e=rt.state,typeof rt.componentWillMount=="function"&&rt.componentWillMount(),typeof rt.UNSAFE_componentWillMount=="function"&&rt.UNSAFE_componentWillMount(),_e!==rt.state&&Kg.enqueueReplaceState(rt,rt.state,null),Cg(_,et,rt,tt),rt.state=_.memoizedState),typeof rt.componentDidMount=="function"&&(_.flags|=4)}var Pg=Array.isArray;function Qg(_,_e,et){if(_=et.ref,_!==null&&typeof _!="function"&&typeof _!="object"){if(et._owner){if(et=et._owner,et){if(et.tag!==1)throw Error(y$2(309));var tt=et.stateNode}if(!tt)throw Error(y$2(147,_));var rt=""+_;return _e!==null&&_e.ref!==null&&typeof _e.ref=="function"&&_e.ref._stringRef===rt?_e.ref:(_e=function(nt){var at=tt.refs;at===Fg&&(at=tt.refs={}),nt===null?delete at[rt]:at[rt]=nt},_e._stringRef=rt,_e)}if(typeof _!="string")throw Error(y$2(284));if(!et._owner)throw Error(y$2(290,_))}return _}function Rg(_,_e){if(_.type!=="textarea")throw Error(y$2(31,Object.prototype.toString.call(_e)==="[object Object]"?"object with keys {"+Object.keys(_e).join(", ")+"}":_e))}function Sg(_){function _e(ht,ut){if(_){var ft=ht.lastEffect;ft!==null?(ft.nextEffect=ut,ht.lastEffect=ut):ht.firstEffect=ht.lastEffect=ut,ut.nextEffect=null,ut.flags=8}}function et(ht,ut){if(!_)return null;for(;ut!==null;)_e(ht,ut),ut=ut.sibling;return null}function tt(ht,ut){for(ht=new Map;ut!==null;)ut.key!==null?ht.set(ut.key,ut):ht.set(ut.index,ut),ut=ut.sibling;return ht}function rt(ht,ut){return ht=Tg(ht,ut),ht.index=0,ht.sibling=null,ht}function nt(ht,ut,ft){return ht.index=ft,_?(ft=ht.alternate,ft!==null?(ft=ft.index,ft<ut?(ht.flags=2,ut):ft):(ht.flags=2,ut)):ut}function at(ht){return _&&ht.alternate===null&&(ht.flags=2),ht}function it(ht,ut,ft,yt){return ut===null||ut.tag!==6?(ut=Ug(ft,ht.mode,yt),ut.return=ht,ut):(ut=rt(ut,ft),ut.return=ht,ut)}function ot(ht,ut,ft,yt){return ut!==null&&ut.elementType===ft.type?(yt=rt(ut,ft.props),yt.ref=Qg(ht,ut,ft),yt.return=ht,yt):(yt=Vg(ft.type,ft.key,ft.props,null,ht.mode,yt),yt.ref=Qg(ht,ut,ft),yt.return=ht,yt)}function st(ht,ut,ft,yt){return ut===null||ut.tag!==4||ut.stateNode.containerInfo!==ft.containerInfo||ut.stateNode.implementation!==ft.implementation?(ut=Wg(ft,ht.mode,yt),ut.return=ht,ut):(ut=rt(ut,ft.children||[]),ut.return=ht,ut)}function lt(ht,ut,ft,yt,xt){return ut===null||ut.tag!==7?(ut=Xg(ft,ht.mode,yt,xt),ut.return=ht,ut):(ut=rt(ut,ft),ut.return=ht,ut)}function gt(ht,ut,ft){if(typeof ut=="string"||typeof ut=="number")return ut=Ug(""+ut,ht.mode,ft),ut.return=ht,ut;if(typeof ut=="object"&&ut!==null){switch(ut.$$typeof){case sa:return ft=Vg(ut.type,ut.key,ut.props,null,ht.mode,ft),ft.ref=Qg(ht,null,ut),ft.return=ht,ft;case ta:return ut=Wg(ut,ht.mode,ft),ut.return=ht,ut}if(Pg(ut)||La(ut))return ut=Xg(ut,ht.mode,ft,null),ut.return=ht,ut;Rg(ht,ut)}return null}function ct(ht,ut,ft,yt){var xt=ut!==null?ut.key:null;if(typeof ft=="string"||typeof ft=="number")return xt!==null?null:it(ht,ut,""+ft,yt);if(typeof ft=="object"&&ft!==null){switch(ft.$$typeof){case sa:return ft.key===xt?ft.type===ua?lt(ht,ut,ft.props.children,yt,xt):ot(ht,ut,ft,yt):null;case ta:return ft.key===xt?st(ht,ut,ft,yt):null}if(Pg(ft)||La(ft))return xt!==null?null:lt(ht,ut,ft,yt,null);Rg(ht,ft)}return null}function wt(ht,ut,ft,yt,xt){if(typeof yt=="string"||typeof yt=="number")return ht=ht.get(ft)||null,it(ut,ht,""+yt,xt);if(typeof yt=="object"&&yt!==null){switch(yt.$$typeof){case sa:return ht=ht.get(yt.key===null?ft:yt.key)||null,yt.type===ua?lt(ut,ht,yt.props.children,xt,yt.key):ot(ut,ht,yt,xt);case ta:return ht=ht.get(yt.key===null?ft:yt.key)||null,st(ut,ht,yt,xt)}if(Pg(yt)||La(yt))return ht=ht.get(ft)||null,lt(ut,ht,yt,xt,null);Rg(ut,yt)}return null}function Tt(ht,ut,ft,yt){for(var xt=null,Ct=null,pt=ut,dt=ut=0,vt=null;pt!==null&&dt<ft.length;dt++){pt.index>dt?(vt=pt,pt=null):vt=pt.sibling;var St=ct(ht,pt,ft[dt],yt);if(St===null){pt===null&&(pt=vt);break}_&&pt&&St.alternate===null&&_e(ht,pt),ut=nt(St,ut,dt),Ct===null?xt=St:Ct.sibling=St,Ct=St,pt=vt}if(dt===ft.length)return et(ht,pt),xt;if(pt===null){for(;dt<ft.length;dt++)pt=gt(ht,ft[dt],yt),pt!==null&&(ut=nt(pt,ut,dt),Ct===null?xt=pt:Ct.sibling=pt,Ct=pt);return xt}for(pt=tt(ht,pt);dt<ft.length;dt++)vt=wt(pt,ht,dt,ft[dt],yt),vt!==null&&(_&&vt.alternate!==null&&pt.delete(vt.key===null?dt:vt.key),ut=nt(vt,ut,dt),Ct===null?xt=vt:Ct.sibling=vt,Ct=vt);return _&&pt.forEach(function(Et){return _e(ht,Et)}),xt}function Rt(ht,ut,ft,yt){var xt=La(ft);if(typeof xt!="function")throw Error(y$2(150));if(ft=xt.call(ft),ft==null)throw Error(y$2(151));for(var Ct=xt=null,pt=ut,dt=ut=0,vt=null,St=ft.next();pt!==null&&!St.done;dt++,St=ft.next()){pt.index>dt?(vt=pt,pt=null):vt=pt.sibling;var Et=ct(ht,pt,St.value,yt);if(Et===null){pt===null&&(pt=vt);break}_&&pt&&Et.alternate===null&&_e(ht,pt),ut=nt(Et,ut,dt),Ct===null?xt=Et:Ct.sibling=Et,Ct=Et,pt=vt}if(St.done)return et(ht,pt),xt;if(pt===null){for(;!St.done;dt++,St=ft.next())St=gt(ht,St.value,yt),St!==null&&(ut=nt(St,ut,dt),Ct===null?xt=St:Ct.sibling=St,Ct=St);return xt}for(pt=tt(ht,pt);!St.done;dt++,St=ft.next())St=wt(pt,ht,dt,St.value,yt),St!==null&&(_&&St.alternate!==null&&pt.delete(St.key===null?dt:St.key),ut=nt(St,ut,dt),Ct===null?xt=St:Ct.sibling=St,Ct=St);return _&&pt.forEach(function(mt){return _e(ht,mt)}),xt}return function(ht,ut,ft,yt){var xt=typeof ft=="object"&&ft!==null&&ft.type===ua&&ft.key===null;xt&&(ft=ft.props.children);var Ct=typeof ft=="object"&&ft!==null;if(Ct)switch(ft.$$typeof){case sa:e:{for(Ct=ft.key,xt=ut;xt!==null;){if(xt.key===Ct){switch(xt.tag){case 7:if(ft.type===ua){et(ht,xt.sibling),ut=rt(xt,ft.props.children),ut.return=ht,ht=ut;break e}break;default:if(xt.elementType===ft.type){et(ht,xt.sibling),ut=rt(xt,ft.props),ut.ref=Qg(ht,xt,ft),ut.return=ht,ht=ut;break e}}et(ht,xt);break}else _e(ht,xt);xt=xt.sibling}ft.type===ua?(ut=Xg(ft.props.children,ht.mode,yt,ft.key),ut.return=ht,ht=ut):(yt=Vg(ft.type,ft.key,ft.props,null,ht.mode,yt),yt.ref=Qg(ht,ut,ft),yt.return=ht,ht=yt)}return at(ht);case ta:e:{for(xt=ft.key;ut!==null;){if(ut.key===xt)if(ut.tag===4&&ut.stateNode.containerInfo===ft.containerInfo&&ut.stateNode.implementation===ft.implementation){et(ht,ut.sibling),ut=rt(ut,ft.children||[]),ut.return=ht,ht=ut;break e}else{et(ht,ut);break}else _e(ht,ut);ut=ut.sibling}ut=Wg(ft,ht.mode,yt),ut.return=ht,ht=ut}return at(ht)}if(typeof ft=="string"||typeof ft=="number")return ft=""+ft,ut!==null&&ut.tag===6?(et(ht,ut.sibling),ut=rt(ut,ft),ut.return=ht,ht=ut):(et(ht,ut),ut=Ug(ft,ht.mode,yt),ut.return=ht,ht=ut),at(ht);if(Pg(ft))return Tt(ht,ut,ft,yt);if(La(ft))return Rt(ht,ut,ft,yt);if(Ct&&Rg(ht,ft),typeof ft>"u"&&!xt)switch(ht.tag){case 1:case 22:case 0:case 11:case 15:throw Error(y$2(152,Ra(ht.type)||"Component"))}return et(ht,ut)}}var Yg=Sg(!0),Zg=Sg(!1),$g={},ah=Bf($g),bh=Bf($g),ch=Bf($g);function dh(_){if(_===$g)throw Error(y$2(174));return _}function eh(_,_e){switch(I$2(ch,_e),I$2(bh,_),I$2(ah,$g),_=_e.nodeType,_){case 9:case 11:_e=(_e=_e.documentElement)?_e.namespaceURI:mb(null,"");break;default:_=_===8?_e.parentNode:_e,_e=_.namespaceURI||null,_=_.tagName,_e=mb(_e,_)}H$1(ah),I$2(ah,_e)}function fh(){H$1(ah),H$1(bh),H$1(ch)}function gh(_){dh(ch.current);var _e=dh(ah.current),et=mb(_e,_.type);_e!==et&&(I$2(bh,_),I$2(ah,et))}function hh(_){bh.current===_&&(H$1(ah),H$1(bh))}var P$1=Bf(0);function ih(_){for(var _e=_;_e!==null;){if(_e.tag===13){var et=_e.memoizedState;if(et!==null&&(et=et.dehydrated,et===null||et.data==="$?"||et.data==="$!"))return _e}else if(_e.tag===19&&_e.memoizedProps.revealOrder!==void 0){if(_e.flags&64)return _e}else if(_e.child!==null){_e.child.return=_e,_e=_e.child;continue}if(_e===_)break;for(;_e.sibling===null;){if(_e.return===null||_e.return===_)return null;_e=_e.return}_e.sibling.return=_e.return,_e=_e.sibling}return null}var jh=null,kh=null,lh=!1;function mh(_,_e){var et=nh(5,null,null,0);et.elementType="DELETED",et.type="DELETED",et.stateNode=_e,et.return=_,et.flags=8,_.lastEffect!==null?(_.lastEffect.nextEffect=et,_.lastEffect=et):_.firstEffect=_.lastEffect=et}function oh(_,_e){switch(_.tag){case 5:var et=_.type;return _e=_e.nodeType!==1||et.toLowerCase()!==_e.nodeName.toLowerCase()?null:_e,_e!==null?(_.stateNode=_e,!0):!1;case 6:return _e=_.pendingProps===""||_e.nodeType!==3?null:_e,_e!==null?(_.stateNode=_e,!0):!1;case 13:return!1;default:return!1}}function ph(_){if(lh){var _e=kh;if(_e){var et=_e;if(!oh(_,_e)){if(_e=rf(et.nextSibling),!_e||!oh(_,_e)){_.flags=_.flags&-1025|2,lh=!1,jh=_;return}mh(jh,et)}jh=_,kh=rf(_e.firstChild)}else _.flags=_.flags&-1025|2,lh=!1,jh=_}}function qh(_){for(_=_.return;_!==null&&_.tag!==5&&_.tag!==3&&_.tag!==13;)_=_.return;jh=_}function rh(_){if(_!==jh)return!1;if(!lh)return qh(_),lh=!0,!1;var _e=_.type;if(_.tag!==5||_e!=="head"&&_e!=="body"&&!nf(_e,_.memoizedProps))for(_e=kh;_e;)mh(_,_e),_e=rf(_e.nextSibling);if(qh(_),_.tag===13){if(_=_.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(y$2(317));e:{for(_=_.nextSibling,_e=0;_;){if(_.nodeType===8){var et=_.data;if(et==="/$"){if(_e===0){kh=rf(_.nextSibling);break e}_e--}else et!=="$"&&et!=="$!"&&et!=="$?"||_e++}_=_.nextSibling}kh=null}}else kh=jh?rf(_.stateNode.nextSibling):null;return!0}function sh(){kh=jh=null,lh=!1}var th=[];function uh(){for(var _=0;_<th.length;_++)th[_]._workInProgressVersionPrimary=null;th.length=0}var vh=ra.ReactCurrentDispatcher,wh=ra.ReactCurrentBatchConfig,xh=0,R=null,S$2=null,T$3=null,yh=!1,zh=!1;function Ah(){throw Error(y$2(321))}function Bh(_,_e){if(_e===null)return!1;for(var et=0;et<_e.length&&et<_.length;et++)if(!He$1(_[et],_e[et]))return!1;return!0}function Ch(_,_e,et,tt,rt,nt){if(xh=nt,R=_e,_e.memoizedState=null,_e.updateQueue=null,_e.lanes=0,vh.current=_===null||_.memoizedState===null?Dh:Eh,_=et(tt,rt),zh){nt=0;do{if(zh=!1,!(25>nt))throw Error(y$2(301));nt+=1,T$3=S$2=null,_e.updateQueue=null,vh.current=Fh,_=et(tt,rt)}while(zh)}if(vh.current=Gh,_e=S$2!==null&&S$2.next!==null,xh=0,T$3=S$2=R=null,yh=!1,_e)throw Error(y$2(300));return _}function Hh(){var _={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return T$3===null?R.memoizedState=T$3=_:T$3=T$3.next=_,T$3}function Ih(){if(S$2===null){var _=R.alternate;_=_!==null?_.memoizedState:null}else _=S$2.next;var _e=T$3===null?R.memoizedState:T$3.next;if(_e!==null)T$3=_e,S$2=_;else{if(_===null)throw Error(y$2(310));S$2=_,_={memoizedState:S$2.memoizedState,baseState:S$2.baseState,baseQueue:S$2.baseQueue,queue:S$2.queue,next:null},T$3===null?R.memoizedState=T$3=_:T$3=T$3.next=_}return T$3}function Jh(_,_e){return typeof _e=="function"?_e(_):_e}function Kh(_){var _e=Ih(),et=_e.queue;if(et===null)throw Error(y$2(311));et.lastRenderedReducer=_;var tt=S$2,rt=tt.baseQueue,nt=et.pending;if(nt!==null){if(rt!==null){var at=rt.next;rt.next=nt.next,nt.next=at}tt.baseQueue=rt=nt,et.pending=null}if(rt!==null){rt=rt.next,tt=tt.baseState;var it=at=nt=null,ot=rt;do{var st=ot.lane;if((xh&st)===st)it!==null&&(it=it.next={lane:0,action:ot.action,eagerReducer:ot.eagerReducer,eagerState:ot.eagerState,next:null}),tt=ot.eagerReducer===_?ot.eagerState:_(tt,ot.action);else{var lt={lane:st,action:ot.action,eagerReducer:ot.eagerReducer,eagerState:ot.eagerState,next:null};it===null?(at=it=lt,nt=tt):it=it.next=lt,R.lanes|=st,Dg|=st}ot=ot.next}while(ot!==null&&ot!==rt);it===null?nt=tt:it.next=at,He$1(tt,_e.memoizedState)||(ug=!0),_e.memoizedState=tt,_e.baseState=nt,_e.baseQueue=it,et.lastRenderedState=tt}return[_e.memoizedState,et.dispatch]}function Lh(_){var _e=Ih(),et=_e.queue;if(et===null)throw Error(y$2(311));et.lastRenderedReducer=_;var tt=et.dispatch,rt=et.pending,nt=_e.memoizedState;if(rt!==null){et.pending=null;var at=rt=rt.next;do nt=_(nt,at.action),at=at.next;while(at!==rt);He$1(nt,_e.memoizedState)||(ug=!0),_e.memoizedState=nt,_e.baseQueue===null&&(_e.baseState=nt),et.lastRenderedState=nt}return[nt,tt]}function Mh(_,_e,et){var tt=_e._getVersion;tt=tt(_e._source);var rt=_e._workInProgressVersionPrimary;if(rt!==null?_=rt===tt:(_=_.mutableReadLanes,(_=(xh&_)===_)&&(_e._workInProgressVersionPrimary=tt,th.push(_e))),_)return et(_e._source);throw th.push(_e),Error(y$2(350))}function Nh(_,_e,et,tt){var rt=U;if(rt===null)throw Error(y$2(349));var nt=_e._getVersion,at=nt(_e._source),it=vh.current,ot=it.useState(function(){return Mh(rt,_e,et)}),st=ot[1],lt=ot[0];ot=T$3;var gt=_.memoizedState,ct=gt.refs,wt=ct.getSnapshot,Tt=gt.source;gt=gt.subscribe;var Rt=R;return _.memoizedState={refs:ct,source:_e,subscribe:tt},it.useEffect(function(){ct.getSnapshot=et,ct.setSnapshot=st;var ht=nt(_e._source);if(!He$1(at,ht)){ht=et(_e._source),He$1(lt,ht)||(st(ht),ht=Ig(Rt),rt.mutableReadLanes|=ht&rt.pendingLanes),ht=rt.mutableReadLanes,rt.entangledLanes|=ht;for(var ut=rt.entanglements,ft=ht;0<ft;){var yt=31-Vc(ft),xt=1<<yt;ut[yt]|=ht,ft&=~xt}}},[et,_e,tt]),it.useEffect(function(){return tt(_e._source,function(){var ht=ct.getSnapshot,ut=ct.setSnapshot;try{ut(ht(_e._source));var ft=Ig(Rt);rt.mutableReadLanes|=ft&rt.pendingLanes}catch(yt){ut(function(){throw yt})}})},[_e,tt]),He$1(wt,et)&&He$1(Tt,_e)&&He$1(gt,tt)||(_={pending:null,dispatch:null,lastRenderedReducer:Jh,lastRenderedState:lt},_.dispatch=st=Oh.bind(null,R,_),ot.queue=_,ot.baseQueue=null,lt=Mh(rt,_e,et),ot.memoizedState=ot.baseState=lt),lt}function Ph(_,_e,et){var tt=Ih();return Nh(tt,_,_e,et)}function Qh(_){var _e=Hh();return typeof _=="function"&&(_=_()),_e.memoizedState=_e.baseState=_,_=_e.queue={pending:null,dispatch:null,lastRenderedReducer:Jh,lastRenderedState:_},_=_.dispatch=Oh.bind(null,R,_),[_e.memoizedState,_]}function Rh(_,_e,et,tt){return _={tag:_,create:_e,destroy:et,deps:tt,next:null},_e=R.updateQueue,_e===null?(_e={lastEffect:null},R.updateQueue=_e,_e.lastEffect=_.next=_):(et=_e.lastEffect,et===null?_e.lastEffect=_.next=_:(tt=et.next,et.next=_,_.next=tt,_e.lastEffect=_)),_}function Sh(_){var _e=Hh();return _={current:_},_e.memoizedState=_}function Th(){return Ih().memoizedState}function Uh(_,_e,et,tt){var rt=Hh();R.flags|=_,rt.memoizedState=Rh(1|_e,et,void 0,tt===void 0?null:tt)}function Vh(_,_e,et,tt){var rt=Ih();tt=tt===void 0?null:tt;var nt=void 0;if(S$2!==null){var at=S$2.memoizedState;if(nt=at.destroy,tt!==null&&Bh(tt,at.deps)){Rh(_e,et,nt,tt);return}}R.flags|=_,rt.memoizedState=Rh(1|_e,et,nt,tt)}function Wh(_,_e){return Uh(516,4,_,_e)}function Xh(_,_e){return Vh(516,4,_,_e)}function Yh(_,_e){return Vh(4,2,_,_e)}function Zh(_,_e){if(typeof _e=="function")return _=_(),_e(_),function(){_e(null)};if(_e!=null)return _=_(),_e.current=_,function(){_e.current=null}}function $h(_,_e,et){return et=et!=null?et.concat([_]):null,Vh(4,2,Zh.bind(null,_e,_),et)}function ai(){}function bi(_,_e){var et=Ih();_e=_e===void 0?null:_e;var tt=et.memoizedState;return tt!==null&&_e!==null&&Bh(_e,tt[1])?tt[0]:(et.memoizedState=[_,_e],_)}function ci(_,_e){var et=Ih();_e=_e===void 0?null:_e;var tt=et.memoizedState;return tt!==null&&_e!==null&&Bh(_e,tt[1])?tt[0]:(_=_(),et.memoizedState=[_,_e],_)}function di(_,_e){var et=eg();gg(98>et?98:et,function(){_(!0)}),gg(97<et?97:et,function(){var tt=wh.transition;wh.transition=1;try{_(!1),_e()}finally{wh.transition=tt}})}function Oh(_,_e,et){var tt=Hg(),rt=Ig(_),nt={lane:rt,action:et,eagerReducer:null,eagerState:null,next:null},at=_e.pending;if(at===null?nt.next=nt:(nt.next=at.next,at.next=nt),_e.pending=nt,at=_.alternate,_===R||at!==null&&at===R)zh=yh=!0;else{if(_.lanes===0&&(at===null||at.lanes===0)&&(at=_e.lastRenderedReducer,at!==null))try{var it=_e.lastRenderedState,ot=at(it,et);if(nt.eagerReducer=at,nt.eagerState=ot,He$1(ot,it))return}catch{}finally{}Jg(_,rt,tt)}}var Gh={readContext:vg,useCallback:Ah,useContext:Ah,useEffect:Ah,useImperativeHandle:Ah,useLayoutEffect:Ah,useMemo:Ah,useReducer:Ah,useRef:Ah,useState:Ah,useDebugValue:Ah,useDeferredValue:Ah,useTransition:Ah,useMutableSource:Ah,useOpaqueIdentifier:Ah,unstable_isNewReconciler:!1},Dh={readContext:vg,useCallback:function(_,_e){return Hh().memoizedState=[_,_e===void 0?null:_e],_},useContext:vg,useEffect:Wh,useImperativeHandle:function(_,_e,et){return et=et!=null?et.concat([_]):null,Uh(4,2,Zh.bind(null,_e,_),et)},useLayoutEffect:function(_,_e){return Uh(4,2,_,_e)},useMemo:function(_,_e){var et=Hh();return _e=_e===void 0?null:_e,_=_(),et.memoizedState=[_,_e],_},useReducer:function(_,_e,et){var tt=Hh();return _e=et!==void 0?et(_e):_e,tt.memoizedState=tt.baseState=_e,_=tt.queue={pending:null,dispatch:null,lastRenderedReducer:_,lastRenderedState:_e},_=_.dispatch=Oh.bind(null,R,_),[tt.memoizedState,_]},useRef:Sh,useState:Qh,useDebugValue:ai,useDeferredValue:function(_){var _e=Qh(_),et=_e[0],tt=_e[1];return Wh(function(){var rt=wh.transition;wh.transition=1;try{tt(_)}finally{wh.transition=rt}},[_]),et},useTransition:function(){var _=Qh(!1),_e=_[0];return _=di.bind(null,_[1]),Sh(_),[_,_e]},useMutableSource:function(_,_e,et){var tt=Hh();return tt.memoizedState={refs:{getSnapshot:_e,setSnapshot:null},source:_,subscribe:et},Nh(tt,_,_e,et)},useOpaqueIdentifier:function(){if(lh){var _=!1,_e=uf(function(){throw _||(_=!0,et("r:"+(tf++).toString(36))),Error(y$2(355))}),et=Qh(_e)[1];return!(R.mode&2)&&(R.flags|=516,Rh(5,function(){et("r:"+(tf++).toString(36))},void 0,null)),_e}return _e="r:"+(tf++).toString(36),Qh(_e),_e},unstable_isNewReconciler:!1},Eh={readContext:vg,useCallback:bi,useContext:vg,useEffect:Xh,useImperativeHandle:$h,useLayoutEffect:Yh,useMemo:ci,useReducer:Kh,useRef:Th,useState:function(){return Kh(Jh)},useDebugValue:ai,useDeferredValue:function(_){var _e=Kh(Jh),et=_e[0],tt=_e[1];return Xh(function(){var rt=wh.transition;wh.transition=1;try{tt(_)}finally{wh.transition=rt}},[_]),et},useTransition:function(){var _=Kh(Jh)[0];return[Th().current,_]},useMutableSource:Ph,useOpaqueIdentifier:function(){return Kh(Jh)[0]},unstable_isNewReconciler:!1},Fh={readContext:vg,useCallback:bi,useContext:vg,useEffect:Xh,useImperativeHandle:$h,useLayoutEffect:Yh,useMemo:ci,useReducer:Lh,useRef:Th,useState:function(){return Lh(Jh)},useDebugValue:ai,useDeferredValue:function(_){var _e=Lh(Jh),et=_e[0],tt=_e[1];return Xh(function(){var rt=wh.transition;wh.transition=1;try{tt(_)}finally{wh.transition=rt}},[_]),et},useTransition:function(){var _=Lh(Jh)[0];return[Th().current,_]},useMutableSource:Ph,useOpaqueIdentifier:function(){return Lh(Jh)[0]},unstable_isNewReconciler:!1},ei=ra.ReactCurrentOwner,ug=!1;function fi(_,_e,et,tt){_e.child=_===null?Zg(_e,null,et,tt):Yg(_e,_.child,et,tt)}function gi(_,_e,et,tt,rt){et=et.render;var nt=_e.ref;return tg(_e,rt),tt=Ch(_,_e,et,tt,nt,rt),_!==null&&!ug?(_e.updateQueue=_.updateQueue,_e.flags&=-517,_.lanes&=~rt,hi$1(_,_e,rt)):(_e.flags|=1,fi(_,_e,tt,rt),_e.child)}function ii(_,_e,et,tt,rt,nt){if(_===null){var at=et.type;return typeof at=="function"&&!ji(at)&&at.defaultProps===void 0&&et.compare===null&&et.defaultProps===void 0?(_e.tag=15,_e.type=at,ki(_,_e,at,tt,rt,nt)):(_=Vg(et.type,null,tt,_e,_e.mode,nt),_.ref=_e.ref,_.return=_e,_e.child=_)}return at=_.child,!(rt&nt)&&(rt=at.memoizedProps,et=et.compare,et=et!==null?et:Je$2,et(rt,tt)&&_.ref===_e.ref)?hi$1(_,_e,nt):(_e.flags|=1,_=Tg(at,tt),_.ref=_e.ref,_.return=_e,_e.child=_)}function ki(_,_e,et,tt,rt,nt){if(_!==null&&Je$2(_.memoizedProps,tt)&&_.ref===_e.ref)if(ug=!1,(nt&rt)!==0)_.flags&16384&&(ug=!0);else return _e.lanes=_.lanes,hi$1(_,_e,nt);return li(_,_e,et,tt,nt)}function mi(_,_e,et){var tt=_e.pendingProps,rt=tt.children,nt=_!==null?_.memoizedState:null;if(tt.mode==="hidden"||tt.mode==="unstable-defer-without-hiding")if(!(_e.mode&4))_e.memoizedState={baseLanes:0},ni(_e,et);else if(et&1073741824)_e.memoizedState={baseLanes:0},ni(_e,nt!==null?nt.baseLanes:et);else return _=nt!==null?nt.baseLanes|et:et,_e.lanes=_e.childLanes=1073741824,_e.memoizedState={baseLanes:_},ni(_e,_),null;else nt!==null?(tt=nt.baseLanes|et,_e.memoizedState=null):tt=et,ni(_e,tt);return fi(_,_e,rt,et),_e.child}function oi(_,_e){var et=_e.ref;(_===null&&et!==null||_!==null&&_.ref!==et)&&(_e.flags|=128)}function li(_,_e,et,tt,rt){var nt=Ff(et)?Df:M$4.current;return nt=Ef(_e,nt),tg(_e,rt),et=Ch(_,_e,et,tt,nt,rt),_!==null&&!ug?(_e.updateQueue=_.updateQueue,_e.flags&=-517,_.lanes&=~rt,hi$1(_,_e,rt)):(_e.flags|=1,fi(_,_e,et,rt),_e.child)}function pi(_,_e,et,tt,rt){if(Ff(et)){var nt=!0;Jf(_e)}else nt=!1;if(tg(_e,rt),_e.stateNode===null)_!==null&&(_.alternate=null,_e.alternate=null,_e.flags|=2),Mg(_e,et,tt),Og(_e,et,tt,rt),tt=!0;else if(_===null){var at=_e.stateNode,it=_e.memoizedProps;at.props=it;var ot=at.context,st=et.contextType;typeof st=="object"&&st!==null?st=vg(st):(st=Ff(et)?Df:M$4.current,st=Ef(_e,st));var lt=et.getDerivedStateFromProps,gt=typeof lt=="function"||typeof at.getSnapshotBeforeUpdate=="function";gt||typeof at.UNSAFE_componentWillReceiveProps!="function"&&typeof at.componentWillReceiveProps!="function"||(it!==tt||ot!==st)&&Ng(_e,at,tt,st),wg=!1;var ct=_e.memoizedState;at.state=ct,Cg(_e,tt,at,rt),ot=_e.memoizedState,it!==tt||ct!==ot||N$1.current||wg?(typeof lt=="function"&&(Gg(_e,et,lt,tt),ot=_e.memoizedState),(it=wg||Lg(_e,et,it,tt,ct,ot,st))?(gt||typeof at.UNSAFE_componentWillMount!="function"&&typeof at.componentWillMount!="function"||(typeof at.componentWillMount=="function"&&at.componentWillMount(),typeof at.UNSAFE_componentWillMount=="function"&&at.UNSAFE_componentWillMount()),typeof at.componentDidMount=="function"&&(_e.flags|=4)):(typeof at.componentDidMount=="function"&&(_e.flags|=4),_e.memoizedProps=tt,_e.memoizedState=ot),at.props=tt,at.state=ot,at.context=st,tt=it):(typeof at.componentDidMount=="function"&&(_e.flags|=4),tt=!1)}else{at=_e.stateNode,yg(_,_e),it=_e.memoizedProps,st=_e.type===_e.elementType?it:lg(_e.type,it),at.props=st,gt=_e.pendingProps,ct=at.context,ot=et.contextType,typeof ot=="object"&&ot!==null?ot=vg(ot):(ot=Ff(et)?Df:M$4.current,ot=Ef(_e,ot));var wt=et.getDerivedStateFromProps;(lt=typeof wt=="function"||typeof at.getSnapshotBeforeUpdate=="function")||typeof at.UNSAFE_componentWillReceiveProps!="function"&&typeof at.componentWillReceiveProps!="function"||(it!==gt||ct!==ot)&&Ng(_e,at,tt,ot),wg=!1,ct=_e.memoizedState,at.state=ct,Cg(_e,tt,at,rt);var Tt=_e.memoizedState;it!==gt||ct!==Tt||N$1.current||wg?(typeof wt=="function"&&(Gg(_e,et,wt,tt),Tt=_e.memoizedState),(st=wg||Lg(_e,et,st,tt,ct,Tt,ot))?(lt||typeof at.UNSAFE_componentWillUpdate!="function"&&typeof at.componentWillUpdate!="function"||(typeof at.componentWillUpdate=="function"&&at.componentWillUpdate(tt,Tt,ot),typeof at.UNSAFE_componentWillUpdate=="function"&&at.UNSAFE_componentWillUpdate(tt,Tt,ot)),typeof at.componentDidUpdate=="function"&&(_e.flags|=4),typeof at.getSnapshotBeforeUpdate=="function"&&(_e.flags|=256)):(typeof at.componentDidUpdate!="function"||it===_.memoizedProps&&ct===_.memoizedState||(_e.flags|=4),typeof at.getSnapshotBeforeUpdate!="function"||it===_.memoizedProps&&ct===_.memoizedState||(_e.flags|=256),_e.memoizedProps=tt,_e.memoizedState=Tt),at.props=tt,at.state=Tt,at.context=ot,tt=st):(typeof at.componentDidUpdate!="function"||it===_.memoizedProps&&ct===_.memoizedState||(_e.flags|=4),typeof at.getSnapshotBeforeUpdate!="function"||it===_.memoizedProps&&ct===_.memoizedState||(_e.flags|=256),tt=!1)}return qi(_,_e,et,tt,nt,rt)}function qi(_,_e,et,tt,rt,nt){oi(_,_e);var at=(_e.flags&64)!==0;if(!tt&&!at)return rt&&Kf(_e,et,!1),hi$1(_,_e,nt);tt=_e.stateNode,ei.current=_e;var it=at&&typeof et.getDerivedStateFromError!="function"?null:tt.render();return _e.flags|=1,_!==null&&at?(_e.child=Yg(_e,_.child,null,nt),_e.child=Yg(_e,null,it,nt)):fi(_,_e,it,nt),_e.memoizedState=tt.state,rt&&Kf(_e,et,!0),_e.child}function ri(_){var _e=_.stateNode;_e.pendingContext?Hf(_,_e.pendingContext,_e.pendingContext!==_e.context):_e.context&&Hf(_,_e.context,!1),eh(_,_e.containerInfo)}var si={dehydrated:null,retryLane:0};function ti(_,_e,et){var tt=_e.pendingProps,rt=P$1.current,nt=!1,at;return(at=(_e.flags&64)!==0)||(at=_!==null&&_.memoizedState===null?!1:(rt&2)!==0),at?(nt=!0,_e.flags&=-65):_!==null&&_.memoizedState===null||tt.fallback===void 0||tt.unstable_avoidThisFallback===!0||(rt|=1),I$2(P$1,rt&1),_===null?(tt.fallback!==void 0&&ph(_e),_=tt.children,rt=tt.fallback,nt?(_=ui(_e,_,rt,et),_e.child.memoizedState={baseLanes:et},_e.memoizedState=si,_):typeof tt.unstable_expectedLoadTime=="number"?(_=ui(_e,_,rt,et),_e.child.memoizedState={baseLanes:et},_e.memoizedState=si,_e.lanes=33554432,_):(et=vi({mode:"visible",children:_},_e.mode,et,null),et.return=_e,_e.child=et)):_.memoizedState!==null?nt?(tt=wi(_,_e,tt.children,tt.fallback,et),nt=_e.child,rt=_.child.memoizedState,nt.memoizedState=rt===null?{baseLanes:et}:{baseLanes:rt.baseLanes|et},nt.childLanes=_.childLanes&~et,_e.memoizedState=si,tt):(et=xi(_,_e,tt.children,et),_e.memoizedState=null,et):nt?(tt=wi(_,_e,tt.children,tt.fallback,et),nt=_e.child,rt=_.child.memoizedState,nt.memoizedState=rt===null?{baseLanes:et}:{baseLanes:rt.baseLanes|et},nt.childLanes=_.childLanes&~et,_e.memoizedState=si,tt):(et=xi(_,_e,tt.children,et),_e.memoizedState=null,et)}function ui(_,_e,et,tt){var rt=_.mode,nt=_.child;return _e={mode:"hidden",children:_e},!(rt&2)&&nt!==null?(nt.childLanes=0,nt.pendingProps=_e):nt=vi(_e,rt,0,null),et=Xg(et,rt,tt,null),nt.return=_,et.return=_,nt.sibling=et,_.child=nt,et}function xi(_,_e,et,tt){var rt=_.child;return _=rt.sibling,et=Tg(rt,{mode:"visible",children:et}),!(_e.mode&2)&&(et.lanes=tt),et.return=_e,et.sibling=null,_!==null&&(_.nextEffect=null,_.flags=8,_e.firstEffect=_e.lastEffect=_),_e.child=et}function wi(_,_e,et,tt,rt){var nt=_e.mode,at=_.child;_=at.sibling;var it={mode:"hidden",children:et};return!(nt&2)&&_e.child!==at?(et=_e.child,et.childLanes=0,et.pendingProps=it,at=et.lastEffect,at!==null?(_e.firstEffect=et.firstEffect,_e.lastEffect=at,at.nextEffect=null):_e.firstEffect=_e.lastEffect=null):et=Tg(at,it),_!==null?tt=Tg(_,tt):(tt=Xg(tt,nt,rt,null),tt.flags|=2),tt.return=_e,et.return=_e,et.sibling=tt,_e.child=et,tt}function yi(_,_e){_.lanes|=_e;var et=_.alternate;et!==null&&(et.lanes|=_e),sg(_.return,_e)}function zi(_,_e,et,tt,rt,nt){var at=_.memoizedState;at===null?_.memoizedState={isBackwards:_e,rendering:null,renderingStartTime:0,last:tt,tail:et,tailMode:rt,lastEffect:nt}:(at.isBackwards=_e,at.rendering=null,at.renderingStartTime=0,at.last=tt,at.tail=et,at.tailMode=rt,at.lastEffect=nt)}function Ai(_,_e,et){var tt=_e.pendingProps,rt=tt.revealOrder,nt=tt.tail;if(fi(_,_e,tt.children,et),tt=P$1.current,tt&2)tt=tt&1|2,_e.flags|=64;else{if(_!==null&&_.flags&64)e:for(_=_e.child;_!==null;){if(_.tag===13)_.memoizedState!==null&&yi(_,et);else if(_.tag===19)yi(_,et);else if(_.child!==null){_.child.return=_,_=_.child;continue}if(_===_e)break e;for(;_.sibling===null;){if(_.return===null||_.return===_e)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}tt&=1}if(I$2(P$1,tt),!(_e.mode&2))_e.memoizedState=null;else switch(rt){case"forwards":for(et=_e.child,rt=null;et!==null;)_=et.alternate,_!==null&&ih(_)===null&&(rt=et),et=et.sibling;et=rt,et===null?(rt=_e.child,_e.child=null):(rt=et.sibling,et.sibling=null),zi(_e,!1,rt,et,nt,_e.lastEffect);break;case"backwards":for(et=null,rt=_e.child,_e.child=null;rt!==null;){if(_=rt.alternate,_!==null&&ih(_)===null){_e.child=rt;break}_=rt.sibling,rt.sibling=et,et=rt,rt=_}zi(_e,!0,et,null,nt,_e.lastEffect);break;case"together":zi(_e,!1,null,null,void 0,_e.lastEffect);break;default:_e.memoizedState=null}return _e.child}function hi$1(_,_e,et){if(_!==null&&(_e.dependencies=_.dependencies),Dg|=_e.lanes,et&_e.childLanes){if(_!==null&&_e.child!==_.child)throw Error(y$2(153));if(_e.child!==null){for(_=_e.child,et=Tg(_,_.pendingProps),_e.child=et,et.return=_e;_.sibling!==null;)_=_.sibling,et=et.sibling=Tg(_,_.pendingProps),et.return=_e;et.sibling=null}return _e.child}return null}var Bi,Ci,Di,Ei;Bi=function(_,_e){for(var et=_e.child;et!==null;){if(et.tag===5||et.tag===6)_.appendChild(et.stateNode);else if(et.tag!==4&&et.child!==null){et.child.return=et,et=et.child;continue}if(et===_e)break;for(;et.sibling===null;){if(et.return===null||et.return===_e)return;et=et.return}et.sibling.return=et.return,et=et.sibling}};Ci=function(){};Di=function(_,_e,et,tt){var rt=_.memoizedProps;if(rt!==tt){_=_e.stateNode,dh(ah.current);var nt=null;switch(et){case"input":rt=Ya(_,rt),tt=Ya(_,tt),nt=[];break;case"option":rt=eb(_,rt),tt=eb(_,tt),nt=[];break;case"select":rt=m$4({},rt,{value:void 0}),tt=m$4({},tt,{value:void 0}),nt=[];break;case"textarea":rt=gb(_,rt),tt=gb(_,tt),nt=[];break;default:typeof rt.onClick!="function"&&typeof tt.onClick=="function"&&(_.onclick=jf)}vb(et,tt);var at;et=null;for(st in rt)if(!tt.hasOwnProperty(st)&&rt.hasOwnProperty(st)&&rt[st]!=null)if(st==="style"){var it=rt[st];for(at in it)it.hasOwnProperty(at)&&(et||(et={}),et[at]="")}else st!=="dangerouslySetInnerHTML"&&st!=="children"&&st!=="suppressContentEditableWarning"&&st!=="suppressHydrationWarning"&&st!=="autoFocus"&&(ca.hasOwnProperty(st)?nt||(nt=[]):(nt=nt||[]).push(st,null));for(st in tt){var ot=tt[st];if(it=rt!=null?rt[st]:void 0,tt.hasOwnProperty(st)&&ot!==it&&(ot!=null||it!=null))if(st==="style")if(it){for(at in it)!it.hasOwnProperty(at)||ot&&ot.hasOwnProperty(at)||(et||(et={}),et[at]="");for(at in ot)ot.hasOwnProperty(at)&&it[at]!==ot[at]&&(et||(et={}),et[at]=ot[at])}else et||(nt||(nt=[]),nt.push(st,et)),et=ot;else st==="dangerouslySetInnerHTML"?(ot=ot?ot.__html:void 0,it=it?it.__html:void 0,ot!=null&&it!==ot&&(nt=nt||[]).push(st,ot)):st==="children"?typeof ot!="string"&&typeof ot!="number"||(nt=nt||[]).push(st,""+ot):st!=="suppressContentEditableWarning"&&st!=="suppressHydrationWarning"&&(ca.hasOwnProperty(st)?(ot!=null&&st==="onScroll"&&G("scroll",_),nt||it===ot||(nt=[])):typeof ot=="object"&&ot!==null&&ot.$$typeof===Ga?ot.toString():(nt=nt||[]).push(st,ot))}et&&(nt=nt||[]).push("style",et);var st=nt;(_e.updateQueue=st)&&(_e.flags|=4)}};Ei=function(_,_e,et,tt){et!==tt&&(_e.flags|=4)};function Fi(_,_e){if(!lh)switch(_.tailMode){case"hidden":_e=_.tail;for(var et=null;_e!==null;)_e.alternate!==null&&(et=_e),_e=_e.sibling;et===null?_.tail=null:et.sibling=null;break;case"collapsed":et=_.tail;for(var tt=null;et!==null;)et.alternate!==null&&(tt=et),et=et.sibling;tt===null?_e||_.tail===null?_.tail=null:_.tail.sibling=null:tt.sibling=null}}function Gi(_,_e,et){var tt=_e.pendingProps;switch(_e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return Ff(_e.type)&&Gf(),null;case 3:return fh(),H$1(N$1),H$1(M$4),uh(),tt=_e.stateNode,tt.pendingContext&&(tt.context=tt.pendingContext,tt.pendingContext=null),(_===null||_.child===null)&&(rh(_e)?_e.flags|=4:tt.hydrate||(_e.flags|=256)),Ci(_e),null;case 5:hh(_e);var rt=dh(ch.current);if(et=_e.type,_!==null&&_e.stateNode!=null)Di(_,_e,et,tt,rt),_.ref!==_e.ref&&(_e.flags|=128);else{if(!tt){if(_e.stateNode===null)throw Error(y$2(166));return null}if(_=dh(ah.current),rh(_e)){tt=_e.stateNode,et=_e.type;var nt=_e.memoizedProps;switch(tt[wf]=_e,tt[xf]=nt,et){case"dialog":G("cancel",tt),G("close",tt);break;case"iframe":case"object":case"embed":G("load",tt);break;case"video":case"audio":for(_=0;_<Xe$1.length;_++)G(Xe$1[_],tt);break;case"source":G("error",tt);break;case"img":case"image":case"link":G("error",tt),G("load",tt);break;case"details":G("toggle",tt);break;case"input":Za(tt,nt),G("invalid",tt);break;case"select":tt._wrapperState={wasMultiple:!!nt.multiple},G("invalid",tt);break;case"textarea":hb(tt,nt),G("invalid",tt)}vb(et,nt),_=null;for(var at in nt)nt.hasOwnProperty(at)&&(rt=nt[at],at==="children"?typeof rt=="string"?tt.textContent!==rt&&(_=["children",rt]):typeof rt=="number"&&tt.textContent!==""+rt&&(_=["children",""+rt]):ca.hasOwnProperty(at)&&rt!=null&&at==="onScroll"&&G("scroll",tt));switch(et){case"input":Va(tt),cb(tt,nt,!0);break;case"textarea":Va(tt),jb(tt);break;case"select":case"option":break;default:typeof nt.onClick=="function"&&(tt.onclick=jf)}tt=_,_e.updateQueue=tt,tt!==null&&(_e.flags|=4)}else{switch(at=rt.nodeType===9?rt:rt.ownerDocument,_===kb.html&&(_=lb(et)),_===kb.html?et==="script"?(_=at.createElement("div"),_.innerHTML="<script></script>",_=_.removeChild(_.firstChild)):typeof tt.is=="string"?_=at.createElement(et,{is:tt.is}):(_=at.createElement(et),et==="select"&&(at=_,tt.multiple?at.multiple=!0:tt.size&&(at.size=tt.size))):_=at.createElementNS(_,et),_[wf]=_e,_[xf]=tt,Bi(_,_e,!1,!1),_e.stateNode=_,at=wb(et,tt),et){case"dialog":G("cancel",_),G("close",_),rt=tt;break;case"iframe":case"object":case"embed":G("load",_),rt=tt;break;case"video":case"audio":for(rt=0;rt<Xe$1.length;rt++)G(Xe$1[rt],_);rt=tt;break;case"source":G("error",_),rt=tt;break;case"img":case"image":case"link":G("error",_),G("load",_),rt=tt;break;case"details":G("toggle",_),rt=tt;break;case"input":Za(_,tt),rt=Ya(_,tt),G("invalid",_);break;case"option":rt=eb(_,tt);break;case"select":_._wrapperState={wasMultiple:!!tt.multiple},rt=m$4({},tt,{value:void 0}),G("invalid",_);break;case"textarea":hb(_,tt),rt=gb(_,tt),G("invalid",_);break;default:rt=tt}vb(et,rt);var it=rt;for(nt in it)if(it.hasOwnProperty(nt)){var ot=it[nt];nt==="style"?tb(_,ot):nt==="dangerouslySetInnerHTML"?(ot=ot?ot.__html:void 0,ot!=null&&ob(_,ot)):nt==="children"?typeof ot=="string"?(et!=="textarea"||ot!=="")&&pb(_,ot):typeof ot=="number"&&pb(_,""+ot):nt!=="suppressContentEditableWarning"&&nt!=="suppressHydrationWarning"&&nt!=="autoFocus"&&(ca.hasOwnProperty(nt)?ot!=null&&nt==="onScroll"&&G("scroll",_):ot!=null&&qa(_,nt,ot,at))}switch(et){case"input":Va(_),cb(_,tt,!1);break;case"textarea":Va(_),jb(_);break;case"option":tt.value!=null&&_.setAttribute("value",""+Sa(tt.value));break;case"select":_.multiple=!!tt.multiple,nt=tt.value,nt!=null?fb(_,!!tt.multiple,nt,!1):tt.defaultValue!=null&&fb(_,!!tt.multiple,tt.defaultValue,!0);break;default:typeof rt.onClick=="function"&&(_.onclick=jf)}mf(et,tt)&&(_e.flags|=4)}_e.ref!==null&&(_e.flags|=128)}return null;case 6:if(_&&_e.stateNode!=null)Ei(_,_e,_.memoizedProps,tt);else{if(typeof tt!="string"&&_e.stateNode===null)throw Error(y$2(166));et=dh(ch.current),dh(ah.current),rh(_e)?(tt=_e.stateNode,et=_e.memoizedProps,tt[wf]=_e,tt.nodeValue!==et&&(_e.flags|=4)):(tt=(et.nodeType===9?et:et.ownerDocument).createTextNode(tt),tt[wf]=_e,_e.stateNode=tt)}return null;case 13:return H$1(P$1),tt=_e.memoizedState,_e.flags&64?(_e.lanes=et,_e):(tt=tt!==null,et=!1,_===null?_e.memoizedProps.fallback!==void 0&&rh(_e):et=_.memoizedState!==null,tt&&!et&&_e.mode&2&&(_===null&&_e.memoizedProps.unstable_avoidThisFallback!==!0||P$1.current&1?V===0&&(V=3):((V===0||V===3)&&(V=4),U===null||!(Dg&134217727)&&!(Hi&134217727)||Ii(U,W))),(tt||et)&&(_e.flags|=4),null);case 4:return fh(),Ci(_e),_===null&&cf(_e.stateNode.containerInfo),null;case 10:return rg(_e),null;case 17:return Ff(_e.type)&&Gf(),null;case 19:if(H$1(P$1),tt=_e.memoizedState,tt===null)return null;if(nt=(_e.flags&64)!==0,at=tt.rendering,at===null)if(nt)Fi(tt,!1);else{if(V!==0||_!==null&&_.flags&64)for(_=_e.child;_!==null;){if(at=ih(_),at!==null){for(_e.flags|=64,Fi(tt,!1),nt=at.updateQueue,nt!==null&&(_e.updateQueue=nt,_e.flags|=4),tt.lastEffect===null&&(_e.firstEffect=null),_e.lastEffect=tt.lastEffect,tt=et,et=_e.child;et!==null;)nt=et,_=tt,nt.flags&=2,nt.nextEffect=null,nt.firstEffect=null,nt.lastEffect=null,at=nt.alternate,at===null?(nt.childLanes=0,nt.lanes=_,nt.child=null,nt.memoizedProps=null,nt.memoizedState=null,nt.updateQueue=null,nt.dependencies=null,nt.stateNode=null):(nt.childLanes=at.childLanes,nt.lanes=at.lanes,nt.child=at.child,nt.memoizedProps=at.memoizedProps,nt.memoizedState=at.memoizedState,nt.updateQueue=at.updateQueue,nt.type=at.type,_=at.dependencies,nt.dependencies=_===null?null:{lanes:_.lanes,firstContext:_.firstContext}),et=et.sibling;return I$2(P$1,P$1.current&1|2),_e.child}_=_.sibling}tt.tail!==null&&O()>Ji&&(_e.flags|=64,nt=!0,Fi(tt,!1),_e.lanes=33554432)}else{if(!nt)if(_=ih(at),_!==null){if(_e.flags|=64,nt=!0,et=_.updateQueue,et!==null&&(_e.updateQueue=et,_e.flags|=4),Fi(tt,!0),tt.tail===null&&tt.tailMode==="hidden"&&!at.alternate&&!lh)return _e=_e.lastEffect=tt.lastEffect,_e!==null&&(_e.nextEffect=null),null}else 2*O()-tt.renderingStartTime>Ji&&et!==1073741824&&(_e.flags|=64,nt=!0,Fi(tt,!1),_e.lanes=33554432);tt.isBackwards?(at.sibling=_e.child,_e.child=at):(et=tt.last,et!==null?et.sibling=at:_e.child=at,tt.last=at)}return tt.tail!==null?(et=tt.tail,tt.rendering=et,tt.tail=et.sibling,tt.lastEffect=_e.lastEffect,tt.renderingStartTime=O(),et.sibling=null,_e=P$1.current,I$2(P$1,nt?_e&1|2:_e&1),et):null;case 23:case 24:return Ki(),_!==null&&_.memoizedState!==null!=(_e.memoizedState!==null)&&tt.mode!=="unstable-defer-without-hiding"&&(_e.flags|=4),null}throw Error(y$2(156,_e.tag))}function Li(_){switch(_.tag){case 1:Ff(_.type)&&Gf();var _e=_.flags;return _e&4096?(_.flags=_e&-4097|64,_):null;case 3:if(fh(),H$1(N$1),H$1(M$4),uh(),_e=_.flags,_e&64)throw Error(y$2(285));return _.flags=_e&-4097|64,_;case 5:return hh(_),null;case 13:return H$1(P$1),_e=_.flags,_e&4096?(_.flags=_e&-4097|64,_):null;case 19:return H$1(P$1),null;case 4:return fh(),null;case 10:return rg(_),null;case 23:case 24:return Ki(),null;default:return null}}function Mi(_,_e){try{var et="",tt=_e;do et+=Qa(tt),tt=tt.return;while(tt);var rt=et}catch(nt){rt=`
Error generating stack: `+nt.message+`
`+nt.stack}return{value:_,source:_e,stack:rt}}function Ni(_,_e){try{console.error(_e.value)}catch(et){setTimeout(function(){throw et})}}var Oi=typeof WeakMap=="function"?WeakMap:Map;function Pi(_,_e,et){et=zg(-1,et),et.tag=3,et.payload={element:null};var tt=_e.value;return et.callback=function(){Qi||(Qi=!0,Ri=tt),Ni(_,_e)},et}function Si(_,_e,et){et=zg(-1,et),et.tag=3;var tt=_.type.getDerivedStateFromError;if(typeof tt=="function"){var rt=_e.value;et.payload=function(){return Ni(_,_e),tt(rt)}}var nt=_.stateNode;return nt!==null&&typeof nt.componentDidCatch=="function"&&(et.callback=function(){typeof tt!="function"&&(Ti===null?Ti=new Set([this]):Ti.add(this),Ni(_,_e));var at=_e.stack;this.componentDidCatch(_e.value,{componentStack:at!==null?at:""})}),et}var Ui=typeof WeakSet=="function"?WeakSet:Set;function Vi(_){var _e=_.ref;if(_e!==null)if(typeof _e=="function")try{_e(null)}catch(et){Wi(_,et)}else _e.current=null}function Xi(_,_e){switch(_e.tag){case 0:case 11:case 15:case 22:return;case 1:if(_e.flags&256&&_!==null){var et=_.memoizedProps,tt=_.memoizedState;_=_e.stateNode,_e=_.getSnapshotBeforeUpdate(_e.elementType===_e.type?et:lg(_e.type,et),tt),_.__reactInternalSnapshotBeforeUpdate=_e}return;case 3:_e.flags&256&&qf(_e.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return}throw Error(y$2(163))}function Yi(_,_e,et){switch(et.tag){case 0:case 11:case 15:case 22:if(_e=et.updateQueue,_e=_e!==null?_e.lastEffect:null,_e!==null){_=_e=_e.next;do{if((_.tag&3)===3){var tt=_.create;_.destroy=tt()}_=_.next}while(_!==_e)}if(_e=et.updateQueue,_e=_e!==null?_e.lastEffect:null,_e!==null){_=_e=_e.next;do{var rt=_;tt=rt.next,rt=rt.tag,rt&4&&rt&1&&(Zi(et,_),$i(et,_)),_=tt}while(_!==_e)}return;case 1:_=et.stateNode,et.flags&4&&(_e===null?_.componentDidMount():(tt=et.elementType===et.type?_e.memoizedProps:lg(et.type,_e.memoizedProps),_.componentDidUpdate(tt,_e.memoizedState,_.__reactInternalSnapshotBeforeUpdate))),_e=et.updateQueue,_e!==null&&Eg(et,_e,_);return;case 3:if(_e=et.updateQueue,_e!==null){if(_=null,et.child!==null)switch(et.child.tag){case 5:_=et.child.stateNode;break;case 1:_=et.child.stateNode}Eg(et,_e,_)}return;case 5:_=et.stateNode,_e===null&&et.flags&4&&mf(et.type,et.memoizedProps)&&_.focus();return;case 6:return;case 4:return;case 12:return;case 13:et.memoizedState===null&&(et=et.alternate,et!==null&&(et=et.memoizedState,et!==null&&(et=et.dehydrated,et!==null&&Cc(et))));return;case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(y$2(163))}function aj(_,_e){for(var et=_;;){if(et.tag===5){var tt=et.stateNode;if(_e)tt=tt.style,typeof tt.setProperty=="function"?tt.setProperty("display","none","important"):tt.display="none";else{tt=et.stateNode;var rt=et.memoizedProps.style;rt=rt!=null&&rt.hasOwnProperty("display")?rt.display:null,tt.style.display=sb("display",rt)}}else if(et.tag===6)et.stateNode.nodeValue=_e?"":et.memoizedProps;else if((et.tag!==23&&et.tag!==24||et.memoizedState===null||et===_)&&et.child!==null){et.child.return=et,et=et.child;continue}if(et===_)break;for(;et.sibling===null;){if(et.return===null||et.return===_)return;et=et.return}et.sibling.return=et.return,et=et.sibling}}function bj(_,_e){if(Mf&&typeof Mf.onCommitFiberUnmount=="function")try{Mf.onCommitFiberUnmount(Lf,_e)}catch{}switch(_e.tag){case 0:case 11:case 14:case 15:case 22:if(_=_e.updateQueue,_!==null&&(_=_.lastEffect,_!==null)){var et=_=_.next;do{var tt=et,rt=tt.destroy;if(tt=tt.tag,rt!==void 0)if(tt&4)Zi(_e,et);else{tt=_e;try{rt()}catch(nt){Wi(tt,nt)}}et=et.next}while(et!==_)}break;case 1:if(Vi(_e),_=_e.stateNode,typeof _.componentWillUnmount=="function")try{_.props=_e.memoizedProps,_.state=_e.memoizedState,_.componentWillUnmount()}catch(nt){Wi(_e,nt)}break;case 5:Vi(_e);break;case 4:cj(_,_e)}}function dj(_){_.alternate=null,_.child=null,_.dependencies=null,_.firstEffect=null,_.lastEffect=null,_.memoizedProps=null,_.memoizedState=null,_.pendingProps=null,_.return=null,_.updateQueue=null}function ej(_){return _.tag===5||_.tag===3||_.tag===4}function fj(_){e:{for(var _e=_.return;_e!==null;){if(ej(_e))break e;_e=_e.return}throw Error(y$2(160))}var et=_e;switch(_e=et.stateNode,et.tag){case 5:var tt=!1;break;case 3:_e=_e.containerInfo,tt=!0;break;case 4:_e=_e.containerInfo,tt=!0;break;default:throw Error(y$2(161))}et.flags&16&&(pb(_e,""),et.flags&=-17);e:t:for(et=_;;){for(;et.sibling===null;){if(et.return===null||ej(et.return)){et=null;break e}et=et.return}for(et.sibling.return=et.return,et=et.sibling;et.tag!==5&&et.tag!==6&&et.tag!==18;){if(et.flags&2||et.child===null||et.tag===4)continue t;et.child.return=et,et=et.child}if(!(et.flags&2)){et=et.stateNode;break e}}tt?gj(_,et,_e):hj(_,et,_e)}function gj(_,_e,et){var tt=_.tag,rt=tt===5||tt===6;if(rt)_=rt?_.stateNode:_.stateNode.instance,_e?et.nodeType===8?et.parentNode.insertBefore(_,_e):et.insertBefore(_,_e):(et.nodeType===8?(_e=et.parentNode,_e.insertBefore(_,et)):(_e=et,_e.appendChild(_)),et=et._reactRootContainer,et!=null||_e.onclick!==null||(_e.onclick=jf));else if(tt!==4&&(_=_.child,_!==null))for(gj(_,_e,et),_=_.sibling;_!==null;)gj(_,_e,et),_=_.sibling}function hj(_,_e,et){var tt=_.tag,rt=tt===5||tt===6;if(rt)_=rt?_.stateNode:_.stateNode.instance,_e?et.insertBefore(_,_e):et.appendChild(_);else if(tt!==4&&(_=_.child,_!==null))for(hj(_,_e,et),_=_.sibling;_!==null;)hj(_,_e,et),_=_.sibling}function cj(_,_e){for(var et=_e,tt=!1,rt,nt;;){if(!tt){tt=et.return;e:for(;;){if(tt===null)throw Error(y$2(160));switch(rt=tt.stateNode,tt.tag){case 5:nt=!1;break e;case 3:rt=rt.containerInfo,nt=!0;break e;case 4:rt=rt.containerInfo,nt=!0;break e}tt=tt.return}tt=!0}if(et.tag===5||et.tag===6){e:for(var at=_,it=et,ot=it;;)if(bj(at,ot),ot.child!==null&&ot.tag!==4)ot.child.return=ot,ot=ot.child;else{if(ot===it)break e;for(;ot.sibling===null;){if(ot.return===null||ot.return===it)break e;ot=ot.return}ot.sibling.return=ot.return,ot=ot.sibling}nt?(at=rt,it=et.stateNode,at.nodeType===8?at.parentNode.removeChild(it):at.removeChild(it)):rt.removeChild(et.stateNode)}else if(et.tag===4){if(et.child!==null){rt=et.stateNode.containerInfo,nt=!0,et.child.return=et,et=et.child;continue}}else if(bj(_,et),et.child!==null){et.child.return=et,et=et.child;continue}if(et===_e)break;for(;et.sibling===null;){if(et.return===null||et.return===_e)return;et=et.return,et.tag===4&&(tt=!1)}et.sibling.return=et.return,et=et.sibling}}function ij(_,_e){switch(_e.tag){case 0:case 11:case 14:case 15:case 22:var et=_e.updateQueue;if(et=et!==null?et.lastEffect:null,et!==null){var tt=et=et.next;do(tt.tag&3)===3&&(_=tt.destroy,tt.destroy=void 0,_!==void 0&&_()),tt=tt.next;while(tt!==et)}return;case 1:return;case 5:if(et=_e.stateNode,et!=null){tt=_e.memoizedProps;var rt=_!==null?_.memoizedProps:tt;_=_e.type;var nt=_e.updateQueue;if(_e.updateQueue=null,nt!==null){for(et[xf]=tt,_==="input"&&tt.type==="radio"&&tt.name!=null&&$a(et,tt),wb(_,rt),_e=wb(_,tt),rt=0;rt<nt.length;rt+=2){var at=nt[rt],it=nt[rt+1];at==="style"?tb(et,it):at==="dangerouslySetInnerHTML"?ob(et,it):at==="children"?pb(et,it):qa(et,at,it,_e)}switch(_){case"input":ab(et,tt);break;case"textarea":ib(et,tt);break;case"select":_=et._wrapperState.wasMultiple,et._wrapperState.wasMultiple=!!tt.multiple,nt=tt.value,nt!=null?fb(et,!!tt.multiple,nt,!1):_!==!!tt.multiple&&(tt.defaultValue!=null?fb(et,!!tt.multiple,tt.defaultValue,!0):fb(et,!!tt.multiple,tt.multiple?[]:"",!1))}}}return;case 6:if(_e.stateNode===null)throw Error(y$2(162));_e.stateNode.nodeValue=_e.memoizedProps;return;case 3:et=_e.stateNode,et.hydrate&&(et.hydrate=!1,Cc(et.containerInfo));return;case 12:return;case 13:_e.memoizedState!==null&&(jj=O(),aj(_e.child,!0)),kj(_e);return;case 19:kj(_e);return;case 17:return;case 23:case 24:aj(_e,_e.memoizedState!==null);return}throw Error(y$2(163))}function kj(_){var _e=_.updateQueue;if(_e!==null){_.updateQueue=null;var et=_.stateNode;et===null&&(et=_.stateNode=new Ui),_e.forEach(function(tt){var rt=lj.bind(null,_,tt);et.has(tt)||(et.add(tt),tt.then(rt,rt))})}}function mj(_,_e){return _!==null&&(_=_.memoizedState,_===null||_.dehydrated!==null)?(_e=_e.memoizedState,_e!==null&&_e.dehydrated===null):!1}var nj=Math.ceil,oj=ra.ReactCurrentDispatcher,pj=ra.ReactCurrentOwner,X$1=0,U=null,Y=null,W=0,qj=0,rj=Bf(0),V=0,sj=null,tj=0,Dg=0,Hi=0,uj=0,vj=null,jj=0,Ji=1/0;function wj(){Ji=O()+500}var Z=null,Qi=!1,Ri=null,Ti=null,xj=!1,yj=null,zj=90,Aj=[],Bj=[],Cj=null,Dj=0,Ej=null,Fj=-1,Gj=0,Hj=0,Ij=null,Jj=!1;function Hg(){return X$1&48?O():Fj!==-1?Fj:Fj=O()}function Ig(_){if(_=_.mode,!(_&2))return 1;if(!(_&4))return eg()===99?1:2;if(Gj===0&&(Gj=tj),kg.transition!==0){Hj!==0&&(Hj=vj!==null?vj.pendingLanes:0),_=Gj;var _e=4186112&~Hj;return _e&=-_e,_e===0&&(_=4186112&~_,_e=_&-_,_e===0&&(_e=8192)),_e}return _=eg(),X$1&4&&_===98?_=Xc(12,Gj):(_=Sc(_),_=Xc(_,Gj)),_}function Jg(_,_e,et){if(50<Dj)throw Dj=0,Ej=null,Error(y$2(185));if(_=Kj(_,_e),_===null)return null;$c(_,_e,et),_===U&&(Hi|=_e,V===4&&Ii(_,W));var tt=eg();_e===1?X$1&8&&!(X$1&48)?Lj(_):(Mj(_,et),X$1===0&&(wj(),ig())):(!(X$1&4)||tt!==98&&tt!==99||(Cj===null?Cj=new Set([_]):Cj.add(_)),Mj(_,et)),vj=_}function Kj(_,_e){_.lanes|=_e;var et=_.alternate;for(et!==null&&(et.lanes|=_e),et=_,_=_.return;_!==null;)_.childLanes|=_e,et=_.alternate,et!==null&&(et.childLanes|=_e),et=_,_=_.return;return et.tag===3?et.stateNode:null}function Mj(_,_e){for(var et=_.callbackNode,tt=_.suspendedLanes,rt=_.pingedLanes,nt=_.expirationTimes,at=_.pendingLanes;0<at;){var it=31-Vc(at),ot=1<<it,st=nt[it];if(st===-1){if(!(ot&tt)||ot&rt){st=_e,Rc(ot);var lt=F$3;nt[it]=10<=lt?st+250:6<=lt?st+5e3:-1}}else st<=_e&&(_.expiredLanes|=ot);at&=~ot}if(tt=Uc(_,_===U?W:0),_e=F$3,tt===0)et!==null&&(et!==Zf&&Pf(et),_.callbackNode=null,_.callbackPriority=0);else{if(et!==null){if(_.callbackPriority===_e)return;et!==Zf&&Pf(et)}_e===15?(et=Lj.bind(null,_),ag===null?(ag=[et],bg=Of(Uf,jg)):ag.push(et),et=Zf):_e===14?et=hg(99,Lj.bind(null,_)):(et=Tc(_e),et=hg(et,Nj.bind(null,_))),_.callbackPriority=_e,_.callbackNode=et}}function Nj(_){if(Fj=-1,Hj=Gj=0,X$1&48)throw Error(y$2(327));var _e=_.callbackNode;if(Oj()&&_.callbackNode!==_e)return null;var et=Uc(_,_===U?W:0);if(et===0)return null;var tt=et,rt=X$1;X$1|=16;var nt=Pj();(U!==_||W!==tt)&&(wj(),Qj(_,tt));do try{Rj();break}catch(it){Sj(_,it)}while(1);if(qg(),oj.current=nt,X$1=rt,Y!==null?tt=0:(U=null,W=0,tt=V),tj&Hi)Qj(_,0);else if(tt!==0){if(tt===2&&(X$1|=64,_.hydrate&&(_.hydrate=!1,qf(_.containerInfo)),et=Wc(_),et!==0&&(tt=Tj(_,et))),tt===1)throw _e=sj,Qj(_,0),Ii(_,et),Mj(_,O()),_e;switch(_.finishedWork=_.current.alternate,_.finishedLanes=et,tt){case 0:case 1:throw Error(y$2(345));case 2:Uj(_);break;case 3:if(Ii(_,et),(et&62914560)===et&&(tt=jj+500-O(),10<tt)){if(Uc(_,0)!==0)break;if(rt=_.suspendedLanes,(rt&et)!==et){Hg(),_.pingedLanes|=_.suspendedLanes&rt;break}_.timeoutHandle=of(Uj.bind(null,_),tt);break}Uj(_);break;case 4:if(Ii(_,et),(et&4186112)===et)break;for(tt=_.eventTimes,rt=-1;0<et;){var at=31-Vc(et);nt=1<<at,at=tt[at],at>rt&&(rt=at),et&=~nt}if(et=rt,et=O()-et,et=(120>et?120:480>et?480:1080>et?1080:1920>et?1920:3e3>et?3e3:4320>et?4320:1960*nj(et/1960))-et,10<et){_.timeoutHandle=of(Uj.bind(null,_),et);break}Uj(_);break;case 5:Uj(_);break;default:throw Error(y$2(329))}}return Mj(_,O()),_.callbackNode===_e?Nj.bind(null,_):null}function Ii(_,_e){for(_e&=~uj,_e&=~Hi,_.suspendedLanes|=_e,_.pingedLanes&=~_e,_=_.expirationTimes;0<_e;){var et=31-Vc(_e),tt=1<<et;_[et]=-1,_e&=~tt}}function Lj(_){if(X$1&48)throw Error(y$2(327));if(Oj(),_===U&&_.expiredLanes&W){var _e=W,et=Tj(_,_e);tj&Hi&&(_e=Uc(_,_e),et=Tj(_,_e))}else _e=Uc(_,0),et=Tj(_,_e);if(_.tag!==0&&et===2&&(X$1|=64,_.hydrate&&(_.hydrate=!1,qf(_.containerInfo)),_e=Wc(_),_e!==0&&(et=Tj(_,_e))),et===1)throw et=sj,Qj(_,0),Ii(_,_e),Mj(_,O()),et;return _.finishedWork=_.current.alternate,_.finishedLanes=_e,Uj(_),Mj(_,O()),null}function Vj(){if(Cj!==null){var _=Cj;Cj=null,_.forEach(function(_e){_e.expiredLanes|=24&_e.pendingLanes,Mj(_e,O())})}ig()}function Wj(_,_e){var et=X$1;X$1|=1;try{return _(_e)}finally{X$1=et,X$1===0&&(wj(),ig())}}function Xj(_,_e){var et=X$1;X$1&=-2,X$1|=8;try{return _(_e)}finally{X$1=et,X$1===0&&(wj(),ig())}}function ni(_,_e){I$2(rj,qj),qj|=_e,tj|=_e}function Ki(){qj=rj.current,H$1(rj)}function Qj(_,_e){_.finishedWork=null,_.finishedLanes=0;var et=_.timeoutHandle;if(et!==-1&&(_.timeoutHandle=-1,pf(et)),Y!==null)for(et=Y.return;et!==null;){var tt=et;switch(tt.tag){case 1:tt=tt.type.childContextTypes,tt!=null&&Gf();break;case 3:fh(),H$1(N$1),H$1(M$4),uh();break;case 5:hh(tt);break;case 4:fh();break;case 13:H$1(P$1);break;case 19:H$1(P$1);break;case 10:rg(tt);break;case 23:case 24:Ki()}et=et.return}U=_,Y=Tg(_.current,null),W=qj=tj=_e,V=0,sj=null,uj=Hi=Dg=0}function Sj(_,_e){do{var et=Y;try{if(qg(),vh.current=Gh,yh){for(var tt=R.memoizedState;tt!==null;){var rt=tt.queue;rt!==null&&(rt.pending=null),tt=tt.next}yh=!1}if(xh=0,T$3=S$2=R=null,zh=!1,pj.current=null,et===null||et.return===null){V=1,sj=_e,Y=null;break}e:{var nt=_,at=et.return,it=et,ot=_e;if(_e=W,it.flags|=2048,it.firstEffect=it.lastEffect=null,ot!==null&&typeof ot=="object"&&typeof ot.then=="function"){var st=ot;if(!(it.mode&2)){var lt=it.alternate;lt?(it.updateQueue=lt.updateQueue,it.memoizedState=lt.memoizedState,it.lanes=lt.lanes):(it.updateQueue=null,it.memoizedState=null)}var gt=(P$1.current&1)!==0,ct=at;do{var wt;if(wt=ct.tag===13){var Tt=ct.memoizedState;if(Tt!==null)wt=Tt.dehydrated!==null;else{var Rt=ct.memoizedProps;wt=Rt.fallback===void 0?!1:Rt.unstable_avoidThisFallback!==!0?!0:!gt}}if(wt){var ht=ct.updateQueue;if(ht===null){var ut=new Set;ut.add(st),ct.updateQueue=ut}else ht.add(st);if(!(ct.mode&2)){if(ct.flags|=64,it.flags|=16384,it.flags&=-2981,it.tag===1)if(it.alternate===null)it.tag=17;else{var ft=zg(-1,1);ft.tag=2,Ag(it,ft)}it.lanes|=1;break e}ot=void 0,it=_e;var yt=nt.pingCache;if(yt===null?(yt=nt.pingCache=new Oi,ot=new Set,yt.set(st,ot)):(ot=yt.get(st),ot===void 0&&(ot=new Set,yt.set(st,ot))),!ot.has(it)){ot.add(it);var xt=Yj.bind(null,nt,st,it);st.then(xt,xt)}ct.flags|=4096,ct.lanes=_e;break e}ct=ct.return}while(ct!==null);ot=Error((Ra(it.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}V!==5&&(V=2),ot=Mi(ot,it),ct=at;do{switch(ct.tag){case 3:nt=ot,ct.flags|=4096,_e&=-_e,ct.lanes|=_e;var Ct=Pi(ct,nt,_e);Bg(ct,Ct);break e;case 1:nt=ot;var pt=ct.type,dt=ct.stateNode;if(!(ct.flags&64)&&(typeof pt.getDerivedStateFromError=="function"||dt!==null&&typeof dt.componentDidCatch=="function"&&(Ti===null||!Ti.has(dt)))){ct.flags|=4096,_e&=-_e,ct.lanes|=_e;var vt=Si(ct,nt,_e);Bg(ct,vt);break e}}ct=ct.return}while(ct!==null)}Zj(et)}catch(St){_e=St,Y===et&&et!==null&&(Y=et=et.return);continue}break}while(1)}function Pj(){var _=oj.current;return oj.current=Gh,_===null?Gh:_}function Tj(_,_e){var et=X$1;X$1|=16;var tt=Pj();U===_&&W===_e||Qj(_,_e);do try{ak();break}catch(rt){Sj(_,rt)}while(1);if(qg(),X$1=et,oj.current=tt,Y!==null)throw Error(y$2(261));return U=null,W=0,V}function ak(){for(;Y!==null;)bk(Y)}function Rj(){for(;Y!==null&&!Qf();)bk(Y)}function bk(_){var _e=ck(_.alternate,_,qj);_.memoizedProps=_.pendingProps,_e===null?Zj(_):Y=_e,pj.current=null}function Zj(_){var _e=_;do{var et=_e.alternate;if(_=_e.return,_e.flags&2048){if(et=Li(_e),et!==null){et.flags&=2047,Y=et;return}_!==null&&(_.firstEffect=_.lastEffect=null,_.flags|=2048)}else{if(et=Gi(et,_e,qj),et!==null){Y=et;return}if(et=_e,et.tag!==24&&et.tag!==23||et.memoizedState===null||qj&1073741824||!(et.mode&4)){for(var tt=0,rt=et.child;rt!==null;)tt|=rt.lanes|rt.childLanes,rt=rt.sibling;et.childLanes=tt}_!==null&&!(_.flags&2048)&&(_.firstEffect===null&&(_.firstEffect=_e.firstEffect),_e.lastEffect!==null&&(_.lastEffect!==null&&(_.lastEffect.nextEffect=_e.firstEffect),_.lastEffect=_e.lastEffect),1<_e.flags&&(_.lastEffect!==null?_.lastEffect.nextEffect=_e:_.firstEffect=_e,_.lastEffect=_e))}if(_e=_e.sibling,_e!==null){Y=_e;return}Y=_e=_}while(_e!==null);V===0&&(V=5)}function Uj(_){var _e=eg();return gg(99,dk.bind(null,_,_e)),null}function dk(_,_e){do Oj();while(yj!==null);if(X$1&48)throw Error(y$2(327));var et=_.finishedWork;if(et===null)return null;if(_.finishedWork=null,_.finishedLanes=0,et===_.current)throw Error(y$2(177));_.callbackNode=null;var tt=et.lanes|et.childLanes,rt=tt,nt=_.pendingLanes&~rt;_.pendingLanes=rt,_.suspendedLanes=0,_.pingedLanes=0,_.expiredLanes&=rt,_.mutableReadLanes&=rt,_.entangledLanes&=rt,rt=_.entanglements;for(var at=_.eventTimes,it=_.expirationTimes;0<nt;){var ot=31-Vc(nt),st=1<<ot;rt[ot]=0,at[ot]=-1,it[ot]=-1,nt&=~st}if(Cj!==null&&!(tt&24)&&Cj.has(_)&&Cj.delete(_),_===U&&(Y=U=null,W=0),1<et.flags?et.lastEffect!==null?(et.lastEffect.nextEffect=et,tt=et.firstEffect):tt=et:tt=et.firstEffect,tt!==null){if(rt=X$1,X$1|=32,pj.current=null,kf=fd,at=Ne$1(),Oe(at)){if("selectionStart"in at)it={start:at.selectionStart,end:at.selectionEnd};else e:if(it=(it=at.ownerDocument)&&it.defaultView||window,(st=it.getSelection&&it.getSelection())&&st.rangeCount!==0){it=st.anchorNode,nt=st.anchorOffset,ot=st.focusNode,st=st.focusOffset;try{it.nodeType,ot.nodeType}catch{it=null;break e}var lt=0,gt=-1,ct=-1,wt=0,Tt=0,Rt=at,ht=null;t:for(;;){for(var ut;Rt!==it||nt!==0&&Rt.nodeType!==3||(gt=lt+nt),Rt!==ot||st!==0&&Rt.nodeType!==3||(ct=lt+st),Rt.nodeType===3&&(lt+=Rt.nodeValue.length),(ut=Rt.firstChild)!==null;)ht=Rt,Rt=ut;for(;;){if(Rt===at)break t;if(ht===it&&++wt===nt&&(gt=lt),ht===ot&&++Tt===st&&(ct=lt),(ut=Rt.nextSibling)!==null)break;Rt=ht,ht=Rt.parentNode}Rt=ut}it=gt===-1||ct===-1?null:{start:gt,end:ct}}else it=null;it=it||{start:0,end:0}}else it=null;lf={focusedElem:at,selectionRange:it},fd=!1,Ij=null,Jj=!1,Z=tt;do try{ek()}catch(St){if(Z===null)throw Error(y$2(330));Wi(Z,St),Z=Z.nextEffect}while(Z!==null);Ij=null,Z=tt;do try{for(at=_;Z!==null;){var ft=Z.flags;if(ft&16&&pb(Z.stateNode,""),ft&128){var yt=Z.alternate;if(yt!==null){var xt=yt.ref;xt!==null&&(typeof xt=="function"?xt(null):xt.current=null)}}switch(ft&1038){case 2:fj(Z),Z.flags&=-3;break;case 6:fj(Z),Z.flags&=-3,ij(Z.alternate,Z);break;case 1024:Z.flags&=-1025;break;case 1028:Z.flags&=-1025,ij(Z.alternate,Z);break;case 4:ij(Z.alternate,Z);break;case 8:it=Z,cj(at,it);var Ct=it.alternate;dj(it),Ct!==null&&dj(Ct)}Z=Z.nextEffect}}catch(St){if(Z===null)throw Error(y$2(330));Wi(Z,St),Z=Z.nextEffect}while(Z!==null);if(xt=lf,yt=Ne$1(),ft=xt.focusedElem,at=xt.selectionRange,yt!==ft&&ft&&ft.ownerDocument&&Me(ft.ownerDocument.documentElement,ft)){for(at!==null&&Oe(ft)&&(yt=at.start,xt=at.end,xt===void 0&&(xt=yt),"selectionStart"in ft?(ft.selectionStart=yt,ft.selectionEnd=Math.min(xt,ft.value.length)):(xt=(yt=ft.ownerDocument||document)&&yt.defaultView||window,xt.getSelection&&(xt=xt.getSelection(),it=ft.textContent.length,Ct=Math.min(at.start,it),at=at.end===void 0?Ct:Math.min(at.end,it),!xt.extend&&Ct>at&&(it=at,at=Ct,Ct=it),it=Le(ft,Ct),nt=Le(ft,at),it&&nt&&(xt.rangeCount!==1||xt.anchorNode!==it.node||xt.anchorOffset!==it.offset||xt.focusNode!==nt.node||xt.focusOffset!==nt.offset)&&(yt=yt.createRange(),yt.setStart(it.node,it.offset),xt.removeAllRanges(),Ct>at?(xt.addRange(yt),xt.extend(nt.node,nt.offset)):(yt.setEnd(nt.node,nt.offset),xt.addRange(yt)))))),yt=[],xt=ft;xt=xt.parentNode;)xt.nodeType===1&&yt.push({element:xt,left:xt.scrollLeft,top:xt.scrollTop});for(typeof ft.focus=="function"&&ft.focus(),ft=0;ft<yt.length;ft++)xt=yt[ft],xt.element.scrollLeft=xt.left,xt.element.scrollTop=xt.top}fd=!!kf,lf=kf=null,_.current=et,Z=tt;do try{for(ft=_;Z!==null;){var pt=Z.flags;if(pt&36&&Yi(ft,Z.alternate,Z),pt&128){yt=void 0;var dt=Z.ref;if(dt!==null){var vt=Z.stateNode;switch(Z.tag){case 5:yt=vt;break;default:yt=vt}typeof dt=="function"?dt(yt):dt.current=yt}}Z=Z.nextEffect}}catch(St){if(Z===null)throw Error(y$2(330));Wi(Z,St),Z=Z.nextEffect}while(Z!==null);Z=null,$f(),X$1=rt}else _.current=et;if(xj)xj=!1,yj=_,zj=_e;else for(Z=tt;Z!==null;)_e=Z.nextEffect,Z.nextEffect=null,Z.flags&8&&(pt=Z,pt.sibling=null,pt.stateNode=null),Z=_e;if(tt=_.pendingLanes,tt===0&&(Ti=null),tt===1?_===Ej?Dj++:(Dj=0,Ej=_):Dj=0,et=et.stateNode,Mf&&typeof Mf.onCommitFiberRoot=="function")try{Mf.onCommitFiberRoot(Lf,et,void 0,(et.current.flags&64)===64)}catch{}if(Mj(_,O()),Qi)throw Qi=!1,_=Ri,Ri=null,_;return X$1&8||ig(),null}function ek(){for(;Z!==null;){var _=Z.alternate;Jj||Ij===null||(Z.flags&8?dc(Z,Ij)&&(Jj=!0):Z.tag===13&&mj(_,Z)&&dc(Z,Ij)&&(Jj=!0));var _e=Z.flags;_e&256&&Xi(_,Z),!(_e&512)||xj||(xj=!0,hg(97,function(){return Oj(),null})),Z=Z.nextEffect}}function Oj(){if(zj!==90){var _=97<zj?97:zj;return zj=90,gg(_,fk)}return!1}function $i(_,_e){Aj.push(_e,_),xj||(xj=!0,hg(97,function(){return Oj(),null}))}function Zi(_,_e){Bj.push(_e,_),xj||(xj=!0,hg(97,function(){return Oj(),null}))}function fk(){if(yj===null)return!1;var _=yj;if(yj=null,X$1&48)throw Error(y$2(331));var _e=X$1;X$1|=32;var et=Bj;Bj=[];for(var tt=0;tt<et.length;tt+=2){var rt=et[tt],nt=et[tt+1],at=rt.destroy;if(rt.destroy=void 0,typeof at=="function")try{at()}catch(ot){if(nt===null)throw Error(y$2(330));Wi(nt,ot)}}for(et=Aj,Aj=[],tt=0;tt<et.length;tt+=2){rt=et[tt],nt=et[tt+1];try{var it=rt.create;rt.destroy=it()}catch(ot){if(nt===null)throw Error(y$2(330));Wi(nt,ot)}}for(it=_.current.firstEffect;it!==null;)_=it.nextEffect,it.nextEffect=null,it.flags&8&&(it.sibling=null,it.stateNode=null),it=_;return X$1=_e,ig(),!0}function gk(_,_e,et){_e=Mi(et,_e),_e=Pi(_,_e,1),Ag(_,_e),_e=Hg(),_=Kj(_,1),_!==null&&($c(_,1,_e),Mj(_,_e))}function Wi(_,_e){if(_.tag===3)gk(_,_,_e);else for(var et=_.return;et!==null;){if(et.tag===3){gk(et,_,_e);break}else if(et.tag===1){var tt=et.stateNode;if(typeof et.type.getDerivedStateFromError=="function"||typeof tt.componentDidCatch=="function"&&(Ti===null||!Ti.has(tt))){_=Mi(_e,_);var rt=Si(et,_,1);if(Ag(et,rt),rt=Hg(),et=Kj(et,1),et!==null)$c(et,1,rt),Mj(et,rt);else if(typeof tt.componentDidCatch=="function"&&(Ti===null||!Ti.has(tt)))try{tt.componentDidCatch(_e,_)}catch{}break}}et=et.return}}function Yj(_,_e,et){var tt=_.pingCache;tt!==null&&tt.delete(_e),_e=Hg(),_.pingedLanes|=_.suspendedLanes&et,U===_&&(W&et)===et&&(V===4||V===3&&(W&62914560)===W&&500>O()-jj?Qj(_,0):uj|=et),Mj(_,_e)}function lj(_,_e){var et=_.stateNode;et!==null&&et.delete(_e),_e=0,_e===0&&(_e=_.mode,_e&2?_e&4?(Gj===0&&(Gj=tj),_e=Yc(62914560&~Gj),_e===0&&(_e=4194304)):_e=eg()===99?1:2:_e=1),et=Hg(),_=Kj(_,_e),_!==null&&($c(_,_e,et),Mj(_,et))}var ck;ck=function(_,_e,et){var tt=_e.lanes;if(_!==null)if(_.memoizedProps!==_e.pendingProps||N$1.current)ug=!0;else if(et&tt)ug=!!(_.flags&16384);else{switch(ug=!1,_e.tag){case 3:ri(_e),sh();break;case 5:gh(_e);break;case 1:Ff(_e.type)&&Jf(_e);break;case 4:eh(_e,_e.stateNode.containerInfo);break;case 10:tt=_e.memoizedProps.value;var rt=_e.type._context;I$2(mg,rt._currentValue),rt._currentValue=tt;break;case 13:if(_e.memoizedState!==null)return et&_e.child.childLanes?ti(_,_e,et):(I$2(P$1,P$1.current&1),_e=hi$1(_,_e,et),_e!==null?_e.sibling:null);I$2(P$1,P$1.current&1);break;case 19:if(tt=(et&_e.childLanes)!==0,_.flags&64){if(tt)return Ai(_,_e,et);_e.flags|=64}if(rt=_e.memoizedState,rt!==null&&(rt.rendering=null,rt.tail=null,rt.lastEffect=null),I$2(P$1,P$1.current),tt)break;return null;case 23:case 24:return _e.lanes=0,mi(_,_e,et)}return hi$1(_,_e,et)}else ug=!1;switch(_e.lanes=0,_e.tag){case 2:if(tt=_e.type,_!==null&&(_.alternate=null,_e.alternate=null,_e.flags|=2),_=_e.pendingProps,rt=Ef(_e,M$4.current),tg(_e,et),rt=Ch(null,_e,tt,_,rt,et),_e.flags|=1,typeof rt=="object"&&rt!==null&&typeof rt.render=="function"&&rt.$$typeof===void 0){if(_e.tag=1,_e.memoizedState=null,_e.updateQueue=null,Ff(tt)){var nt=!0;Jf(_e)}else nt=!1;_e.memoizedState=rt.state!==null&&rt.state!==void 0?rt.state:null,xg(_e);var at=tt.getDerivedStateFromProps;typeof at=="function"&&Gg(_e,tt,at,_),rt.updater=Kg,_e.stateNode=rt,rt._reactInternals=_e,Og(_e,tt,_,et),_e=qi(null,_e,tt,!0,nt,et)}else _e.tag=0,fi(null,_e,rt,et),_e=_e.child;return _e;case 16:rt=_e.elementType;e:{switch(_!==null&&(_.alternate=null,_e.alternate=null,_e.flags|=2),_=_e.pendingProps,nt=rt._init,rt=nt(rt._payload),_e.type=rt,nt=_e.tag=hk(rt),_=lg(rt,_),nt){case 0:_e=li(null,_e,rt,_,et);break e;case 1:_e=pi(null,_e,rt,_,et);break e;case 11:_e=gi(null,_e,rt,_,et);break e;case 14:_e=ii(null,_e,rt,lg(rt.type,_),tt,et);break e}throw Error(y$2(306,rt,""))}return _e;case 0:return tt=_e.type,rt=_e.pendingProps,rt=_e.elementType===tt?rt:lg(tt,rt),li(_,_e,tt,rt,et);case 1:return tt=_e.type,rt=_e.pendingProps,rt=_e.elementType===tt?rt:lg(tt,rt),pi(_,_e,tt,rt,et);case 3:if(ri(_e),tt=_e.updateQueue,_===null||tt===null)throw Error(y$2(282));if(tt=_e.pendingProps,rt=_e.memoizedState,rt=rt!==null?rt.element:null,yg(_,_e),Cg(_e,tt,null,et),tt=_e.memoizedState.element,tt===rt)sh(),_e=hi$1(_,_e,et);else{if(rt=_e.stateNode,(nt=rt.hydrate)&&(kh=rf(_e.stateNode.containerInfo.firstChild),jh=_e,nt=lh=!0),nt){if(_=rt.mutableSourceEagerHydrationData,_!=null)for(rt=0;rt<_.length;rt+=2)nt=_[rt],nt._workInProgressVersionPrimary=_[rt+1],th.push(nt);for(et=Zg(_e,null,tt,et),_e.child=et;et;)et.flags=et.flags&-3|1024,et=et.sibling}else fi(_,_e,tt,et),sh();_e=_e.child}return _e;case 5:return gh(_e),_===null&&ph(_e),tt=_e.type,rt=_e.pendingProps,nt=_!==null?_.memoizedProps:null,at=rt.children,nf(tt,rt)?at=null:nt!==null&&nf(tt,nt)&&(_e.flags|=16),oi(_,_e),fi(_,_e,at,et),_e.child;case 6:return _===null&&ph(_e),null;case 13:return ti(_,_e,et);case 4:return eh(_e,_e.stateNode.containerInfo),tt=_e.pendingProps,_===null?_e.child=Yg(_e,null,tt,et):fi(_,_e,tt,et),_e.child;case 11:return tt=_e.type,rt=_e.pendingProps,rt=_e.elementType===tt?rt:lg(tt,rt),gi(_,_e,tt,rt,et);case 7:return fi(_,_e,_e.pendingProps,et),_e.child;case 8:return fi(_,_e,_e.pendingProps.children,et),_e.child;case 12:return fi(_,_e,_e.pendingProps.children,et),_e.child;case 10:e:{tt=_e.type._context,rt=_e.pendingProps,at=_e.memoizedProps,nt=rt.value;var it=_e.type._context;if(I$2(mg,it._currentValue),it._currentValue=nt,at!==null)if(it=at.value,nt=He$1(it,nt)?0:(typeof tt._calculateChangedBits=="function"?tt._calculateChangedBits(it,nt):1073741823)|0,nt===0){if(at.children===rt.children&&!N$1.current){_e=hi$1(_,_e,et);break e}}else for(it=_e.child,it!==null&&(it.return=_e);it!==null;){var ot=it.dependencies;if(ot!==null){at=it.child;for(var st=ot.firstContext;st!==null;){if(st.context===tt&&st.observedBits&nt){it.tag===1&&(st=zg(-1,et&-et),st.tag=2,Ag(it,st)),it.lanes|=et,st=it.alternate,st!==null&&(st.lanes|=et),sg(it.return,et),ot.lanes|=et;break}st=st.next}}else at=it.tag===10&&it.type===_e.type?null:it.child;if(at!==null)at.return=it;else for(at=it;at!==null;){if(at===_e){at=null;break}if(it=at.sibling,it!==null){it.return=at.return,at=it;break}at=at.return}it=at}fi(_,_e,rt.children,et),_e=_e.child}return _e;case 9:return rt=_e.type,nt=_e.pendingProps,tt=nt.children,tg(_e,et),rt=vg(rt,nt.unstable_observedBits),tt=tt(rt),_e.flags|=1,fi(_,_e,tt,et),_e.child;case 14:return rt=_e.type,nt=lg(rt,_e.pendingProps),nt=lg(rt.type,nt),ii(_,_e,rt,nt,tt,et);case 15:return ki(_,_e,_e.type,_e.pendingProps,tt,et);case 17:return tt=_e.type,rt=_e.pendingProps,rt=_e.elementType===tt?rt:lg(tt,rt),_!==null&&(_.alternate=null,_e.alternate=null,_e.flags|=2),_e.tag=1,Ff(tt)?(_=!0,Jf(_e)):_=!1,tg(_e,et),Mg(_e,tt,rt),Og(_e,tt,rt,et),qi(null,_e,tt,!0,_,et);case 19:return Ai(_,_e,et);case 23:return mi(_,_e,et);case 24:return mi(_,_e,et)}throw Error(y$2(156,_e.tag))};function ik(_,_e,et,tt){this.tag=_,this.key=et,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=_e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=tt,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function nh(_,_e,et,tt){return new ik(_,_e,et,tt)}function ji(_){return _=_.prototype,!(!_||!_.isReactComponent)}function hk(_){if(typeof _=="function")return ji(_)?1:0;if(_!=null){if(_=_.$$typeof,_===Aa)return 11;if(_===Da)return 14}return 2}function Tg(_,_e){var et=_.alternate;return et===null?(et=nh(_.tag,_e,_.key,_.mode),et.elementType=_.elementType,et.type=_.type,et.stateNode=_.stateNode,et.alternate=_,_.alternate=et):(et.pendingProps=_e,et.type=_.type,et.flags=0,et.nextEffect=null,et.firstEffect=null,et.lastEffect=null),et.childLanes=_.childLanes,et.lanes=_.lanes,et.child=_.child,et.memoizedProps=_.memoizedProps,et.memoizedState=_.memoizedState,et.updateQueue=_.updateQueue,_e=_.dependencies,et.dependencies=_e===null?null:{lanes:_e.lanes,firstContext:_e.firstContext},et.sibling=_.sibling,et.index=_.index,et.ref=_.ref,et}function Vg(_,_e,et,tt,rt,nt){var at=2;if(tt=_,typeof _=="function")ji(_)&&(at=1);else if(typeof _=="string")at=5;else e:switch(_){case ua:return Xg(et.children,rt,nt,_e);case Ha:at=8,rt|=16;break;case wa:at=8,rt|=1;break;case xa:return _=nh(12,et,_e,rt|8),_.elementType=xa,_.type=xa,_.lanes=nt,_;case Ba:return _=nh(13,et,_e,rt),_.type=Ba,_.elementType=Ba,_.lanes=nt,_;case Ca:return _=nh(19,et,_e,rt),_.elementType=Ca,_.lanes=nt,_;case Ia:return vi(et,rt,nt,_e);case Ja:return _=nh(24,et,_e,rt),_.elementType=Ja,_.lanes=nt,_;default:if(typeof _=="object"&&_!==null)switch(_.$$typeof){case ya:at=10;break e;case za:at=9;break e;case Aa:at=11;break e;case Da:at=14;break e;case Ea:at=16,tt=null;break e;case Fa:at=22;break e}throw Error(y$2(130,_==null?_:typeof _,""))}return _e=nh(at,et,_e,rt),_e.elementType=_,_e.type=tt,_e.lanes=nt,_e}function Xg(_,_e,et,tt){return _=nh(7,_,tt,_e),_.lanes=et,_}function vi(_,_e,et,tt){return _=nh(23,_,tt,_e),_.elementType=Ia,_.lanes=et,_}function Ug(_,_e,et){return _=nh(6,_,null,_e),_.lanes=et,_}function Wg(_,_e,et){return _e=nh(4,_.children!==null?_.children:[],_.key,_e),_e.lanes=et,_e.stateNode={containerInfo:_.containerInfo,pendingChildren:null,implementation:_.implementation},_e}function jk(_,_e,et){this.tag=_e,this.containerInfo=_,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=et,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Zc(0),this.expirationTimes=Zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zc(0),this.mutableSourceEagerHydrationData=null}function kk(_,_e,et){var tt=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ta,key:tt==null?null:""+tt,children:_,containerInfo:_e,implementation:et}}function lk(_,_e,et,tt){var rt=_e.current,nt=Hg(),at=Ig(rt);e:if(et){et=et._reactInternals;t:{if(Zb(et)!==et||et.tag!==1)throw Error(y$2(170));var it=et;do{switch(it.tag){case 3:it=it.stateNode.context;break t;case 1:if(Ff(it.type)){it=it.stateNode.__reactInternalMemoizedMergedChildContext;break t}}it=it.return}while(it!==null);throw Error(y$2(171))}if(et.tag===1){var ot=et.type;if(Ff(ot)){et=If(et,ot,it);break e}}et=it}else et=Cf;return _e.context===null?_e.context=et:_e.pendingContext=et,_e=zg(nt,at),_e.payload={element:_},tt=tt===void 0?null:tt,tt!==null&&(_e.callback=tt),Ag(rt,_e),Jg(rt,at,nt),at}function mk(_){if(_=_.current,!_.child)return null;switch(_.child.tag){case 5:return _.child.stateNode;default:return _.child.stateNode}}function nk(_,_e){if(_=_.memoizedState,_!==null&&_.dehydrated!==null){var et=_.retryLane;_.retryLane=et!==0&&et<_e?et:_e}}function ok(_,_e){nk(_,_e),(_=_.alternate)&&nk(_,_e)}function pk(){return null}function qk(_,_e,et){var tt=et!=null&&et.hydrationOptions!=null&&et.hydrationOptions.mutableSources||null;if(et=new jk(_,_e,et!=null&&et.hydrate===!0),_e=nh(3,null,null,_e===2?7:_e===1?3:0),et.current=_e,_e.stateNode=et,xg(_e),_[ff]=et.current,cf(_.nodeType===8?_.parentNode:_),tt)for(_=0;_<tt.length;_++){_e=tt[_];var rt=_e._getVersion;rt=rt(_e._source),et.mutableSourceEagerHydrationData==null?et.mutableSourceEagerHydrationData=[_e,rt]:et.mutableSourceEagerHydrationData.push(_e,rt)}this._internalRoot=et}qk.prototype.render=function(_){lk(_,this._internalRoot,null,null)};qk.prototype.unmount=function(){var _=this._internalRoot,_e=_.containerInfo;lk(null,_,null,function(){_e[ff]=null})};function rk(_){return!(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11&&(_.nodeType!==8||_.nodeValue!==" react-mount-point-unstable "))}function sk(_,_e){if(_e||(_e=_?_.nodeType===9?_.documentElement:_.firstChild:null,_e=!(!_e||_e.nodeType!==1||!_e.hasAttribute("data-reactroot"))),!_e)for(var et;et=_.lastChild;)_.removeChild(et);return new qk(_,0,_e?{hydrate:!0}:void 0)}function tk(_,_e,et,tt,rt){var nt=et._reactRootContainer;if(nt){var at=nt._internalRoot;if(typeof rt=="function"){var it=rt;rt=function(){var st=mk(at);it.call(st)}}lk(_e,at,_,rt)}else{if(nt=et._reactRootContainer=sk(et,tt),at=nt._internalRoot,typeof rt=="function"){var ot=rt;rt=function(){var st=mk(at);ot.call(st)}}Xj(function(){lk(_e,at,_,rt)})}return mk(at)}ec=function(_){if(_.tag===13){var _e=Hg();Jg(_,4,_e),ok(_,4)}};fc=function(_){if(_.tag===13){var _e=Hg();Jg(_,67108864,_e),ok(_,67108864)}};gc=function(_){if(_.tag===13){var _e=Hg(),et=Ig(_);Jg(_,et,_e),ok(_,et)}};hc=function(_,_e){return _e()};yb=function(_,_e,et){switch(_e){case"input":if(ab(_,et),_e=et.name,et.type==="radio"&&_e!=null){for(et=_;et.parentNode;)et=et.parentNode;for(et=et.querySelectorAll("input[name="+JSON.stringify(""+_e)+'][type="radio"]'),_e=0;_e<et.length;_e++){var tt=et[_e];if(tt!==_&&tt.form===_.form){var rt=Db(tt);if(!rt)throw Error(y$2(90));Wa(tt),ab(tt,rt)}}}break;case"textarea":ib(_,et);break;case"select":_e=et.value,_e!=null&&fb(_,!!et.multiple,_e,!1)}};Gb=Wj;Hb=function(_,_e,et,tt,rt){var nt=X$1;X$1|=4;try{return gg(98,_.bind(null,_e,et,tt,rt))}finally{X$1=nt,X$1===0&&(wj(),ig())}};Ib=function(){!(X$1&49)&&(Vj(),Oj())};Jb=function(_,_e){var et=X$1;X$1|=2;try{return _(_e)}finally{X$1=et,X$1===0&&(wj(),ig())}};function uk(_,_e){var et=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!rk(_e))throw Error(y$2(200));return kk(_,_e,null,et)}var vk={Events:[Cb,ue,Db,Eb,Fb,Oj,{current:!1}]},wk={findFiberByHostInstance:wc,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},xk={bundleType:wk.bundleType,version:wk.version,rendererPackageName:wk.rendererPackageName,rendererConfig:wk.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ra.ReactCurrentDispatcher,findHostInstanceByFiber:function(_){return _=cc(_),_===null?null:_.stateNode},findFiberByHostInstance:wk.findFiberByHostInstance||pk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yk=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yk.isDisabled&&yk.supportsFiber)try{Lf=yk.inject(xk),Mf=yk}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vk;reactDom_production_min.createPortal=uk;reactDom_production_min.findDOMNode=function(_){if(_==null)return null;if(_.nodeType===1)return _;var _e=_._reactInternals;if(_e===void 0)throw typeof _.render=="function"?Error(y$2(188)):Error(y$2(268,Object.keys(_)));return _=cc(_e),_=_===null?null:_.stateNode,_};reactDom_production_min.flushSync=function(_,_e){var et=X$1;if(et&48)return _(_e);X$1|=1;try{if(_)return gg(99,_.bind(null,_e))}finally{X$1=et,ig()}};reactDom_production_min.hydrate=function(_,_e,et){if(!rk(_e))throw Error(y$2(200));return tk(null,_,_e,!0,et)};reactDom_production_min.render=function(_,_e,et){if(!rk(_e))throw Error(y$2(200));return tk(null,_,_e,!1,et)};reactDom_production_min.unmountComponentAtNode=function(_){if(!rk(_))throw Error(y$2(40));return _._reactRootContainer?(Xj(function(){tk(null,null,_,!1,function(){_._reactRootContainer=null,_[ff]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Wj;reactDom_production_min.unstable_createPortal=function(_,_e){return uk(_,_e,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};reactDom_production_min.unstable_renderSubtreeIntoContainer=function(_,_e,et,tt){if(!rk(et))throw Error(y$2(200));if(_==null||_._reactInternals===void 0)throw Error(y$2(38));return tk(_,_e,et,!1,tt)};reactDom_production_min.version="17.0.2";(function(_){function _e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(_e)}catch(et){console.error(et)}}_e(),_.exports=reactDom_production_min})(reactDom);const ReactDOM=getDefaultExportFromCjs(reactDom.exports);function _setPrototypeOf$1(_,_e){return _setPrototypeOf$1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(tt,rt){return tt.__proto__=rt,tt},_setPrototypeOf$1(_,_e)}function _inheritsLoose$1(_,_e){_.prototype=Object.create(_e.prototype),_.prototype.constructor=_,_setPrototypeOf$1(_,_e)}var propTypes={exports:{}},ReactPropTypesSecret$1="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ReactPropTypesSecret_1=ReactPropTypesSecret$1,ReactPropTypesSecret=ReactPropTypesSecret_1;function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction;var factoryWithThrowingShims=function(){function _(tt,rt,nt,at,it,ot){if(ot!==ReactPropTypesSecret){var st=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw st.name="Invariant Violation",st}}_.isRequired=_;function _e(){return _}var et={array:_,bigint:_,bool:_,func:_,number:_,object:_,string:_,symbol:_,any:_,arrayOf:_e,element:_,elementType:_,instanceOf:_e,node:_,objectOf:_e,oneOf:_e,oneOfType:_e,shape:_e,exact:_e,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return et.PropTypes=et,et};propTypes.exports=factoryWithThrowingShims();function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(_){for(var _e=1;_e<arguments.length;_e++){var et=arguments[_e];for(var tt in et)Object.prototype.hasOwnProperty.call(et,tt)&&(_[tt]=et[tt])}return _},_extends$1.apply(this,arguments)}function isAbsolute(_){return _.charAt(0)==="/"}function spliceOne(_,_e){for(var et=_e,tt=et+1,rt=_.length;tt<rt;et+=1,tt+=1)_[et]=_[tt];_.pop()}function resolvePathname(_,_e){_e===void 0&&(_e="");var et=_&&_.split("/")||[],tt=_e&&_e.split("/")||[],rt=_&&isAbsolute(_),nt=_e&&isAbsolute(_e),at=rt||nt;if(_&&isAbsolute(_)?tt=et:et.length&&(tt.pop(),tt=tt.concat(et)),!tt.length)return"/";var it;if(tt.length){var ot=tt[tt.length-1];it=ot==="."||ot===".."||ot===""}else it=!1;for(var st=0,lt=tt.length;lt>=0;lt--){var gt=tt[lt];gt==="."?spliceOne(tt,lt):gt===".."?(spliceOne(tt,lt),st++):st&&(spliceOne(tt,lt),st--)}if(!at)for(;st--;st)tt.unshift("..");at&&tt[0]!==""&&(!tt[0]||!isAbsolute(tt[0]))&&tt.unshift("");var ct=tt.join("/");return it&&ct.substr(-1)!=="/"&&(ct+="/"),ct}function valueOf(_){return _.valueOf?_.valueOf():Object.prototype.valueOf.call(_)}function valueEqual(_,_e){if(_===_e)return!0;if(_==null||_e==null)return!1;if(Array.isArray(_))return Array.isArray(_e)&&_.length===_e.length&&_.every(function(rt,nt){return valueEqual(rt,_e[nt])});if(typeof _=="object"||typeof _e=="object"){var et=valueOf(_),tt=valueOf(_e);return et!==_||tt!==_e?valueEqual(et,tt):Object.keys(Object.assign({},_,_e)).every(function(rt){return valueEqual(_[rt],_e[rt])})}return!1}var isProduction=!0,prefix="Invariant failed";function invariant(_,_e){if(!_){if(isProduction)throw new Error(prefix);var et=typeof _e=="function"?_e():_e,tt=et?"".concat(prefix,": ").concat(et):prefix;throw new Error(tt)}}function addLeadingSlash$1(_){return _.charAt(0)==="/"?_:"/"+_}function stripLeadingSlash(_){return _.charAt(0)==="/"?_.substr(1):_}function hasBasename(_,_e){return _.toLowerCase().indexOf(_e.toLowerCase())===0&&"/?#".indexOf(_.charAt(_e.length))!==-1}function stripBasename$1(_,_e){return hasBasename(_,_e)?_.substr(_e.length):_}function stripTrailingSlash(_){return _.charAt(_.length-1)==="/"?_.slice(0,-1):_}function parsePath$1(_){var _e=_||"/",et="",tt="",rt=_e.indexOf("#");rt!==-1&&(tt=_e.substr(rt),_e=_e.substr(0,rt));var nt=_e.indexOf("?");return nt!==-1&&(et=_e.substr(nt),_e=_e.substr(0,nt)),{pathname:_e,search:et==="?"?"":et,hash:tt==="#"?"":tt}}function createPath(_){var _e=_.pathname,et=_.search,tt=_.hash,rt=_e||"/";return et&&et!=="?"&&(rt+=et.charAt(0)==="?"?et:"?"+et),tt&&tt!=="#"&&(rt+=tt.charAt(0)==="#"?tt:"#"+tt),rt}function createLocation(_,_e,et,tt){var rt;typeof _=="string"?(rt=parsePath$1(_),rt.state=_e):(rt=_extends$1({},_),rt.pathname===void 0&&(rt.pathname=""),rt.search?rt.search.charAt(0)!=="?"&&(rt.search="?"+rt.search):rt.search="",rt.hash?rt.hash.charAt(0)!=="#"&&(rt.hash="#"+rt.hash):rt.hash="",_e!==void 0&&rt.state===void 0&&(rt.state=_e));try{rt.pathname=decodeURI(rt.pathname)}catch(nt){throw nt instanceof URIError?new URIError('Pathname "'+rt.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):nt}return et&&(rt.key=et),tt?rt.pathname?rt.pathname.charAt(0)!=="/"&&(rt.pathname=resolvePathname(rt.pathname,tt.pathname)):rt.pathname=tt.pathname:rt.pathname||(rt.pathname="/"),rt}function locationsAreEqual(_,_e){return _.pathname===_e.pathname&&_.search===_e.search&&_.hash===_e.hash&&_.key===_e.key&&valueEqual(_.state,_e.state)}function createTransitionManager(){var _=null;function _e(at){return _=at,function(){_===at&&(_=null)}}function et(at,it,ot,st){if(_!=null){var lt=typeof _=="function"?_(at,it):_;typeof lt=="string"?typeof ot=="function"?ot(lt,st):st(!0):st(lt!==!1)}else st(!0)}var tt=[];function rt(at){var it=!0;function ot(){it&&at.apply(void 0,arguments)}return tt.push(ot),function(){it=!1,tt=tt.filter(function(st){return st!==ot})}}function nt(){for(var at=arguments.length,it=new Array(at),ot=0;ot<at;ot++)it[ot]=arguments[ot];tt.forEach(function(st){return st.apply(void 0,it)})}return{setPrompt:_e,confirmTransitionTo:et,appendListener:rt,notifyListeners:nt}}var canUseDOM$1=!!(typeof window<"u"&&window.document&&window.document.createElement);function getConfirmation(_,_e){_e(window.confirm(_))}function supportsHistory(){var _=window.navigator.userAgent;return(_.indexOf("Android 2.")!==-1||_.indexOf("Android 4.0")!==-1)&&_.indexOf("Mobile Safari")!==-1&&_.indexOf("Chrome")===-1&&_.indexOf("Windows Phone")===-1?!1:window.history&&"pushState"in window.history}function supportsPopStateOnHashChange(){return window.navigator.userAgent.indexOf("Trident")===-1}function supportsGoWithoutReloadUsingHash(){return window.navigator.userAgent.indexOf("Firefox")===-1}function isExtraneousPopstateEvent(_){return _.state===void 0&&navigator.userAgent.indexOf("CriOS")===-1}var PopStateEvent="popstate",HashChangeEvent="hashchange";function getHistoryState(){try{return window.history.state||{}}catch{return{}}}function createBrowserHistory(_){_===void 0&&(_={}),canUseDOM$1||invariant(!1);var _e=window.history,et=supportsHistory(),tt=!supportsPopStateOnHashChange(),rt=_,nt=rt.forceRefresh,at=nt===void 0?!1:nt,it=rt.getUserConfirmation,ot=it===void 0?getConfirmation:it,st=rt.keyLength,lt=st===void 0?6:st,gt=_.basename?stripTrailingSlash(addLeadingSlash$1(_.basename)):"";function ct(Lt){var At=Lt||{},$t=At.key,jt=At.state,Nt=window.location,Ft=Nt.pathname,Bt=Nt.search,Ut=Nt.hash,Ht=Ft+Bt+Ut;return gt&&(Ht=stripBasename$1(Ht,gt)),createLocation(Ht,jt,$t)}function wt(){return Math.random().toString(36).substr(2,lt)}var Tt=createTransitionManager();function Rt(Lt){_extends$1(kt,Lt),kt.length=_e.length,Tt.notifyListeners(kt.location,kt.action)}function ht(Lt){isExtraneousPopstateEvent(Lt)||yt(ct(Lt.state))}function ut(){yt(ct(getHistoryState()))}var ft=!1;function yt(Lt){if(ft)ft=!1,Rt();else{var At="POP";Tt.confirmTransitionTo(Lt,At,ot,function($t){$t?Rt({action:At,location:Lt}):xt(Lt)})}}function xt(Lt){var At=kt.location,$t=pt.indexOf(At.key);$t===-1&&($t=0);var jt=pt.indexOf(Lt.key);jt===-1&&(jt=0);var Nt=$t-jt;Nt&&(ft=!0,Et(Nt))}var Ct=ct(getHistoryState()),pt=[Ct.key];function dt(Lt){return gt+createPath(Lt)}function vt(Lt,At){var $t="PUSH",jt=createLocation(Lt,At,wt(),kt.location);Tt.confirmTransitionTo(jt,$t,ot,function(Nt){if(!!Nt){var Ft=dt(jt),Bt=jt.key,Ut=jt.state;if(et)if(_e.pushState({key:Bt,state:Ut},null,Ft),at)window.location.href=Ft;else{var Ht=pt.indexOf(kt.location.key),Kt=pt.slice(0,Ht+1);Kt.push(jt.key),pt=Kt,Rt({action:$t,location:jt})}else window.location.href=Ft}})}function St(Lt,At){var $t="REPLACE",jt=createLocation(Lt,At,wt(),kt.location);Tt.confirmTransitionTo(jt,$t,ot,function(Nt){if(!!Nt){var Ft=dt(jt),Bt=jt.key,Ut=jt.state;if(et)if(_e.replaceState({key:Bt,state:Ut},null,Ft),at)window.location.replace(Ft);else{var Ht=pt.indexOf(kt.location.key);Ht!==-1&&(pt[Ht]=jt.key),Rt({action:$t,location:jt})}else window.location.replace(Ft)}})}function Et(Lt){_e.go(Lt)}function mt(){Et(-1)}function _t(){Et(1)}var bt=0;function Ot(Lt){bt+=Lt,bt===1&&Lt===1?(window.addEventListener(PopStateEvent,ht),tt&&window.addEventListener(HashChangeEvent,ut)):bt===0&&(window.removeEventListener(PopStateEvent,ht),tt&&window.removeEventListener(HashChangeEvent,ut))}var Pt=!1;function Dt(Lt){Lt===void 0&&(Lt=!1);var At=Tt.setPrompt(Lt);return Pt||(Ot(1),Pt=!0),function(){return Pt&&(Pt=!1,Ot(-1)),At()}}function It(Lt){var At=Tt.appendListener(Lt);return Ot(1),function(){Ot(-1),At()}}var kt={length:_e.length,action:"POP",location:Ct,createHref:dt,push:vt,replace:St,go:Et,goBack:mt,goForward:_t,block:Dt,listen:It};return kt}var HashChangeEvent$1="hashchange",HashPathCoders={hashbang:{encodePath:function(_e){return _e.charAt(0)==="!"?_e:"!/"+stripLeadingSlash(_e)},decodePath:function(_e){return _e.charAt(0)==="!"?_e.substr(1):_e}},noslash:{encodePath:stripLeadingSlash,decodePath:addLeadingSlash$1},slash:{encodePath:addLeadingSlash$1,decodePath:addLeadingSlash$1}};function stripHash(_){var _e=_.indexOf("#");return _e===-1?_:_.slice(0,_e)}function getHashPath(){var _=window.location.href,_e=_.indexOf("#");return _e===-1?"":_.substring(_e+1)}function pushHashPath(_){window.location.hash=_}function replaceHashPath(_){window.location.replace(stripHash(window.location.href)+"#"+_)}function createHashHistory(_){_===void 0&&(_={}),canUseDOM$1||invariant(!1);var _e=window.history;supportsGoWithoutReloadUsingHash();var et=_,tt=et.getUserConfirmation,rt=tt===void 0?getConfirmation:tt,nt=et.hashType,at=nt===void 0?"slash":nt,it=_.basename?stripTrailingSlash(addLeadingSlash$1(_.basename)):"",ot=HashPathCoders[at],st=ot.encodePath,lt=ot.decodePath;function gt(){var At=lt(getHashPath());return it&&(At=stripBasename$1(At,it)),createLocation(At)}var ct=createTransitionManager();function wt(At){_extends$1(Lt,At),Lt.length=_e.length,ct.notifyListeners(Lt.location,Lt.action)}var Tt=!1,Rt=null;function ht(At,$t){return At.pathname===$t.pathname&&At.search===$t.search&&At.hash===$t.hash}function ut(){var At=getHashPath(),$t=st(At);if(At!==$t)replaceHashPath($t);else{var jt=gt(),Nt=Lt.location;if(!Tt&&ht(Nt,jt)||Rt===createPath(jt))return;Rt=null,ft(jt)}}function ft(At){if(Tt)Tt=!1,wt();else{var $t="POP";ct.confirmTransitionTo(At,$t,rt,function(jt){jt?wt({action:$t,location:At}):yt(At)})}}function yt(At){var $t=Lt.location,jt=dt.lastIndexOf(createPath($t));jt===-1&&(jt=0);var Nt=dt.lastIndexOf(createPath(At));Nt===-1&&(Nt=0);var Ft=jt-Nt;Ft&&(Tt=!0,mt(Ft))}var xt=getHashPath(),Ct=st(xt);xt!==Ct&&replaceHashPath(Ct);var pt=gt(),dt=[createPath(pt)];function vt(At){var $t=document.querySelector("base"),jt="";return $t&&$t.getAttribute("href")&&(jt=stripHash(window.location.href)),jt+"#"+st(it+createPath(At))}function St(At,$t){var jt="PUSH",Nt=createLocation(At,void 0,void 0,Lt.location);ct.confirmTransitionTo(Nt,jt,rt,function(Ft){if(!!Ft){var Bt=createPath(Nt),Ut=st(it+Bt),Ht=getHashPath()!==Ut;if(Ht){Rt=Bt,pushHashPath(Ut);var Kt=dt.lastIndexOf(createPath(Lt.location)),Gt=dt.slice(0,Kt+1);Gt.push(Bt),dt=Gt,wt({action:jt,location:Nt})}else wt()}})}function Et(At,$t){var jt="REPLACE",Nt=createLocation(At,void 0,void 0,Lt.location);ct.confirmTransitionTo(Nt,jt,rt,function(Ft){if(!!Ft){var Bt=createPath(Nt),Ut=st(it+Bt),Ht=getHashPath()!==Ut;Ht&&(Rt=Bt,replaceHashPath(Ut));var Kt=dt.indexOf(createPath(Lt.location));Kt!==-1&&(dt[Kt]=Bt),wt({action:jt,location:Nt})}})}function mt(At){_e.go(At)}function _t(){mt(-1)}function bt(){mt(1)}var Ot=0;function Pt(At){Ot+=At,Ot===1&&At===1?window.addEventListener(HashChangeEvent$1,ut):Ot===0&&window.removeEventListener(HashChangeEvent$1,ut)}var Dt=!1;function It(At){At===void 0&&(At=!1);var $t=ct.setPrompt(At);return Dt||(Pt(1),Dt=!0),function(){return Dt&&(Dt=!1,Pt(-1)),$t()}}function kt(At){var $t=ct.appendListener(At);return Pt(1),function(){Pt(-1),$t()}}var Lt={length:_e.length,action:"POP",location:pt,createHref:vt,push:St,replace:Et,go:mt,goBack:_t,goForward:bt,block:It,listen:kt};return Lt}function clamp(_,_e,et){return Math.min(Math.max(_,_e),et)}function createMemoryHistory(_){_===void 0&&(_={});var _e=_,et=_e.getUserConfirmation,tt=_e.initialEntries,rt=tt===void 0?["/"]:tt,nt=_e.initialIndex,at=nt===void 0?0:nt,it=_e.keyLength,ot=it===void 0?6:it,st=createTransitionManager();function lt(vt){_extends$1(dt,vt),dt.length=dt.entries.length,st.notifyListeners(dt.location,dt.action)}function gt(){return Math.random().toString(36).substr(2,ot)}var ct=clamp(at,0,rt.length-1),wt=rt.map(function(vt){return typeof vt=="string"?createLocation(vt,void 0,gt()):createLocation(vt,void 0,vt.key||gt())}),Tt=createPath;function Rt(vt,St){var Et="PUSH",mt=createLocation(vt,St,gt(),dt.location);st.confirmTransitionTo(mt,Et,et,function(_t){if(!!_t){var bt=dt.index,Ot=bt+1,Pt=dt.entries.slice(0);Pt.length>Ot?Pt.splice(Ot,Pt.length-Ot,mt):Pt.push(mt),lt({action:Et,location:mt,index:Ot,entries:Pt})}})}function ht(vt,St){var Et="REPLACE",mt=createLocation(vt,St,gt(),dt.location);st.confirmTransitionTo(mt,Et,et,function(_t){!_t||(dt.entries[dt.index]=mt,lt({action:Et,location:mt}))})}function ut(vt){var St=clamp(dt.index+vt,0,dt.entries.length-1),Et="POP",mt=dt.entries[St];st.confirmTransitionTo(mt,Et,et,function(_t){_t?lt({action:Et,location:mt,index:St}):lt()})}function ft(){ut(-1)}function yt(){ut(1)}function xt(vt){var St=dt.index+vt;return St>=0&&St<dt.entries.length}function Ct(vt){return vt===void 0&&(vt=!1),st.setPrompt(vt)}function pt(vt){return st.appendListener(vt)}var dt={length:wt.length,action:"POP",location:wt[ct],index:ct,entries:wt,createHref:Tt,push:Rt,replace:ht,go:ut,goBack:ft,goForward:yt,canGo:xt,block:Ct,listen:pt};return dt}var pathToRegexp$1={exports:{}},isarray$1=Array.isArray||function(_){return Object.prototype.toString.call(_)=="[object Array]"},isarray=isarray$1;pathToRegexp$1.exports=pathToRegexp;pathToRegexp$1.exports.parse=parse;pathToRegexp$1.exports.compile=compile;pathToRegexp$1.exports.tokensToFunction=tokensToFunction;pathToRegexp$1.exports.tokensToRegExp=tokensToRegExp;var PATH_REGEXP=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function parse(_,_e){for(var et=[],tt=0,rt=0,nt="",at=_e&&_e.delimiter||"/",it;(it=PATH_REGEXP.exec(_))!=null;){var ot=it[0],st=it[1],lt=it.index;if(nt+=_.slice(rt,lt),rt=lt+ot.length,st){nt+=st[1];continue}var gt=_[rt],ct=it[2],wt=it[3],Tt=it[4],Rt=it[5],ht=it[6],ut=it[7];nt&&(et.push(nt),nt="");var ft=ct!=null&&gt!=null&&gt!==ct,yt=ht==="+"||ht==="*",xt=ht==="?"||ht==="*",Ct=it[2]||at,pt=Tt||Rt;et.push({name:wt||tt++,prefix:ct||"",delimiter:Ct,optional:xt,repeat:yt,partial:ft,asterisk:!!ut,pattern:pt?escapeGroup(pt):ut?".*":"[^"+escapeString(Ct)+"]+?"})}return rt<_.length&&(nt+=_.substr(rt)),nt&&et.push(nt),et}function compile(_,_e){return tokensToFunction(parse(_,_e),_e)}function encodeURIComponentPretty(_){return encodeURI(_).replace(/[\/?#]/g,function(_e){return"%"+_e.charCodeAt(0).toString(16).toUpperCase()})}function encodeAsterisk(_){return encodeURI(_).replace(/[?#]/g,function(_e){return"%"+_e.charCodeAt(0).toString(16).toUpperCase()})}function tokensToFunction(_,_e){for(var et=new Array(_.length),tt=0;tt<_.length;tt++)typeof _[tt]=="object"&&(et[tt]=new RegExp("^(?:"+_[tt].pattern+")$",flags(_e)));return function(rt,nt){for(var at="",it=rt||{},ot=nt||{},st=ot.pretty?encodeURIComponentPretty:encodeURIComponent,lt=0;lt<_.length;lt++){var gt=_[lt];if(typeof gt=="string"){at+=gt;continue}var ct=it[gt.name],wt;if(ct==null)if(gt.optional){gt.partial&&(at+=gt.prefix);continue}else throw new TypeError('Expected "'+gt.name+'" to be defined');if(isarray(ct)){if(!gt.repeat)throw new TypeError('Expected "'+gt.name+'" to not repeat, but received `'+JSON.stringify(ct)+"`");if(ct.length===0){if(gt.optional)continue;throw new TypeError('Expected "'+gt.name+'" to not be empty')}for(var Tt=0;Tt<ct.length;Tt++){if(wt=st(ct[Tt]),!et[lt].test(wt))throw new TypeError('Expected all "'+gt.name+'" to match "'+gt.pattern+'", but received `'+JSON.stringify(wt)+"`");at+=(Tt===0?gt.prefix:gt.delimiter)+wt}continue}if(wt=gt.asterisk?encodeAsterisk(ct):st(ct),!et[lt].test(wt))throw new TypeError('Expected "'+gt.name+'" to match "'+gt.pattern+'", but received "'+wt+'"');at+=gt.prefix+wt}return at}}function escapeString(_){return _.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function escapeGroup(_){return _.replace(/([=!:$\/()])/g,"\\$1")}function attachKeys(_,_e){return _.keys=_e,_}function flags(_){return _&&_.sensitive?"":"i"}function regexpToRegexp(_,_e){var et=_.source.match(/\((?!\?)/g);if(et)for(var tt=0;tt<et.length;tt++)_e.push({name:tt,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return attachKeys(_,_e)}function arrayToRegexp(_,_e,et){for(var tt=[],rt=0;rt<_.length;rt++)tt.push(pathToRegexp(_[rt],_e,et).source);var nt=new RegExp("(?:"+tt.join("|")+")",flags(et));return attachKeys(nt,_e)}function stringToRegexp(_,_e,et){return tokensToRegExp(parse(_,et),_e,et)}function tokensToRegExp(_,_e,et){isarray(_e)||(et=_e||et,_e=[]),et=et||{};for(var tt=et.strict,rt=et.end!==!1,nt="",at=0;at<_.length;at++){var it=_[at];if(typeof it=="string")nt+=escapeString(it);else{var ot=escapeString(it.prefix),st="(?:"+it.pattern+")";_e.push(it),it.repeat&&(st+="(?:"+ot+st+")*"),it.optional?it.partial?st=ot+"("+st+")?":st="(?:"+ot+"("+st+"))?":st=ot+"("+st+")",nt+=st}}var lt=escapeString(et.delimiter||"/"),gt=nt.slice(-lt.length)===lt;return tt||(nt=(gt?nt.slice(0,-lt.length):nt)+"(?:"+lt+"(?=$))?"),rt?nt+="$":nt+=tt&&gt?"":"(?="+lt+"|$)",attachKeys(new RegExp("^"+nt,flags(et)),_e)}function pathToRegexp(_,_e,et){return isarray(_e)||(et=_e||et,_e=[]),et=et||{},_ instanceof RegExp?regexpToRegexp(_,_e):isarray(_)?arrayToRegexp(_,_e,et):stringToRegexp(_,_e,et)}var reactIs$1={exports:{}},reactIs_production_min={};var b$1=typeof Symbol=="function"&&Symbol.for,c$1=b$1?Symbol.for("react.element"):60103,d$1=b$1?Symbol.for("react.portal"):60106,e$4=b$1?Symbol.for("react.fragment"):60107,f$4=b$1?Symbol.for("react.strict_mode"):60108,g=b$1?Symbol.for("react.profiler"):60114,h$1=b$1?Symbol.for("react.provider"):60109,k=b$1?Symbol.for("react.context"):60110,l$2=b$1?Symbol.for("react.async_mode"):60111,m$3=b$1?Symbol.for("react.concurrent_mode"):60111,n$1=b$1?Symbol.for("react.forward_ref"):60112,p$3=b$1?Symbol.for("react.suspense"):60113,q$1=b$1?Symbol.for("react.suspense_list"):60120,r$4=b$1?Symbol.for("react.memo"):60115,t$3=b$1?Symbol.for("react.lazy"):60116,v$1=b$1?Symbol.for("react.block"):60121,w$1=b$1?Symbol.for("react.fundamental"):60117,x$1=b$1?Symbol.for("react.responder"):60118,y$1=b$1?Symbol.for("react.scope"):60119;function z(_){if(typeof _=="object"&&_!==null){var _e=_.$$typeof;switch(_e){case c$1:switch(_=_.type,_){case l$2:case m$3:case e$4:case g:case f$4:case p$3:return _;default:switch(_=_&&_.$$typeof,_){case k:case n$1:case t$3:case r$4:case h$1:return _;default:return _e}}case d$1:return _e}}}function A$1(_){return z(_)===m$3}reactIs_production_min.AsyncMode=l$2;reactIs_production_min.ConcurrentMode=m$3;reactIs_production_min.ContextConsumer=k;reactIs_production_min.ContextProvider=h$1;reactIs_production_min.Element=c$1;reactIs_production_min.ForwardRef=n$1;reactIs_production_min.Fragment=e$4;reactIs_production_min.Lazy=t$3;reactIs_production_min.Memo=r$4;reactIs_production_min.Portal=d$1;reactIs_production_min.Profiler=g;reactIs_production_min.StrictMode=f$4;reactIs_production_min.Suspense=p$3;reactIs_production_min.isAsyncMode=function(_){return A$1(_)||z(_)===l$2};reactIs_production_min.isConcurrentMode=A$1;reactIs_production_min.isContextConsumer=function(_){return z(_)===k};reactIs_production_min.isContextProvider=function(_){return z(_)===h$1};reactIs_production_min.isElement=function(_){return typeof _=="object"&&_!==null&&_.$$typeof===c$1};reactIs_production_min.isForwardRef=function(_){return z(_)===n$1};reactIs_production_min.isFragment=function(_){return z(_)===e$4};reactIs_production_min.isLazy=function(_){return z(_)===t$3};reactIs_production_min.isMemo=function(_){return z(_)===r$4};reactIs_production_min.isPortal=function(_){return z(_)===d$1};reactIs_production_min.isProfiler=function(_){return z(_)===g};reactIs_production_min.isStrictMode=function(_){return z(_)===f$4};reactIs_production_min.isSuspense=function(_){return z(_)===p$3};reactIs_production_min.isValidElementType=function(_){return typeof _=="string"||typeof _=="function"||_===e$4||_===m$3||_===g||_===f$4||_===p$3||_===q$1||typeof _=="object"&&_!==null&&(_.$$typeof===t$3||_.$$typeof===r$4||_.$$typeof===h$1||_.$$typeof===k||_.$$typeof===n$1||_.$$typeof===w$1||_.$$typeof===x$1||_.$$typeof===y$1||_.$$typeof===v$1)};reactIs_production_min.typeOf=z;(function(_){_.exports=reactIs_production_min})(reactIs$1);function _objectWithoutPropertiesLoose(_,_e){if(_==null)return{};var et={},tt=Object.keys(_),rt,nt;for(nt=0;nt<tt.length;nt++)rt=tt[nt],!(_e.indexOf(rt)>=0)&&(et[rt]=_[rt]);return et}var reactIs=reactIs$1.exports,FORWARD_REF_STATICS={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},MEMO_STATICS={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},TYPE_STATICS={};TYPE_STATICS[reactIs.ForwardRef]=FORWARD_REF_STATICS;TYPE_STATICS[reactIs.Memo]=MEMO_STATICS;var MAX_SIGNED_31_BIT_INT=1073741823,commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:{};function getUniqueId(){var _="__global_unique_id__";return commonjsGlobal[_]=(commonjsGlobal[_]||0)+1}function objectIs(_,_e){return _===_e?_!==0||1/_===1/_e:_!==_&&_e!==_e}function createEventEmitter(_){var _e=[];return{on:function(tt){_e.push(tt)},off:function(tt){_e=_e.filter(function(rt){return rt!==tt})},get:function(){return _},set:function(tt,rt){_=tt,_e.forEach(function(nt){return nt(_,rt)})}}}function onlyChild(_){return Array.isArray(_)?_[0]:_}function createReactContext(_,_e){var et,tt,rt="__create-react-context-"+getUniqueId()+"__",nt=function(it){_inheritsLoose$1(ot,it);function ot(){for(var lt,gt=arguments.length,ct=new Array(gt),wt=0;wt<gt;wt++)ct[wt]=arguments[wt];return lt=it.call.apply(it,[this].concat(ct))||this,lt.emitter=createEventEmitter(lt.props.value),lt}var st=ot.prototype;return st.getChildContext=function(){var gt;return gt={},gt[rt]=this.emitter,gt},st.componentWillReceiveProps=function(gt){if(this.props.value!==gt.value){var ct=this.props.value,wt=gt.value,Tt;objectIs(ct,wt)?Tt=0:(Tt=typeof _e=="function"?_e(ct,wt):MAX_SIGNED_31_BIT_INT,Tt|=0,Tt!==0&&this.emitter.set(gt.value,Tt))}},st.render=function(){return this.props.children},ot}(React$1.Component);nt.childContextTypes=(et={},et[rt]=propTypes.exports.object.isRequired,et);var at=function(it){_inheritsLoose$1(ot,it);function ot(){for(var lt,gt=arguments.length,ct=new Array(gt),wt=0;wt<gt;wt++)ct[wt]=arguments[wt];return lt=it.call.apply(it,[this].concat(ct))||this,lt.observedBits=void 0,lt.state={value:lt.getValue()},lt.onUpdate=function(Tt,Rt){var ht=lt.observedBits|0;ht&Rt&&lt.setState({value:lt.getValue()})},lt}var st=ot.prototype;return st.componentWillReceiveProps=function(gt){var ct=gt.observedBits;this.observedBits=ct??MAX_SIGNED_31_BIT_INT},st.componentDidMount=function(){this.context[rt]&&this.context[rt].on(this.onUpdate);var gt=this.props.observedBits;this.observedBits=gt??MAX_SIGNED_31_BIT_INT},st.componentWillUnmount=function(){this.context[rt]&&this.context[rt].off(this.onUpdate)},st.getValue=function(){return this.context[rt]?this.context[rt].get():_},st.render=function(){return onlyChild(this.props.children)(this.state.value)},ot}(React$1.Component);return at.contextTypes=(tt={},tt[rt]=propTypes.exports.object,tt),{Provider:nt,Consumer:at}}var createContext=React$1.createContext||createReactContext,createNamedContext=function(_e){var et=createContext();return et.displayName=_e,et},historyContext=createNamedContext("Router-History"),context=createNamedContext("Router"),Router=function(_){_inheritsLoose$1(_e,_),_e.computeRootMatch=function(rt){return{path:"/",url:"/",params:{},isExact:rt==="/"}};function _e(tt){var rt;return rt=_.call(this,tt)||this,rt.state={location:tt.history.location},rt._isMounted=!1,rt._pendingLocation=null,tt.staticContext||(rt.unlisten=tt.history.listen(function(nt){rt._pendingLocation=nt})),rt}var et=_e.prototype;return et.componentDidMount=function(){var rt=this;this._isMounted=!0,this.unlisten&&this.unlisten(),this.props.staticContext||(this.unlisten=this.props.history.listen(function(nt){rt._isMounted&&rt.setState({location:nt})})),this._pendingLocation&&this.setState({location:this._pendingLocation})},et.componentWillUnmount=function(){this.unlisten&&(this.unlisten(),this._isMounted=!1,this._pendingLocation=null)},et.render=function(){return React$1.createElement(context.Provider,{value:{history:this.props.history,location:this.state.location,match:_e.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},React$1.createElement(historyContext.Provider,{children:this.props.children||null,value:this.props.history}))},_e}(React$1.Component);React$1.Component;var Lifecycle=function(_){_inheritsLoose$1(_e,_);function _e(){return _.apply(this,arguments)||this}var et=_e.prototype;return et.componentDidMount=function(){this.props.onMount&&this.props.onMount.call(this,this)},et.componentDidUpdate=function(rt){this.props.onUpdate&&this.props.onUpdate.call(this,this,rt)},et.componentWillUnmount=function(){this.props.onUnmount&&this.props.onUnmount.call(this,this)},et.render=function(){return null},_e}(React$1.Component),cache$1={},cacheLimit=1e4,cacheCount=0;function compilePath(_){if(cache$1[_])return cache$1[_];var _e=pathToRegexp$1.exports.compile(_);return cacheCount<cacheLimit&&(cache$1[_]=_e,cacheCount++),_e}function generatePath(_,_e){return _===void 0&&(_="/"),_e===void 0&&(_e={}),_==="/"?_:compilePath(_)(_e,{pretty:!0})}function Redirect(_){var _e=_.computedMatch,et=_.to,tt=_.push,rt=tt===void 0?!1:tt;return React$1.createElement(context.Consumer,null,function(nt){nt||invariant(!1);var at=nt.history,it=nt.staticContext,ot=rt?at.push:at.replace,st=createLocation(_e?typeof et=="string"?generatePath(et,_e.params):_extends$1({},et,{pathname:generatePath(et.pathname,_e.params)}):et);return it?(ot(st),null):React$1.createElement(Lifecycle,{onMount:function(){ot(st)},onUpdate:function(gt,ct){var wt=createLocation(ct.to);locationsAreEqual(wt,_extends$1({},st,{key:wt.key}))||ot(st)},to:et})})}var cache$1$1={},cacheLimit$1=1e4,cacheCount$1=0;function compilePath$1(_,_e){var et=""+_e.end+_e.strict+_e.sensitive,tt=cache$1$1[et]||(cache$1$1[et]={});if(tt[_])return tt[_];var rt=[],nt=pathToRegexp$1.exports(_,rt,_e),at={regexp:nt,keys:rt};return cacheCount$1<cacheLimit$1&&(tt[_]=at,cacheCount$1++),at}function matchPath(_,_e){_e===void 0&&(_e={}),(typeof _e=="string"||Array.isArray(_e))&&(_e={path:_e});var et=_e,tt=et.path,rt=et.exact,nt=rt===void 0?!1:rt,at=et.strict,it=at===void 0?!1:at,ot=et.sensitive,st=ot===void 0?!1:ot,lt=[].concat(tt);return lt.reduce(function(gt,ct){if(!ct&&ct!=="")return null;if(gt)return gt;var wt=compilePath$1(ct,{end:nt,strict:it,sensitive:st}),Tt=wt.regexp,Rt=wt.keys,ht=Tt.exec(_);if(!ht)return null;var ut=ht[0],ft=ht.slice(1),yt=_===ut;return nt&&!yt?null:{path:ct,url:ct==="/"&&ut===""?"/":ut,isExact:yt,params:Rt.reduce(function(xt,Ct,pt){return xt[Ct.name]=ft[pt],xt},{})}},null)}function isEmptyChildren(_){return React$1.Children.count(_)===0}var Route=function(_){_inheritsLoose$1(_e,_);function _e(){return _.apply(this,arguments)||this}var et=_e.prototype;return et.render=function(){var rt=this;return React$1.createElement(context.Consumer,null,function(nt){nt||invariant(!1);var at=rt.props.location||nt.location,it=rt.props.computedMatch?rt.props.computedMatch:rt.props.path?matchPath(at.pathname,rt.props):nt.match,ot=_extends$1({},nt,{location:at,match:it}),st=rt.props,lt=st.children,gt=st.component,ct=st.render;return Array.isArray(lt)&&isEmptyChildren(lt)&&(lt=null),React$1.createElement(context.Provider,{value:ot},ot.match?lt?typeof lt=="function"?lt(ot):lt:gt?React$1.createElement(gt,ot):ct?ct(ot):null:typeof lt=="function"?lt(ot):null)})},_e}(React$1.Component);function addLeadingSlash(_){return _.charAt(0)==="/"?_:"/"+_}function addBasename(_,_e){return _?_extends$1({},_e,{pathname:addLeadingSlash(_)+_e.pathname}):_e}function stripBasename(_,_e){if(!_)return _e;var et=addLeadingSlash(_);return _e.pathname.indexOf(et)!==0?_e:_extends$1({},_e,{pathname:_e.pathname.substr(et.length)})}function createURL(_){return typeof _=="string"?_:createPath(_)}function staticHandler(_){return function(){invariant(!1)}}function noop$4(){}React$1.Component;var Switch=function(_){_inheritsLoose$1(_e,_);function _e(){return _.apply(this,arguments)||this}var et=_e.prototype;return et.render=function(){var rt=this;return React$1.createElement(context.Consumer,null,function(nt){nt||invariant(!1);var at=rt.props.location||nt.location,it,ot;return React$1.Children.forEach(rt.props.children,function(st){if(ot==null&&React$1.isValidElement(st)){it=st;var lt=st.props.path||st.props.from;ot=lt?matchPath(at.pathname,_extends$1({},st.props,{path:lt})):nt.match}}),ot?React$1.cloneElement(it,{location:at,computedMatch:ot}):null})},_e}(React$1.Component),useContext=React$1.useContext;function useHistory(){return useContext(historyContext)}function useLocation(){return useContext(context).location}function useParams(){var _=useContext(context).match;return _?_.params:{}}function useRouteMatch(_){var _e=useLocation(),et=useContext(context).match;return _?matchPath(_e.pathname,_):et}var BrowserRouter=function(_){_inheritsLoose$1(_e,_);function _e(){for(var tt,rt=arguments.length,nt=new Array(rt),at=0;at<rt;at++)nt[at]=arguments[at];return tt=_.call.apply(_,[this].concat(nt))||this,tt.history=createBrowserHistory(tt.props),tt}var et=_e.prototype;return et.render=function(){return React$1.createElement(Router,{history:this.history,children:this.props.children})},_e}(React$1.Component),HashRouter=function(_){_inheritsLoose$1(_e,_);function _e(){for(var tt,rt=arguments.length,nt=new Array(rt),at=0;at<rt;at++)nt[at]=arguments[at];return tt=_.call.apply(_,[this].concat(nt))||this,tt.history=createHashHistory(tt.props),tt}var et=_e.prototype;return et.render=function(){return React$1.createElement(Router,{history:this.history,children:this.props.children})},_e}(React$1.Component),resolveToLocation=function(_e,et){return typeof _e=="function"?_e(et):_e},normalizeToLocation=function(_e,et){return typeof _e=="string"?createLocation(_e,null,null,et):_e},forwardRefShim=function(_e){return _e},forwardRef=React$1.forwardRef;typeof forwardRef>"u"&&(forwardRef=forwardRefShim);function isModifiedEvent(_){return!!(_.metaKey||_.altKey||_.ctrlKey||_.shiftKey)}var LinkAnchor=forwardRef(function(_,_e){var et=_.innerRef,tt=_.navigate,rt=_.onClick,nt=_objectWithoutPropertiesLoose(_,["innerRef","navigate","onClick"]),at=nt.target,it=_extends$1({},nt,{onClick:function(st){try{rt&&rt(st)}catch(lt){throw st.preventDefault(),lt}!st.defaultPrevented&&st.button===0&&(!at||at==="_self")&&!isModifiedEvent(st)&&(st.preventDefault(),tt())}});return forwardRefShim!==forwardRef?it.ref=_e||et:it.ref=et,React$1.createElement("a",it)}),Link$1=forwardRef(function(_,_e){var et=_.component,tt=et===void 0?LinkAnchor:et,rt=_.replace,nt=_.to,at=_.innerRef,it=_objectWithoutPropertiesLoose(_,["component","replace","to","innerRef"]);return React$1.createElement(context.Consumer,null,function(ot){ot||invariant(!1);var st=ot.history,lt=normalizeToLocation(resolveToLocation(nt,ot.location),ot.location),gt=lt?st.createHref(lt):"",ct=_extends$1({},it,{href:gt,navigate:function(){var Tt=resolveToLocation(nt,ot.location),Rt=createPath(ot.location)===createPath(normalizeToLocation(Tt)),ht=rt||Rt?st.replace:st.push;ht(Tt)}});return forwardRefShim!==forwardRef?ct.ref=_e||at:ct.innerRef=at,React$1.createElement(tt,ct)})}),forwardRefShim$1=function(_e){return _e},forwardRef$1=React$1.forwardRef;typeof forwardRef$1>"u"&&(forwardRef$1=forwardRefShim$1);function joinClassnames(){for(var _=arguments.length,_e=new Array(_),et=0;et<_;et++)_e[et]=arguments[et];return _e.filter(function(tt){return tt}).join(" ")}forwardRef$1(function(_,_e){var et=_["aria-current"],tt=et===void 0?"page":et,rt=_.activeClassName,nt=rt===void 0?"active":rt,at=_.activeStyle,it=_.className,ot=_.exact,st=_.isActive,lt=_.location,gt=_.sensitive,ct=_.strict,wt=_.style,Tt=_.to,Rt=_.innerRef,ht=_objectWithoutPropertiesLoose(_,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return React$1.createElement(context.Consumer,null,function(ut){ut||invariant(!1);var ft=lt||ut.location,yt=normalizeToLocation(resolveToLocation(Tt,ft),ft),xt=yt.pathname,Ct=xt&&xt.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),pt=Ct?matchPath(ft.pathname,{path:Ct,exact:ot,sensitive:gt,strict:ct}):null,dt=!!(st?st(pt,ft):pt),vt=typeof it=="function"?it(dt):it,St=typeof wt=="function"?wt(dt):wt;dt&&(vt=joinClassnames(vt,nt),St=_extends$1({},St,at));var Et=_extends$1({"aria-current":dt&&tt||null,className:vt,style:St,to:yt},ht);return forwardRefShim$1!==forwardRef$1?Et.ref=_e||Rt:Et.innerRef=Rt,React$1.createElement(Link$1,Et)})});var Icons=(_=>(_.SEARCH="search",_.BOOKMARK="bookmark",_.BOOKMARK_OUTLINE="bookmark_outline",_.CLOCK="clock",_.EYE_SLASH="eyeSlash",_.ARROW_LEFT="arrowLeft",_.ARROW_RIGHT="arrowRight",_.CHEVRON_DOWN="chevronDown",_.CHEVRON_RIGHT="chevronRight",_.CHEVRON_LEFT="chevronLeft",_.CLAPPER_BOARD="clapperBoard",_.FILM="film",_.DRAGON="dragon",_.WARNING="warning",_.MOVIE_WEB="movieWeb",_.DISCORD="discord",_.GITHUB="github",_.PLAY="play",_.PAUSE="pause",_.EXPAND="expand",_.COMPRESS="compress",_.VOLUME="volume",_.VOLUME_X="volume_x",_.X="x",_.EDIT="edit",_.AIRPLAY="airplay",_.EPISODES="episodes",_.SKIP_FORWARD="skip_forward",_.SKIP_BACKWARD="skip_backward",_.FILE="file",_.CAPTIONS="captions",_.LINK="link",_.CASTING="casting",_.CIRCLE_EXCLAMATION="circle_exclamation",_.DOWNLOAD="download",_))(Icons||{});const iconList={search:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 512 512"><!--! Font Awesome Pro 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path fill="currentColor" d="M500.3 443.7l-119.7-119.7c27.22-40.41 40.65-90.9 33.46-144.7C401.8 87.79 326.8 13.32 235.2 1.723C99.01-15.51-15.51 99.01 1.724 235.2c11.6 91.64 86.08 166.7 177.6 178.9c53.8 7.189 104.3-6.236 144.7-33.46l119.7 119.7c15.62 15.62 40.95 15.62 56.57 0C515.9 484.7 515.9 459.3 500.3 443.7zM79.1 208c0-70.58 57.42-128 128-128s128 57.42 128 128c0 70.58-57.42 128-128 128S79.1 278.6 79.1 208z"/></svg>',bookmark:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 384 512"><!--! Font Awesome Pro 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path fill="currentColor" d="M384 48V512l-192-112L0 512V48C0 21.5 21.5 0 48 0h288C362.5 0 384 21.5 384 48z"/></svg>',clock:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 512 512"><!--! Font Awesome Pro 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path fill="currentColor" d="M256 512C114.6 512 0 397.4 0 256C0 114.6 114.6 0 256 0C397.4 0 512 114.6 512 256C512 397.4 397.4 512 256 512zM232 256C232 264 236 271.5 242.7 275.1L338.7 339.1C349.7 347.3 364.6 344.3 371.1 333.3C379.3 322.3 376.3 307.4 365.3 300L280 243.2V120C280 106.7 269.3 96 255.1 96C242.7 96 231.1 106.7 231.1 120L232 256z"/></svg>',eyeSlash:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 640 512"><!--! Font Awesome Pro 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path fill="currentColor" d="M150.7 92.77C195 58.27 251.8 32 320 32C400.8 32 465.5 68.84 512.6 112.6C559.4 156 590.7 207.1 605.5 243.7C608.8 251.6 608.8 260.4 605.5 268.3C592.1 300.6 565.2 346.1 525.6 386.7L630.8 469.1C641.2 477.3 643.1 492.4 634.9 502.8C626.7 513.2 611.6 515.1 601.2 506.9L9.196 42.89C-1.236 34.71-3.065 19.63 5.112 9.196C13.29-1.236 28.37-3.065 38.81 5.112L150.7 92.77zM223.1 149.5L313.4 220.3C317.6 211.8 320 202.2 320 191.1C320 180.5 316.1 169.7 311.6 160.4C314.4 160.1 317.2 159.1 320 159.1C373 159.1 416 202.1 416 255.1C416 269.7 413.1 282.7 407.1 294.5L446.6 324.7C457.7 304.3 464 280.9 464 255.1C464 176.5 399.5 111.1 320 111.1C282.7 111.1 248.6 126.2 223.1 149.5zM320 480C239.2 480 174.5 443.2 127.4 399.4C80.62 355.1 49.34 304 34.46 268.3C31.18 260.4 31.18 251.6 34.46 243.7C44 220.8 60.29 191.2 83.09 161.5L177.4 235.8C176.5 242.4 176 249.1 176 255.1C176 335.5 240.5 400 320 400C338.7 400 356.6 396.4 373 389.9L446.2 447.5C409.9 467.1 367.8 480 320 480H320z"/></svg>',arrowLeft:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-left"><line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></svg>',chevronDown:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>',chevronRight:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"><polyline points="9 18 15 12 9 6"></polyline></svg>',chevronLeft:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-left"><polyline points="15 18 9 12 15 6"></polyline></svg>',clapperBoard:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 512 512"><!--! Font Awesome Pro 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path fill="currentColor" d="M326.1 160l127.4-127.4C451.7 32.39 449.9 32 448 32h-86.06l-128 128H326.1zM166.1 160l128-128H201.9l-128 128H166.1zM497.7 56.19L393.9 160H512V96C512 80.87 506.5 67.15 497.7 56.19zM134.1 32H64C28.65 32 0 60.65 0 96v64h6.062L134.1 32zM0 416c0 35.35 28.65 64 64 64h384c35.35 0 64-28.65 64-64V192H0V416z"/></svg>',film:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 512 512"><!--! Font Awesome Pro 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path fill="currentColor" d="M463.1 32h-416C21.49 32-.0001 53.49-.0001 80v352c0 26.51 21.49 48 47.1 48h416c26.51 0 48-21.49 48-48v-352C511.1 53.49 490.5 32 463.1 32zM111.1 408c0 4.418-3.582 8-8 8H55.1c-4.418 0-8-3.582-8-8v-48c0-4.418 3.582-8 8-8h47.1c4.418 0 8 3.582 8 8L111.1 408zM111.1 280c0 4.418-3.582 8-8 8H55.1c-4.418 0-8-3.582-8-8v-48c0-4.418 3.582-8 8-8h47.1c4.418 0 8 3.582 8 8V280zM111.1 152c0 4.418-3.582 8-8 8H55.1c-4.418 0-8-3.582-8-8v-48c0-4.418 3.582-8 8-8h47.1c4.418 0 8 3.582 8 8L111.1 152zM351.1 400c0 8.836-7.164 16-16 16H175.1c-8.836 0-16-7.164-16-16v-96c0-8.838 7.164-16 16-16h160c8.836 0 16 7.162 16 16V400zM351.1 208c0 8.836-7.164 16-16 16H175.1c-8.836 0-16-7.164-16-16v-96c0-8.838 7.164-16 16-16h160c8.836 0 16 7.162 16 16V208zM463.1 408c0 4.418-3.582 8-8 8h-47.1c-4.418 0-7.1-3.582-7.1-8l0-48c0-4.418 3.582-8 8-8h47.1c4.418 0 8 3.582 8 8V408zM463.1 280c0 4.418-3.582 8-8 8h-47.1c-4.418 0-8-3.582-8-8v-48c0-4.418 3.582-8 8-8h47.1c4.418 0 8 3.582 8 8V280zM463.1 152c0 4.418-3.582 8-8 8h-47.1c-4.418 0-8-3.582-8-8l0-48c0-4.418 3.582-8 7.1-8h47.1c4.418 0 8 3.582 8 8V152z"/></svg>',dragon:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 640 512"><!--! Font Awesome Pro 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path fill="currentColor" d="M18.43 255.8L192 224L100.8 292.6C90.67 302.8 97.8 320 112 320h222.7c-9.499-26.5-14.75-54.5-14.75-83.38V194.2L200.3 106.8C176.5 90.88 145 92.75 123.3 111.2l-117.5 116.4C-6.562 238 2.436 258 18.43 255.8zM575.2 289.9l-100.7-50.25c-16.25-8.125-26.5-24.75-26.5-43V160h63.99l28.12 22.62C546.1 188.6 554.2 192 562.7 192h30.1c11.1 0 23.12-6.875 28.5-17.75l14.37-28.62c5.374-10.87 4.25-23.75-2.999-33.5l-74.49-99.37C552.1 4.75 543.5 0 533.5 0H296C288.9 0 285.4 8.625 290.4 13.62L351.1 64L292.4 88.75c-5.874 3-5.874 11.37 0 14.37L351.1 128l-.0011 108.6c0 72 35.99 139.4 95.99 179.4c-195.6 6.75-344.4 41-434.1 60.88c-8.124 1.75-13.87 9-13.87 17.38C.0463 504 8.045 512 17.79 512h499.1c63.24 0 119.6-47.5 122.1-110.8C642.3 354 617.1 310.9 575.2 289.9zM489.1 66.25l45.74 11.38c-2.75 11-12.5 18.88-24.12 18.25C497.7 95.25 484.8 83.38 489.1 66.25z"/></svg>',warning:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-alert-triangle"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>',arrowRight:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right"><line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline></svg>',movieWeb:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 20.927 20.927"><path d="M18.186,4.5V6.241H16.445V4.5H9.482V6.241H7.741V4.5H6V20.168H7.741V18.427H9.482v1.741h6.964V18.427h1.741v1.741h1.741V4.5Zm-8.7,12.186H7.741V14.945H9.482Zm0-3.482H7.741V11.464H9.482Zm0-3.482H7.741V7.982H9.482Zm8.7,6.964H16.445V14.945h1.741Zm0-3.482H16.445V11.464h1.741Zm0-3.482H16.445V7.982h1.741Z" transform="translate(10.018 -7.425) rotate(45)" fill="currentColor"/></svg>',discord:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 640 512"><!--! Font Awesome Pro 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path fill="currentColor" d="M524.531,69.836a1.5,1.5,0,0,0-.764-.7A485.065,485.065,0,0,0,404.081,32.03a1.816,1.816,0,0,0-1.923.91,337.461,337.461,0,0,0-14.9,30.6,447.848,447.848,0,0,0-134.426,0,309.541,309.541,0,0,0-15.135-30.6,1.89,1.89,0,0,0-1.924-.91A483.689,483.689,0,0,0,116.085,69.137a1.712,1.712,0,0,0-.788.676C39.068,183.651,18.186,294.69,28.43,404.354a2.016,2.016,0,0,0,.765,1.375A487.666,487.666,0,0,0,176.02,479.918a1.9,1.9,0,0,0,2.063-.676A348.2,348.2,0,0,0,208.12,430.4a1.86,1.86,0,0,0-1.019-2.588,321.173,321.173,0,0,1-45.868-21.853,1.885,1.885,0,0,1-.185-3.126c3.082-2.309,6.166-4.711,9.109-7.137a1.819,1.819,0,0,1,1.9-.256c96.229,43.917,200.41,43.917,295.5,0a1.812,1.812,0,0,1,1.924.233c2.944,2.426,6.027,4.851,9.132,7.16a1.884,1.884,0,0,1-.162,3.126,301.407,301.407,0,0,1-45.89,21.83,1.875,1.875,0,0,0-1,2.611,391.055,391.055,0,0,0,30.014,48.815,1.864,1.864,0,0,0,2.063.7A486.048,486.048,0,0,0,610.7,405.729a1.882,1.882,0,0,0,.765-1.352C623.729,277.594,590.933,167.465,524.531,69.836ZM222.491,337.58c-28.972,0-52.844-26.587-52.844-59.239S193.056,219.1,222.491,219.1c29.665,0,53.306,26.82,52.843,59.239C275.334,310.993,251.924,337.58,222.491,337.58Zm195.38,0c-28.971,0-52.843-26.587-52.843-59.239S388.437,219.1,417.871,219.1c29.667,0,53.307,26.82,52.844,59.239C470.715,310.993,447.538,337.58,417.871,337.58Z"/></svg>',github:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 496 512"><!--! Font Awesome Pro 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>',play:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" style="transform: translateX(5%)" height="1em" viewBox="0 0 384 512"><!--! Font Awesome Pro 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path fill="currentColor" d="M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80V432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"/></svg>',pause:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 320 512"><!--! Font Awesome Pro 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path fill="currentColor" d="M48 64C21.5 64 0 85.5 0 112V400c0 26.5 21.5 48 48 48H80c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48H48zm192 0c-26.5 0-48 21.5-48 48V400c0 26.5 21.5 48 48 48h32c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48H240z"/></svg>',expand:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 448 512"><!--! Font Awesome Pro 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path fill="currentColor" d="M32 32C14.3 32 0 46.3 0 64v96c0 17.7 14.3 32 32 32s32-14.3 32-32V96h64c17.7 0 32-14.3 32-32s-14.3-32-32-32H32zM64 352c0-17.7-14.3-32-32-32s-32 14.3-32 32v96c0 17.7 14.3 32 32 32h96c17.7 0 32-14.3 32-32s-14.3-32-32-32H64V352zM320 32c-17.7 0-32 14.3-32 32s14.3 32 32 32h64v64c0 17.7 14.3 32 32 32s32-14.3 32-32V64c0-17.7-14.3-32-32-32H320zM448 352c0-17.7-14.3-32-32-32s-32 14.3-32 32v64H320c-17.7 0-32 14.3-32 32s14.3 32 32 32h96c17.7 0 32-14.3 32-32V352z"/></svg>',compress:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 448 512"><!--! Font Awesome Pro 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path fill="currentColor" d="M160 64c0-17.7-14.3-32-32-32s-32 14.3-32 32v64H32c-17.7 0-32 14.3-32 32s14.3 32 32 32h96c17.7 0 32-14.3 32-32V64zM32 320c-17.7 0-32 14.3-32 32s14.3 32 32 32H96v64c0 17.7 14.3 32 32 32s32-14.3 32-32V352c0-17.7-14.3-32-32-32H32zM352 64c0-17.7-14.3-32-32-32s-32 14.3-32 32v96c0 17.7 14.3 32 32 32h96c17.7 0 32-14.3 32-32s-14.3-32-32-32H352V64zM320 320c-17.7 0-32 14.3-32 32v96c0 17.7 14.3 32 32 32s32-14.3 32-32V384h64c17.7 0 32-14.3 32-32s-14.3-32-32-32H320z"/></svg>',volume:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 640 512"><!--! Font Awesome Pro 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path fill="currentColor" d="M533.6 32.5C598.5 85.3 640 165.8 640 256s-41.5 170.8-106.4 223.5c-10.3 8.4-25.4 6.8-33.8-3.5s-6.8-25.4 3.5-33.8C557.5 398.2 592 331.2 592 256s-34.5-142.2-88.7-186.3c-10.3-8.4-11.8-23.5-3.5-33.8s23.5-11.8 33.8-3.5zM473.1 107c43.2 35.2 70.9 88.9 70.9 149s-27.7 113.8-70.9 149c-10.3 8.4-25.4 6.8-33.8-3.5s-6.8-25.4 3.5-33.8C475.3 341.3 496 301.1 496 256s-20.7-85.3-53.2-111.8c-10.3-8.4-11.8-23.5-3.5-33.8s23.5-11.8 33.8-3.5zm-60.5 74.5C434.1 199.1 448 225.9 448 256s-13.9 56.9-35.4 74.5c-10.3 8.4-25.4 6.8-33.8-3.5s-6.8-25.4 3.5-33.8C393.1 284.4 400 271 400 256s-6.9-28.4-17.7-37.3c-10.3-8.4-11.8-23.5-3.5-33.8s23.5-11.8 33.8-3.5zM301.1 34.8C312.6 40 320 51.4 320 64V448c0 12.6-7.4 24-18.9 29.2s-25 3.1-34.4-5.3L131.8 352H64c-35.3 0-64-28.7-64-64V224c0-35.3 28.7-64 64-64h67.8L266.7 40.1c9.4-8.4 22.9-10.4 34.4-5.3z"/></svg>',volume_x:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 576 512"><!--! Font Awesome Pro 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path fill="currentColor" d="M301.1 34.8C312.6 40 320 51.4 320 64V448c0 12.6-7.4 24-18.9 29.2s-25 3.1-34.4-5.3L131.8 352H64c-35.3 0-64-28.7-64-64V224c0-35.3 28.7-64 64-64h67.8L266.7 40.1c9.4-8.4 22.9-10.4 34.4-5.3zM425 167l55 55 55-55c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9l-55 55 55 55c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-55-55-55 55c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l55-55-55-55c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0z"/></svg>',x:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 320 512"><!--! Font Awesome Pro 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path fill="currentColor" d="M310.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L160 210.7 54.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L114.7 256 9.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L160 301.3 265.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L205.3 256 310.6 150.6z"/></svg>',edit:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 512 512"><!--! Font Awesome Pro 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path fill="currentColor" d="M362.7 19.3L314.3 67.7 444.3 197.7l48.4-48.4c25-25 25-65.5 0-90.5L453.3 19.3c-25-25-65.5-25-90.5 0zm-71 71L58.6 323.5c-10.4 10.4-18 23.3-22.2 37.4L1 481.2C-1.5 489.7 .8 498.8 7 505s15.3 8.5 23.7 6.1l120.3-35.4c14.1-4.2 27-11.8 37.4-22.2L421.7 220.3 291.7 90.3z"/></svg>',bookmark_outline:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 384 512"><!--! Font Awesome Pro 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path fill="currentColor" d="M336 0h-288C21.49 0 0 21.49 0 48v431.9c0 24.7 26.79 40.08 48.12 27.64L192 423.6l143.9 83.93C357.2 519.1 384 504.6 384 479.9V48C384 21.49 362.5 0 336 0zM336 452L192 368l-144 84V54C48 50.63 50.63 48 53.1 48h276C333.4 48 336 50.63 336 54V452z"/></svg>',airplay:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-airplay"><path d="M5 17H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-1"></path><polygon fill="currentColor" points="12 15 17 21 7 21 12 15"></polygon></svg>',episodes:'<svg width="1em" height="1em" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M3 4C1.34315 4 0 5.34314 0 7V13.9496C0 15.6065 1.34315 16.9496 3 16.9496H5.86645V14.9496H3C2.44772 14.9496 2 14.5019 2 13.9496V7C2 6.44771 2.44771 6 3 6H16.0327C16.585 6 17.0327 6.44772 17.0327 7V9.86645H19.0327V7C19.0327 5.34315 17.6896 4 16.0327 4H3Z" fill="currentColor"/><rect x="5.89929" y="10.5444" width="17" height="10" rx="2" stroke="currentColor" stroke-width="2"/></svg>',skip_forward:'<svg width="1em" height="1em" viewBox="0 0 26 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.3333 12.3333L16 7.66667M16 7.66667L11.3333 3M16 7.66667H6.66667C5.42899 7.66667 4.242 8.15833 3.36684 9.0335C2.49167 9.90867 2 11.0957 2 12.3333C2 13.571 2.49167 14.758 3.36684 15.6332C4.242 16.5083 5.42899 17 6.66667 17H9" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" /><path d="M16.5043 14.2727V23H14.6591V16.0241H14.608L12.6094 17.277V15.6406L14.7699 14.2727H16.5043ZM22.0004 23.1918C21.2674 23.1889 20.6367 23.0085 20.1083 22.6506C19.5827 22.2926 19.1779 21.7741 18.8938 21.0952C18.6126 20.4162 18.4734 19.5994 18.4762 18.6449C18.4762 17.6932 18.6168 16.8821 18.8981 16.2116C19.1822 15.5412 19.587 15.0312 20.1126 14.6818C20.641 14.3295 21.2702 14.1534 22.0004 14.1534C22.7305 14.1534 23.3583 14.3295 23.8839 14.6818C24.4123 15.0341 24.8185 15.5455 25.1026 16.2159C25.3867 16.8835 25.5273 17.6932 25.5245 18.6449C25.5245 19.6023 25.3825 20.4205 25.0984 21.0994C24.8171 21.7784 24.4137 22.2969 23.8881 22.6548C23.3626 23.0128 22.7333 23.1918 22.0004 23.1918ZM22.0004 21.6619C22.5004 21.6619 22.8995 21.4105 23.1978 20.9077C23.4961 20.4048 23.6438 19.6506 23.641 18.6449C23.641 17.983 23.5728 17.4318 23.4364 16.9915C23.3029 16.5511 23.1126 16.2202 22.8654 15.9986C22.6211 15.777 22.3327 15.6662 22.0004 15.6662C21.5032 15.6662 21.1055 15.9148 20.8072 16.4119C20.5089 16.9091 20.3583 17.6534 20.3555 18.6449C20.3555 19.3153 20.4222 19.875 20.5558 20.3239C20.6921 20.7699 20.8839 21.1051 21.131 21.3295C21.3782 21.5511 21.668 21.6619 22.0004 21.6619Z" fill="currentColor" /></svg>',skip_backward:'<svg width="1em" height="1em" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M13.6667 12.3333L9 7.66667M9 7.66667L13.6667 3M9 7.66667H18.3333C19.571 7.66667 20.758 8.15833 21.6332 9.0335C22.5083 9.90867 23 11.0957 23 12.3333C23 13.571 22.5083 14.758 21.6332 15.6332C20.758 16.5083 19.571 17 18.3333 17H16" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M4.50426 14.2727V23H2.65909V16.0241H2.60795L0.609375 17.277V15.6406L2.76989 14.2727H4.50426ZM10.0004 23.1918C9.2674 23.1889 8.63672 23.0085 8.10831 22.6506C7.58274 22.2926 7.17791 21.7741 6.89382 21.0952C6.61257 20.4162 6.47337 19.5994 6.47621 18.6449C6.47621 17.6932 6.61683 16.8821 6.89808 16.2116C7.18217 15.5412 7.587 15.0312 8.11257 14.6818C8.64098 14.3295 9.27024 14.1534 10.0004 14.1534C10.7305 14.1534 11.3583 14.3295 11.8839 14.6818C12.4123 15.0341 12.8185 15.5455 13.1026 16.2159C13.3867 16.8835 13.5273 17.6932 13.5245 18.6449C13.5245 19.6023 13.3825 20.4205 13.0984 21.0994C12.8171 21.7784 12.4137 22.2969 11.8881 22.6548C11.3626 23.0128 10.7333 23.1918 10.0004 23.1918ZM10.0004 21.6619C10.5004 21.6619 10.8995 21.4105 11.1978 20.9077C11.4961 20.4048 11.6438 19.6506 11.641 18.6449C11.641 17.983 11.5728 17.4318 11.4364 16.9915C11.3029 16.5511 11.1126 16.2202 10.8654 15.9986C10.6211 15.777 10.3327 15.6662 10.0004 15.6662C9.5032 15.6662 9.10547 15.9148 8.80717 16.4119C8.50888 16.9091 8.35831 17.6534 8.35547 18.6449C8.35547 19.3153 8.42223 19.875 8.55575 20.3239C8.69212 20.7699 8.88388 21.1051 9.13104 21.3295C9.3782 21.5511 9.66797 21.6619 10.0004 21.6619Z" fill="currentColor"/></svg>',file:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"><path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline></svg>',captions:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 576 512"><!--! Font Awesome Pro 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><path fill="currentColor" d="M0 96C0 60.7 28.7 32 64 32H512c35.3 0 64 28.7 64 64V416c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V96zM200 208c14.2 0 27 6.1 35.8 16c8.8 9.9 24 10.7 33.9 1.9s10.7-24 1.9-33.9c-17.5-19.6-43.1-32-71.5-32c-53 0-96 43-96 96s43 96 96 96c28.4 0 54-12.4 71.5-32c8.8-9.9 8-25-1.9-33.9s-25-8-33.9 1.9c-8.8 9.9-21.6 16-35.8 16c-26.5 0-48-21.5-48-48s21.5-48 48-48zm144 48c0-26.5 21.5-48 48-48c14.2 0 27 6.1 35.8 16c8.8 9.9 24 10.7 33.9 1.9s10.7-24 1.9-33.9c-17.5-19.6-43.1-32-71.5-32c-53 0-96 43-96 96s43 96 96 96c28.4 0 54-12.4 71.5-32c8.8-9.9 8-25-1.9-33.9s-25-8-33.9 1.9c-8.8 9.9-21.6 16-35.8 16c-26.5 0-48-21.5-48-48z"/></svg>',link:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg>',circle_exclamation:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 512 512"><!--! Font Awesome Pro 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><path d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zm0-384c13.3 0 24 10.7 24 24V264c0 13.3-10.7 24-24 24s-24-10.7-24-24V152c0-13.3 10.7-24 24-24zM224 352a32 32 0 1 1 64 0 32 32 0 1 1 -64 0z"/></svg>',casting:"",download:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-download"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg>'};function ChromeCastButton(){const _=react.exports.useRef(null);return react.exports.useEffect(()=>{var et;const _e=document.createElement("google-cast-launcher");_e.setAttribute("id","castbutton"),(et=_.current)==null||et.appendChild(_e)},[]),jsxRuntime.exports.jsx("div",{ref:_,className:"h-6"})}const Icon=react.exports.memo(_=>_.icon==="casting"?jsxRuntime.exports.jsx(ChromeCastButton,{}):jsxRuntime.exports.jsx("span",{dangerouslySetInnerHTML:{__html:iconList[_.icon]},className:_.className}));function IconPatch(_){const _e=_.clickable?"cursor-pointer hover:scale-110 hover:bg-denim-600 hover:text-white active:scale-125":"",et=_.transparent?"bg-opacity-0 hover:bg-opacity-50":"",tt=_.active?"border-bink-600 bg-bink-100 text-bink-600":"";return jsxRuntime.exports.jsx("div",{className:_.className||void 0,onClick:_.onClick,children:jsxRuntime.exports.jsx("div",{className:`flex h-12 w-12 items-center justify-center rounded-full border-2 border-transparent bg-denim-500 transition-[background-color,color,transform,border-color] duration-75 ${et} ${_e} ${tt}`,children:jsxRuntime.exports.jsx(Icon,{icon:_.icon})})})}function Link(_){const _e=!!_.url,et=!!_.to,tt=jsxRuntime.exports.jsx("span",{className:"cursor-pointer font-bold text-bink-600 hover:text-bink-700",children:_.children});return _e?jsxRuntime.exports.jsx("a",{target:_.newTab?"_blank":void 0,rel:"noreferrer",href:_.url,children:tt}):et?jsxRuntime.exports.jsx(Link$1,{to:_.to,children:tt}):jsxRuntime.exports.jsx("span",{onClick:()=>_.onClick&&_.onClick(),children:tt})}function Title(_){return jsxRuntime.exports.jsx("h1",{className:`text-2xl font-bold text-white sm:text-3xl md:text-4xl ${_.className??""}`,children:_.children})}const DISCORD_LINK="https://discord.gg/skool",GITHUB_LINK="https://github.com/Skoolgq/SkoolTV",APP_VERSION="3.0.4",GA_ID="G-44YVXRL61C",env={OMDB_API_KEY:{}.VITE_OMDB_API_KEY,TMDB_API_KEY:{}.VITE_TMDB_API_KEY,APP_VERSION:void 0,GITHUB_LINK:void 0,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   _LINK:void 0,CORS_PROXY_URL:{}.VITE_CORS_PROXY_URL,NORMAL_ROUTER:{}.VITE_NORMAL_ROUTER},alerts=[];function getKey(_,_e){var rt;let et=(rt=window==null?void 0:window.__CONFIG__)==null?void 0:rt[`VITE_${_}`];et!==void 0&&et.length===0&&(et=void 0);const tt=env[_]??et??void 0;return tt===void 0?_e||(alerts.includes(_)||(window.alert(`Misconfigured instance, missing key: ${_}`),alerts.push(_)),""):tt}function conf(){return{APP_VERSION,GITHUB_LINK,DISCORD_LINK,OMDB_API_KEY:getKey("OMDB_API_KEY"),TMDB_API_KEY:getKey("TMDB_API_KEY"),PROXY_URLS:getKey("CORS_PROXY_URL").split(",").map(_=>_.trim()),NORMAL_ROUTER:getKey("NORMAL_ROUTER","false")==="true"}}function _typeof$2(_){return _typeof$2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_e){return typeof _e}:function(_e){return _e&&typeof Symbol=="function"&&_e.constructor===Symbol&&_e!==Symbol.prototype?"symbol":typeof _e},_typeof$2(_)}function _toPrimitive(_,_e){if(_typeof$2(_)!=="object"||_===null)return _;var et=_[Symbol.toPrimitive];if(et!==void 0){var tt=et.call(_,_e||"default");if(_typeof$2(tt)!=="object")return tt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(_e==="string"?String:Number)(_)}function _toPropertyKey(_){var _e=_toPrimitive(_,"string");return _typeof$2(_e)==="symbol"?_e:String(_e)}function _defineProperty$3(_,_e,et){return _e=_toPropertyKey(_e),_e in _?Object.defineProperty(_,_e,{value:et,enumerable:!0,configurable:!0,writable:!0}):_[_e]=et,_}function _objectWithoutProperties(_,_e){if(_==null)return{};var et=_objectWithoutPropertiesLoose(_,_e),tt,rt;if(Object.getOwnPropertySymbols){var nt=Object.getOwnPropertySymbols(_);for(rt=0;rt<nt.length;rt++)tt=nt[rt],!(_e.indexOf(tt)>=0)&&(!Object.prototype.propertyIsEnumerable.call(_,tt)||(et[tt]=_[tt]))}return et}var voidElements={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},t$2=/\s([^'"/\s><]+?)[\s/>]|([^\s=]+)=\s?(".*?"|'.*?')/g;function n(_){var _e={type:"tag",name:"",voidElement:!1,attrs:{},children:[]},et=_.match(/<\/?([^\s]+?)[/\s>]/);if(et&&(_e.name=et[1],(voidElements[et[1]]||_.charAt(_.length-2)==="/")&&(_e.voidElement=!0),_e.name.startsWith("!--"))){var tt=_.indexOf("-->");return{type:"comment",comment:tt!==-1?_.slice(4,tt):""}}for(var rt=new RegExp(t$2),nt=null;(nt=rt.exec(_))!==null;)if(nt[0].trim())if(nt[1]){var at=nt[1].trim(),it=[at,""];at.indexOf("=")>-1&&(it=at.split("=")),_e.attrs[it[0]]=it[1],rt.lastIndex--}else nt[2]&&(_e.attrs[nt[2]]=nt[3].trim().substring(1,nt[3].length-1));return _e}var r$3=/<[a-zA-Z0-9\-\!\/](?:"[^"]*"|'[^']*'|[^'">])*>/g,i$4=/^\s*$/,s$6=Object.create(null);function a$3(_,_e){switch(_e.type){case"text":return _+_e.content;case"tag":return _+="<"+_e.name+(_e.attrs?function(et){var tt=[];for(var rt in et)tt.push(rt+'="'+et[rt]+'"');return tt.length?" "+tt.join(" "):""}(_e.attrs):"")+(_e.voidElement?"/>":">"),_e.voidElement?_:_+_e.children.reduce(a$3,"")+"</"+_e.name+">";case"comment":return _+"<!--"+_e.comment+"-->"}}var c={parse:function(_,_e){_e||(_e={}),_e.components||(_e.components=s$6);var et,tt=[],rt=[],nt=-1,at=!1;if(_.indexOf("<")!==0){var it=_.indexOf("<");tt.push({type:"text",content:it===-1?_:_.substring(0,it)})}return _.replace(r$3,function(ot,st){if(at){if(ot!=="</"+et.name+">")return;at=!1}var lt,gt=ot.charAt(1)!=="/",ct=ot.startsWith("<!--"),wt=st+ot.length,Tt=_.charAt(wt);if(ct){var Rt=n(ot);return nt<0?(tt.push(Rt),tt):((lt=rt[nt]).children.push(Rt),tt)}if(gt&&(nt++,(et=n(ot)).type==="tag"&&_e.components[et.name]&&(et.type="component",at=!0),et.voidElement||at||!Tt||Tt==="<"||et.children.push({type:"text",content:_.slice(wt,_.indexOf("<",wt))}),nt===0&&tt.push(et),(lt=rt[nt-1])&&lt.children.push(et),rt[nt]=et),(!gt||et.voidElement)&&(nt>-1&&(et.voidElement||et.name===ot.slice(2,-1))&&(nt--,et=nt===-1?tt:rt[nt]),!at&&Tt!=="<"&&Tt)){lt=nt===-1?tt:rt[nt].children;var ht=_.indexOf("<",wt),ut=_.slice(wt,ht===-1?void 0:ht);i$4.test(ut)&&(ut=" "),(ht>-1&&nt+lt.length>=0||ut!==" ")&&lt.push({type:"text",content:ut})}}),tt},stringify:function(_){return _.reduce(function(_e,et){return _e+a$3("",et)},"")}};function warn$2(){if(console&&console.warn){for(var _,_e=arguments.length,et=new Array(_e),tt=0;tt<_e;tt++)et[tt]=arguments[tt];typeof et[0]=="string"&&(et[0]="react-i18next:: ".concat(et[0])),(_=console).warn.apply(_,et)}}var alreadyWarned={};function warnOnce(){for(var _=arguments.length,_e=new Array(_),et=0;et<_;et++)_e[et]=arguments[et];typeof _e[0]=="string"&&alreadyWarned[_e[0]]||(typeof _e[0]=="string"&&(alreadyWarned[_e[0]]=new Date),warn$2.apply(void 0,_e))}function loadNamespaces(_,_e,et){_.loadNamespaces(_e,function(){if(_.isInitialized)et();else{var tt=function rt(){setTimeout(function(){_.off("initialized",rt)},0),et()};_.on("initialized",tt)}})}function oldI18nextHasLoadedNamespace(_,_e){var et=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},tt=_e.languages[0],rt=_e.options?_e.options.fallbackLng:!1,nt=_e.languages[_e.languages.length-1];if(tt.toLowerCase()==="cimode")return!0;var at=function(ot,st){var lt=_e.services.backendConnector.state["".concat(ot,"|").concat(st)];return lt===-1||lt===2};return et.bindI18n&&et.bindI18n.indexOf("languageChanging")>-1&&_e.services.backendConnector.backend&&_e.isLanguageChangingTo&&!at(_e.isLanguageChangingTo,_)?!1:!!(_e.hasResourceBundle(tt,_)||!_e.services.backendConnector.backend||_e.options.resources&&!_e.options.partialBundledLanguages||at(tt,_)&&(!rt||at(nt,_)))}function hasLoadedNamespace(_,_e){var et=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!_e.languages||!_e.languages.length)return warnOnce("i18n.languages were undefined or empty",_e.languages),!0;var tt=_e.options.ignoreJSONStructure!==void 0;return tt?_e.hasLoadedNamespace(_,{precheck:function(nt,at){if(et.bindI18n&&et.bindI18n.indexOf("languageChanging")>-1&&nt.services.backendConnector.backend&&nt.isLanguageChangingTo&&!at(nt.isLanguageChangingTo,_))return!1}}):oldI18nextHasLoadedNamespace(_,_e,et)}var matchHtmlEntity=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,htmlEntities={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},unescapeHtmlEntity=function(_e){return htmlEntities[_e]},unescape$1=function(_e){return _e.replace(matchHtmlEntity,unescapeHtmlEntity)};function ownKeys$c(_,_e){var et=Object.keys(_);if(Object.getOwnPropertySymbols){var tt=Object.getOwnPropertySymbols(_);_e&&(tt=tt.filter(function(rt){return Object.getOwnPropertyDescriptor(_,rt).enumerable})),et.push.apply(et,tt)}return et}function _objectSpread$a(_){for(var _e=1;_e<arguments.length;_e++){var et=arguments[_e]!=null?arguments[_e]:{};_e%2?ownKeys$c(Object(et),!0).forEach(function(tt){_defineProperty$3(_,tt,et[tt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(et)):ownKeys$c(Object(et)).forEach(function(tt){Object.defineProperty(_,tt,Object.getOwnPropertyDescriptor(et,tt))})}return _}var defaultOptions={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:unescape$1};function setDefaults(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};defaultOptions=_objectSpread$a(_objectSpread$a({},defaultOptions),_)}function getDefaults$1(){return defaultOptions}var i18nInstance;function setI18n(_){i18nInstance=_}function getI18n(){return i18nInstance}var _excluded$1=["format"],_excluded2=["children","count","parent","i18nKey","context","tOptions","values","defaults","components","ns","i18n","t","shouldUnescape"];function ownKeys$b(_,_e){var et=Object.keys(_);if(Object.getOwnPropertySymbols){var tt=Object.getOwnPropertySymbols(_);_e&&(tt=tt.filter(function(rt){return Object.getOwnPropertyDescriptor(_,rt).enumerable})),et.push.apply(et,tt)}return et}function _objectSpread$9(_){for(var _e=1;_e<arguments.length;_e++){var et=arguments[_e]!=null?arguments[_e]:{};_e%2?ownKeys$b(Object(et),!0).forEach(function(tt){_defineProperty$3(_,tt,et[tt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(et)):ownKeys$b(Object(et)).forEach(function(tt){Object.defineProperty(_,tt,Object.getOwnPropertyDescriptor(et,tt))})}return _}function hasChildren(_,_e){if(!_)return!1;var et=_.props?_.props.children:_.children;return _e?et.length>0:!!et}function getChildren(_){return _?_.props?_.props.children:_.children:[]}function hasValidReactChildren(_){return Object.prototype.toString.call(_)!=="[object Array]"?!1:_.every(function(_e){return react.exports.isValidElement(_e)})}function getAsArray(_){return Array.isArray(_)?_:[_]}function mergeProps(_,_e){var et=_objectSpread$9({},_e);return et.props=Object.assign(_.props,_e.props),et}function nodesToString(_,_e){if(!_)return"";var et="",tt=getAsArray(_),rt=_e.transSupportBasicHtmlNodes&&_e.transKeepBasicHtmlNodesFor?_e.transKeepBasicHtmlNodesFor:[];return tt.forEach(function(nt,at){if(typeof nt=="string")et+="".concat(nt);else if(react.exports.isValidElement(nt)){var it=Object.keys(nt.props).length,ot=rt.indexOf(nt.type)>-1,st=nt.props.children;if(!st&&ot&&it===0)et+="<".concat(nt.type,"/>");else if(!st&&(!ot||it!==0))et+="<".concat(at,"></").concat(at,">");else if(nt.props.i18nIsDynamicList)et+="<".concat(at,"></").concat(at,">");else if(ot&&it===1&&typeof st=="string")et+="<".concat(nt.type,">").concat(st,"</").concat(nt.type,">");else{var lt=nodesToString(st,_e);et+="<".concat(at,">").concat(lt,"</").concat(at,">")}}else if(nt===null)warn$2("Trans: the passed in value is invalid - seems you passed in a null child.");else if(_typeof$2(nt)==="object"){var gt=nt.format,ct=_objectWithoutProperties(nt,_excluded$1),wt=Object.keys(ct);if(wt.length===1){var Tt=gt?"".concat(wt[0],", ").concat(gt):wt[0];et+="{{".concat(Tt,"}}")}else warn$2("react-i18next: the passed in object contained more than one variable - the object should look like {{ value, format }} where format is optional.",nt)}else warn$2("Trans: the passed in value is invalid - seems you passed in a variable like {number} - please pass in variables for interpolation as full objects like {{number}}.",nt)}),et}function renderNodes(_,_e,et,tt,rt,nt){if(_e==="")return[];var at=tt.transKeepBasicHtmlNodesFor||[],it=_e&&new RegExp(at.join("|")).test(_e);if(!_&&!it)return[_e];var ot={};function st(ht){var ut=getAsArray(ht);ut.forEach(function(ft){typeof ft!="string"&&(hasChildren(ft)?st(getChildren(ft)):_typeof$2(ft)==="object"&&!react.exports.isValidElement(ft)&&Object.assign(ot,ft))})}st(_);var lt=c.parse("<0>".concat(_e,"</0>")),gt=_objectSpread$9(_objectSpread$9({},ot),rt);function ct(ht,ut,ft){var yt=getChildren(ht),xt=Tt(yt,ut.children,ft);return hasValidReactChildren(yt)&&xt.length===0?yt:xt}function wt(ht,ut,ft,yt,xt){ht.dummy&&(ht.children=ut),ft.push(react.exports.cloneElement(ht,_objectSpread$9(_objectSpread$9({},ht.props),{},{key:yt}),xt?void 0:ut))}function Tt(ht,ut,ft){var yt=getAsArray(ht),xt=getAsArray(ut);return xt.reduce(function(Ct,pt,dt){var vt=pt.children&&pt.children[0]&&pt.children[0].content&&et.services.interpolator.interpolate(pt.children[0].content,gt,et.language);if(pt.type==="tag"){var St=yt[parseInt(pt.name,10)];!St&&ft.length===1&&ft[0][pt.name]&&(St=ft[0][pt.name]),St||(St={});var Et=Object.keys(pt.attrs).length!==0?mergeProps({props:pt.attrs},St):St,mt=react.exports.isValidElement(Et),_t=mt&&hasChildren(pt,!0)&&!pt.voidElement,bt=it&&_typeof$2(Et)==="object"&&Et.dummy&&!mt,Ot=_typeof$2(_)==="object"&&_!==null&&Object.hasOwnProperty.call(_,pt.name);if(typeof Et=="string"){var Pt=et.services.interpolator.interpolate(Et,gt,et.language);Ct.push(Pt)}else if(hasChildren(Et)||_t){var Dt=ct(Et,pt,ft);wt(Et,Dt,Ct,dt)}else if(bt){var It=Tt(yt,pt.children,ft);Ct.push(react.exports.cloneElement(Et,_objectSpread$9(_objectSpread$9({},Et.props),{},{key:dt}),It))}else if(Number.isNaN(parseFloat(pt.name)))if(Ot){var kt=ct(Et,pt,ft);wt(Et,kt,Ct,dt,pt.voidElement)}else if(tt.transSupportBasicHtmlNodes&&at.indexOf(pt.name)>-1)if(pt.voidElement)Ct.push(react.exports.createElement(pt.name,{key:"".concat(pt.name,"-").concat(dt)}));else{var Lt=Tt(yt,pt.children,ft);Ct.push(react.exports.createElement(pt.name,{key:"".concat(pt.name,"-").concat(dt)},Lt))}else if(pt.voidElement)Ct.push("<".concat(pt.name," />"));else{var At=Tt(yt,pt.children,ft);Ct.push("<".concat(pt.name,">").concat(At,"</").concat(pt.name,">"))}else if(_typeof$2(Et)==="object"&&!mt){var $t=pt.children[0]?vt:null;$t&&Ct.push($t)}else pt.children.length===1&&vt?Ct.push(react.exports.cloneElement(Et,_objectSpread$9(_objectSpread$9({},Et.props),{},{key:dt}),vt)):Ct.push(react.exports.cloneElement(Et,_objectSpread$9(_objectSpread$9({},Et.props),{},{key:dt})))}else if(pt.type==="text"){var jt=tt.transWrapTextNodes,Nt=nt?tt.unescape(et.services.interpolator.interpolate(pt.content,gt,et.language)):et.services.interpolator.interpolate(pt.content,gt,et.language);jt?Ct.push(react.exports.createElement(jt,{key:"".concat(pt.name,"-").concat(dt)},Nt)):Ct.push(Nt)}return Ct},[])}var Rt=Tt([{dummy:!0,children:_||[]}],lt,getAsArray(_||[]));return getChildren(Rt[0])}function Trans$1(_){var _e=_.children,et=_.count,tt=_.parent,rt=_.i18nKey,nt=_.context,at=_.tOptions,it=at===void 0?{}:at,ot=_.values,st=_.defaults,lt=_.components,gt=_.ns,ct=_.i18n,wt=_.t,Tt=_.shouldUnescape,Rt=_objectWithoutProperties(_,_excluded2),ht=ct||getI18n();if(!ht)return warnOnce("You will need to pass in an i18next instance by using i18nextReactModule"),_e;var ut=wt||ht.t.bind(ht)||function(_t){return _t};nt&&(it.context=nt);var ft=_objectSpread$9(_objectSpread$9({},getDefaults$1()),ht.options&&ht.options.react),yt=gt||ut.ns||ht.options&&ht.options.defaultNS;yt=typeof yt=="string"?[yt]:yt||["translation"];var xt=st||nodesToString(_e,ft)||ft.transEmptyNodeValue||rt,Ct=ft.hashTransKey,pt=rt||(Ct?Ct(xt):xt),dt=ot?it.interpolation:{interpolation:_objectSpread$9(_objectSpread$9({},it.interpolation),{},{prefix:"#$?",suffix:"?$#"})},vt=_objectSpread$9(_objectSpread$9(_objectSpread$9(_objectSpread$9({},it),{},{count:et},ot),dt),{},{defaultValue:xt,ns:yt}),St=pt?ut(pt,vt):xt,Et=renderNodes(lt||_e,St,ht,ft,vt,Tt),mt=tt!==void 0?tt:ft.defaultTransParent;return mt?react.exports.createElement(mt,Rt,Et):Et}function _classCallCheck$2(_,_e){if(!(_ instanceof _e))throw new TypeError("Cannot call a class as a function")}function _defineProperties$1(_,_e){for(var et=0;et<_e.length;et++){var tt=_e[et];tt.enumerable=tt.enumerable||!1,tt.configurable=!0,"value"in tt&&(tt.writable=!0),Object.defineProperty(_,_toPropertyKey(tt.key),tt)}}function _createClass$2(_,_e,et){return _e&&_defineProperties$1(_.prototype,_e),et&&_defineProperties$1(_,et),Object.defineProperty(_,"prototype",{writable:!1}),_}var initReactI18next={type:"3rdParty",init:function(_e){setDefaults(_e.options.react),setI18n(_e)}},I18nContext=react.exports.createContext(),ReportNamespaces=function(){function _(){_classCallCheck$2(this,_),this.usedNamespaces={}}return _createClass$2(_,[{key:"addUsedNamespaces",value:function(et){var tt=this;et.forEach(function(rt){tt.usedNamespaces[rt]||(tt.usedNamespaces[rt]=!0)})}},{key:"getUsedNamespaces",value:function(){return Object.keys(this.usedNamespaces)}}]),_}(),_excluded=["children","count","parent","i18nKey","context","tOptions","values","defaults","components","ns","i18n","t","shouldUnescape"];function ownKeys$a(_,_e){var et=Object.keys(_);if(Object.getOwnPropertySymbols){var tt=Object.getOwnPropertySymbols(_);_e&&(tt=tt.filter(function(rt){return Object.getOwnPropertyDescriptor(_,rt).enumerable})),et.push.apply(et,tt)}return et}function _objectSpread$8(_){for(var _e=1;_e<arguments.length;_e++){var et=arguments[_e]!=null?arguments[_e]:{};_e%2?ownKeys$a(Object(et),!0).forEach(function(tt){_defineProperty$3(_,tt,et[tt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(et)):ownKeys$a(Object(et)).forEach(function(tt){Object.defineProperty(_,tt,Object.getOwnPropertyDescriptor(et,tt))})}return _}function Trans(_){var _e=_.children,et=_.count,tt=_.parent,rt=_.i18nKey,nt=_.context,at=_.tOptions,it=at===void 0?{}:at,ot=_.values,st=_.defaults,lt=_.components,gt=_.ns,ct=_.i18n,wt=_.t,Tt=_.shouldUnescape,Rt=_objectWithoutProperties(_,_excluded),ht=react.exports.useContext(I18nContext)||{},ut=ht.i18n,ft=ht.defaultNS,yt=ct||ut||getI18n(),xt=wt||yt.t.bind(yt)||function(Ct){return Ct};return Trans$1(_objectSpread$8({children:_e,count:et,parent:tt,i18nKey:rt,context:nt,tOptions:it,values:ot,defaults:st,components:lt,ns:gt||xt.ns||ft||yt.options&&yt.options.defaultNS,i18n:yt,t:wt,shouldUnescape:Tt},Rt))}function _arrayWithHoles(_){if(Array.isArray(_))return _}function _iterableToArrayLimit(_,_e){var et=_==null?null:typeof Symbol<"u"&&_[Symbol.iterator]||_["@@iterator"];if(et!=null){var tt,rt,nt,at,it=[],ot=!0,st=!1;try{if(nt=(et=et.call(_)).next,_e===0){if(Object(et)!==et)return;ot=!1}else for(;!(ot=(tt=nt.call(et)).done)&&(it.push(tt.value),it.length!==_e);ot=!0);}catch(lt){st=!0,rt=lt}finally{try{if(!ot&&et.return!=null&&(at=et.return(),Object(at)!==at))return}finally{if(st)throw rt}}return it}}function _arrayLikeToArray(_,_e){(_e==null||_e>_.length)&&(_e=_.length);for(var et=0,tt=new Array(_e);et<_e;et++)tt[et]=_[et];return tt}function _unsupportedIterableToArray(_,_e){if(!!_){if(typeof _=="string")return _arrayLikeToArray(_,_e);var et=Object.prototype.toString.call(_).slice(8,-1);if(et==="Object"&&_.constructor&&(et=_.constructor.name),et==="Map"||et==="Set")return Array.from(_);if(et==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(et))return _arrayLikeToArray(_,_e)}}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _slicedToArray(_,_e){return _arrayWithHoles(_)||_iterableToArrayLimit(_,_e)||_unsupportedIterableToArray(_,_e)||_nonIterableRest()}function ownKeys$9(_,_e){var et=Object.keys(_);if(Object.getOwnPropertySymbols){var tt=Object.getOwnPropertySymbols(_);_e&&(tt=tt.filter(function(rt){return Object.getOwnPropertyDescriptor(_,rt).enumerable})),et.push.apply(et,tt)}return et}function _objectSpread$7(_){for(var _e=1;_e<arguments.length;_e++){var et=arguments[_e]!=null?arguments[_e]:{};_e%2?ownKeys$9(Object(et),!0).forEach(function(tt){_defineProperty$3(_,tt,et[tt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(et)):ownKeys$9(Object(et)).forEach(function(tt){Object.defineProperty(_,tt,Object.getOwnPropertyDescriptor(et,tt))})}return _}var usePrevious=function(_e,et){var tt=react.exports.useRef();return react.exports.useEffect(function(){tt.current=et?tt.current:_e},[_e,et]),tt.current};function useTranslation(_){var _e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},et=_e.i18n,tt=react.exports.useContext(I18nContext)||{},rt=tt.i18n,nt=tt.defaultNS,at=et||rt||getI18n();if(at&&!at.reportNamespaces&&(at.reportNamespaces=new ReportNamespaces),!at){warnOnce("You will need to pass in an i18next instance by using initReactI18next");var it=function(St){return Array.isArray(St)?St[St.length-1]:St},ot=[it,{},!1];return ot.t=it,ot.i18n={},ot.ready=!1,ot}at.options.react&&at.options.react.wait!==void 0&&warnOnce("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");var st=_objectSpread$7(_objectSpread$7(_objectSpread$7({},getDefaults$1()),at.options.react),_e),lt=st.useSuspense,gt=st.keyPrefix,ct=_||nt||at.options&&at.options.defaultNS;ct=typeof ct=="string"?[ct]:ct||["translation"],at.reportNamespaces.addUsedNamespaces&&at.reportNamespaces.addUsedNamespaces(ct);var wt=(at.isInitialized||at.initializedStoreOnce)&&ct.every(function(vt){return hasLoadedNamespace(vt,at,st)});function Tt(){return at.getFixedT(null,st.nsMode==="fallback"?ct:ct[0],gt)}var Rt=react.exports.useState(Tt),ht=_slicedToArray(Rt,2),ut=ht[0],ft=ht[1],yt=ct.join(),xt=usePrevious(yt),Ct=react.exports.useRef(!0);react.exports.useEffect(function(){var vt=st.bindI18n,St=st.bindI18nStore;Ct.current=!0,!wt&&!lt&&loadNamespaces(at,ct,function(){Ct.current&&ft(Tt)}),wt&&xt&&xt!==yt&&Ct.current&&ft(Tt);function Et(){Ct.current&&ft(Tt)}return vt&&at&&at.on(vt,Et),St&&at&&at.store.on(St,Et),function(){Ct.current=!1,vt&&at&&vt.split(" ").forEach(function(mt){return at.off(mt,Et)}),St&&at&&St.split(" ").forEach(function(mt){return at.store.off(mt,Et)})}},[at,yt]);var pt=react.exports.useRef(!0);react.exports.useEffect(function(){Ct.current&&!pt.current&&ft(Tt),pt.current=!1},[at,gt]);var dt=[ut,at,wt];if(dt.t=ut,dt.i18n=at,dt.ready=wt,wt||!wt&&!lt)return dt;throw new Promise(function(vt){loadNamespaces(at,ct,function(){vt()})})}function ErrorShowcase(_){return jsxRuntime.exports.jsxs("div",{className:"w-4xl mt-12 max-w-full rounded bg-denim-300 px-6 py-4",children:[jsxRuntime.exports.jsxs("p",{className:"mb-1 break-words font-bold text-white",children:[_.error.name," - ",_.error.description]}),jsxRuntime.exports.jsx("p",{className:"break-words",children:_.error.path})]})}function ErrorMessage(_){const{t:_e}=useTranslation();return jsxRuntime.exports.jsxs("div",{className:`${_.localSize?"h-full":"min-h-screen"} flex w-full flex-col items-center justify-center px-4 py-12`,children:[jsxRuntime.exports.jsxs("div",{className:"flex flex-col items-center justify-start text-center",children:[jsxRuntime.exports.jsx(IconPatch,{icon:Icons.WARNING,className:"mb-6 text-red-400"}),jsxRuntime.exports.jsx(Title,{children:_e("media.errors.genericTitle")}),_.children?jsxRuntime.exports.jsx("p",{className:"my-6 max-w-lg",children:_.children}):jsxRuntime.exports.jsx("p",{className:"my-6 max-w-lg",children:jsxRuntime.exports.jsxs(Trans,{i18nKey:"media.errors.videoFailed",children:[jsxRuntime.exports.jsx(Link,{url:conf().DISCORD_LINK,newTab:!0}),jsxRuntime.exports.jsx(Link,{url:conf().GITHUB_LINK,newTab:!0})]})})]}),_.error?jsxRuntime.exports.jsx(ErrorShowcase,{error:_.error}):null]})}class ErrorBoundary extends react.exports.Component{constructor(_e){super(_e),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(_e,et){if(console.error("Render error caught",_e,et),_e instanceof Error){const tt=_e;this.setState(rt=>({...rt,hasError:!0,error:{name:tt.name,description:tt.message,path:et.componentStack.split(`
`)[1]}}))}}render(){return this.state.hasError?jsxRuntime.exports.jsx(ErrorMessage,{error:this.state.error}):this.props.children}}const scriptRel="modulepreload",assetsURL=function(_){return"/"+_},seen={},__vitePreload=function(_e,et,tt){if(!et||et.length===0)return _e();const rt=document.getElementsByTagName("link");return Promise.all(et.map(nt=>{if(nt=assetsURL(nt),nt in seen)return;seen[nt]=!0;const at=nt.endsWith(".css"),it=at?'[rel="stylesheet"]':"";if(!!tt)for(let lt=rt.length-1;lt>=0;lt--){const gt=rt[lt];if(gt.href===nt&&(!at||gt.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${nt}"]${it}`))return;const st=document.createElement("link");if(st.rel=at?"stylesheet":scriptRel,at||(st.as="script",st.crossOrigin=""),st.href=nt,document.head.appendChild(st),at)return new Promise((lt,gt)=>{st.addEventListener("load",lt),st.addEventListener("error",()=>gt(new Error(`Unable to preload CSS for ${nt}`)))})})).then(()=>_e())};function registerSW(_={}){const{immediate:_e=!1,onNeedRefresh:et,onOfflineReady:tt,onRegistered:rt,onRegisteredSW:nt,onRegisterError:at}=_;let it,ot;const st=async(gt=!0)=>{await ot};async function lt(){if("serviceWorker"in navigator){const{Workbox:gt}=await __vitePreload(()=>import("./workbox-window.prod.es5-295a6886.js"),[]);it=new gt("/sw.js",{scope:"/",type:"classic"}),it.addEventListener("activated",ct=>{(ct.isUpdate||ct.isExternal)&&window.location.reload()}),it.addEventListener("installed",ct=>{ct.isUpdate||tt==null||tt()}),it.register({immediate:_e}).then(ct=>{nt?nt("/sw.js",ct):rt==null||rt(ct)}).catch(ct=>{at==null||at(ct)})}}return ot=lt(),st}const storeCallbacks={},stores={};async function initializeStores(){var _,_e;for(const[et,tt]of Object.values(stores)){const rt=tt.versions.sort((st,lt)=>st.version-lt.version),nt=et._raw(),at=nt["--version"]&&typeof nt["--version"]=="number"?nt["--version"]:0,it=rt.filter(st=>st.version>=at);let ot=nt;try{for(const st of it)st.migrate&&(ot=await st.migrate(ot))}catch(st){console.error(`FAILED TO MIGRATE STORE ${tt.key}`,st),ot=((_e=(_=it[it.length-1]).create)==null?void 0:_e.call(_))??{}}et.save(ot)}}function buildStorageObject(_){const _e=_.key??"",et=_.versions.sort((it,ot)=>ot.version-it.version)[0];function tt(it){return storeCallbacks[_e]||(storeCallbacks[_e]=[]),storeCallbacks[_e].push(it),{destroy(){storeCallbacks[_e]=storeCallbacks[_e].filter(ot=>ot===it)}}}function rt(){var ot;const it=((ot=et.create)==null?void 0:ot.call(et))??{};return it["--version"]=et.version,it}function nt(){const it=localStorage.getItem(_e);if(!it)return rt();try{return JSON.parse(it)}catch(ot){return console.error(`FAILED TO PARSE LOCALSTORAGE FOR KEY ${_e}`,ot),rt()}}function at(it){const ot={...it};ot["--version"]=et.version,localStorage.setItem(_e,JSON.stringify(ot)),storeCallbacks[_e]||(storeCallbacks[_e]=[]),storeCallbacks[_e].forEach(st=>st(structuredClone(it)))}return{get(){const it=nt();return delete it["--version"],it},_raw(){return nt()},onChange:tt,save:at}}function assertStore(_){var tt;const _e=_.versions.sort((rt,nt)=>rt.version-nt.version);if(_e.forEach((rt,nt,at)=>{if(nt!==0&&rt.version!==at[nt-1].version+1)throw new Error("Version list of store is not incremental")}),_e.forEach(rt=>{if(rt.version<0)throw new Error("Versions cannot be negative")}),((tt=_e[0])==null?void 0:tt.version)!==0)throw new Error("Version 0 doesn't exist in version list of store");if(!_.versions[_.versions.length-1].create)throw new Error("Missing create function on latest version of store");if(!_.key)throw new Error("storage key not set in store");const et=[..._e];et.pop(),et.forEach(rt=>{if(!rt.migrate)throw new Error(`Migration missing on version ${rt.version}`)})}function createVersionedStore(){const _={versions:[],key:null};return{setKey(_e){return _.key=_e,this},addVersion(_e){return _.versions.push(_e),this},build(){assertStore(_);const _e=buildStorageObject(_);return stores[_.key??""]=[_e,_],_e}}}function useStore(_){const[_e,et]=react.exports.useState(_.get());react.exports.useEffect(()=>{const{destroy:rt}=_.onChange(nt=>{et(nt)});return()=>{rt()}},[_]);function tt(rt){const nt=rt(_e);_.save(nt)}return[_e,tt]}const suspectProtoRx=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,suspectConstructorRx=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,JsonSigRx=/^\s*["[{]|^\s*-?\d[\d.]{0,14}\s*$/;function jsonParseTransform(_,_e){if(_!=="__proto__"&&!(_==="constructor"&&_e&&typeof _e=="object"&&"prototype"in _e))return _e}function destr(_,_e={}){if(typeof _!="string")return _;const et=_.toLowerCase().trim();if(et==="true")return!0;if(et==="false")return!1;if(et==="null")return null;if(et==="nan")return Number.NaN;if(et==="infinity")return Number.POSITIVE_INFINITY;if(et!=="undefined"){if(!JsonSigRx.test(_)){if(_e.strict)throw new SyntaxError("Invalid JSON");return _}try{return suspectProtoRx.test(_)||suspectConstructorRx.test(_)?JSON.parse(_,jsonParseTransform):JSON.parse(_)}catch(tt){if(_e.strict)throw tt;return _}}}const HASH_RE=/#/g,AMPERSAND_RE=/&/g,EQUAL_RE=/=/g,PLUS_RE=/\+/g,ENC_CARET_RE=/%5e/gi,ENC_BACKTICK_RE=/%60/gi,ENC_PIPE_RE=/%7c/gi,ENC_SPACE_RE=/%20/gi;function encode(_){return encodeURI(""+_).replace(ENC_PIPE_RE,"|")}function encodeQueryValue(_){return encode(typeof _=="string"?_:JSON.stringify(_)).replace(PLUS_RE,"%2B").replace(ENC_SPACE_RE,"+").replace(HASH_RE,"%23").replace(AMPERSAND_RE,"%26").replace(ENC_BACKTICK_RE,"`").replace(ENC_CARET_RE,"^")}function encodeQueryKey(_){return encodeQueryValue(_).replace(EQUAL_RE,"%3D")}function decode(_=""){try{return decodeURIComponent(""+_)}catch{return""+_}}function decodeQueryValue(_){return decode(_.replace(PLUS_RE," "))}function parseQuery(_=""){const _e={};_[0]==="?"&&(_=_.slice(1));for(const et of _.split("&")){const tt=et.match(/([^=]+)=?(.*)/)||[];if(tt.length<2)continue;const rt=decode(tt[1]);if(rt==="__proto__"||rt==="constructor")continue;const nt=decodeQueryValue(tt[2]||"");typeof _e[rt]<"u"?Array.isArray(_e[rt])?_e[rt].push(nt):_e[rt]=[_e[rt],nt]:_e[rt]=nt}return _e}function encodeQueryItem(_,_e){return(typeof _e=="number"||typeof _e=="boolean")&&(_e=String(_e)),_e?Array.isArray(_e)?_e.map(et=>`${encodeQueryKey(_)}=${encodeQueryValue(et)}`).join("&"):`${encodeQueryKey(_)}=${encodeQueryValue(_e)}`:encodeQueryKey(_)}function stringifyQuery(_){return Object.keys(_).filter(_e=>_[_e]!==void 0).map(_e=>encodeQueryItem(_e,_[_e])).join("&")}const PROTOCOL_STRICT_REGEX=/^\w{2,}:([/\\]{1,2})/,PROTOCOL_REGEX=/^\w{2,}:([/\\]{2})?/,PROTOCOL_RELATIVE_REGEX=/^[/\\]{2}[^/\\]+/;function hasProtocol(_,_e={}){return typeof _e=="boolean"&&(_e={acceptRelative:_e}),_e.strict?PROTOCOL_STRICT_REGEX.test(_):PROTOCOL_REGEX.test(_)||(_e.acceptRelative?PROTOCOL_RELATIVE_REGEX.test(_):!1)}const TRAILING_SLASH_RE=/\/$|\/\?/;function hasTrailingSlash(_="",_e=!1){return _e?TRAILING_SLASH_RE.test(_):_.endsWith("/")}function withoutTrailingSlash(_="",_e=!1){if(!_e)return(hasTrailingSlash(_)?_.slice(0,-1):_)||"/";if(!hasTrailingSlash(_,!0))return _||"/";const[et,...tt]=_.split("?");return(et.slice(0,-1)||"/")+(tt.length>0?`?${tt.join("?")}`:"")}function withTrailingSlash(_="",_e=!1){if(!_e)return _.endsWith("/")?_:_+"/";if(hasTrailingSlash(_,!0))return _||"/";const[et,...tt]=_.split("?");return et+"/"+(tt.length>0?`?${tt.join("?")}`:"")}function hasLeadingSlash(_=""){return _.startsWith("/")}function withoutLeadingSlash(_=""){return(hasLeadingSlash(_)?_.slice(1):_)||"/"}function withBase(_,_e){if(isEmptyURL(_e)||hasProtocol(_))return _;const et=withoutTrailingSlash(_e);return _.startsWith(et)?_:joinURL(et,_)}function withQuery(_,_e){const et=parseURL(_),tt={...parseQuery(et.search),..._e};return et.search=stringifyQuery(tt),stringifyParsedURL(et)}function isEmptyURL(_){return!_||_==="/"}function isNonEmptyURL(_){return _&&_!=="/"}function joinURL(_,..._e){let et=_||"";for(const tt of _e.filter(rt=>isNonEmptyURL(rt)))et=et?withTrailingSlash(et)+withoutLeadingSlash(tt):tt;return et}function parseURL(_="",_e){if(!hasProtocol(_,{acceptRelative:!0}))return _e?parseURL(_e+_):parsePath(_);const[et="",tt,rt=""]=(_.replace(/\\/g,"/").match(/([^/:]+:)?\/\/([^/@]+@)?(.*)/)||[]).splice(1),[nt="",at=""]=(rt.match(/([^#/?]*)(.*)?/)||[]).splice(1),{pathname:it,search:ot,hash:st}=parsePath(at.replace(/\/(?=[A-Za-z]:)/,""));return{protocol:et,auth:tt?tt.slice(0,Math.max(0,tt.length-1)):"",host:nt,pathname:it,search:ot,hash:st}}function parsePath(_=""){const[_e="",et="",tt=""]=(_.match(/([^#?]*)(\?[^#]*)?(#.*)?/)||[]).splice(1);return{pathname:_e,search:et,hash:tt}}function stringifyParsedURL(_){const _e=_.pathname+(_.search?(_.search.startsWith("?")?"":"?")+_.search:"")+_.hash;return _.protocol?_.protocol+"//"+(_.auth?_.auth+"@":"")+_.host+_e:_e}class FetchError extends Error{constructor(){super(...arguments),this.name="FetchError"}}function createFetchError(_,_e,et){let tt="";_&&et&&(tt=`${et.status} ${et.statusText} (${_.toString()})`),_e&&(tt=`${_e.message} (${tt})`);const rt=new FetchError(tt);return Object.defineProperty(rt,"request",{get(){return _}}),Object.defineProperty(rt,"response",{get(){return et}}),Object.defineProperty(rt,"data",{get(){return et&&et._data}}),Object.defineProperty(rt,"status",{get(){return et&&et.status}}),Object.defineProperty(rt,"statusText",{get(){return et&&et.statusText}}),Object.defineProperty(rt,"statusCode",{get(){return et&&et.status}}),Object.defineProperty(rt,"statusMessage",{get(){return et&&et.statusText}}),rt}const payloadMethods=new Set(Object.freeze(["PATCH","POST","PUT","DELETE"]));function isPayloadMethod(_="GET"){return payloadMethods.has(_.toUpperCase())}function isJSONSerializable(_){if(_===void 0)return!1;const _e=typeof _;return _e==="string"||_e==="number"||_e==="boolean"||_e===null?!0:_e!=="object"?!1:Array.isArray(_)?!0:_.constructor&&_.constructor.name==="Object"||typeof _.toJSON=="function"}const textTypes=new Set(["image/svg","application/xml","application/xhtml","application/html"]),JSON_RE=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function detectResponseType(_=""){if(!_)return"json";const _e=_.split(";").shift();return JSON_RE.test(_e)?"json":textTypes.has(_e)||_e.startsWith("text/")?"text":"blob"}const retryStatusCodes=new Set([408,409,425,429,500,502,503,504]);function createFetch(_){const{fetch:_e,Headers:et}=_;function tt(at){const it=at.error&&at.error.name==="AbortError"||!1;if(at.options.retry!==!1&&!it){const st=typeof at.options.retry=="number"?at.options.retry:isPayloadMethod(at.options.method)?0:1,lt=at.response&&at.response.status||500;if(st>0&&retryStatusCodes.has(lt))return rt(at.request,{...at.options,retry:st-1})}const ot=createFetchError(at.request,at.error,at.response);throw Error.captureStackTrace&&Error.captureStackTrace(ot,rt),ot}const rt=async function(it,ot={}){const st={request:it,options:{..._.defaults,...ot},response:void 0,error:void 0};st.options.onRequest&&await st.options.onRequest(st),typeof st.request=="string"&&(st.options.baseURL&&(st.request=withBase(st.request,st.options.baseURL)),(st.options.query||st.options.params)&&(st.request=withQuery(st.request,{...st.options.params,...st.options.query})),st.options.body&&isPayloadMethod(st.options.method)&&isJSONSerializable(st.options.body)&&(st.options.body=typeof st.options.body=="string"?st.options.body:JSON.stringify(st.options.body),st.options.headers=new et(st.options.headers),st.options.headers.has("content-type")||st.options.headers.set("content-type","application/json"),st.options.headers.has("accept")||st.options.headers.set("accept","application/json"))),st.response=await _e(st.request,st.options).catch(async gt=>(st.error=gt,st.options.onRequestError&&await st.options.onRequestError(st),tt(st)));const lt=(st.options.parseResponse?"json":st.options.responseType)||detectResponseType(st.response.headers.get("content-type")||"");if(lt==="json"){const gt=await st.response.text(),ct=st.options.parseResponse||destr;st.response._data=ct(gt)}else lt==="stream"?st.response._data=st.response.body:st.response._data=await st.response[lt]();return st.options.onResponse&&await st.options.onResponse(st),st.response.status>=400&&st.response.status<600?(st.options.onResponseError&&await st.options.onResponseError(st),tt(st)):st.response},nt=function(it,ot){return rt(it,ot).then(st=>st._data)};return nt.raw=rt,nt.native=_e,nt.create=(at={})=>createFetch({..._,defaults:{..._.defaults,...at}}),nt}const _globalThis=function(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}(),fetch$1=_globalThis.fetch||(()=>Promise.reject(new Error("[ofetch] global.fetch is not supported!"))),Headers=_globalThis.Headers,ofetch=createFetch({fetch:fetch$1,Headers});let proxyUrlIndex=Math.floor(Math.random()*conf().PROXY_URLS.length);function getProxyUrl(){const _=conf().PROXY_URLS[proxyUrlIndex];return proxyUrlIndex=(proxyUrlIndex+1)%conf().PROXY_URLS.length,_}const baseFetch=ofetch.create({retry:0});function makeUrl(_,_e){let et=_;return Object.entries(_e).forEach(([tt,rt])=>{et=et.replace(`{${tt}}`,encodeURIComponent(rt))}),et}function mwFetch(_,_e={}){return baseFetch(_,_e)}function proxiedFetch(_,_e={}){let et=(_e==null?void 0:_e.baseURL)??"";et.length>0&&et.endsWith("/")&&_.startsWith("/")?et+=_.slice(1):et.length>0&&!et.endsWith("/")&&!_.startsWith("/")?et+=`/${_}`:et+=_;const tt=new URL(et);return Object.entries((_e==null?void 0:_e.params)??{}).forEach(([rt,nt])=>{tt.searchParams.set(rt,nt)}),baseFetch(getProxyUrl(),{..._e,baseURL:void 0,params:{destination:tt.toString()}})}var MWMediaType=(_=>(_.MOVIE="movie",_.SERIES="series",_.ANIME="anime",_))(MWMediaType||{});const JW_API_BASE="https://apis.justwatch.com",JW_IMAGE_BASE="https://images.justwatch.com";function mediaTypeToJW(_){if(_===MWMediaType.MOVIE)return"movie";if(_===MWMediaType.SERIES)return"show";throw new Error("unsupported type")}function JWMediaToMediaType(_){if(_==="movie")return MWMediaType.MOVIE;if(_==="show")return MWMediaType.SERIES;throw new Error("unsupported type")}function formatJWMeta(_,_e){var rt;const et=JWMediaToMediaType(_.object_type);let tt;return et===MWMediaType.SERIES&&(tt=(rt=_.seasons)==null?void 0:rt.sort((nt,at)=>nt.season_number-at.season_number).map(nt=>({id:nt.id.toString(),number:nt.season_number,title:nt.title}))),{title:_.title,id:_.id.toString(),year:_.original_release_year.toString(),poster:_.poster?`${JW_IMAGE_BASE}${_.poster.replace("{profile}","s166")}`:void 0,type:et,seasons:tt,seasonData:_e?{id:_e.id.toString(),number:_e.season_number,title:_e.title,episodes:_e.episodes.sort((nt,at)=>nt.episode_number-at.episode_number).map(nt=>({id:nt.id.toString(),number:nt.episode_number,title:nt.title}))}:void 0}}function JWMediaToId(_){return["JW",mediaTypeToJW(_.type),_.id].join("-")}function decodeJWId(_){const[_e,et,tt]=_.split("-",3);if(_e!=="JW")return null;let rt;try{rt=JWMediaToMediaType(et)}catch{return null}return{type:rt,id:tt}}async function getMetaFromId(_,_e,et){var ot,st,lt;const tt=mediaTypeToJW(_);let rt;try{const gt=makeUrl("/content/titles/{type}/{id}/locale/en_US",{type:tt,id:_e});rt=await proxiedFetch(gt,{baseURL:JW_API_BASE})}catch(gt){if(gt instanceof FetchError&&(gt.statusCode===400||gt.statusCode===404))return null;throw gt}const nt=(ot=rt.external_ids.find(gt=>gt.provider==="imdb_latest"))==null?void 0:ot.external_id,at=(st=rt.external_ids.find(gt=>gt.provider==="tmdb_latest"))==null?void 0:st.external_id;if(!nt||!at)throw new Error("not enough info");let it;if(rt.object_type==="show"){const gt=et??((lt=rt.seasons)==null?void 0:lt[0].id.toString())??"",ct=makeUrl("/content/titles/show_season/{id}/locale/en_US",{id:gt});it=await proxiedFetch(ct,{baseURL:JW_API_BASE})}return{meta:formatJWMeta(rt,it),imdbId:nt,tmdbId:at}}class SimpleCache{constructor(){kr(this,"INTERVAL_MS",2*60*1e3);kr(this,"_interval",null);kr(this,"_compare",null);kr(this,"_storage",[])}initialize(){if(this._interval)throw new Error("cache is already initialized");this._interval=setInterval(()=>{const _e=new Date;this._storage.filter(et=>!(et.expiry<_e))},this.INTERVAL_MS)}destroy(){this._interval&&clearInterval(this._interval),this.clear()}setCompare(_e){this._compare=_e}has(_e){return!!this.get(_e)}get(_e){if(!this._compare)throw new Error("Compare function not set");const et=this._storage.find(tt=>this._compare&&this._compare(tt.key,_e));if(!!et)return et.value}set(_e,et,tt){if(!this._compare)throw new Error("Compare function not set");const rt=this._storage.find(at=>this._compare&&this._compare(at.key,_e)),nt=new Date(new Date().getTime()+tt*1e3);if(rt){rt.key=_e,rt.value=et,rt.expiry=nt;return}this._storage.push({key:_e,value:et,expiry:nt})}remove(_e){if(!this._compare)throw new Error("Compare function not set");this._storage.filter(et=>!(this._compare&&this._compare(et.key,_e)))}clear(){this._storage=[]}}const cache=new SimpleCache;cache.setCompare((_,_e)=>_.type===_e.type&&_.searchQuery.trim()===_e.searchQuery.trim());cache.initialize();async function searchForMedia(_){if(cache.has(_))return cache.get(_);const{searchQuery:_e,type:et}=_,rt={content_types:[mediaTypeToJW(et)],page:1,query:_e,page_size:40},at=(await proxiedFetch("/content/titles/en_US/popular",{baseURL:JW_API_BASE,params:{body:JSON.stringify(rt)}})).items.map(it=>formatJWMeta(it));return cache.set(_,at,3600),at}function normalizeTitle(_){return _.trim().toLowerCase().replace(/['":]/g,"").replace(/[^a-zA-Z0-9]+/g,"_")}function compareTitle(_,_e){return normalizeTitle(_)===normalizeTitle(_e)}async function getMetas(_,_e){const et=(nt,at)=>Math.abs(nt-at)<=1,tt={},rt=await Promise.all(Object.values(_).map(async nt=>{const at=Number(nt.year.toString().split("-")[0]),ot=(await searchForMedia({searchQuery:`${nt.title} ${at}`,type:nt.mediaType})).find(st=>et(Number(st.year),at)&&compareTitle(st.title,nt.title));if(!ot){console.error(`No item found for migration: ${nt.title}`);return}return{id:nt.mediaId,data:ot}}));for(const nt of rt.filter(Boolean)){if(!nt)continue;let at=[["0","0"]];if(nt.data.type==="series"){const it=await getMetaFromId(nt.data.type,nt.data.id);if(!it||!(it!=null&&it.meta.seasons))return;at=[...new Set(_e!=null&&_e.items?_e.items.filter(lt=>lt.mediaId===nt.id).map(lt=>lt.seasonId):["0"])].map(lt=>{var gt,ct;return{num:lt,season:(ct=(gt=it.meta)==null?void 0:gt.seasons)==null?void 0:ct[Math.max(0,lt-1)]}}).map(lt=>{var gt;return lt?[lt.num,(gt=lt==null?void 0:lt.season)==null?void 0:gt.id]:[]}).filter(lt=>lt.length>0)}tt[nt.id]||(tt[nt.id]={}),await Promise.all(at.map(async([it,ot])=>{!it||(tt[nt.id][it]=await getMetaFromId(nt.data.type,nt.data.id,ot==="0"||ot===null?void 0:ot))}))}return tt}async function migrateV1Bookmarks(_){const _e=_;if(!_e)return;const et={};_e.bookmarks.forEach(nt=>{et[nt.mediaId]||(et[nt.mediaId]=nt)});const tt=await getMetas(et);return tt?{bookmarks:Object.keys(tt).map(nt=>tt[nt][0]).map(nt=>nt==null?void 0:nt.meta).filter(Boolean)}:void 0}async function migrateV2Videos(_){var at,it,ot,st;const _e=_;if(!_e)return;const et={};_e.items.forEach(lt=>{et[lt.mediaId]||(et[lt.mediaId]=lt)});const tt=await getMetas(et,_e);if(!tt)return;const rt={..._e,items:[]},nt=Date.now();for(const lt of _e.items)if(lt.mediaType==="movie"){if(!((at=tt[lt.mediaId][0])!=null&&at.meta))continue;const gt={item:{meta:(it=tt[lt.mediaId][0])==null?void 0:it.meta},progress:lt.progress,percentage:lt.percentage,watchedAt:Date.now()};_e.items=_e.items.filter(ct=>JSON.stringify(ct)!==JSON.stringify(lt)),rt.items.push(gt)}else if(lt.mediaType==="series"){if(!((ot=tt[lt.mediaId][lt.seasonId])!=null&&ot.meta))continue;const gt=(st=tt[lt.mediaId][lt.seasonId])==null?void 0:st.meta;if(gt.type!=="series")return;const ct={item:{meta:gt,series:{episode:Number(lt.episodeId),season:Number(lt.seasonId),seasonId:gt.seasonData.id,episodeId:gt.seasonData.episodes[Number(lt.episodeId)-1].id}},progress:lt.progress,percentage:lt.percentage,watchedAt:nt+Number(lt.seasonId)*1e3+Number(lt.episodeId)};if(rt.items.find(wt=>{var Tt,Rt;return wt.item.meta.id===ct.item.meta.id&&((Tt=wt.item.series)==null?void 0:Tt.episodeId)===((Rt=ct.item.series)==null?void 0:Rt.episodeId)}))continue;_e.items=_e.items.filter(wt=>JSON.stringify(wt)!==JSON.stringify(lt)),rt.items.push(ct)}return rt}const BookmarkStore=createVersionedStore().setKey("mw-bookmarks").addVersion({version:0,migrate(_){return migrateV1Bookmarks(_)}}).addVersion({version:1,create(){return{bookmarks:[]}}}).build(),BookmarkedContext=react.exports.createContext({setItemBookmark:()=>{},getFilteredBookmarks:()=>[],bookmarkStore:{bookmarks:[]}});function getBookmarkIndexFromMedia(_,_e){return _.findIndex(tt=>tt.id===_e.id)}function BookmarkContextProvider(_){const[_e,et]=useStore(BookmarkStore),tt=react.exports.useMemo(()=>({setItemBookmark(rt,nt){et(at=>{let it=[...at.bookmarks];return it=it.filter(ot=>ot.id!==rt.id),nt&&it.push({...rt}),{bookmarks:it}})},getFilteredBookmarks(){return[..._e.bookmarks]},bookmarkStore:_e}),[_e,et]);return jsxRuntime.exports.jsx(BookmarkedContext.Provider,{value:tt,children:_.children})}function useBookmarkContext(){return react.exports.useContext(BookmarkedContext)}function getIfBookmarkedFromPortable(_,_e){return getBookmarkIndexFromMedia(_,_e)!==-1}const VideoProgressStore=createVersionedStore().setKey("video-progress").addVersion({version:0,migrate(){return{items:[]}}}).addVersion({version:1,async migrate(_){return migrateV2Videos(_)}}).addVersion({version:2,create(){return{items:[]}}}).build(),FIVETEEN_MINUTES=15*60,FIVE_MINUTES=5*60;function shouldSave(_,_e,et){const tt=Math.max(0,_e-_);return _e<FIVETEEN_MINUTES?!(_<5||tt<60):!(_<30||tt<FIVE_MINUTES&&!et)}const WatchedContext=react.exports.createContext({updateProgress:()=>{},getFilteredWatched:()=>[],removeProgress:()=>{},watched:{items:[]}});WatchedContext.displayName="WatchedContext";function isSameEpisode(_,_e){var et,tt;return _.meta.id===_e.meta.id&&(!_.series||_.series.seasonId===((et=_e.series)==null?void 0:et.seasonId)&&_.series.episodeId===((tt=_e.series)==null?void 0:tt.episodeId))}function WatchedContextProvider(_){const[_e,et]=useStore(VideoProgressStore),tt=react.exports.useMemo(()=>({removeProgress(rt){et(nt=>{const at={...nt};return at.items=at.items.filter(it=>it.item.meta.id!==rt),at})},updateProgress(rt,nt,at){et(it=>{const ot={...it};let st=ot.items.find(lt=>isSameEpisode(rt,lt.item));return st||(st={item:{...rt,meta:{...rt.meta},series:rt.series?{...rt.series}:void 0},progress:0,percentage:0,watchedAt:Date.now()},ot.items.push(st)),st.progress=nt,st.percentage=Math.round(nt/at*100),st.watchedAt=Date.now(),shouldSave(nt,at,!!rt.series)||(ot.items=it.items.filter(lt=>!isSameEpisode(lt.item,rt))),ot})},getFilteredWatched(){let rt=_e.items;const nt=[];return rt=rt.sort((at,it)=>it.watchedAt-at.watchedAt).filter(at=>{const it=at.item.meta.id;return nt.includes(it)?!1:(nt.push(it),!0)}),rt},watched:_e}),[_e,et]);return jsxRuntime.exports.jsx(WatchedContext.Provider,{value:tt,children:_.children})}function useWatchedContext(){return react.exports.useContext(WatchedContext)}function isSameEpisodeMeta(_,_e,et){return(_e==null?void 0:_e.meta.type)===MWMediaType.SERIES&&et?isSameEpisode(_,{meta:_e.meta,series:{season:0,episode:0,episodeId:et,seasonId:_e.meta.seasonData.id}}):_e?isSameEpisode(_,{meta:_e.meta}):()=>!1}function useWatchedItem(_,_e){const{watched:et,updateProgress:tt}=react.exports.useContext(WatchedContext),rt=react.exports.useMemo(()=>et.items.find(it=>isSameEpisodeMeta(it.item,_,_e)),[et,_,_e]),nt=react.exports.useRef([0,0]);return{updateProgress:react.exports.useCallback((it,ot)=>{var lt;const st=nt.current[0]!==it||nt.current[1]!==ot;if(_&&st){nt.current=[it,ot];const gt={meta:_.meta,series:_.meta.type===MWMediaType.SERIES&&_e?{seasonId:_.meta.seasonData.id,episodeId:_e,season:_.meta.seasonData.number,episode:((lt=_.meta.seasonData.episodes.find(ct=>ct.id===_e))==null?void 0:lt.number)||0}:void 0};tt(gt,it,ot)}},[_,tt,_e]),watchedItem:rt}}var noop$3=function(){},isBrowser=typeof window<"u",useIsomorphicLayoutEffect=isBrowser?react.exports.useLayoutEffect:react.exports.useEffect;const useIsomorphicLayoutEffect$1=useIsomorphicLayoutEffect;var defaultState={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};function useMeasure(){var _=react.exports.useState(null),_e=_[0],et=_[1],tt=react.exports.useState(defaultState),rt=tt[0],nt=tt[1],at=react.exports.useMemo(function(){return new window.ResizeObserver(function(it){if(it[0]){var ot=it[0].contentRect,st=ot.x,lt=ot.y,gt=ot.width,ct=ot.height,wt=ot.top,Tt=ot.left,Rt=ot.bottom,ht=ot.right;nt({x:st,y:lt,width:gt,height:ct,top:wt,left:Tt,bottom:Rt,right:ht})}})},[]);return useIsomorphicLayoutEffect$1(function(){if(!!_e)return at.observe(_e),function(){at.disconnect()}},[_e]),[et,rt]}const useMeasure$1=isBrowser&&typeof window.ResizeObserver<"u"?useMeasure:function(){return[noop$3,defaultState]},BannerContext=react.exports.createContext(null);function BannerContextProvider(_){const[_e,et]=react.exports.useState([]),tt=react.exports.useMemo(()=>[_e,et],[_e]);return jsxRuntime.exports.jsx(BannerContext.Provider,{value:tt,children:_.children})}function useBanner(_){const[_e,{height:et}]=useMeasure$1(),[tt,rt]=react.exports.useContext(BannerContext);return react.exports.useEffect(()=>(rt(nt=>[...nt,{id:_,height:0}]),rt(nt=>{const at=nt.find(it=>it.id===_);return at&&(at.height=et),nt}),()=>{rt(nt=>nt.filter(at=>at.id!==_))}),[et,_,rt]),[_e]}function useBannerSize(){const[_]=react.exports.useContext(BannerContext);return _.reduce((_e,et)=>_e+et.height,0)}function BrandPill(_){const{t:_e}=useTranslation();return jsxRuntime.exports.jsxs("div",{className:`flex items-center space-x-2 rounded-full bg-bink-300 bg-opacity-50 px-4 py-2 text-bink-600 ${_.clickable?"transition-[transform,background-color] hover:scale-105 hover:bg-bink-400 hover:text-bink-700 active:scale-95":""}`,children:[jsxRuntime.exports.jsx(Icon,{className:"text-xl",icon:Icons.MOVIE_WEB}),jsxRuntime.exports.jsx("span",{className:["font-semibold text-white",_.hideTextOnMobile?"hidden sm:block":""].join(" "),children:_e("global.name")})]})}function Navigation(_){const _e=useBannerSize();return jsxRuntime.exports.jsx("div",{className:"fixed left-0 right-0 top-0 z-20 min-h-[150px] bg-gradient-to-b from-denim-300 via-denim-300 to-transparent sm:from-transparent",style:{top:`${_e}px`},children:jsxRuntime.exports.jsxs("div",{className:"fixed left-0 right-0 flex items-center justify-between py-5 px-7",children:[jsxRuntime.exports.jsx("div",{className:`${_.bg?"opacity-100":"opacity-0"} absolute inset-0 block bg-denim-100 transition-opacity duration-300`,children:jsxRuntime.exports.jsx("div",{className:"pointer-events-none absolute -bottom-24 h-24 w-full bg-gradient-to-b from-denim-100 to-transparent"})}),jsxRuntime.exports.jsxs("div",{className:"relative flex w-full items-center justify-center sm:w-fit",children:[jsxRuntime.exports.jsx("div",{className:"mr-auto sm:mr-6",children:jsxRuntime.exports.jsx(Link$1,{to:"/",children:jsxRuntime.exports.jsx(BrandPill,{clickable:!0})})}),_.children]}),jsxRuntime.exports.jsxs("div",{className:`${_.children?"hidden sm:flex":"flex"} relative flex-row	gap-4`,children:[jsxRuntime.exports.jsx("a",{href:conf().DISCORD_LINK,target:"_blank",rel:"noreferrer",className:"text-2xl text-white",children:jsxRuntime.exports.jsx(IconPatch,{icon:Icons.DISCORD,clickable:!0})}),jsxRuntime.exports.jsx("a",{href:conf().GITHUB_LINK,target:"_blank",rel:"noreferrer",className:"text-2xl text-white",children:jsxRuntime.exports.jsx(IconPatch,{icon:Icons.GITHUB,clickable:!0})})]})]})})}function ArrowLink(_){const _e=_.direction||"right",et=!!_.url,tt=!!_.to,rt=jsxRuntime.exports.jsxs("span",{className:"group mt-1 inline-flex cursor-pointer items-center space-x-1 pr-1 font-bold text-bink-600 hover:text-bink-700 active:scale-95",children:[_e==="left"?jsxRuntime.exports.jsx("span",{className:"text-xl transition-transform group-hover:-translate-x-1",children:jsxRuntime.exports.jsx(Icon,{icon:Icons.ARROW_LEFT})}):null,jsxRuntime.exports.jsx("span",{className:"flex-1",children:_.linkText}),_e==="right"?jsxRuntime.exports.jsx("span",{className:"text-xl transition-transform group-hover:translate-x-1",children:jsxRuntime.exports.jsx(Icon,{icon:Icons.ARROW_RIGHT})}):null]});return et?jsxRuntime.exports.jsx("a",{href:_.url,children:rt}):tt?jsxRuntime.exports.jsx(Link$1,{to:_.to,children:rt}):jsxRuntime.exports.jsx("span",{onClick:()=>_.onClick&&_.onClick(),children:rt})}function useGoBack(){const _=useHistory();return react.exports.useCallback(()=>{_.action!=="POP"?_.goBack():_.push("/")},[_])}function _interopDefault(_){return _&&typeof _=="object"&&"default"in _?_.default:_}var React=react.exports,React__default=_interopDefault(React);function _defineProperty$2(_,_e,et){return _e in _?Object.defineProperty(_,_e,{value:et,enumerable:!0,configurable:!0,writable:!0}):_[_e]=et,_}function _inheritsLoose(_,_e){_.prototype=Object.create(_e.prototype),_.prototype.constructor=_,_.__proto__=_e}var canUseDOM=!!(typeof window<"u"&&window.document&&window.document.createElement);function withSideEffect(_,_e,et){if(typeof _!="function")throw new Error("Expected reducePropsToState to be a function.");if(typeof _e!="function")throw new Error("Expected handleStateChangeOnClient to be a function.");if(typeof et<"u"&&typeof et!="function")throw new Error("Expected mapStateOnServer to either be undefined or a function.");function tt(rt){return rt.displayName||rt.name||"Component"}return function(nt){if(typeof nt!="function")throw new Error("Expected WrappedComponent to be a React component.");var at=[],it;function ot(){it=_(at.map(function(lt){return lt.props})),st.canUseDOM?_e(it):et&&(it=et(it))}var st=function(lt){_inheritsLoose(gt,lt);function gt(){return lt.apply(this,arguments)||this}gt.peek=function(){return it},gt.rewind=function(){if(gt.canUseDOM)throw new Error("You may only call rewind() on the server. Call peek() to read the current state.");var Tt=it;return it=void 0,at=[],Tt};var ct=gt.prototype;return ct.UNSAFE_componentWillMount=function(){at.push(this),ot()},ct.componentDidUpdate=function(){ot()},ct.componentWillUnmount=function(){var Tt=at.indexOf(this);at.splice(Tt,1),ot()},ct.render=function(){return React__default.createElement(nt,this.props)},gt}(React.PureComponent);return _defineProperty$2(st,"displayName","SideEffect("+tt(nt)+")"),_defineProperty$2(st,"canUseDOM",canUseDOM),st}}var lib$1=withSideEffect,hasElementType=typeof Element<"u",hasMap=typeof Map=="function",hasSet=typeof Set=="function",hasArrayBuffer=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function equal(_,_e){if(_===_e)return!0;if(_&&_e&&typeof _=="object"&&typeof _e=="object"){if(_.constructor!==_e.constructor)return!1;var et,tt,rt;if(Array.isArray(_)){if(et=_.length,et!=_e.length)return!1;for(tt=et;tt--!==0;)if(!equal(_[tt],_e[tt]))return!1;return!0}var nt;if(hasMap&&_ instanceof Map&&_e instanceof Map){if(_.size!==_e.size)return!1;for(nt=_.entries();!(tt=nt.next()).done;)if(!_e.has(tt.value[0]))return!1;for(nt=_.entries();!(tt=nt.next()).done;)if(!equal(tt.value[1],_e.get(tt.value[0])))return!1;return!0}if(hasSet&&_ instanceof Set&&_e instanceof Set){if(_.size!==_e.size)return!1;for(nt=_.entries();!(tt=nt.next()).done;)if(!_e.has(tt.value[0]))return!1;return!0}if(hasArrayBuffer&&ArrayBuffer.isView(_)&&ArrayBuffer.isView(_e)){if(et=_.length,et!=_e.length)return!1;for(tt=et;tt--!==0;)if(_[tt]!==_e[tt])return!1;return!0}if(_.constructor===RegExp)return _.source===_e.source&&_.flags===_e.flags;if(_.valueOf!==Object.prototype.valueOf)return _.valueOf()===_e.valueOf();if(_.toString!==Object.prototype.toString)return _.toString()===_e.toString();if(rt=Object.keys(_),et=rt.length,et!==Object.keys(_e).length)return!1;for(tt=et;tt--!==0;)if(!Object.prototype.hasOwnProperty.call(_e,rt[tt]))return!1;if(hasElementType&&_ instanceof Element)return!1;for(tt=et;tt--!==0;)if(!((rt[tt]==="_owner"||rt[tt]==="__v"||rt[tt]==="__o")&&_.$$typeof)&&!equal(_[rt[tt]],_e[rt[tt]]))return!1;return!0}return _!==_&&_e!==_e}var reactFastCompare=function(_e,et){try{return equal(_e,et)}catch(tt){if((tt.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw tt}},ATTRIBUTE_NAMES={BODY:"bodyAttributes",HTML:"htmlAttributes",TITLE:"titleAttributes"},TAG_NAMES={BASE:"base",BODY:"body",HEAD:"head",HTML:"html",LINK:"link",META:"meta",NOSCRIPT:"noscript",SCRIPT:"script",STYLE:"style",TITLE:"title"};Object.keys(TAG_NAMES).map(function(_){return TAG_NAMES[_]});var TAG_PROPERTIES={CHARSET:"charset",CSS_TEXT:"cssText",HREF:"href",HTTPEQUIV:"http-equiv",INNER_HTML:"innerHTML",ITEM_PROP:"itemprop",NAME:"name",PROPERTY:"property",REL:"rel",SRC:"src",TARGET:"target"},REACT_TAG_MAP={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},HELMET_PROPS={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate"},HTML_TAG_MAP=Object.keys(REACT_TAG_MAP).reduce(function(_,_e){return _[REACT_TAG_MAP[_e]]=_e,_},{}),SELF_CLOSING_TAGS=[TAG_NAMES.NOSCRIPT,TAG_NAMES.SCRIPT,TAG_NAMES.STYLE],HELMET_ATTRIBUTE="data-react-helmet",_typeof$1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},classCallCheck=function(_,_e){if(!(_ instanceof _e))throw new TypeError("Cannot call a class as a function")},createClass=function(){function _(_e,et){for(var tt=0;tt<et.length;tt++){var rt=et[tt];rt.enumerable=rt.enumerable||!1,rt.configurable=!0,"value"in rt&&(rt.writable=!0),Object.defineProperty(_e,rt.key,rt)}}return function(_e,et,tt){return et&&_(_e.prototype,et),tt&&_(_e,tt),_e}}(),_extends=Object.assign||function(_){for(var _e=1;_e<arguments.length;_e++){var et=arguments[_e];for(var tt in et)Object.prototype.hasOwnProperty.call(et,tt)&&(_[tt]=et[tt])}return _},inherits=function(_,_e){if(typeof _e!="function"&&_e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _e);_.prototype=Object.create(_e&&_e.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),_e&&(Object.setPrototypeOf?Object.setPrototypeOf(_,_e):_.__proto__=_e)},objectWithoutProperties=function(_,_e){var et={};for(var tt in _)_e.indexOf(tt)>=0||!Object.prototype.hasOwnProperty.call(_,tt)||(et[tt]=_[tt]);return et},possibleConstructorReturn=function(_,_e){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _e&&(typeof _e=="object"||typeof _e=="function")?_e:_},encodeSpecialCharacters=function(_e){var et=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return et===!1?String(_e):String(_e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},getTitleFromPropsList=function(_e){var et=getInnermostProperty(_e,TAG_NAMES.TITLE),tt=getInnermostProperty(_e,HELMET_PROPS.TITLE_TEMPLATE);if(tt&&et)return tt.replace(/%s/g,function(){return Array.isArray(et)?et.join(""):et});var rt=getInnermostProperty(_e,HELMET_PROPS.DEFAULT_TITLE);return et||rt||void 0},getOnChangeClientState=function(_e){return getInnermostProperty(_e,HELMET_PROPS.ON_CHANGE_CLIENT_STATE)||function(){}},getAttributesFromPropsList=function(_e,et){return et.filter(function(tt){return typeof tt[_e]<"u"}).map(function(tt){return tt[_e]}).reduce(function(tt,rt){return _extends({},tt,rt)},{})},getBaseTagFromPropsList=function(_e,et){return et.filter(function(tt){return typeof tt[TAG_NAMES.BASE]<"u"}).map(function(tt){return tt[TAG_NAMES.BASE]}).reverse().reduce(function(tt,rt){if(!tt.length)for(var nt=Object.keys(rt),at=0;at<nt.length;at++){var it=nt[at],ot=it.toLowerCase();if(_e.indexOf(ot)!==-1&&rt[ot])return tt.concat(rt)}return tt},[])},getTagsFromPropsList=function(_e,et,tt){var rt={};return tt.filter(function(nt){return Array.isArray(nt[_e])?!0:(typeof nt[_e]<"u"&&warn$1("Helmet: "+_e+' should be of type "Array". Instead found type "'+_typeof$1(nt[_e])+'"'),!1)}).map(function(nt){return nt[_e]}).reverse().reduce(function(nt,at){var it={};at.filter(function(ct){for(var wt=void 0,Tt=Object.keys(ct),Rt=0;Rt<Tt.length;Rt++){var ht=Tt[Rt],ut=ht.toLowerCase();et.indexOf(ut)!==-1&&!(wt===TAG_PROPERTIES.REL&&ct[wt].toLowerCase()==="canonical")&&!(ut===TAG_PROPERTIES.REL&&ct[ut].toLowerCase()==="stylesheet")&&(wt=ut),et.indexOf(ht)!==-1&&(ht===TAG_PROPERTIES.INNER_HTML||ht===TAG_PROPERTIES.CSS_TEXT||ht===TAG_PROPERTIES.ITEM_PROP)&&(wt=ht)}if(!wt||!ct[wt])return!1;var ft=ct[wt].toLowerCase();return rt[wt]||(rt[wt]={}),it[wt]||(it[wt]={}),rt[wt][ft]?!1:(it[wt][ft]=!0,!0)}).reverse().forEach(function(ct){return nt.push(ct)});for(var ot=Object.keys(it),st=0;st<ot.length;st++){var lt=ot[st],gt=objectAssign({},rt[lt],it[lt]);rt[lt]=gt}return nt},[]).reverse()},getInnermostProperty=function(_e,et){for(var tt=_e.length-1;tt>=0;tt--){var rt=_e[tt];if(rt.hasOwnProperty(et))return rt[et]}return null},reducePropsToState=function(_e){return{baseTag:getBaseTagFromPropsList([TAG_PROPERTIES.HREF,TAG_PROPERTIES.TARGET],_e),bodyAttributes:getAttributesFromPropsList(ATTRIBUTE_NAMES.BODY,_e),defer:getInnermostProperty(_e,HELMET_PROPS.DEFER),encode:getInnermostProperty(_e,HELMET_PROPS.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:getAttributesFromPropsList(ATTRIBUTE_NAMES.HTML,_e),linkTags:getTagsFromPropsList(TAG_NAMES.LINK,[TAG_PROPERTIES.REL,TAG_PROPERTIES.HREF],_e),metaTags:getTagsFromPropsList(TAG_NAMES.META,[TAG_PROPERTIES.NAME,TAG_PROPERTIES.CHARSET,TAG_PROPERTIES.HTTPEQUIV,TAG_PROPERTIES.PROPERTY,TAG_PROPERTIES.ITEM_PROP],_e),noscriptTags:getTagsFromPropsList(TAG_NAMES.NOSCRIPT,[TAG_PROPERTIES.INNER_HTML],_e),onChangeClientState:getOnChangeClientState(_e),scriptTags:getTagsFromPropsList(TAG_NAMES.SCRIPT,[TAG_PROPERTIES.SRC,TAG_PROPERTIES.INNER_HTML],_e),styleTags:getTagsFromPropsList(TAG_NAMES.STYLE,[TAG_PROPERTIES.CSS_TEXT],_e),title:getTitleFromPropsList(_e),titleAttributes:getAttributesFromPropsList(ATTRIBUTE_NAMES.TITLE,_e)}},rafPolyfill=function(){var _=Date.now();return function(_e){var et=Date.now();et-_>16?(_=et,_e(et)):setTimeout(function(){rafPolyfill(_e)},0)}}(),cafPolyfill=function(_e){return clearTimeout(_e)},requestAnimationFrame$1=typeof window<"u"?window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||rafPolyfill:global.requestAnimationFrame||rafPolyfill,cancelAnimationFrame$1=typeof window<"u"?window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||cafPolyfill:global.cancelAnimationFrame||cafPolyfill,warn$1=function(_e){return console&&typeof console.warn=="function"&&console.warn(_e)},_helmetCallback=null,handleClientStateChange=function(_e){_helmetCallback&&cancelAnimationFrame$1(_helmetCallback),_e.defer?_helmetCallback=requestAnimationFrame$1(function(){commitTagChanges(_e,function(){_helmetCallback=null})}):(commitTagChanges(_e),_helmetCallback=null)},commitTagChanges=function(_e,et){var tt=_e.baseTag,rt=_e.bodyAttributes,nt=_e.htmlAttributes,at=_e.linkTags,it=_e.metaTags,ot=_e.noscriptTags,st=_e.onChangeClientState,lt=_e.scriptTags,gt=_e.styleTags,ct=_e.title,wt=_e.titleAttributes;updateAttributes(TAG_NAMES.BODY,rt),updateAttributes(TAG_NAMES.HTML,nt),updateTitle(ct,wt);var Tt={baseTag:updateTags(TAG_NAMES.BASE,tt),linkTags:updateTags(TAG_NAMES.LINK,at),metaTags:updateTags(TAG_NAMES.META,it),noscriptTags:updateTags(TAG_NAMES.NOSCRIPT,ot),scriptTags:updateTags(TAG_NAMES.SCRIPT,lt),styleTags:updateTags(TAG_NAMES.STYLE,gt)},Rt={},ht={};Object.keys(Tt).forEach(function(ut){var ft=Tt[ut],yt=ft.newTags,xt=ft.oldTags;yt.length&&(Rt[ut]=yt),xt.length&&(ht[ut]=Tt[ut].oldTags)}),et&&et(),st(_e,Rt,ht)},flattenArray=function(_e){return Array.isArray(_e)?_e.join(""):_e},updateTitle=function(_e,et){typeof _e<"u"&&document.title!==_e&&(document.title=flattenArray(_e)),updateAttributes(TAG_NAMES.TITLE,et)},updateAttributes=function(_e,et){var tt=document.getElementsByTagName(_e)[0];if(!!tt){for(var rt=tt.getAttribute(HELMET_ATTRIBUTE),nt=rt?rt.split(","):[],at=[].concat(nt),it=Object.keys(et),ot=0;ot<it.length;ot++){var st=it[ot],lt=et[st]||"";tt.getAttribute(st)!==lt&&tt.setAttribute(st,lt),nt.indexOf(st)===-1&&nt.push(st);var gt=at.indexOf(st);gt!==-1&&at.splice(gt,1)}for(var ct=at.length-1;ct>=0;ct--)tt.removeAttribute(at[ct]);nt.length===at.length?tt.removeAttribute(HELMET_ATTRIBUTE):tt.getAttribute(HELMET_ATTRIBUTE)!==it.join(",")&&tt.setAttribute(HELMET_ATTRIBUTE,it.join(","))}},updateTags=function(_e,et){var tt=document.head||document.querySelector(TAG_NAMES.HEAD),rt=tt.querySelectorAll(_e+"["+HELMET_ATTRIBUTE+"]"),nt=Array.prototype.slice.call(rt),at=[],it=void 0;return et&&et.length&&et.forEach(function(ot){var st=document.createElement(_e);for(var lt in ot)if(ot.hasOwnProperty(lt))if(lt===TAG_PROPERTIES.INNER_HTML)st.innerHTML=ot.innerHTML;else if(lt===TAG_PROPERTIES.CSS_TEXT)st.styleSheet?st.styleSheet.cssText=ot.cssText:st.appendChild(document.createTextNode(ot.cssText));else{var gt=typeof ot[lt]>"u"?"":ot[lt];st.setAttribute(lt,gt)}st.setAttribute(HELMET_ATTRIBUTE,"true"),nt.some(function(ct,wt){return it=wt,st.isEqualNode(ct)})?nt.splice(it,1):at.push(st)}),nt.forEach(function(ot){return ot.parentNode.removeChild(ot)}),at.forEach(function(ot){return tt.appendChild(ot)}),{oldTags:nt,newTags:at}},generateElementAttributesAsString=function(_e){return Object.keys(_e).reduce(function(et,tt){var rt=typeof _e[tt]<"u"?tt+'="'+_e[tt]+'"':""+tt;return et?et+" "+rt:rt},"")},generateTitleAsString=function(_e,et,tt,rt){var nt=generateElementAttributesAsString(tt),at=flattenArray(et);return nt?"<"+_e+" "+HELMET_ATTRIBUTE+'="true" '+nt+">"+encodeSpecialCharacters(at,rt)+"</"+_e+">":"<"+_e+" "+HELMET_ATTRIBUTE+'="true">'+encodeSpecialCharacters(at,rt)+"</"+_e+">"},generateTagsAsString=function(_e,et,tt){return et.reduce(function(rt,nt){var at=Object.keys(nt).filter(function(st){return!(st===TAG_PROPERTIES.INNER_HTML||st===TAG_PROPERTIES.CSS_TEXT)}).reduce(function(st,lt){var gt=typeof nt[lt]>"u"?lt:lt+'="'+encodeSpecialCharacters(nt[lt],tt)+'"';return st?st+" "+gt:gt},""),it=nt.innerHTML||nt.cssText||"",ot=SELF_CLOSING_TAGS.indexOf(_e)===-1;return rt+"<"+_e+" "+HELMET_ATTRIBUTE+'="true" '+at+(ot?"/>":">"+it+"</"+_e+">")},"")},convertElementAttributestoReactProps=function(_e){var et=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.keys(_e).reduce(function(tt,rt){return tt[REACT_TAG_MAP[rt]||rt]=_e[rt],tt},et)},convertReactPropstoHtmlAttributes=function(_e){var et=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.keys(_e).reduce(function(tt,rt){return tt[HTML_TAG_MAP[rt]||rt]=_e[rt],tt},et)},generateTitleAsReactComponent=function(_e,et,tt){var rt,nt=(rt={key:et},rt[HELMET_ATTRIBUTE]=!0,rt),at=convertElementAttributestoReactProps(tt,nt);return[React$1.createElement(TAG_NAMES.TITLE,at,et)]},generateTagsAsReactComponent=function(_e,et){return et.map(function(tt,rt){var nt,at=(nt={key:rt},nt[HELMET_ATTRIBUTE]=!0,nt);return Object.keys(tt).forEach(function(it){var ot=REACT_TAG_MAP[it]||it;if(ot===TAG_PROPERTIES.INNER_HTML||ot===TAG_PROPERTIES.CSS_TEXT){var st=tt.innerHTML||tt.cssText;at.dangerouslySetInnerHTML={__html:st}}else at[ot]=tt[it]}),React$1.createElement(_e,at)})},getMethodsForTag=function(_e,et,tt){switch(_e){case TAG_NAMES.TITLE:return{toComponent:function(){return generateTitleAsReactComponent(_e,et.title,et.titleAttributes)},toString:function(){return generateTitleAsString(_e,et.title,et.titleAttributes,tt)}};case ATTRIBUTE_NAMES.BODY:case ATTRIBUTE_NAMES.HTML:return{toComponent:function(){return convertElementAttributestoReactProps(et)},toString:function(){return generateElementAttributesAsString(et)}};default:return{toComponent:function(){return generateTagsAsReactComponent(_e,et)},toString:function(){return generateTagsAsString(_e,et,tt)}}}},mapStateOnServer=function(_e){var et=_e.baseTag,tt=_e.bodyAttributes,rt=_e.encode,nt=_e.htmlAttributes,at=_e.linkTags,it=_e.metaTags,ot=_e.noscriptTags,st=_e.scriptTags,lt=_e.styleTags,gt=_e.title,ct=gt===void 0?"":gt,wt=_e.titleAttributes;return{base:getMethodsForTag(TAG_NAMES.BASE,et,rt),bodyAttributes:getMethodsForTag(ATTRIBUTE_NAMES.BODY,tt,rt),htmlAttributes:getMethodsForTag(ATTRIBUTE_NAMES.HTML,nt,rt),link:getMethodsForTag(TAG_NAMES.LINK,at,rt),meta:getMethodsForTag(TAG_NAMES.META,it,rt),noscript:getMethodsForTag(TAG_NAMES.NOSCRIPT,ot,rt),script:getMethodsForTag(TAG_NAMES.SCRIPT,st,rt),style:getMethodsForTag(TAG_NAMES.STYLE,lt,rt),title:getMethodsForTag(TAG_NAMES.TITLE,{title:ct,titleAttributes:wt},rt)}},Helmet=function(_e){var et,tt;return tt=et=function(rt){inherits(nt,rt);function nt(){return classCallCheck(this,nt),possibleConstructorReturn(this,rt.apply(this,arguments))}return nt.prototype.shouldComponentUpdate=function(it){return!reactFastCompare(this.props,it)},nt.prototype.mapNestedChildrenToProps=function(it,ot){if(!ot)return null;switch(it.type){case TAG_NAMES.SCRIPT:case TAG_NAMES.NOSCRIPT:return{innerHTML:ot};case TAG_NAMES.STYLE:return{cssText:ot}}throw new Error("<"+it.type+" /> elements are self-closing and can not contain children. Refer to our API for more information.")},nt.prototype.flattenArrayTypeChildren=function(it){var ot,st=it.child,lt=it.arrayTypeChildren,gt=it.newChildProps,ct=it.nestedChildren;return _extends({},lt,(ot={},ot[st.type]=[].concat(lt[st.type]||[],[_extends({},gt,this.mapNestedChildrenToProps(st,ct))]),ot))},nt.prototype.mapObjectTypeChildren=function(it){var ot,st,lt=it.child,gt=it.newProps,ct=it.newChildProps,wt=it.nestedChildren;switch(lt.type){case TAG_NAMES.TITLE:return _extends({},gt,(ot={},ot[lt.type]=wt,ot.titleAttributes=_extends({},ct),ot));case TAG_NAMES.BODY:return _extends({},gt,{bodyAttributes:_extends({},ct)});case TAG_NAMES.HTML:return _extends({},gt,{htmlAttributes:_extends({},ct)})}return _extends({},gt,(st={},st[lt.type]=_extends({},ct),st))},nt.prototype.mapArrayTypeChildrenToProps=function(it,ot){var st=_extends({},ot);return Object.keys(it).forEach(function(lt){var gt;st=_extends({},st,(gt={},gt[lt]=it[lt],gt))}),st},nt.prototype.warnOnInvalidChildren=function(it,ot){return!0},nt.prototype.mapChildrenToProps=function(it,ot){var st=this,lt={};return React$1.Children.forEach(it,function(gt){if(!(!gt||!gt.props)){var ct=gt.props,wt=ct.children,Tt=objectWithoutProperties(ct,["children"]),Rt=convertReactPropstoHtmlAttributes(Tt);switch(st.warnOnInvalidChildren(gt,wt),gt.type){case TAG_NAMES.LINK:case TAG_NAMES.META:case TAG_NAMES.NOSCRIPT:case TAG_NAMES.SCRIPT:case TAG_NAMES.STYLE:lt=st.flattenArrayTypeChildren({child:gt,arrayTypeChildren:lt,newChildProps:Rt,nestedChildren:wt});break;default:ot=st.mapObjectTypeChildren({child:gt,newProps:ot,newChildProps:Rt,nestedChildren:wt});break}}}),ot=this.mapArrayTypeChildrenToProps(lt,ot),ot},nt.prototype.render=function(){var it=this.props,ot=it.children,st=objectWithoutProperties(it,["children"]),lt=_extends({},st);return ot&&(lt=this.mapChildrenToProps(ot,lt)),React$1.createElement(_e,lt)},createClass(nt,null,[{key:"canUseDOM",set:function(it){_e.canUseDOM=it}}]),nt}(React$1.Component),et.propTypes={base:propTypes.exports.object,bodyAttributes:propTypes.exports.object,children:propTypes.exports.oneOfType([propTypes.exports.arrayOf(propTypes.exports.node),propTypes.exports.node]),defaultTitle:propTypes.exports.string,defer:propTypes.exports.bool,encodeSpecialCharacters:propTypes.exports.bool,htmlAttributes:propTypes.exports.object,link:propTypes.exports.arrayOf(propTypes.exports.object),meta:propTypes.exports.arrayOf(propTypes.exports.object),noscript:propTypes.exports.arrayOf(propTypes.exports.object),onChangeClientState:propTypes.exports.func,script:propTypes.exports.arrayOf(propTypes.exports.object),style:propTypes.exports.arrayOf(propTypes.exports.object),title:propTypes.exports.string,titleAttributes:propTypes.exports.object,titleTemplate:propTypes.exports.string},et.defaultProps={defer:!0,encodeSpecialCharacters:!0},et.peek=_e.peek,et.rewind=function(){var rt=_e.rewind();return rt||(rt=mapStateOnServer({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}})),rt},tt},NullComponent=function(){return null},HelmetSideEffects=lib$1(reducePropsToState,handleClientStateChange,mapStateOnServer)(NullComponent),HelmetExport=Helmet(HelmetSideEffects);HelmetExport.renderStatic=HelmetExport.rewind;let random=_=>crypto.getRandomValues(new Uint8Array(_)),customRandom=(_,_e,et)=>{let tt=(2<<Math.log(_.length-1)/Math.LN2)-1,rt=-~(1.6*tt*_e/_.length);return(nt=_e)=>{let at="";for(;;){let it=et(rt),ot=rt;for(;ot--;)if(at+=_[it[ot]&tt]||"",at.length===nt)return at}}},customAlphabet=(_,_e=21)=>customRandom(_,_e,random),nanoid$1=(_=21)=>crypto.getRandomValues(new Uint8Array(_)).reduce((_e,et)=>(et&=63,et<36?_e+=et.toString(36):et<62?_e+=(et-26).toString(36).toUpperCase():et>62?_e+="-":_e+="_",_e),"");const _players=new Map;function getPlayerState(_){const _e=_players.get(_);if(!_e)throw new Error("invalid descriptor or has been unregistered");return _e}function resetForSource(_){const _e=_;_e.mediaPlaying={isPlaying:!1,isPaused:!0,isLoading:!1,isSeeking:!1,isDragSeeking:!1,isFirstLoading:!0,hasPlayedOnce:!1,volume:_e.mediaPlaying.volume},_e.progress={time:0,duration:0,buffered:0,draggingTime:0},_e.initalized=!1}function initPlayer(){return{interface:{popout:null,isFullscreen:!1,isFocused:!1,leftControlHovering:!1,popoutBounds:null},mediaPlaying:{isPlaying:!1,isPaused:!0,isLoading:!1,isSeeking:!1,isDragSeeking:!1,isFirstLoading:!0,hasPlayedOnce:!1,volume:0},progress:{time:0,duration:0,buffered:0,draggingTime:0},casting:{isCasting:!1,controller:null,instance:null,player:null},meta:null,source:null,error:null,canAirplay:!1,initalized:!1,stateProviderId:"video",pausedWhenSeeking:!1,hlsInstance:null,stateProvider:null,wrapperElement:null}}function registerVideoPlayer(){const _=nanoid$1();if(_players.has(_))throw new Error("duplicate id");return _players.set(_,initPlayer()),_}function unregisterVideoPlayer(_){_players.has(_)&&_players.delete(_)}const VideoPlayerContext=react.exports.createContext("");function VideoPlayerContextProvider(_){const[_e,et]=react.exports.useState(null);return react.exports.useEffect(()=>{const tt=registerVideoPlayer();return et(tt),()=>{unregisterVideoPlayer(tt)}},[et]),_e?jsxRuntime.exports.jsx(VideoPlayerContext.Provider,{value:_e,children:_.children}):null}function useVideoPlayerDescriptor(){return react.exports.useContext(VideoPlayerContext)}function createEventString(_,_e){return`_vid:::${_}:::${_e}`}function sendEvent(_,_e,et){const tt=new CustomEvent(createEventString(_,_e),{detail:et});document.dispatchEvent(tt)}function listenEvent(_,_e,et){document.addEventListener(createEventString(_,_e),et)}function unlistenEvent(_,_e,et){document.removeEventListener(createEventString(_,_e),et)}function getInterfaceFromState(_){return{popout:_.interface.popout,leftControlHovering:_.interface.leftControlHovering,isFocused:_.interface.isFocused,isFullscreen:_.interface.isFullscreen,popoutBounds:_.interface.popoutBounds}}function updateInterface(_,_e){sendEvent(_,"interface",getInterfaceFromState(_e))}function useInterface(_){const _e=getPlayerState(_),[et,tt]=react.exports.useState(getInterfaceFromState(_e));return react.exports.useEffect(()=>{function rt(nt){tt(nt.detail)}return listenEvent(_,"interface",rt),()=>{unlistenEvent(_,"interface",rt)}},[_]),et}function getMetaFromState(_){return _.meta?{..._.meta}:null}function updateMeta(_,_e){sendEvent(_,"meta",getMetaFromState(_e))}function useMeta(_){const _e=getPlayerState(_),[et,tt]=react.exports.useState(getMetaFromState(_e));return react.exports.useEffect(()=>{function rt(nt){tt(nt.detail)}return listenEvent(_,"meta",rt),()=>{unlistenEvent(_,"meta",rt)}},[_]),et}function getProgressFromState(_){return{time:_.progress.time,duration:_.progress.duration,buffered:_.progress.buffered,draggingTime:_.progress.draggingTime}}function updateProgress(_,_e){sendEvent(_,"progress",getProgressFromState(_e))}function useProgress(_){const _e=getPlayerState(_),[et,tt]=react.exports.useState(getProgressFromState(_e));return react.exports.useEffect(()=>{function rt(nt){tt(nt.detail)}return listenEvent(_,"progress",rt),()=>{unlistenEvent(_,"progress",rt)}},[_]),et}function useControls(_){const _e=getPlayerState(_);return{getId(){var et;return((et=_e.stateProvider)==null?void 0:et.getId())??""},pause(){var et;(et=_e.stateProvider)==null||et.pause()},play(){var et;(et=_e.stateProvider)==null||et.play()},setSource(et){var tt;(tt=_e.stateProvider)==null||tt.setSource(et)},setSeeking(et){var tt;(tt=_e.stateProvider)==null||tt.setSeeking(et)},setTime(et){var tt;(tt=_e.stateProvider)==null||tt.setTime(et)},exitFullscreen(){var et;(et=_e.stateProvider)==null||et.exitFullscreen()},enterFullscreen(){var et;(et=_e.stateProvider)==null||et.enterFullscreen()},setVolume(et){var tt;(tt=_e.stateProvider)==null||tt.setVolume(et)},startAirplay(){var et;(et=_e.stateProvider)==null||et.startAirplay()},setCaption(et,tt){var rt;(rt=_e.stateProvider)==null||rt.setCaption(et,tt)},clearCaption(){var et;(et=_e.stateProvider)==null||et.clearCaption()},setLeftControlsHover(et){_e.interface.leftControlHovering=et,updateInterface(_,_e)},setDraggingTime(et){_e.progress.draggingTime=Math.max(0,Math.min(_e.progress.duration,et)),updateProgress(_,_e)},openPopout(et){_e.interface.popout=et,updateInterface(_,_e)},closePopout(){_e.interface.popout=null,updateInterface(_,_e)},setFocused(et){_e.interface.isFocused=et,updateInterface(_,_e)},setMeta(et){et?_e.meta=et:_e.meta=null,updateMeta(_,_e)},setCurrentEpisode(et,tt){_e.meta&&(_e.meta.episode={seasonId:et,episodeId:tt},updateMeta(_,_e))}}}function getMiscFromState(_){return{canAirplay:_.canAirplay,wrapperInitialized:!!_.wrapperElement,initalized:_.initalized,isCasting:_.casting.isCasting,stateProviderId:_.stateProviderId}}function updateMisc(_,_e){sendEvent(_,"misc",getMiscFromState(_e))}function useMisc(_){const _e=getPlayerState(_),[et,tt]=react.exports.useState(getMiscFromState(_e));return react.exports.useEffect(()=>{function rt(nt){tt(nt.detail)}return listenEvent(_,"misc",rt),()=>{unlistenEvent(_,"misc",rt)}},[_]),et}const VideoPlayerIconButton=react.exports.forwardRef((_,_e)=>jsxRuntime.exports.jsx("div",{className:_.className,ref:_e,children:jsxRuntime.exports.jsx("button",{type:"button",onClick:_.onClick,className:["group pointer-events-auto p-2 text-white transition-transform duration-100 active:scale-110",_.disabled?"pointer-events-none cursor-not-allowed opacity-50":""].join(" "),children:jsxRuntime.exports.jsxs("div",{className:["flex items-center justify-center rounded-full bg-denim-600 bg-opacity-0 transition-colors duration-100",_.active?"!bg-denim-500 !bg-opacity-100":"",_.noPadding?"":_.wide?"py-2 px-4":"p-2",_.disabled?"":"group-hover:bg-opacity-50 group-active:bg-denim-500 group-active:bg-opacity-100"].join(" "),children:[jsxRuntime.exports.jsx(Icon,{icon:_.icon,className:_.iconSize??"text-2xl"}),jsxRuntime.exports.jsx("p",{className:"hidden sm:block",children:_.text?jsxRuntime.exports.jsx("span",{className:"ml-2",children:_.text}):null})]})})}));function AirplayAction(_){const _e=useVideoPlayerDescriptor(),et=useControls(_e),tt=useMisc(_e),rt=react.exports.useCallback(()=>{et.startAirplay()},[et]);return tt.canAirplay?jsxRuntime.exports.jsx(VideoPlayerIconButton,{className:_.className,onClick:rt,icon:Icons.AIRPLAY}):null}function ChromecastAction(_){const[_e,et]=react.exports.useState(!1),tt=useVideoPlayerDescriptor(),nt=useMisc(tt).isCasting,at=react.exports.useRef(null),it=react.exports.useCallback(ot=>{const st=(ot.getAttribute("style")??"").includes("inline");et(!st)},[et]);return react.exports.useEffect(()=>{var lt;const ot=(lt=at.current)==null?void 0:lt.querySelector("google-cast-launcher");if(!ot)return;const st=new MutationObserver(()=>{it(ot)});return st.observe(ot,{attributes:!0,attributeFilter:["style"]}),it(ot),()=>{st.disconnect()}},[it]),jsxRuntime.exports.jsx(VideoPlayerIconButton,{ref:at,className:[_.className??"","google-cast-button",nt?"casting":"",_e?"hidden":""].join(" "),icon:Icons.CASTING,onClick:ot=>{const st=ot.currentTarget.querySelector("google-cast-launcher");st&&st.click()}})}function useIsMobile(_){const[_e,et]=react.exports.useState(!1),tt=react.exports.useRef(!1);return react.exports.useEffect(()=>{function rt(){const nt=_?window.innerHeight<600:window.innerWidth<1024;tt.current!==nt&&(tt.current=nt,et(nt))}return rt(),window.addEventListener("resize",rt),()=>{window.removeEventListener("resize",rt)}},[_]),{isMobile:_e}}function VideoPlayerHeader(_){const{isMobile:_e}=useIsMobile(),{bookmarkStore:et,setItemBookmark:tt}=useBookmarkContext(),rt=_.media?getIfBookmarkedFromPortable(et.bookmarks,_.media):!1,nt=_.media&&_.onClick,{t:at}=useTranslation(),it=useBannerSize();return jsxRuntime.exports.jsxs("div",{className:"flex items-center",style:{paddingTop:_.isFullScreen?`${it}px`:void 0},children:[jsxRuntime.exports.jsxs("div",{className:"flex min-w-0 flex-1 items-center",children:[jsxRuntime.exports.jsxs("p",{className:"flex items-center truncate",children:[_.onClick?jsxRuntime.exports.jsxs("span",{onClick:_.onClick,className:"flex cursor-pointer items-center py-1 text-white opacity-50 transition-opacity hover:opacity-100",children:[jsxRuntime.exports.jsx(Icon,{className:"mr-2",icon:Icons.ARROW_LEFT}),_e?jsxRuntime.exports.jsx("span",{children:at("videoPlayer.backToHomeShort")}):jsxRuntime.exports.jsx("span",{children:at("videoPlayer.backToHome")})]}):null,nt?jsxRuntime.exports.jsx("span",{className:"mx-4 h-6 w-[1.5px] rotate-[30deg] bg-white opacity-50"}):null,_.media?jsxRuntime.exports.jsx("span",{className:"truncate text-white",children:_.media.title}):null]}),_.media&&jsxRuntime.exports.jsx(IconPatch,{clickable:!0,transparent:!0,icon:rt?Icons.BOOKMARK:Icons.BOOKMARK_OUTLINE,className:"ml-2 text-white",onClick:()=>_.media&&tt(_.media,!rt)})]}),_.showControls?jsxRuntime.exports.jsxs(jsxRuntime.exports.Fragment,{children:[jsxRuntime.exports.jsx(AirplayAction,{}),jsxRuntime.exports.jsx(ChromecastAction,{})]}):jsxRuntime.exports.jsx(BrandPill,{hideTextOnMobile:!0})]})}function NotFoundWrapper(_){const{t:_e}=useTranslation(),et=useGoBack();return jsxRuntime.exports.jsxs("div",{className:"relative flex flex-1 flex-col",children:[jsxRuntime.exports.jsx(HelmetExport,{children:jsxRuntime.exports.jsx("title",{children:_e("notFound.genericTitle")})}),_.video?jsxRuntime.exports.jsx("div",{className:"absolute inset-x-0 top-0 py-6 px-8",children:jsxRuntime.exports.jsx(VideoPlayerHeader,{onClick:et})}):jsxRuntime.exports.jsx(Navigation,{}),jsxRuntime.exports.jsx("div",{className:"flex h-full flex-1 flex-col items-center justify-center p-5 text-center",children:_.children})]})}function NotFoundMedia(){const{t:_}=useTranslation();return jsxRuntime.exports.jsxs("div",{className:"flex flex-1 flex-col items-center justify-center p-5 text-center",children:[jsxRuntime.exports.jsx(IconPatch,{icon:Icons.EYE_SLASH,className:"mb-6 text-xl text-bink-600"}),jsxRuntime.exports.jsx(Title,{children:_("notFound.media.title")}),jsxRuntime.exports.jsx("p",{className:"mt-5 mb-12 max-w-sm",children:_("notFound.media.description")}),jsxRuntime.exports.jsx(ArrowLink,{to:"/",linkText:_("notFound.backArrow")})]})}function NotFoundPage(){const{t:_}=useTranslation();return jsxRuntime.exports.jsxs(NotFoundWrapper,{children:[jsxRuntime.exports.jsx(IconPatch,{icon:Icons.EYE_SLASH,className:"mb-6 text-xl text-bink-600"}),jsxRuntime.exports.jsx(Title,{children:_("notFound.page.title")}),jsxRuntime.exports.jsx("p",{className:"mt-5 mb-12 max-w-sm",children:_("notFound.page.description")}),jsxRuntime.exports.jsx(ArrowLink,{to:"/",linkText:_("notFound.backArrow")})]})}let providers=[],embeds=[];function registerProvider(_){_.disabled||providers.push(_)}function registerEmbedScraper(_){_.disabled||embeds.push(_)}function initializeScraperStore(){providers=providers.sort((rt,nt)=>nt.rank-rt.rank),embeds=embeds.sort((rt,nt)=>nt.rank-rt.rank);let _=null;providers.forEach(rt=>{if(_===null){_=rt.rank;return}if(_===rt.rank)throw new Error(`Duplicate rank number for provider ${rt.id}`);_=rt.rank}),_=null,providers.forEach(rt=>{if(_===null){_=rt.rank;return}if(_===rt.rank)throw new Error(`Duplicate rank number for embed scraper ${rt.id}`);_=rt.rank});const _e=providers.map(rt=>rt.id);if(_e.length>0&&new Set(_e).size!==_e.length)throw new Error("Duplicate IDS in providers");const et=embeds.map(rt=>rt.id);if(et.length>0&&new Set(et).size!==et.length)throw new Error("Duplicate IDS in embed scrapers");const tt=embeds.map(rt=>rt.for);if(tt.length>0&&new Set(tt).size!==tt.length)throw new Error("Duplicate types in embed scrapers")}function getProviders(){return providers}function getEmbeds(){return embeds}function getEmbedScraperByType(_){return getEmbeds().find(_e=>_e.for===_)??null}function sortProviderResult(_){return _.embeds=_.embeds.map(_e=>[_e,_e.type?getEmbedScraperByType(_e.type):null]).sort(([,_e],[,et])=>((et==null?void 0:et.rank)??0)-((_e==null?void 0:_e.rank)??0)).map(_e=>_e[0]),_}async function runProvider(_,_e){try{const et=await _.scrape(_e);return sortProviderResult(et)}catch(et){throw console.error("Failed to run provider",et,{id:_.id,ctx:{..._e}}),et}}async function runEmbedScraper(_,_e){try{return await _.getStream(_e)}catch(et){throw console.error("Failed to run embed scraper",{id:_.id,ctx:{..._e}}),et}}async function findBestEmbedStream(_,_e,et){var rt,nt,at;if(_.stream)return _.stream;let tt=0;for(const it of _.embeds){if(tt+=1,!it.type)continue;const ot=getEmbedScraperByType(it.type);if(!ot)throw new Error(`Type for embed not found: ${it.type}`);const st=[_e,ot.id,tt].join("|");(rt=et.onNext)==null||rt.call(et,{id:ot.id,type:"embed",eventId:st});let lt;try{lt=await runEmbedScraper(ot,{url:it.url,progress(gt){var ct;(ct=et.onProgress)==null||ct.call(et,{errored:!1,eventId:st,id:ot.id,percentage:gt,type:"embed"})}})}catch{(nt=et.onProgress)==null||nt.call(et,{errored:!0,eventId:st,id:ot.id,percentage:100,type:"embed"});continue}return(at=et.onProgress)==null||at.call(et,{errored:!1,eventId:st,id:ot.id,percentage:100,type:"embed"}),lt}return null}async function findBestStream(_){var et,tt,rt;const _e=getProviders();for(const nt of _e){const at=nt.id;(et=_.onNext)==null||et.call(_,{id:nt.id,type:"provider",eventId:at});let it;try{let st;_.type===MWMediaType.SERIES?st={media:_.media,type:_.type,episode:_.episode,season:_.season,progress(lt){var gt;(gt=_.onProgress)==null||gt.call(_,{percentage:lt,eventId:at,errored:!1,id:nt.id,type:"provider"})}}:st={media:_.media,type:_.type,progress(lt){var gt;(gt=_.onProgress)==null||gt.call(_,{percentage:lt,eventId:at,errored:!1,id:nt.id,type:"provider"})}},it=await runProvider(nt,st)}catch{(tt=_.onProgress)==null||tt.call(_,{percentage:100,errored:!0,eventId:at,id:nt.id,type:"provider"});continue}(rt=_.onProgress)==null||rt.call(_,{errored:!1,id:nt.id,eventId:at,percentage:100,type:"provider"});const ot=await findBestEmbedStream(it,nt.id,_);if(!!ot)return ot}return null}function useScrape(_,_e){const[et,tt]=react.exports.useState([]),[rt,nt]=react.exports.useState(null),[at,it]=react.exports.useState(!0);return react.exports.useEffect(()=>{it(!0),nt(null),tt([]),(async()=>{const ot=await findBestStream({media:_,..._e,onNext(st){tt(lt=>[...lt,{errored:!1,id:st.id,eventId:st.eventId,type:st.type,percentage:0}])},onProgress(st){tt(lt=>{const gt=lt.reverse().find(ct=>ct.id===st.id);return gt&&(gt.errored=st.errored,gt.percentage=st.percentage),[...lt]})}});it(!1),nt(ot)})()},[_,_e]),{stream:rt,pending:at,eventLog:et}}function Loading(_){return jsxRuntime.exports.jsx("div",{className:_.className,children:jsxRuntime.exports.jsxs("div",{className:"flex flex-col items-center justify-center",children:[jsxRuntime.exports.jsxs("div",{className:"flex h-12 items-center justify-center",children:[jsxRuntime.exports.jsx("div",{className:"mx-1 h-2 w-2 animate-loading-pin rounded-full bg-denim-300"}),jsxRuntime.exports.jsx("div",{className:"mx-1 h-2 w-2 animate-loading-pin rounded-full bg-denim-300 [animation-delay:150ms]"}),jsxRuntime.exports.jsx("div",{className:"mx-1 h-2 w-2 animate-loading-pin rounded-full bg-denim-300 [animation-delay:300ms]"}),jsxRuntime.exports.jsx("div",{className:"mx-1 h-2 w-2 animate-loading-pin rounded-full bg-denim-300 [animation-delay:450ms]"})]}),_.text&&_.text.length?jsxRuntime.exports.jsx("p",{className:"mt-3 max-w-xs text-sm opacity-75",children:_.text}):null]})})}function useLoading(_){const[_e,et]=react.exports.useState(!1),[tt,rt]=react.exports.useState(!1),[nt,at]=react.exports.useState(void 0),it=react.exports.useRef(!0),ot=react.exports.useMemo(()=>_,[]);return React$1.useEffect(()=>(it.current=!0,()=>{it.current=!1}),[]),[react.exports.useMemo(()=>async(...lt)=>(et(!0),rt(!1),at(void 0),new Promise(gt=>{ot(...lt).then(ct=>it.current?(rt(!0),gt(ct),null):gt(void 0)).catch(ct=>{it&&(at(ct),console.error("USELOADING ERROR",ct),rt(!1)),gt(void 0)})}).finally(()=>it.current&&et(!1))),[ot]),_e,nt,tt]}const e$3=typeof window>"u"||typeof document>"u";let s$5=e$3?react.exports.useEffect:react.exports.useLayoutEffect;function s$4(_){let _e=react.exports.useRef(_);return s$5(()=>{_e.current=_},[_]),_e}function i$3(_,_e){let[et,tt]=react.exports.useState(_),rt=s$4(_);return s$5(()=>tt(rt.current),[rt,tt,..._e]),et}function t$1(_){typeof queueMicrotask=="function"?queueMicrotask(_):Promise.resolve().then(_).catch(_e=>setTimeout(()=>{throw _e}))}function m$2(){let _=[],_e=[],et={enqueue(tt){_e.push(tt)},addEventListener(tt,rt,nt,at){return tt.addEventListener(rt,nt,at),et.add(()=>tt.removeEventListener(rt,nt,at))},requestAnimationFrame(...tt){let rt=requestAnimationFrame(...tt);return et.add(()=>cancelAnimationFrame(rt))},nextFrame(...tt){return et.requestAnimationFrame(()=>et.requestAnimationFrame(...tt))},setTimeout(...tt){let rt=setTimeout(...tt);return et.add(()=>clearTimeout(rt))},microTask(...tt){let rt={current:!0};return t$1(()=>{rt.current&&tt[0]()}),et.add(()=>{rt.current=!1})},add(tt){return _.push(tt),()=>{let rt=_.indexOf(tt);if(rt>=0){let[nt]=_.splice(rt,1);nt()}}},dispose(){for(let tt of _.splice(0))tt()},async workQueue(){for(let tt of _e.splice(0))await tt()}};return et}function p$2(){let[_]=react.exports.useState(m$2);return react.exports.useEffect(()=>()=>_.dispose(),[_]),_}let o$2=function(_){let _e=s$4(_);return React$1.useCallback((...et)=>_e.current(...et),[_e])},r$2={serverHandoffComplete:!1};function a$2(){let[_,_e]=react.exports.useState(r$2.serverHandoffComplete);return react.exports.useEffect(()=>{_!==!0&&_e(!0)},[_]),react.exports.useEffect(()=>{r$2.serverHandoffComplete===!1&&(r$2.serverHandoffComplete=!0)},[]),_}var u$3;let l$1=0;function r$1(){return++l$1}let I$1=(u$3=React$1.useId)!=null?u$3:function(){let _=a$2(),[_e,et]=React$1.useState(_?r$1:null);return s$5(()=>{_e===null&&et(r$1())},[_e]),_e!=null?""+_e:void 0};function u$2(_,_e,...et){if(_ in _e){let rt=_e[_];return typeof rt=="function"?rt(...et):rt}let tt=new Error(`Tried to handle "${_}" but there is no handler defined. Only defined handlers are: ${Object.keys(_e).map(rt=>`"${rt}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(tt,u$2),tt}function e$2(_){return e$3?null:_ instanceof Node?_.ownerDocument:_!=null&&_.hasOwnProperty("current")&&_.current instanceof Node?_.current.ownerDocument:document}let m$1=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(_=>`${_}:not([tabindex='-1'])`).join(",");var T$2=(_=>(_[_.First=1]="First",_[_.Previous=2]="Previous",_[_.Next=4]="Next",_[_.Last=8]="Last",_[_.WrapAround=16]="WrapAround",_[_.NoScroll=32]="NoScroll",_))(T$2||{}),M$3=(_=>(_[_.Error=0]="Error",_[_.Overflow=1]="Overflow",_[_.Success=2]="Success",_[_.Underflow=3]="Underflow",_))(M$3||{}),b=(_=>(_[_.Previous=-1]="Previous",_[_.Next=1]="Next",_))(b||{}),N=(_=>(_[_.Strict=0]="Strict",_[_.Loose=1]="Loose",_))(N||{});function F$2(_,_e=0){var et;return _===((et=e$2(_))==null?void 0:et.body)?!1:u$2(_e,{[0](){return _.matches(m$1)},[1](){let tt=_;for(;tt!==null;){if(tt.matches(m$1))return!0;tt=tt.parentElement}return!1}})}function S$1(_,_e=et=>et){return _.slice().sort((et,tt)=>{let rt=_e(et),nt=_e(tt);if(rt===null||nt===null)return 0;let at=rt.compareDocumentPosition(nt);return at&Node.DOCUMENT_POSITION_FOLLOWING?-1:at&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function d(_,_e,et){let tt=s$4(_e);react.exports.useEffect(()=>{function rt(nt){tt.current(nt)}return document.addEventListener(_,rt,et),()=>document.removeEventListener(_,rt,et)},[_,et])}function L(_,_e,et=!0){let tt=react.exports.useRef(!1);react.exports.useEffect(()=>{requestAnimationFrame(()=>{tt.current=et})},[et]);function rt(at,it){if(!tt.current||at.defaultPrevented)return;let ot=function lt(gt){return typeof gt=="function"?lt(gt()):Array.isArray(gt)||gt instanceof Set?gt:[gt]}(_),st=it(at);if(st!==null&&st.getRootNode().contains(st)){for(let lt of ot){if(lt===null)continue;let gt=lt instanceof HTMLElement?lt:lt.current;if(gt!=null&&gt.contains(st)||at.composed&&at.composedPath().includes(gt))return}return!F$2(st,N.Loose)&&st.tabIndex!==-1&&at.preventDefault(),_e(at,st)}}let nt=react.exports.useRef(null);d("mousedown",at=>{var it,ot;tt.current&&(nt.current=((ot=(it=at.composedPath)==null?void 0:it.call(at))==null?void 0:ot[0])||at.target)},!0),d("click",at=>{!nt.current||(rt(at,()=>nt.current),nt.current=null)},!0),d("blur",at=>rt(at,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function i$2(_){var _e;if(_.type)return _.type;let et=(_e=_.as)!=null?_e:"button";if(typeof et=="string"&&et.toLowerCase()==="button")return"button"}function s$3(_,_e){let[et,tt]=react.exports.useState(()=>i$2(_));return s$5(()=>{tt(i$2(_))},[_.type,_.as]),s$5(()=>{et||!_e.current||_e.current instanceof HTMLButtonElement&&!_e.current.hasAttribute("type")&&tt("button")},[et,_e]),et}let u$1=Symbol();function y(..._){let _e=react.exports.useRef(_);react.exports.useEffect(()=>{_e.current=_},[_]);let et=o$2(tt=>{for(let rt of _e.current)rt!=null&&(typeof rt=="function"?rt(tt):rt.current=tt)});return _.every(tt=>tt==null||(tt==null?void 0:tt[u$1]))?void 0:et}function f$3(_){throw new Error("Unexpected object: "+_)}var a$1=(_=>(_[_.First=0]="First",_[_.Previous=1]="Previous",_[_.Next=2]="Next",_[_.Last=3]="Last",_[_.Specific=4]="Specific",_[_.Nothing=5]="Nothing",_))(a$1||{});function x(_,_e){let et=_e.resolveItems();if(et.length<=0)return null;let tt=_e.resolveActiveIndex(),rt=tt??-1,nt=(()=>{switch(_.focus){case 0:return et.findIndex(at=>!_e.resolveDisabled(at));case 1:{let at=et.slice().reverse().findIndex((it,ot,st)=>rt!==-1&&st.length-ot-1>=rt?!1:!_e.resolveDisabled(it));return at===-1?at:et.length-1-at}case 2:return et.findIndex((at,it)=>it<=rt?!1:!_e.resolveDisabled(at));case 3:{let at=et.slice().reverse().findIndex(it=>!_e.resolveDisabled(it));return at===-1?at:et.length-1-at}case 4:return et.findIndex(at=>_e.resolveId(at)===_.id);case 5:return null;default:f$3(_)}})();return nt===-1?tt:nt}var S=(_=>(_[_.None=0]="None",_[_.RenderStrategy=1]="RenderStrategy",_[_.Static=2]="Static",_))(S||{}),j=(_=>(_[_.Unmount=0]="Unmount",_[_.Hidden=1]="Hidden",_))(j||{});function $$b({ourProps:_,theirProps:_e,slot:et,defaultTag:tt,features:rt,visible:nt=!0,name:at}){let it=T$1(_e,_);if(nt)return p$1(it,et,tt,at);let ot=rt??0;if(ot&2){let{static:st=!1,...lt}=it;if(st)return p$1(lt,et,tt,at)}if(ot&1){let{unmount:st=!0,...lt}=it;return u$2(st?0:1,{[0](){return null},[1](){return p$1({...lt,hidden:!0,style:{display:"none"}},et,tt,at)}})}return p$1(it,et,tt,at)}function p$1(_,_e={},et,tt){let{as:rt=et,children:nt,refName:at="ref",...it}=m(_,["unmount","static"]),ot=_.ref!==void 0?{[at]:_.ref}:{},st=typeof nt=="function"?nt(_e):nt;it.className&&typeof it.className=="function"&&(it.className=it.className(_e));let lt={};if(_e){let gt=!1,ct=[];for(let[wt,Tt]of Object.entries(_e))typeof Tt=="boolean"&&(gt=!0),Tt===!0&&ct.push(wt);gt&&(lt["data-headlessui-state"]=ct.join(" "))}if(rt===react.exports.Fragment&&Object.keys(F$1(it)).length>0){if(!react.exports.isValidElement(st)||Array.isArray(st)&&st.length>1)throw new Error(['Passing props on "Fragment"!',"",`The current component <${tt} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(it).map(gt=>`  - ${gt}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(gt=>`  - ${gt}`).join(`
`)].join(`
`));return react.exports.cloneElement(st,Object.assign({},T$1(st.props,F$1(m(it,["ref"]))),lt,ot,w(st.ref,ot.ref)))}return react.exports.createElement(rt,Object.assign({},m(it,["ref"]),rt!==react.exports.Fragment&&ot,rt!==react.exports.Fragment&&lt),st)}function w(..._){return{ref:_.every(_e=>_e==null)?void 0:_e=>{for(let et of _)et!=null&&(typeof et=="function"?et(_e):et.current=_e)}}}function T$1(..._){if(_.length===0)return{};if(_.length===1)return _[0];let _e={},et={};for(let tt of _)for(let rt in tt)rt.startsWith("on")&&typeof tt[rt]=="function"?(et[rt]!=null||(et[rt]=[]),et[rt].push(tt[rt])):_e[rt]=tt[rt];if(_e.disabled||_e["aria-disabled"])return Object.assign(_e,Object.fromEntries(Object.keys(et).map(tt=>[tt,void 0])));for(let tt in et)Object.assign(_e,{[tt](rt,...nt){let at=et[tt];for(let it of at){if((rt instanceof Event||(rt==null?void 0:rt.nativeEvent)instanceof Event)&&rt.defaultPrevented)return;it(rt,...nt)}}});return _e}function C$1(_){var _e;return Object.assign(react.exports.forwardRef(_),{displayName:(_e=_.displayName)!=null?_e:_.name})}function F$1(_){let _e=Object.assign({},_);for(let et in _e)_e[et]===void 0&&delete _e[et];return _e}function m(_,_e=[]){let et=Object.assign({},_);for(let tt of _e)tt in et&&delete et[tt];return et}function r(_){let _e=_.parentElement,et=null;for(;_e&&!(_e instanceof HTMLFieldSetElement);)_e instanceof HTMLLegendElement&&(et=_e),_e=_e.parentElement;let tt=(_e==null?void 0:_e.getAttribute("disabled"))==="";return tt&&i$1(et)?!1:tt}function i$1(_){if(!_)return!1;let _e=_.previousElementSibling;for(;_e!==null;){if(_e instanceof HTMLLegendElement)return!1;_e=_e.previousElementSibling}return!0}function e$1(_={},_e=null,et=[]){for(let[tt,rt]of Object.entries(_))f$2(et,s$2(_e,tt),rt);return et}function s$2(_,_e){return _?_+"["+_e+"]":_e}function f$2(_,_e,et){if(Array.isArray(et))for(let[tt,rt]of et.entries())f$2(_,s$2(_e,tt.toString()),rt);else et instanceof Date?_.push([_e,et.toISOString()]):typeof et=="boolean"?_.push([_e,et?"1":"0"]):typeof et=="string"?_.push([_e,et]):typeof et=="number"?_.push([_e,`${et}`]):et==null?_.push([_e,""]):e$1(et,_e,_)}let a="div";var s$1=(_=>(_[_.None=1]="None",_[_.Focusable=2]="Focusable",_[_.Hidden=4]="Hidden",_))(s$1||{});let h=C$1(function(_,_e){let{features:et=1,...tt}=_,rt={ref:_e,"aria-hidden":(et&2)===2?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(et&4)===4&&(et&2)!==2&&{display:"none"}}};return $$b({ourProps:rt,theirProps:tt,slot:{},defaultTag:a,name:"Hidden"})}),o$1=react.exports.createContext(null);o$1.displayName="OpenClosedContext";var p=(_=>(_[_.Open=0]="Open",_[_.Closed=1]="Closed",_))(p||{});function s(){return react.exports.useContext(o$1)}function C({value:_,children:_e}){return React$1.createElement(o$1.Provider,{value:_},_e)}var o=(_=>(_.Space=" ",_.Enter="Enter",_.Escape="Escape",_.Backspace="Backspace",_.Delete="Delete",_.ArrowLeft="ArrowLeft",_.ArrowUp="ArrowUp",_.ArrowRight="ArrowRight",_.ArrowDown="ArrowDown",_.Home="Home",_.End="End",_.PageUp="PageUp",_.PageDown="PageDown",_.Tab="Tab",_))(o||{});function T(_,_e,et){let[tt,rt]=react.exports.useState(et),nt=_!==void 0,at=react.exports.useRef(nt),it=react.exports.useRef(!1),ot=react.exports.useRef(!1);return nt&&!at.current&&!it.current?(it.current=!0,at.current=nt,console.error("A component is changing from uncontrolled to controlled. This may be caused by the value changing from undefined to a defined value, which should not happen.")):!nt&&at.current&&!ot.current&&(ot.current=!0,at.current=nt,console.error("A component is changing from controlled to uncontrolled. This may be caused by the value changing from a defined value to undefined, which should not happen.")),[nt?_:tt,o$2(st=>(nt||rt(st),_e==null?void 0:_e(st)))]}function t(_){return[_.screenX,_.screenY]}function u(){let _=react.exports.useRef([-1,-1]);return{wasMoved(_e){let et=t(_e);return _.current[0]===et[0]&&_.current[1]===et[1]?!1:(_.current=et,!0)},update(_e){_.current=t(_e)}}}function f$1(){let _=react.exports.useRef(!1);return s$5(()=>(_.current=!0,()=>{_.current=!1}),[]),_}var Ue=(_=>(_[_.Open=0]="Open",_[_.Closed=1]="Closed",_))(Ue||{}),Be=(_=>(_[_.Single=0]="Single",_[_.Multi=1]="Multi",_))(Be||{}),He=(_=>(_[_.Pointer=0]="Pointer",_[_.Other=1]="Other",_))(He||{}),Ge=(_=>(_[_.OpenListbox=0]="OpenListbox",_[_.CloseListbox=1]="CloseListbox",_[_.GoToOption=2]="GoToOption",_[_.Search=3]="Search",_[_.ClearSearch=4]="ClearSearch",_[_.RegisterOption=5]="RegisterOption",_[_.UnregisterOption=6]="UnregisterOption",_[_.RegisterLabel=7]="RegisterLabel",_))(Ge||{});function q(_,_e=et=>et){let et=_.activeOptionIndex!==null?_.options[_.activeOptionIndex]:null,tt=S$1(_e(_.options.slice()),nt=>nt.dataRef.current.domRef.current),rt=et?tt.indexOf(et):null;return rt===-1&&(rt=null),{options:tt,activeOptionIndex:rt}}let je={[1](_){return _.dataRef.current.disabled||_.listboxState===1?_:{..._,activeOptionIndex:null,listboxState:1}},[0](_){if(_.dataRef.current.disabled||_.listboxState===0)return _;let _e=_.activeOptionIndex,{isSelected:et}=_.dataRef.current,tt=_.options.findIndex(rt=>et(rt.dataRef.current.value));return tt!==-1&&(_e=tt),{..._,listboxState:0,activeOptionIndex:_e}},[2](_,_e){var et;if(_.dataRef.current.disabled||_.listboxState===1)return _;let tt=q(_),rt=x(_e,{resolveItems:()=>tt.options,resolveActiveIndex:()=>tt.activeOptionIndex,resolveId:nt=>nt.id,resolveDisabled:nt=>nt.dataRef.current.disabled});return{..._,...tt,searchQuery:"",activeOptionIndex:rt,activationTrigger:(et=_e.trigger)!=null?et:1}},[3]:(_,_e)=>{if(_.dataRef.current.disabled||_.listboxState===1)return _;let et=_.searchQuery!==""?0:1,tt=_.searchQuery+_e.value.toLowerCase(),rt=(_.activeOptionIndex!==null?_.options.slice(_.activeOptionIndex+et).concat(_.options.slice(0,_.activeOptionIndex+et)):_.options).find(at=>{var it;return!at.dataRef.current.disabled&&((it=at.dataRef.current.textValue)==null?void 0:it.startsWith(tt))}),nt=rt?_.options.indexOf(rt):-1;return nt===-1||nt===_.activeOptionIndex?{..._,searchQuery:tt}:{..._,searchQuery:tt,activeOptionIndex:nt,activationTrigger:1}},[4](_){return _.dataRef.current.disabled||_.listboxState===1||_.searchQuery===""?_:{..._,searchQuery:""}},[5]:(_,_e)=>{let et={id:_e.id,dataRef:_e.dataRef},tt=q(_,rt=>[...rt,et]);return _.activeOptionIndex===null&&_.dataRef.current.isSelected(_e.dataRef.current.value)&&(tt.activeOptionIndex=tt.options.indexOf(et)),{..._,...tt}},[6]:(_,_e)=>{let et=q(_,tt=>{let rt=tt.findIndex(nt=>nt.id===_e.id);return rt!==-1&&tt.splice(rt,1),tt});return{..._,...et,activationTrigger:1}},[7]:(_,_e)=>({..._,labelId:_e.id})},X=react.exports.createContext(null);X.displayName="ListboxActionsContext";function B(_){let _e=react.exports.useContext(X);if(_e===null){let et=new Error(`<${_} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(et,B),et}return _e}let J$1=react.exports.createContext(null);J$1.displayName="ListboxDataContext";function H(_){let _e=react.exports.useContext(J$1);if(_e===null){let et=new Error(`<${_} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(et,H),et}return _e}function Ke(_,_e){return u$2(_e.type,je,_,_e)}let Ve=react.exports.Fragment,Ne=C$1(function(_,_e){let{value:et,defaultValue:tt,name:rt,onChange:nt,by:at=(Nt,Ft)=>Nt===Ft,disabled:it=!1,horizontal:ot=!1,multiple:st=!1,...lt}=_;const gt=ot?"horizontal":"vertical";let ct=y(_e),[wt=st?[]:void 0,Tt]=T(et,nt,tt),[Rt,ht]=react.exports.useReducer(Ke,{dataRef:react.exports.createRef(),listboxState:1,options:[],searchQuery:"",labelId:null,activeOptionIndex:null,activationTrigger:1}),ut=react.exports.useRef({static:!1,hold:!1}),ft=react.exports.useRef(null),yt=react.exports.useRef(null),xt=react.exports.useRef(null),Ct=o$2(typeof at=="string"?(Nt,Ft)=>{let Bt=at;return(Nt==null?void 0:Nt[Bt])===(Ft==null?void 0:Ft[Bt])}:at),pt=react.exports.useCallback(Nt=>u$2(dt.mode,{[1]:()=>wt.some(Ft=>Ct(Ft,Nt)),[0]:()=>Ct(wt,Nt)}),[wt]),dt=react.exports.useMemo(()=>({...Rt,value:wt,disabled:it,mode:st?1:0,orientation:gt,compare:Ct,isSelected:pt,optionsPropsRef:ut,labelRef:ft,buttonRef:yt,optionsRef:xt}),[wt,it,st,Rt]);s$5(()=>{Rt.dataRef.current=dt},[dt]),L([dt.buttonRef,dt.optionsRef],(Nt,Ft)=>{var Bt;ht({type:1}),F$2(Ft,N.Loose)||(Nt.preventDefault(),(Bt=dt.buttonRef.current)==null||Bt.focus())},dt.listboxState===0);let vt=react.exports.useMemo(()=>({open:dt.listboxState===0,disabled:it,value:wt}),[dt,it,wt]),St=o$2(Nt=>{let Ft=dt.options.find(Bt=>Bt.id===Nt);!Ft||Dt(Ft.dataRef.current.value)}),Et=o$2(()=>{if(dt.activeOptionIndex!==null){let{dataRef:Nt,id:Ft}=dt.options[dt.activeOptionIndex];Dt(Nt.current.value),ht({type:2,focus:a$1.Specific,id:Ft})}}),mt=o$2(()=>ht({type:0})),_t=o$2(()=>ht({type:1})),bt=o$2((Nt,Ft,Bt)=>Nt===a$1.Specific?ht({type:2,focus:a$1.Specific,id:Ft,trigger:Bt}):ht({type:2,focus:Nt,trigger:Bt})),Ot=o$2((Nt,Ft)=>(ht({type:5,id:Nt,dataRef:Ft}),()=>ht({type:6,id:Nt}))),Pt=o$2(Nt=>(ht({type:7,id:Nt}),()=>ht({type:7,id:null}))),Dt=o$2(Nt=>u$2(dt.mode,{[0](){return Tt==null?void 0:Tt(Nt)},[1](){let Ft=dt.value.slice(),Bt=Ft.findIndex(Ut=>Ct(Ut,Nt));return Bt===-1?Ft.push(Nt):Ft.splice(Bt,1),Tt==null?void 0:Tt(Ft)}})),It=o$2(Nt=>ht({type:3,value:Nt})),kt=o$2(()=>ht({type:4})),Lt=react.exports.useMemo(()=>({onChange:Dt,registerOption:Ot,registerLabel:Pt,goToOption:bt,closeListbox:_t,openListbox:mt,selectActiveOption:Et,selectOption:St,search:It,clearSearch:kt}),[]),At={ref:ct},$t=react.exports.useRef(null),jt=p$2();return react.exports.useEffect(()=>{!$t.current||tt!==void 0&&jt.addEventListener($t.current,"reset",()=>{Dt(tt)})},[$t,Dt]),React$1.createElement(X.Provider,{value:Lt},React$1.createElement(J$1.Provider,{value:dt},React$1.createElement(C,{value:u$2(dt.listboxState,{[0]:p.Open,[1]:p.Closed})},rt!=null&&wt!=null&&e$1({[rt]:wt}).map(([Nt,Ft],Bt)=>React$1.createElement(h,{features:s$1.Hidden,ref:Bt===0?Ut=>{var Ht;$t.current=(Ht=Ut==null?void 0:Ut.closest("form"))!=null?Ht:null}:void 0,...F$1({key:Nt,as:"input",type:"hidden",hidden:!0,readOnly:!0,name:Nt,value:Ft})})),$$b({ourProps:At,theirProps:lt,slot:vt,defaultTag:Ve,name:"Listbox"}))))}),We="button",Qe=C$1(function(_,_e){var et;let tt=I$1(),{id:rt=`headlessui-listbox-button-${tt}`,...nt}=_,at=H("Listbox.Button"),it=B("Listbox.Button"),ot=y(at.buttonRef,_e),st=p$2(),lt=o$2(ht=>{switch(ht.key){case o.Space:case o.Enter:case o.ArrowDown:ht.preventDefault(),it.openListbox(),st.nextFrame(()=>{at.value||it.goToOption(a$1.First)});break;case o.ArrowUp:ht.preventDefault(),it.openListbox(),st.nextFrame(()=>{at.value||it.goToOption(a$1.Last)});break}}),gt=o$2(ht=>{switch(ht.key){case o.Space:ht.preventDefault();break}}),ct=o$2(ht=>{if(r(ht.currentTarget))return ht.preventDefault();at.listboxState===0?(it.closeListbox(),st.nextFrame(()=>{var ut;return(ut=at.buttonRef.current)==null?void 0:ut.focus({preventScroll:!0})})):(ht.preventDefault(),it.openListbox())}),wt=i$3(()=>{if(at.labelId)return[at.labelId,rt].join(" ")},[at.labelId,rt]),Tt=react.exports.useMemo(()=>({open:at.listboxState===0,disabled:at.disabled,value:at.value}),[at]),Rt={ref:ot,id:rt,type:s$3(_,at.buttonRef),"aria-haspopup":!0,"aria-controls":(et=at.optionsRef.current)==null?void 0:et.id,"aria-expanded":at.disabled?void 0:at.listboxState===0,"aria-labelledby":wt,disabled:at.disabled,onKeyDown:lt,onKeyUp:gt,onClick:ct};return $$b({ourProps:Rt,theirProps:nt,slot:Tt,defaultTag:We,name:"Listbox.Button"})}),$e="label",ze=C$1(function(_,_e){let et=I$1(),{id:tt=`headlessui-listbox-label-${et}`,...rt}=_,nt=H("Listbox.Label"),at=B("Listbox.Label"),it=y(nt.labelRef,_e);s$5(()=>at.registerLabel(tt),[tt]);let ot=o$2(()=>{var lt;return(lt=nt.buttonRef.current)==null?void 0:lt.focus({preventScroll:!0})}),st=react.exports.useMemo(()=>({open:nt.listboxState===0,disabled:nt.disabled}),[nt]);return $$b({ourProps:{ref:it,id:tt,onClick:ot},theirProps:rt,slot:st,defaultTag:$e,name:"Listbox.Label"})}),qe="ul",Xe=S.RenderStrategy|S.Static,Je$1=C$1(function(_,_e){var et;let tt=I$1(),{id:rt=`headlessui-listbox-options-${tt}`,...nt}=_,at=H("Listbox.Options"),it=B("Listbox.Options"),ot=y(at.optionsRef,_e),st=p$2(),lt=p$2(),gt=s(),ct=(()=>gt!==null?gt===p.Open:at.listboxState===0)();react.exports.useEffect(()=>{var ut;let ft=at.optionsRef.current;!ft||at.listboxState===0&&ft!==((ut=e$2(ft))==null?void 0:ut.activeElement)&&ft.focus({preventScroll:!0})},[at.listboxState,at.optionsRef]);let wt=o$2(ut=>{switch(lt.dispose(),ut.key){case o.Space:if(at.searchQuery!=="")return ut.preventDefault(),ut.stopPropagation(),it.search(ut.key);case o.Enter:if(ut.preventDefault(),ut.stopPropagation(),at.activeOptionIndex!==null){let{dataRef:ft}=at.options[at.activeOptionIndex];it.onChange(ft.current.value)}at.mode===0&&(it.closeListbox(),m$2().nextFrame(()=>{var ft;return(ft=at.buttonRef.current)==null?void 0:ft.focus({preventScroll:!0})}));break;case u$2(at.orientation,{vertical:o.ArrowDown,horizontal:o.ArrowRight}):return ut.preventDefault(),ut.stopPropagation(),it.goToOption(a$1.Next);case u$2(at.orientation,{vertical:o.ArrowUp,horizontal:o.ArrowLeft}):return ut.preventDefault(),ut.stopPropagation(),it.goToOption(a$1.Previous);case o.Home:case o.PageUp:return ut.preventDefault(),ut.stopPropagation(),it.goToOption(a$1.First);case o.End:case o.PageDown:return ut.preventDefault(),ut.stopPropagation(),it.goToOption(a$1.Last);case o.Escape:return ut.preventDefault(),ut.stopPropagation(),it.closeListbox(),st.nextFrame(()=>{var ft;return(ft=at.buttonRef.current)==null?void 0:ft.focus({preventScroll:!0})});case o.Tab:ut.preventDefault(),ut.stopPropagation();break;default:ut.key.length===1&&(it.search(ut.key),lt.setTimeout(()=>it.clearSearch(),350));break}}),Tt=i$3(()=>{var ut,ft,yt;return(yt=(ut=at.labelRef.current)==null?void 0:ut.id)!=null?yt:(ft=at.buttonRef.current)==null?void 0:ft.id},[at.labelRef.current,at.buttonRef.current]),Rt=react.exports.useMemo(()=>({open:at.listboxState===0}),[at]),ht={"aria-activedescendant":at.activeOptionIndex===null||(et=at.options[at.activeOptionIndex])==null?void 0:et.id,"aria-multiselectable":at.mode===1?!0:void 0,"aria-labelledby":Tt,"aria-orientation":at.orientation,id:rt,onKeyDown:wt,role:"listbox",tabIndex:0,ref:ot};return $$b({ourProps:ht,theirProps:nt,slot:Rt,defaultTag:qe,features:Xe,visible:ct,name:"Listbox.Options"})}),Ye="li",Ze=C$1(function(_,_e){let et=I$1(),{id:tt=`headlessui-listbox-option-${et}`,disabled:rt=!1,value:nt,...at}=_,it=H("Listbox.Option"),ot=B("Listbox.Option"),st=it.activeOptionIndex!==null?it.options[it.activeOptionIndex].id===tt:!1,lt=it.isSelected(nt),gt=react.exports.useRef(null),ct=s$4({disabled:rt,value:nt,domRef:gt,get textValue(){var Ct,pt;return(pt=(Ct=gt.current)==null?void 0:Ct.textContent)==null?void 0:pt.toLowerCase()}}),wt=y(_e,gt);s$5(()=>{if(it.listboxState!==0||!st||it.activationTrigger===0)return;let Ct=m$2();return Ct.requestAnimationFrame(()=>{var pt,dt;(dt=(pt=gt.current)==null?void 0:pt.scrollIntoView)==null||dt.call(pt,{block:"nearest"})}),Ct.dispose},[gt,st,it.listboxState,it.activationTrigger,it.activeOptionIndex]),s$5(()=>ot.registerOption(tt,ct),[ct,tt]);let Tt=o$2(Ct=>{if(rt)return Ct.preventDefault();ot.onChange(nt),it.mode===0&&(ot.closeListbox(),m$2().nextFrame(()=>{var pt;return(pt=it.buttonRef.current)==null?void 0:pt.focus({preventScroll:!0})}))}),Rt=o$2(()=>{if(rt)return ot.goToOption(a$1.Nothing);ot.goToOption(a$1.Specific,tt)}),ht=u(),ut=o$2(Ct=>ht.update(Ct)),ft=o$2(Ct=>{!ht.wasMoved(Ct)||rt||st||ot.goToOption(a$1.Specific,tt,0)}),yt=o$2(Ct=>{!ht.wasMoved(Ct)||rt||!st||ot.goToOption(a$1.Nothing)}),xt=react.exports.useMemo(()=>({active:st,selected:lt,disabled:rt}),[st,lt,rt]);return $$b({ourProps:{id:tt,ref:wt,role:"option",tabIndex:rt===!0?void 0:-1,"aria-disabled":rt===!0?!0:void 0,"aria-selected":lt,disabled:void 0,onClick:Tt,onFocus:Rt,onPointerEnter:ut,onMouseEnter:ut,onPointerMove:ft,onMouseMove:ft,onPointerLeave:yt,onMouseLeave:yt},theirProps:at,slot:xt,defaultTag:Ye,name:"Listbox.Option"})}),Mt=Object.assign(Ne,{Button:Qe,Label:ze,Options:Je$1,Option:Ze});function l(_){let _e={called:!1};return(...et)=>{if(!_e.called)return _e.called=!0,_(...et)}}function v(_,..._e){_&&_e.length>0&&_.classList.add(..._e)}function f(_,..._e){_&&_e.length>0&&_.classList.remove(..._e)}function F(_,_e){let et=m$2();if(!_)return et.dispose;let{transitionDuration:tt,transitionDelay:rt}=getComputedStyle(_),[nt,at]=[tt,rt].map(it=>{let[ot=0]=it.split(",").filter(Boolean).map(st=>st.includes("ms")?parseFloat(st):parseFloat(st)*1e3).sort((st,lt)=>lt-st);return ot});if(nt+at!==0){let it=et.addEventListener(_,"transitionend",ot=>{ot.target===ot.currentTarget&&(_e(),it())})}else _e();return et.add(()=>_e()),et.dispose}function M$2(_,_e,et,tt){let rt=et?"enter":"leave",nt=m$2(),at=tt!==void 0?l(tt):()=>{};rt==="enter"&&(_.removeAttribute("hidden"),_.style.display="");let it=u$2(rt,{enter:()=>_e.enter,leave:()=>_e.leave}),ot=u$2(rt,{enter:()=>_e.enterTo,leave:()=>_e.leaveTo}),st=u$2(rt,{enter:()=>_e.enterFrom,leave:()=>_e.leaveFrom});return f(_,..._e.enter,..._e.enterTo,..._e.enterFrom,..._e.leave,..._e.leaveFrom,..._e.leaveTo,..._e.entered),v(_,...it,...st),nt.nextFrame(()=>{f(_,...st),v(_,...ot),F(_,()=>(f(_,...it),v(_,..._e.entered),at()))}),nt.dispose}function D({container:_,direction:_e,classes:et,onStart:tt,onStop:rt}){let nt=f$1(),at=p$2(),it=s$4(_e);s$5(()=>{let ot=m$2();at.add(ot.dispose);let st=_.current;if(st&&it.current!=="idle"&&nt.current)return ot.dispose(),tt.current(it.current),ot.add(M$2(st,et.current,it.current==="enter",()=>{ot.dispose(),rt.current(it.current)})),ot.dispose},[_e])}function e(..._){return _.filter(Boolean).join(" ")}function P(_=""){return _.split(" ").filter(_e=>_e.trim().length>1)}let A=react.exports.createContext(null);A.displayName="TransitionContext";var Ce=(_=>(_.Visible="visible",_.Hidden="hidden",_))(Ce||{});function ge(){let _=react.exports.useContext(A);if(_===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return _}function be(){let _=react.exports.useContext(M$1);if(_===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return _}let M$1=react.exports.createContext(null);M$1.displayName="NestingContext";function I(_){return"children"in _?I(_.children):_.current.filter(({el:_e})=>_e.current!==null).filter(({state:_e})=>_e==="visible").length>0}function ne(_,_e){let et=s$4(_),tt=react.exports.useRef([]),rt=f$1(),nt=p$2(),at=o$2((wt,Tt=j.Hidden)=>{let Rt=tt.current.findIndex(({el:ht})=>ht===wt);Rt!==-1&&(u$2(Tt,{[j.Unmount](){tt.current.splice(Rt,1)},[j.Hidden](){tt.current[Rt].state="hidden"}}),nt.microTask(()=>{var ht;!I(tt)&&rt.current&&((ht=et.current)==null||ht.call(et))}))}),it=o$2(wt=>{let Tt=tt.current.find(({el:Rt})=>Rt===wt);return Tt?Tt.state!=="visible"&&(Tt.state="visible"):tt.current.push({el:wt,state:"visible"}),()=>at(wt,j.Unmount)}),ot=react.exports.useRef([]),st=react.exports.useRef(Promise.resolve()),lt=react.exports.useRef({enter:[],leave:[],idle:[]}),gt=o$2((wt,Tt,Rt)=>{ot.current.splice(0),_e&&(_e.chains.current[Tt]=_e.chains.current[Tt].filter(([ht])=>ht!==wt)),_e==null||_e.chains.current[Tt].push([wt,new Promise(ht=>{ot.current.push(ht)})]),_e==null||_e.chains.current[Tt].push([wt,new Promise(ht=>{Promise.all(lt.current[Tt].map(([ut,ft])=>ft)).then(()=>ht())})]),Tt==="enter"?st.current=st.current.then(()=>_e==null?void 0:_e.wait.current).then(()=>Rt(Tt)):Rt(Tt)}),ct=o$2((wt,Tt,Rt)=>{Promise.all(lt.current[Tt].splice(0).map(([ht,ut])=>ut)).then(()=>{var ht;(ht=ot.current.shift())==null||ht()}).then(()=>Rt(Tt))});return react.exports.useMemo(()=>({children:tt,register:it,unregister:at,onStart:gt,onStop:ct,wait:st,chains:lt}),[it,at,tt,gt,ct,lt,st])}function Ee(){}let Se=["beforeEnter","afterEnter","beforeLeave","afterLeave"];function re(_){var _e;let et={};for(let tt of Se)et[tt]=(_e=_[tt])!=null?_e:Ee;return et}function xe(_){let _e=react.exports.useRef(re(_));return react.exports.useEffect(()=>{_e.current=re(_)},[_]),_e}let Pe="div",ie=S.RenderStrategy,oe=C$1(function(_,_e){let{beforeEnter:et,afterEnter:tt,beforeLeave:rt,afterLeave:nt,enter:at,enterFrom:it,enterTo:ot,entered:st,leave:lt,leaveFrom:gt,leaveTo:ct,...wt}=_,Tt=react.exports.useRef(null),Rt=y(Tt,_e),ht=wt.unmount?j.Unmount:j.Hidden,{show:ut,appear:ft,initial:yt}=ge(),[xt,Ct]=react.exports.useState(ut?"visible":"hidden"),pt=be(),{register:dt,unregister:vt}=pt,St=react.exports.useRef(null);react.exports.useEffect(()=>dt(Tt),[dt,Tt]),react.exports.useEffect(()=>{if(ht===j.Hidden&&Tt.current){if(ut&&xt!=="visible"){Ct("visible");return}return u$2(xt,{hidden:()=>vt(Tt),visible:()=>dt(Tt)})}},[xt,Tt,dt,vt,ut,ht]);let Et=s$4({enter:P(at),enterFrom:P(it),enterTo:P(ot),entered:P(st),leave:P(lt),leaveFrom:P(gt),leaveTo:P(ct)}),mt=xe({beforeEnter:et,afterEnter:tt,beforeLeave:rt,afterLeave:nt}),_t=a$2();react.exports.useEffect(()=>{if(_t&&xt==="visible"&&Tt.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[Tt,xt,_t]);let bt=yt&&!ft,Ot=(()=>!_t||bt||St.current===ut?"idle":ut?"enter":"leave")(),Pt=o$2(At=>u$2(At,{enter:()=>mt.current.beforeEnter(),leave:()=>mt.current.beforeLeave(),idle:()=>{}})),Dt=o$2(At=>u$2(At,{enter:()=>mt.current.afterEnter(),leave:()=>mt.current.afterLeave(),idle:()=>{}})),It=ne(()=>{Ct("hidden"),vt(Tt)},pt);D({container:Tt,classes:Et,direction:Ot,onStart:s$4(At=>{It.onStart(Tt,At,Pt)}),onStop:s$4(At=>{It.onStop(Tt,At,Dt),At==="leave"&&!I(It)&&(Ct("hidden"),vt(Tt))})}),react.exports.useEffect(()=>{!bt||(ht===j.Hidden?St.current=null:St.current=ut)},[ut,bt,xt]);let kt=wt,Lt={ref:Rt};return ft&&ut&&(typeof window>"u"||typeof document>"u")&&(kt={...kt,className:e(wt.className,...Et.current.enter,...Et.current.enterFrom)}),React$1.createElement(M$1.Provider,{value:It},React$1.createElement(C,{value:u$2(xt,{visible:p.Open,hidden:p.Closed})},$$b({ourProps:Lt,theirProps:kt,defaultTag:Pe,features:ie,visible:xt==="visible",name:"Transition.Child"})))}),J=C$1(function(_,_e){let{show:et,appear:tt=!1,unmount:rt,...nt}=_,at=react.exports.useRef(null),it=y(at,_e);a$2();let ot=s();if(et===void 0&&ot!==null&&(et=u$2(ot,{[p.Open]:!0,[p.Closed]:!1})),![!0,!1].includes(et))throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[st,lt]=react.exports.useState(et?"visible":"hidden"),gt=ne(()=>{lt("hidden")}),[ct,wt]=react.exports.useState(!0),Tt=react.exports.useRef([et]);s$5(()=>{ct!==!1&&Tt.current[Tt.current.length-1]!==et&&(Tt.current.push(et),wt(!1))},[Tt,et]);let Rt=react.exports.useMemo(()=>({show:et,appear:tt,initial:ct}),[et,tt,ct]);react.exports.useEffect(()=>{if(et)lt("visible");else if(!I(gt))lt("hidden");else{let ut=at.current;if(!ut)return;let ft=ut.getBoundingClientRect();ft.x===0&&ft.y===0&&ft.width===0&&ft.height===0&&lt("hidden")}},[et,gt]);let ht={unmount:rt};return React$1.createElement(M$1.Provider,{value:gt},React$1.createElement(A.Provider,{value:Rt},$$b({ourProps:{...ht,as:react.exports.Fragment,children:React$1.createElement(oe,{ref:it,...ht,...nt})},theirProps:{},defaultTag:react.exports.Fragment,features:ie,visible:st==="visible",name:"Transition"})))}),ye=C$1(function(_,_e){let et=react.exports.useContext(A)!==null,tt=s()!==null;return React$1.createElement(React$1.Fragment,null,!et&&tt?React$1.createElement(J,{ref:_e,..._}):React$1.createElement(oe,{ref:_e,..._}))}),Je=Object.assign(J,{Child:ye,Root:J});function getClasses(_,_e){return _==="slide-down"?{leave:`transition-[transform,opacity] ${_e}`,leaveFrom:"opacity-100 translate-y-0",leaveTo:"-translate-y-4 opacity-0",enter:`transition-[transform,opacity] ${_e}`,enterFrom:"opacity-0 -translate-y-4",enterTo:"translate-y-0 opacity-100"}:_==="slide-up"?{leave:`transition-[transform,opacity] ${_e}`,leaveFrom:"opacity-100 translate-y-0",leaveTo:"translate-y-4 opacity-0",enter:`transition-[transform,opacity] ${_e}`,enterFrom:"opacity-0 translate-y-4",enterTo:"translate-y-0 opacity-100"}:_==="fade"?{leave:`transition-[transform,opacity] ${_e}`,leaveFrom:"opacity-100",leaveTo:"opacity-0",enter:`transition-[transform,opacity] ${_e}`,enterFrom:"opacity-0",enterTo:"opacity-100"}:{}}function Transition(_){const _e=_.durationClass??"duration-200",et=getClasses(_.animation,_e);return _.isChild?jsxRuntime.exports.jsx(Je.Child,{as:react.exports.Fragment,...et,children:jsxRuntime.exports.jsx("div",{className:_.className,children:_.children})}):jsxRuntime.exports.jsx(Je,{show:_.show,as:react.exports.Fragment,...et,children:jsxRuntime.exports.jsx("div",{className:_.className,children:_.children})})}function getMediaPlayingFromState(_){return{hasPlayedOnce:_.mediaPlaying.hasPlayedOnce,isLoading:_.mediaPlaying.isLoading,isPaused:_.mediaPlaying.isPaused,isPlaying:_.mediaPlaying.isPlaying,isSeeking:_.mediaPlaying.isSeeking,isDragSeeking:_.mediaPlaying.isDragSeeking,isFirstLoading:_.mediaPlaying.isFirstLoading,volume:_.mediaPlaying.volume}}function updateMediaPlaying(_,_e){sendEvent(_,"mediaplaying",getMediaPlayingFromState(_e))}function useMediaPlaying(_){const _e=getPlayerState(_),[et,tt]=react.exports.useState(getMediaPlayingFromState(_e));return react.exports.useEffect(()=>{function rt(nt){tt(nt.detail)}return listenEvent(_,"mediaplaying",rt),()=>{unlistenEvent(_,"mediaplaying",rt)}},[_]),et}function BackdropAction(_){const _e=useVideoPlayerDescriptor(),et=useControls(_e),tt=useMediaPlaying(_e),rt=useInterface(_e),[nt,at]=react.exports.useState(!1),it=react.exports.useRef(null),ot=react.exports.useRef(null),st=react.exports.useCallback(()=>{nt||at(!0),it.current&&clearTimeout(it.current),it.current=setTimeout(()=>{nt&&at(!1),it.current=null},3e3)},[at,nt]),lt=react.exports.useCallback(()=>{at(!1)},[at]),[gt,ct]=react.exports.useState(0),wt=react.exports.useCallback(ut=>{if(!(!ot.current||ot.current!==ut.target)&&rt.popout===null){if(ut.type==="touchend"){ct(Date.now());return}setTimeout(()=>{if(Date.now()-gt<200){at(!nt);return}tt.isPlaying?et.pause():et.play()},20)}},[et,tt,rt,gt,nt]),Tt=react.exports.useCallback(ut=>{!ot.current||ot.current!==ut.target||(rt.isFullscreen?et.exitFullscreen():et.enterFullscreen())},[et,rt]),Rt=react.exports.useRef(null);react.exports.useEffect(()=>{var ft;const ut=nt||tt.isPaused||!!rt.popout;ut!==Rt.current&&(Rt.current=ut,(ft=_.onBackdropChange)==null||ft.call(_,ut))},[nt,tt,_,rt]);const ht=nt||tt.isPaused||!!rt.popout;return jsxRuntime.exports.jsxs("div",{className:`absolute inset-0 ${ht?"":"cursor-none"}`,onMouseMove:st,onMouseLeave:lt,ref:ot,onMouseUp:wt,onTouchEnd:wt,onDoubleClick:Tt,children:[jsxRuntime.exports.jsx("div",{className:`pointer-events-none absolute inset-0 bg-black bg-opacity-20 transition-opacity duration-200 ${ht?"":"!opacity-0"}`}),jsxRuntime.exports.jsx("div",{className:`pointer-events-none absolute inset-x-0 bottom-0 h-[20%] bg-gradient-to-t from-black to-transparent transition-opacity duration-200 ${ht?"":"!opacity-0"}`}),jsxRuntime.exports.jsx("div",{className:`pointer-events-none absolute inset-x-0 top-0 h-[20%] bg-gradient-to-b from-black to-transparent transition-opacity duration-200 ${ht?"":"!opacity-0"}`}),jsxRuntime.exports.jsx("div",{className:"pointer-events-none absolute inset-0",children:_.children})]})}var key$2={fullscreenEnabled:0,fullscreenElement:1,requestFullscreen:2,exitFullscreen:3,fullscreenchange:4,fullscreenerror:5,fullscreen:6},webkit=["webkitFullscreenEnabled","webkitFullscreenElement","webkitRequestFullscreen","webkitExitFullscreen","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],moz=["mozFullScreenEnabled","mozFullScreenElement","mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],ms=["msFullscreenEnabled","msFullscreenElement","msRequestFullscreen","msExitFullscreen","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"],document$2=typeof window<"u"&&typeof window.document<"u"?window.document:{},vendor="fullscreenEnabled"in document$2&&Object.keys(key$2)||webkit[0]in document$2&&webkit||moz[0]in document$2&&moz||ms[0]in document$2&&ms||[],fscreen={requestFullscreen:function(_){return _[vendor[key$2.requestFullscreen]]()},requestFullscreenFunction:function(_){return _[vendor[key$2.requestFullscreen]]},get exitFullscreen(){return document$2[vendor[key$2.exitFullscreen]].bind(document$2)},get fullscreenPseudoClass(){return":"+vendor[key$2.fullscreen]},addEventListener:function(_,_e,et){return document$2.addEventListener(vendor[key$2[_]],_e,et)},removeEventListener:function(_,_e,et){return document$2.removeEventListener(vendor[key$2[_]],_e,et)},get fullscreenEnabled(){return Boolean(document$2[vendor[key$2.fullscreenEnabled]])},set fullscreenEnabled(_){},get fullscreenElement(){return document$2[vendor[key$2.fullscreenElement]]},set fullscreenElement(_){},get onfullscreenchange(){return document$2[("on"+vendor[key$2.fullscreenchange]).toLowerCase()]},set onfullscreenchange(_){return document$2[("on"+vendor[key$2.fullscreenchange]).toLowerCase()]=_},get onfullscreenerror(){return document$2[("on"+vendor[key$2.fullscreenerror]).toLowerCase()]},set onfullscreenerror(_){return document$2[("on"+vendor[key$2.fullscreenerror]).toLowerCase()]=_}};const fscreen$1=fscreen,isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);let cachedVolumeResult=null;async function canChangeVolume(){if(cachedVolumeResult===null){const _=new Promise(et=>{setTimeout(()=>et(!1),1e3)}),_e=new Promise(et=>{const tt=document.createElement("video"),rt=()=>{tt.removeEventListener("volumechange",rt),et(!0)};tt.addEventListener("volumechange",rt),tt.volume=.5});cachedVolumeResult=await Promise.race([_e,_])}return cachedVolumeResult}function canFullscreenAnyElement(){return fscreen$1.fullscreenEnabled}function canWebkitFullscreen(){return canFullscreenAnyElement()||isSafari}function canFullscreen(){return canFullscreenAnyElement()||canWebkitFullscreen()}function FullscreenAction(_){const _e=useVideoPlayerDescriptor(),et=useInterface(_e),tt=useControls(_e),rt=react.exports.useCallback(()=>{et.isFullscreen?tt.exitFullscreen():tt.enterFullscreen()},[tt,et]);return canFullscreen()?jsxRuntime.exports.jsx(VideoPlayerIconButton,{className:_.className,onClick:rt,icon:et.isFullscreen?Icons.COMPRESS:Icons.EXPAND}):null}function HeaderAction(_){const _e=useVideoPlayerDescriptor(),et=useMeta(_e);return jsxRuntime.exports.jsx(VideoPlayerHeader,{media:et==null?void 0:et.meta.meta,..._})}const Spinner$1="";function Spinner(_){return jsxRuntime.exports.jsx("div",{className:["spinner",_.className??""].join(" ")})}function LoadingAction(){const _=useVideoPlayerDescriptor(),_e=useMediaPlaying(_),et=useMisc(_),tt=_e.isFirstLoading||_e.isLoading,rt=!et.isCasting;return!tt||!rt?null:jsxRuntime.exports.jsx(Spinner,{})}function MiddlePauseAction(){const _=useVideoPlayerDescriptor(),_e=useControls(_),et=useMediaPlaying(_),tt=react.exports.useCallback(()=>{et!=null&&et.isPlaying?_e.pause():_e.play()},[_e,et]);return et.hasPlayedOnce||et.isPlaying||et.isFirstLoading?null:jsxRuntime.exports.jsx("div",{onClick:tt,className:"group pointer-events-auto flex h-16 w-16 items-center justify-center rounded-full bg-denim-400 text-white transition-[background-color,transform] hover:scale-125 hover:bg-denim-500 active:scale-100",children:jsxRuntime.exports.jsx(Icon,{icon:Icons.PLAY,className:"text-2xl transition-transform group-hover:scale-125"})})}function PauseAction(_){const _e=useVideoPlayerDescriptor(),et=useMediaPlaying(_e),tt=useControls(_e),rt=react.exports.useCallback(()=>{et.isPlaying?tt.pause():tt.play()},[et,tt]),nt=et.isPlaying||et.isSeeking?Icons.PAUSE:Icons.PLAY;return jsxRuntime.exports.jsx(VideoPlayerIconButton,{iconSize:_.iconSize,className:_.className,icon:nt,onClick:rt})}function SkipTimeBackwardAction(){const _=useVideoPlayerDescriptor(),_e=useControls(_),et=useProgress(_),tt=()=>{_e.setTime(et.time-10)};return jsxRuntime.exports.jsx(VideoPlayerIconButton,{icon:Icons.SKIP_BACKWARD,onClick:tt})}function SkipTimeForwardAction(){const _=useVideoPlayerDescriptor(),_e=useControls(_),et=useProgress(_),tt=()=>{_e.setTime(et.time+10)};return jsxRuntime.exports.jsx(VideoPlayerIconButton,{icon:Icons.SKIP_FORWARD,onClick:tt})}function SkipTimeAction(_){return jsxRuntime.exports.jsx("div",{className:_.className,children:jsxRuntime.exports.jsxs("div",{className:"flex select-none items-center text-white",children:[jsxRuntime.exports.jsx(SkipTimeBackwardAction,{}),jsxRuntime.exports.jsx(SkipTimeForwardAction,{})]})})}function MobileCenterAction(){const _=useVideoPlayerDescriptor(),_e=useMediaPlaying(_),et=_e.isFirstLoading||_e.isLoading;return jsxRuntime.exports.jsxs("div",{className:"flex items-center space-x-8",children:[jsxRuntime.exports.jsx(SkipTimeBackwardAction,{}),jsxRuntime.exports.jsx(PauseAction,{iconSize:"text-5xl",className:et?"pointer-events-none opacity-0":""}),jsxRuntime.exports.jsx(SkipTimeForwardAction,{})]})}function useCurrentSeriesEpisodeInfo(_){const _e=useMeta(_),{t:et}=useTranslation(),tt=react.exports.useMemo(()=>{var it;return(it=_e==null?void 0:_e.seasons)==null?void 0:it.find(ot=>{var st;return ot.id===((st=_e==null?void 0:_e.episode)==null?void 0:st.seasonId)})},[_e]),rt=react.exports.useMemo(()=>{var it;return(it=tt==null?void 0:tt.episodes)==null?void 0:it.find(ot=>{var st;return ot.id===((st=_e==null?void 0:_e.episode)==null?void 0:st.episodeId)})},[tt,_e]);return Boolean((_e==null?void 0:_e.meta.meta.type)===MWMediaType.SERIES&&(_e==null?void 0:_e.episode))?{isSeries:!0,humanizedEpisodeId:et("videoPlayer.seasonAndEpisode",{season:tt==null?void 0:tt.number,episode:rt==null?void 0:rt.number}),currentSeasonInfo:tt,currentEpisodeInfo:rt,meta:_e==null?void 0:_e.meta}:{isSeries:!1}}function PageTitleAction(){const _=useVideoPlayerDescriptor(),{isSeries:_e,humanizedEpisodeId:et,meta:tt}=useCurrentSeriesEpisodeInfo(_);if(!tt)return null;const rt=_e?`${tt.meta.title} - ${et}`:tt.meta.title;return jsxRuntime.exports.jsx(HelmetExport,{children:jsxRuntime.exports.jsx("title",{children:rt})})}function makePercentageString(_){return`${_.toFixed(2)}%`}function makePercentage(_){return Number(Math.max(0,Math.min(_,100)).toFixed(2))}function isClickEvent(_){return _.type==="mousedown"||_.type==="mouseup"||_.type==="mousemove"}const getEventX=_=>isClickEvent(_)?_.pageX:_.changedTouches[0].pageX;function useProgressBar(_,_e,et=!1){const[tt,rt]=react.exports.useState(!1),[nt,at]=react.exports.useState(0);react.exports.useEffect(()=>{function ot(lt){if(!tt||!_.current)return;const gt=_.current.getBoundingClientRect(),ct=(getEventX(lt)-gt.left)/_.current.offsetWidth;at(ct*100),et&&_e(ct)}function st(lt){if(!tt||(rt(!1),document.body.removeAttribute("data-no-select"),!_.current))return;const gt=_.current.getBoundingClientRect(),ct=(getEventX(lt)-gt.left)/_.current.offsetWidth;_e(ct)}return document.addEventListener("mousemove",ot),document.addEventListener("touchmove",ot),document.addEventListener("mouseup",st),document.addEventListener("touchend",st),()=>{document.removeEventListener("mousemove",ot),document.removeEventListener("touchmove",ot),document.removeEventListener("mouseup",st),document.removeEventListener("touchend",st)}},[tt,_,_e,et]);const it=react.exports.useCallback(ot=>{if(rt(!0),document.body.setAttribute("data-no-select","true"),!_.current)return;const st=_.current.getBoundingClientRect(),lt=(getEventX(ot)-st.left)/_.current.offsetWidth*100;at(lt)},[at,_]);return{dragging:tt,dragPercentage:nt,dragMouseDown:it}}function ProgressAction(){const _=useVideoPlayerDescriptor(),_e=useControls(_),et=useProgress(_),tt=react.exports.useRef(null),rt=react.exports.useRef(!1),nt=react.exports.useRef(_e);react.exports.useEffect(()=>{nt.current=_e},[_e]);const at=react.exports.useCallback(ct=>{_e.setTime(ct*et.duration)},[_e,et]),{dragging:it,dragPercentage:ot,dragMouseDown:st}=useProgressBar(tt,at);react.exports.useEffect(()=>{rt.current!==it&&(rt.current=it,_e.setSeeking(it))},[rt,it,_e]),react.exports.useEffect(()=>{if(it){const ct=getPlayerState(_);nt.current.setDraggingTime(ct.progress.duration*(ot/100))}},[_,it,ot]);let lt=makePercentageString(makePercentage(et.time/et.duration*100));it&&(lt=makePercentageString(makePercentage(ot)));const gt=makePercentageString(makePercentage(et.buffered/et.duration*100));return jsxRuntime.exports.jsx("div",{className:"group pointer-events-auto w-full cursor-pointer rounded-full px-2",children:jsxRuntime.exports.jsx("div",{ref:tt,className:"-my-3 flex h-8 items-center",onMouseDown:st,onTouchStart:st,children:jsxRuntime.exports.jsxs("div",{className:`relative h-1 flex-1 rounded-full bg-gray-500 bg-opacity-50 transition-[height] duration-100 group-hover:h-2 ${it?"!h-2":""}`,children:[jsxRuntime.exports.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center justify-end rounded-full bg-gray-300 bg-opacity-20",style:{width:gt}}),jsxRuntime.exports.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center justify-end rounded-full bg-bink-600",style:{width:lt},children:jsxRuntime.exports.jsx("div",{className:`absolute h-1 w-1 translate-x-1/2 rounded-full bg-white opacity-0 transition-[transform,opacity] group-hover:scale-[400%] group-hover:opacity-100 ${it?"!scale-[400%] !opacity-100":""}`})})]})})})}function getSourceFromState(_){return{source:_.source?{..._.source}:null}}function updateSource(_,_e){sendEvent(_,"source",getSourceFromState(_e))}function useSource(_){const _e=getPlayerState(_),[et,tt]=react.exports.useState(getSourceFromState(_e));return react.exports.useEffect(()=>{function rt(nt){tt(nt.detail)}return listenEvent(_,"source",rt),()=>{unlistenEvent(_,"source",rt)}},[_]),et}function QualityDisplayAction(){const _=useVideoPlayerDescriptor(),_e=useSource(_);return _e.source?jsxRuntime.exports.jsx("div",{className:"rounded-md bg-denim-300 py-1 px-2 transition-colors",children:jsxRuntime.exports.jsx("p",{className:"text-center text-xs font-bold text-slate-300 transition-colors",children:_e.source.quality})}):null}function PopoutAnchor(_){const _e=react.exports.useRef(null),et=useVideoPlayerDescriptor();return react.exports.useEffect(()=>{if(!_e.current)return;const tt=getPlayerState(et);if(tt.interface.popout!==_.for)return;let rt=!1;function nt(){if(!rt){if(_e.current){const at=JSON.stringify(tt.interface.popoutBounds),it=_e.current.getBoundingClientRect();at!==JSON.stringify(it)&&(tt.interface.popoutBounds=it,updateInterface(et,tt))}window.requestAnimationFrame(nt)}}return window.requestAnimationFrame(nt),()=>{rt=!0}},[et,_]),jsxRuntime.exports.jsx("div",{ref:_e,children:_.children})}function SeriesSelectionAction(_){const{t:_e}=useTranslation(),et=useVideoPlayerDescriptor(),tt=useMeta(et),rt=useInterface(et),nt=useControls(et);return(tt==null?void 0:tt.meta.meta.type)!==MWMediaType.SERIES?null:jsxRuntime.exports.jsx("div",{className:_.className,children:jsxRuntime.exports.jsx("div",{className:"relative",children:jsxRuntime.exports.jsx(PopoutAnchor,{for:"episodes",children:jsxRuntime.exports.jsx(VideoPlayerIconButton,{active:rt.popout==="episodes",icon:Icons.EPISODES,text:_e("videoPlayer.buttons.episodes"),wide:!0,onClick:()=>nt.openPopout("episodes")})})})})}function SourceSelectionAction(_){const{t:_e}=useTranslation(),et=useVideoPlayerDescriptor(),tt=useInterface(et),rt=useControls(et);return jsxRuntime.exports.jsx("div",{className:_.className,children:jsxRuntime.exports.jsx("div",{className:"relative",children:jsxRuntime.exports.jsx(PopoutAnchor,{for:"source",children:jsxRuntime.exports.jsx(VideoPlayerIconButton,{active:tt.popout==="source",icon:Icons.CLAPPER_BOARD,iconSize:"text-xl",text:_e("videoPlayer.buttons.source"),wide:!0,onClick:()=>rt.openPopout("source")})})})})}function CaptionsSelectionAction(_){const{t:_e}=useTranslation(),et=useVideoPlayerDescriptor(),tt=useControls(et),{isMobile:rt}=useIsMobile();return jsxRuntime.exports.jsx("div",{className:_.className,children:jsxRuntime.exports.jsx("div",{className:"relative",children:jsxRuntime.exports.jsx(PopoutAnchor,{for:"captions",children:jsxRuntime.exports.jsx(VideoPlayerIconButton,{className:_.className,text:rt?_e("videoPlayer.buttons.captions"):"",wide:rt,onClick:()=>tt.openPopout("captions"),icon:Icons.CAPTIONS})})})})}function ShowTitleAction(){const _=useVideoPlayerDescriptor(),{isSeries:_e,currentEpisodeInfo:et,humanizedEpisodeId:tt}=useCurrentSeriesEpisodeInfo(_);return _e?jsxRuntime.exports.jsxs("p",{className:"ml-8 select-none space-x-2 text-white",children:[jsxRuntime.exports.jsx("span",{children:tt}),jsxRuntime.exports.jsx("span",{className:"opacity-50",children:et==null?void 0:et.title})]}):null}function useVolumeControl(_){const[_e,et]=react.exports.useState(1),tt=useControls(_),rt=useMediaPlaying(_);return{storedVolume:_e,setStoredVolume:et,toggleVolume:()=>{rt.volume>0?(et(rt.volume),tt.setVolume(0)):tt.setVolume(_e>0?_e:1)}}}function KeyboardShortcutsAction(){const _=useVideoPlayerDescriptor(),_e=useControls(_),et=useInterface(_),tt=useMediaPlaying(_),rt=useProgress(_),{toggleVolume:nt}=useVolumeControl(_),at=react.exports.useRef(0);return react.exports.useEffect(()=>{at.current=rt.time},[rt]),react.exports.useEffect(()=>{const ot=getPlayerState(_).wrapperElement;if(!ot)return;let st=!1;const lt=gt=>{if(!!et.isFocused)switch(gt.key.toLowerCase()){case"f":et.isFullscreen?_e.exitFullscreen():_e.enterFullscreen();break;case"arrowleft":_e.setTime(at.current-5);break;case"arrowright":_e.setTime(at.current+5);break;case" ":tt.isPaused?_e.play():_e.pause();break;case"m":nt();break;case"r":if(st||gt.ctrlKey||gt.metaKey)return;st=!0,ot.classList.add("roll"),setTimeout(()=>{st=!1,ot.classList.remove("roll")},1e3);break}};return window.addEventListener("keydown",lt),()=>{window.removeEventListener("keydown",lt)}},[_e,_,tt,et,nt]),null}function durationExceedsHour(_){return _>60*60}function formatSeconds(_,_e=!1){if(Number.isNaN(_))return _e?"0:00:00":"0:00";let et=_;const tt=Math.floor(et%60);et/=60;const rt=Math.floor(et%60);et/=60;const nt=Math.floor(et),at=tt.toString().padStart(2,"0"),it=rt.toString().padStart(2,"0");return _e?[nt,it,at].join(":"):[it,at].join(":")}function TimeAction(_){const _e=useVideoPlayerDescriptor(),et=useProgress(_e),tt=useMediaPlaying(_e),rt=durationExceedsHour(et.duration),nt=formatSeconds(tt.isDragSeeking?et.draggingTime:et.time,rt),at=formatSeconds(et.duration,rt);return jsxRuntime.exports.jsx("div",{className:_.className,children:jsxRuntime.exports.jsxs("p",{className:"select-none text-white",children:[nt," ",_.noDuration?"":`/ ${at}`]})})}function VolumeAction(_){const _e=useVideoPlayerDescriptor(),et=useControls(_e),tt=useMediaPlaying(_e),rt=useInterface(_e),{setStoredVolume:nt,toggleVolume:at}=useVolumeControl(_e),it=react.exports.useRef(null),[ot,st]=react.exports.useState(!1),lt=react.exports.useCallback(ft=>{et.setVolume(ft),nt(ft)},[et,nt]),{dragging:gt,dragPercentage:ct,dragMouseDown:wt}=useProgressBar(it,lt,!0);react.exports.useEffect(()=>{rt.leftControlHovering||st(!1)},[rt]);const Tt=react.exports.useCallback(()=>{at()},[at]),Rt=react.exports.useCallback(async()=>{await canChangeVolume()&&st(!0)},[st]);let ht=makePercentage(tt.volume*100);gt&&(ht=makePercentage(ct));const ut=makePercentageString(ht);return jsxRuntime.exports.jsx("div",{className:_.className,children:jsxRuntime.exports.jsxs("div",{className:"pointer-events-auto flex cursor-pointer items-center",onMouseEnter:Rt,children:[jsxRuntime.exports.jsx("div",{className:"px-4 text-2xl text-white",onClick:Tt,children:jsxRuntime.exports.jsx(Icon,{icon:ht>0?Icons.VOLUME:Icons.VOLUME_X})}),jsxRuntime.exports.jsx("div",{className:`linear -ml-2 w-0 overflow-hidden transition-[width,opacity] duration-300 ${ot||gt?"!w-24 opacity-100":"w-4 opacity-0"}`,children:jsxRuntime.exports.jsx("div",{ref:it,className:"flex h-10 w-20 items-center px-2",onMouseDown:wt,onTouchStart:wt,children:jsxRuntime.exports.jsx("div",{className:"relative h-1 flex-1 rounded-full bg-gray-500 bg-opacity-50",children:jsxRuntime.exports.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center justify-end rounded-full bg-bink-500",style:{width:ut},children:jsxRuntime.exports.jsx("div",{className:"absolute h-3 w-3 translate-x-1/2 rounded-full bg-white"})})})})})]})})}function getErrorFromState(_){return{error:_.error}}function updateError(_,_e){sendEvent(_,"error",getErrorFromState(_e))}function useError(_){const _e=getPlayerState(_),[et,tt]=react.exports.useState(getErrorFromState(_e));return react.exports.useEffect(()=>{function rt(nt){tt(nt.detail)}return listenEvent(_,"error",rt),()=>{unlistenEvent(_,"error",rt)}},[_]),et}function VideoPlayerError(_){const _e=useVideoPlayerDescriptor(),et=useMeta(_e),rt=useError(_e).error;return rt?jsxRuntime.exports.jsxs("div",{children:[jsxRuntime.exports.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-denim-100",children:[jsxRuntime.exports.jsx(IconPatch,{icon:Icons.WARNING,className:"mb-6 text-red-400"}),jsxRuntime.exports.jsx(Title,{children:"Failed to load media"}),jsxRuntime.exports.jsxs("p",{className:"my-6 max-w-lg text-center",children:[rt==null?void 0:rt.name,": ",rt==null?void 0:rt.description]})]}),jsxRuntime.exports.jsx("div",{className:"pointer-events-auto absolute inset-x-0 top-0 flex flex-col py-6 px-8 pb-2",children:jsxRuntime.exports.jsx(VideoPlayerHeader,{media:et==null?void 0:et.meta.meta,onClick:_.onGoBack})})]}):_.children}const CHROMECAST_SENDER_SDK="https://www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1",callbacks=[];let _available=null;function init(_){_available=_,callbacks.forEach(_e=>_e(_))}function isChromecastAvailable(_){if(_available!==null)return _(_available);callbacks.push(_)}function initializeChromecast(){if(window.__onGCastApiAvailable=_e=>{init(_e)},!!!document.getElementById("chromecast-script")){const _e=document.createElement("script");_e.setAttribute("src",CHROMECAST_SENDER_SDK),_e.setAttribute("id","chromecast-script"),document.body.appendChild(_e)}}function useChromecastAvailable(){const[_,_e]=react.exports.useState(null);return react.exports.useEffect(()=>{isChromecastAvailable(et=>_e(et))},[]),_}const volumeStore=createVersionedStore().setKey("mw-volume").addVersion({version:0,create(){return{volume:1}}}).build();function getStoredVolume(){return volumeStore.get().volume}function setStoredVolume(_){volumeStore.save({volume:_})}function resetStateForSource(_,_e){const et=_e;et.hlsInstance&&(et.hlsInstance.destroy(),et.hlsInstance=null),resetForSource(et),updateMediaPlaying(_,et),updateProgress(_,et),updateMisc(_,et)}function createCastingStateProvider(_){const _e=getPlayerState(_),et=_e.casting.instance,tt=_e.casting.player,rt=_e.casting.controller;return{getId(){return"casting"},play(){_e.mediaPlaying.isPaused&&(rt==null||rt.playOrPause())},pause(){_e.mediaPlaying.isPlaying&&(rt==null||rt.playOrPause())},exitFullscreen(){!fscreen$1.fullscreenElement||fscreen$1.exitFullscreen()},enterFullscreen(){if(!(!canFullscreen()||fscreen$1.fullscreenElement)){if(canFullscreenAnyElement()){_e.wrapperElement&&fscreen$1.requestFullscreen(_e.wrapperElement);return}canWebkitFullscreen()&&tt.webkitEnterFullscreen()}},startAirplay(){},setTime(nt){let at=Math.min(nt,(tt==null?void 0:tt.duration)??0);at=Math.max(0,at),!Number.isNaN(at)&&(tt&&(tt.currentTime=at),_e.progress.time=at,rt==null||rt.seek(),updateProgress(_,_e))},setSeeking(nt){if(_e.mediaPlaying.isSeeking=nt,_e.mediaPlaying.isDragSeeking=nt,updateMediaPlaying(_,_e),!nt){_e.pausedWhenSeeking||this.play();return}_e.pausedWhenSeeking=_e.mediaPlaying.isPaused,this.pause()},async setVolume(nt){let at=Math.min(nt,1);at=Math.max(0,at),await canChangeVolume()&&tt&&(tt.volumeLevel=at),_e.mediaPlaying.volume=at,rt==null||rt.setVolumeLevel(),updateMediaPlaying(_,_e),setStoredVolume(at)},setSource(nt){var lt,gt;if(!nt){resetStateForSource(_,_e),rt==null||rt.stop(),_e.source=null,updateSource(_,_e);return}const at=new chrome.cast.media.MovieMediaMetadata;at.title=((lt=_e.meta)==null?void 0:lt.meta.meta.title)??"";const it=new chrome.cast.media.MediaInfo(((gt=_e.meta)==null?void 0:gt.meta.meta.id)??"hello","video/mp4");it.contentUrl=nt==null?void 0:nt.source,it.streamType=chrome.cast.media.StreamType.BUFFERED,it.metadata=at;const ot=new chrome.cast.media.LoadRequest(it);ot.autoplay=!0;const st=et==null?void 0:et.getCurrentSession();st==null||st.loadMedia(ot),_e.source={quality:nt.quality,type:nt.type,url:nt.source,caption:null},resetStateForSource(_,_e),updateSource(_,_e)},setCaption(nt,at){_e.source&&(_e.source.caption={id:nt,url:at},updateSource(_,_e))},clearCaption(){_e.source&&(_e.source.caption=null,updateSource(_,_e))},providerStart(){var ot,st,lt;this.setVolume(getStoredVolume());const nt=async gt=>{switch(gt.field){case"volumeLevel":await canChangeVolume()&&(_e.mediaPlaying.volume=gt.value,updateMediaPlaying(_,_e));break;case"currentTime":_e.progress.time=gt.value,updateProgress(_,_e);break;case"mediaInfo":gt.value&&(_e.progress.duration=gt.value.duration,updateProgress(_,_e));break;case"playerState":_e.mediaPlaying.isLoading=gt.value==="BUFFERING",_e.mediaPlaying.isPaused=gt.value!=="PLAYING",_e.mediaPlaying.isPlaying=gt.value==="PLAYING",gt.value==="PLAYING"&&(_e.mediaPlaying.hasPlayedOnce=!0,_e.mediaPlaying.isFirstLoading=!1),updateMediaPlaying(_,_e);break;case"isMuted":_e.mediaPlaying.volume=gt.value?1:0,updateMediaPlaying(_,_e);break;case"displayStatus":case"canSeek":case"title":case"isPaused":break;default:console.log(gt.type,gt.field,gt.value);break}},at=()=>{_e.interface.isFullscreen=!!document.fullscreenElement,updateInterface(_,_e)},it=gt=>{_e.interface.isFocused=gt.type!=="mouseleave",updateInterface(_,_e)};return rt==null||rt.addEventListener(cast.framework.RemotePlayerEventType.ANY_CHANGE,nt),(ot=_e.wrapperElement)==null||ot.addEventListener("click",it),(st=_e.wrapperElement)==null||st.addEventListener("mouseenter",it),(lt=_e.wrapperElement)==null||lt.addEventListener("mouseleave",it),fscreen$1.addEventListener("fullscreenchange",at),_e.source&&this.setSource({quality:_e.source.quality,source:_e.source.url,type:_e.source.type}),{destroy:()=>{var gt,ct,wt;rt==null||rt.removeEventListener(cast.framework.RemotePlayerEventType.ANY_CHANGE,nt),(gt=_e.wrapperElement)==null||gt.removeEventListener("click",it),(ct=_e.wrapperElement)==null||ct.removeEventListener("mouseenter",it),(wt=_e.wrapperElement)==null||wt.removeEventListener("mouseleave",it),fscreen$1.removeEventListener("fullscreenchange",at),et==null||et.endCurrentSession(!0)}}}}}function setProvider(_,_e){const et=getPlayerState(_);et.stateProvider=_e,et.initalized=!0,et.stateProviderId=_e.getId(),updateMisc(_,et)}function unsetStateProvider(_,_e){var tt;const et=getPlayerState(_);!et.stateProvider||((tt=et.stateProvider)==null?void 0:tt.getId())!==_e||(et.stateProvider=null,et.stateProviderId="video",updateMisc(_,et))}function handleBuffered(_,_e){for(let et=0;et<_e.length;et+=1)if(_e.start(_e.length-1-et)<_)return _e.end(_e.length-1-et);return 0}function CastingInternal(){const _=useVideoPlayerDescriptor(),_e=useMisc(_),et=react.exports.useRef(!1),tt=useChromecastAvailable(),rt=react.exports.useMemo(()=>_e.isCasting,[_e]);return react.exports.useEffect(()=>{if(et.current===rt||(et.current=rt,!rt))return;const nt=createCastingStateProvider(_);setProvider(_,nt);const{destroy:at}=nt.providerStart();return()=>{try{unsetStateProvider(_,nt.getId())}catch{}at()}},[_,rt]),react.exports.useEffect(()=>{const nt=getPlayerState(_);if(!tt)return;nt.casting.instance=cast.framework.CastContext.getInstance(),nt.casting.instance.setOptions({receiverApplicationId:chrome.cast.media.DEFAULT_MEDIA_RECEIVER_APP_ID,autoJoinPolicy:chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED}),nt.casting.player=new cast.framework.RemotePlayer,nt.casting.controller=new cast.framework.RemotePlayerController(nt.casting.player);function at(it){it.field==="isConnected"&&(nt.casting.isCasting=it.value,updateMisc(_,nt))}return nt.casting.controller.addEventListener(cast.framework.RemotePlayerEventType.IS_CONNECTED_CHANGED,at),()=>{var it;(it=nt.casting.controller)==null||it.removeEventListener(cast.framework.RemotePlayerEventType.IS_CONNECTED_CHANGED,at)}},[tt,_]),null}function WrapperRegisterInternal(_){const _e=useVideoPlayerDescriptor();return react.exports.useEffect(()=>{const et=getPlayerState(_e);et.wrapperElement=_.wrapper,updateMisc(_e,et)},[_.wrapper,_e]),null}class VideoErrorBoundary extends react.exports.Component{constructor(_e){super(_e),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(_e,et){if(console.error("Render error caught",_e,et),_e instanceof Error){const tt=_e;this.setState(rt=>({...rt,hasError:!0,error:{name:tt.name,description:tt.message,path:et.componentStack.split(`
`)[1]}}))}}render(){return this.state.hasError?jsxRuntime.exports.jsxs("div",{className:"absolute inset-0 bg-denim-100",children:[jsxRuntime.exports.jsx("div",{className:"pointer-events-auto absolute inset-x-0 top-0 flex flex-col py-6 px-8 pb-2",children:jsxRuntime.exports.jsx(VideoPlayerHeader,{media:this.props.media,onClick:this.props.onGoBack})}),jsxRuntime.exports.jsx(ErrorMessage,{error:this.state.error,localSize:!0,children:jsxRuntime.exports.jsxs(Trans,{i18nKey:"videoPlayer.errors.fatalError",children:[jsxRuntime.exports.jsx(Link,{url:conf().DISCORD_LINK,newTab:!0}),jsxRuntime.exports.jsx(Link,{url:conf().GITHUB_LINK,newTab:!0})]})})]}):this.props.children}}var hls={exports:{}};(function(_,_e){typeof window<"u"&&function(tt,rt){_.exports=rt()}(commonjsGlobal$1,()=>(()=>{var et={"./src/config.ts":(at,it,ot)=>{ot.r(it),ot.d(it,{enableStreamingMode:()=>Dt,hlsDefaultConfig:()=>bt,mergeConfig:()=>Pt});var st=ot("./src/controller/abr-controller.ts"),lt=ot("./src/controller/audio-stream-controller.ts"),gt=ot("./src/controller/audio-track-controller.ts"),ct=ot("./src/controller/subtitle-stream-controller.ts"),wt=ot("./src/controller/subtitle-track-controller.ts"),Tt=ot("./src/controller/buffer-controller.ts"),Rt=ot("./src/controller/timeline-controller.ts"),ht=ot("./src/controller/cap-level-controller.ts"),ut=ot("./src/controller/fps-controller.ts"),ft=ot("./src/controller/eme-controller.ts"),yt=ot("./src/controller/cmcd-controller.ts"),xt=ot("./src/utils/xhr-loader.ts"),Ct=ot("./src/utils/fetch-loader.ts"),pt=ot("./src/utils/cues.ts"),dt=ot("./src/utils/mediakeys-helper.ts"),vt=ot("./src/utils/logger.ts");function St(){return St=Object.assign?Object.assign.bind():function(It){for(var kt=1;kt<arguments.length;kt++){var Lt=arguments[kt];for(var At in Lt)Object.prototype.hasOwnProperty.call(Lt,At)&&(It[At]=Lt[At])}return It},St.apply(this,arguments)}function Et(It,kt){var Lt=Object.keys(It);if(Object.getOwnPropertySymbols){var At=Object.getOwnPropertySymbols(It);kt&&(At=At.filter(function($t){return Object.getOwnPropertyDescriptor(It,$t).enumerable})),Lt.push.apply(Lt,At)}return Lt}function mt(It){for(var kt=1;kt<arguments.length;kt++){var Lt=arguments[kt]!=null?arguments[kt]:{};kt%2?Et(Object(Lt),!0).forEach(function(At){_t(It,At,Lt[At])}):Object.getOwnPropertyDescriptors?Object.defineProperties(It,Object.getOwnPropertyDescriptors(Lt)):Et(Object(Lt)).forEach(function(At){Object.defineProperty(It,At,Object.getOwnPropertyDescriptor(Lt,At))})}return It}function _t(It,kt,Lt){return kt in It?Object.defineProperty(It,kt,{value:Lt,enumerable:!0,configurable:!0,writable:!0}):It[kt]=Lt,It}var bt=mt(mt({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,maxBufferSize:60*1e3*1e3,maxBufferHole:.1,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:xt.default,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:st.default,bufferController:Tt.default,capLevelController:ht.default,fpsController:ut.default,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystemOptions:{},requestMediaKeySystemAccessFunc:dt.requestMediaKeySystemAccess,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableID3MetadataCues:!0},Ot()),{},{subtitleStreamController:ct.SubtitleStreamController,subtitleTrackController:wt.default,timelineController:Rt.TimelineController,audioStreamController:lt.default,audioTrackController:gt.default,emeController:ft.default,cmcdController:yt.default});function Ot(){return{cueHandler:pt.default,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}}function Pt(It,kt){if((kt.liveSyncDurationCount||kt.liveMaxLatencyDurationCount)&&(kt.liveSyncDuration||kt.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(kt.liveMaxLatencyDurationCount!==void 0&&(kt.liveSyncDurationCount===void 0||kt.liveMaxLatencyDurationCount<=kt.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(kt.liveMaxLatencyDuration!==void 0&&(kt.liveSyncDuration===void 0||kt.liveMaxLatencyDuration<=kt.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');return St({},It,kt)}function Dt(It){var kt=It.loader;if(kt!==Ct.default&&kt!==xt.default)vt.logger.log("[config]: Custom loader detected, cannot enable progressive streaming"),It.progressive=!1;else{var Lt=(0,Ct.fetchSupported)();Lt&&(It.loader=Ct.default,It.progressive=!0,It.enableSoftwareAES=!0,vt.logger.log("[config]: Progressive streaming enabled, using FetchLoader"))}}},"./src/controller/abr-controller.ts":(at,it,ot)=>{ot.r(it),ot.d(it,{default:()=>ft});var st=ot("./src/polyfills/number.ts"),lt=ot("./src/utils/ewma-bandwidth-estimator.ts"),gt=ot("./src/events.ts"),ct=ot("./src/errors.ts"),wt=ot("./src/types/loader.ts"),Tt=ot("./src/utils/logger.ts");function Rt(yt,xt){for(var Ct=0;Ct<xt.length;Ct++){var pt=xt[Ct];pt.enumerable=pt.enumerable||!1,pt.configurable=!0,"value"in pt&&(pt.writable=!0),Object.defineProperty(yt,pt.key,pt)}}function ht(yt,xt,Ct){return xt&&Rt(yt.prototype,xt),Ct&&Rt(yt,Ct),Object.defineProperty(yt,"prototype",{writable:!1}),yt}var ut=function(){function yt(Ct){this.hls=void 0,this.lastLoadedFragLevel=0,this._nextAutoLevel=-1,this.timer=void 0,this.onCheck=this._abandonRulesCheck.bind(this),this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.bwEstimator=void 0,this.hls=Ct;var pt=Ct.config;this.bwEstimator=new lt.default(pt.abrEwmaSlowVoD,pt.abrEwmaFastVoD,pt.abrEwmaDefaultEstimate),this.registerListeners()}var xt=yt.prototype;return xt.registerListeners=function(){var pt=this.hls;pt.on(gt.Events.FRAG_LOADING,this.onFragLoading,this),pt.on(gt.Events.FRAG_LOADED,this.onFragLoaded,this),pt.on(gt.Events.FRAG_BUFFERED,this.onFragBuffered,this),pt.on(gt.Events.LEVEL_LOADED,this.onLevelLoaded,this),pt.on(gt.Events.ERROR,this.onError,this)},xt.unregisterListeners=function(){var pt=this.hls;pt.off(gt.Events.FRAG_LOADING,this.onFragLoading,this),pt.off(gt.Events.FRAG_LOADED,this.onFragLoaded,this),pt.off(gt.Events.FRAG_BUFFERED,this.onFragBuffered,this),pt.off(gt.Events.LEVEL_LOADED,this.onLevelLoaded,this),pt.off(gt.Events.ERROR,this.onError,this)},xt.destroy=function(){this.unregisterListeners(),this.clearTimer(),this.hls=this.onCheck=null,this.fragCurrent=this.partCurrent=null},xt.onFragLoading=function(pt,dt){var vt=dt.frag;if(vt.type===wt.PlaylistLevelType.MAIN&&!this.timer){var St;this.fragCurrent=vt,this.partCurrent=(St=dt.part)!=null?St:null,this.timer=self.setInterval(this.onCheck,100)}},xt.onLevelLoaded=function(pt,dt){var vt=this.hls.config;dt.details.live?this.bwEstimator.update(vt.abrEwmaSlowLive,vt.abrEwmaFastLive):this.bwEstimator.update(vt.abrEwmaSlowVoD,vt.abrEwmaFastVoD)},xt._abandonRulesCheck=function(){var pt=this.fragCurrent,dt=this.partCurrent,vt=this.hls,St=vt.autoLevelEnabled;vt.config;var Et=vt.media;if(!(!pt||!Et)){var mt=dt?dt.stats:pt.stats,_t=dt?dt.duration:pt.duration;if(mt.aborted||mt.loaded&&mt.loaded===mt.total||pt.level===0){this.clearTimer(),this._nextAutoLevel=-1;return}if(!(!St||Et.paused||!Et.playbackRate||!Et.readyState)){var bt=vt.mainForwardBufferInfo;if(bt!==null){var Ot=performance.now()-mt.loading.start,Pt=Math.abs(Et.playbackRate);if(!(Ot<=500*_t/Pt)){var Dt=mt.loaded&&mt.loading.first,It=this.bwEstimator.getEstimate(),kt=vt.levels,Lt=vt.minAutoLevel,At=kt[pt.level],$t=mt.total||Math.max(mt.loaded,Math.round(_t*At.maxBitrate/8)),jt=Dt?mt.loaded*1e3/Ot:0,Nt=jt?($t-mt.loaded)/jt:$t*8/It,Ft=bt.len/Pt;if(!(Nt<=Ft)){var Bt=Number.POSITIVE_INFINITY,Ut;for(Ut=pt.level-1;Ut>Lt;Ut--){var Ht=kt[Ut].maxBitrate;if(Bt=jt?_t*Ht/(8*.8*jt):_t*Ht/It,Bt<Ft)break}Bt>=Nt||(Tt.logger.warn("Fragment "+pt.sn+(dt?" part "+dt.index:"")+" of level "+pt.level+" is loading too slowly and will cause an underbuffer; aborting and switching to level "+Ut+`
      Current BW estimate: `+((0,st.isFiniteNumber)(It)?(It/1024).toFixed(3):"Unknown")+` Kb/s
      Estimated load time for current fragment: `+Nt.toFixed(3)+` s
      Estimated load time for the next fragment: `+Bt.toFixed(3)+` s
      Time to underbuffer: `+Ft.toFixed(3)+" s"),vt.nextLoadLevel=Ut,Dt&&this.bwEstimator.sample(Ot,mt.loaded),this.clearTimer(),pt.loader&&(this.fragCurrent=this.partCurrent=null,pt.loader.abort()),vt.trigger(gt.Events.FRAG_LOAD_EMERGENCY_ABORTED,{frag:pt,part:dt,stats:mt}))}}}}}},xt.onFragLoaded=function(pt,dt){var vt=dt.frag,St=dt.part;if(vt.type===wt.PlaylistLevelType.MAIN&&(0,st.isFiniteNumber)(vt.sn)){var Et=St?St.stats:vt.stats,mt=St?St.duration:vt.duration;if(this.clearTimer(),this.lastLoadedFragLevel=vt.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var _t=this.hls.levels[vt.level],bt=(_t.loaded?_t.loaded.bytes:0)+Et.loaded,Ot=(_t.loaded?_t.loaded.duration:0)+mt;_t.loaded={bytes:bt,duration:Ot},_t.realBitrate=Math.round(8*bt/Ot)}if(vt.bitrateTest){var Pt={stats:Et,frag:vt,part:St,id:vt.type};this.onFragBuffered(gt.Events.FRAG_BUFFERED,Pt)}}},xt.onFragBuffered=function(pt,dt){var vt=dt.frag,St=dt.part,Et=St?St.stats:vt.stats;if(!Et.aborted&&!(vt.type!==wt.PlaylistLevelType.MAIN||vt.sn==="initSegment")){var mt=Et.parsing.end-Et.loading.start;this.bwEstimator.sample(mt,Et.loaded),Et.bwEstimate=this.bwEstimator.getEstimate(),vt.bitrateTest?this.bitrateTestDelay=mt/1e3:this.bitrateTestDelay=0}},xt.onError=function(pt,dt){switch(dt.details){case ct.ErrorDetails.FRAG_LOAD_ERROR:case ct.ErrorDetails.FRAG_LOAD_TIMEOUT:this.clearTimer();break}},xt.clearTimer=function(){self.clearInterval(this.timer),this.timer=void 0},xt.getNextABRAutoLevel=function(){var pt=this.fragCurrent,dt=this.partCurrent,vt=this.hls,St=vt.maxAutoLevel,Et=vt.config,mt=vt.minAutoLevel,_t=vt.media,bt=dt?dt.duration:pt?pt.duration:0;_t&&_t.currentTime;var Ot=_t&&_t.playbackRate!==0?Math.abs(_t.playbackRate):1,Pt=this.bwEstimator?this.bwEstimator.getEstimate():Et.abrEwmaDefaultEstimate,Dt=vt.mainForwardBufferInfo,It=(Dt?Dt.len:0)/Ot,kt=this.findBestLevel(Pt,mt,St,It,Et.abrBandWidthFactor,Et.abrBandWidthUpFactor);if(kt>=0)return kt;Tt.logger.trace((It?"rebuffering expected":"buffer is empty")+", finding optimal quality level");var Lt=bt?Math.min(bt,Et.maxStarvationDelay):Et.maxStarvationDelay,At=Et.abrBandWidthFactor,$t=Et.abrBandWidthUpFactor;if(!It){var jt=this.bitrateTestDelay;if(jt){var Nt=bt?Math.min(bt,Et.maxLoadingDelay):Et.maxLoadingDelay;Lt=Nt-jt,Tt.logger.trace("bitrate test took "+Math.round(1e3*jt)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*Lt)+" ms"),At=$t=1}}return kt=this.findBestLevel(Pt,mt,St,It+Lt,At,$t),Math.max(kt,0)},xt.findBestLevel=function(pt,dt,vt,St,Et,mt){for(var _t,bt=this.fragCurrent,Ot=this.partCurrent,Pt=this.lastLoadedFragLevel,Dt=this.hls.levels,It=Dt[Pt],kt=!!(It!=null&&(_t=It.details)!==null&&_t!==void 0&&_t.live),Lt=It==null?void 0:It.codecSet,At=Ot?Ot.duration:bt?bt.duration:0,$t=vt;$t>=dt;$t--){var jt=Dt[$t];if(!(!jt||Lt&&jt.codecSet!==Lt)){var Nt=jt.details,Ft=(Ot?Nt==null?void 0:Nt.partTarget:Nt==null?void 0:Nt.averagetargetduration)||At,Bt=void 0;$t<=Pt?Bt=Et*pt:Bt=mt*pt;var Ut=Dt[$t].maxBitrate,Ht=Ut*Ft/Bt;if(Tt.logger.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+$t+"/"+Math.round(Bt)+"/"+Ut+"/"+Ft+"/"+St+"/"+Ht),Bt>Ut&&(Ht===0||!(0,st.isFiniteNumber)(Ht)||kt&&!this.bitrateTestDelay||Ht<St))return $t}}return-1},ht(yt,[{key:"nextAutoLevel",get:function(){var pt=this._nextAutoLevel,dt=this.bwEstimator;if(pt!==-1&&!dt.canEstimate())return pt;var vt=this.getNextABRAutoLevel();return pt!==-1&&this.hls.levels[vt].loadError?pt:(pt!==-1&&(vt=Math.min(pt,vt)),vt)},set:function(pt){this._nextAutoLevel=pt}}]),yt}();const ft=ut},"./src/controller/audio-stream-controller.ts":(at,it,ot)=>{ot.r(it),ot.d(it,{default:()=>_t});var st=ot("./src/polyfills/number.ts"),lt=ot("./src/controller/base-stream-controller.ts"),gt=ot("./src/events.ts"),ct=ot("./src/utils/buffer-helper.ts"),wt=ot("./src/controller/fragment-tracker.ts"),Tt=ot("./src/types/level.ts"),Rt=ot("./src/types/loader.ts"),ht=ot("./src/loader/fragment.ts"),ut=ot("./src/demux/chunk-cache.ts"),ft=ot("./src/demux/transmuxer-interface.ts"),yt=ot("./src/types/transmuxer.ts"),xt=ot("./src/controller/fragment-finders.ts"),Ct=ot("./src/utils/discontinuities.ts"),pt=ot("./src/errors.ts");function dt(){return dt=Object.assign?Object.assign.bind():function(bt){for(var Ot=1;Ot<arguments.length;Ot++){var Pt=arguments[Ot];for(var Dt in Pt)Object.prototype.hasOwnProperty.call(Pt,Dt)&&(bt[Dt]=Pt[Dt])}return bt},dt.apply(this,arguments)}function vt(bt,Ot){bt.prototype=Object.create(Ot.prototype),bt.prototype.constructor=bt,St(bt,Ot)}function St(bt,Ot){return St=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Dt,It){return Dt.__proto__=It,Dt},St(bt,Ot)}var Et=100,mt=function(bt){vt(Ot,bt);function Ot(Dt,It){var kt;return kt=bt.call(this,Dt,It,"[audio-stream-controller]")||this,kt.videoBuffer=null,kt.videoTrackCC=-1,kt.waitingVideoCC=-1,kt.audioSwitch=!1,kt.trackId=-1,kt.waitingData=null,kt.mainDetails=null,kt.bufferFlushed=!1,kt.cachedTrackLoadedData=null,kt._registerListeners(),kt}var Pt=Ot.prototype;return Pt.onHandlerDestroying=function(){this._unregisterListeners(),this.mainDetails=null},Pt._registerListeners=function(){var It=this.hls;It.on(gt.Events.MEDIA_ATTACHED,this.onMediaAttached,this),It.on(gt.Events.MEDIA_DETACHING,this.onMediaDetaching,this),It.on(gt.Events.MANIFEST_LOADING,this.onManifestLoading,this),It.on(gt.Events.LEVEL_LOADED,this.onLevelLoaded,this),It.on(gt.Events.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),It.on(gt.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),It.on(gt.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),It.on(gt.Events.ERROR,this.onError,this),It.on(gt.Events.BUFFER_RESET,this.onBufferReset,this),It.on(gt.Events.BUFFER_CREATED,this.onBufferCreated,this),It.on(gt.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),It.on(gt.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),It.on(gt.Events.FRAG_BUFFERED,this.onFragBuffered,this)},Pt._unregisterListeners=function(){var It=this.hls;It.off(gt.Events.MEDIA_ATTACHED,this.onMediaAttached,this),It.off(gt.Events.MEDIA_DETACHING,this.onMediaDetaching,this),It.off(gt.Events.MANIFEST_LOADING,this.onManifestLoading,this),It.off(gt.Events.LEVEL_LOADED,this.onLevelLoaded,this),It.off(gt.Events.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),It.off(gt.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),It.off(gt.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),It.off(gt.Events.ERROR,this.onError,this),It.off(gt.Events.BUFFER_RESET,this.onBufferReset,this),It.off(gt.Events.BUFFER_CREATED,this.onBufferCreated,this),It.off(gt.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),It.off(gt.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),It.off(gt.Events.FRAG_BUFFERED,this.onFragBuffered,this)},Pt.onInitPtsFound=function(It,kt){var Lt=kt.frag,At=kt.id,$t=kt.initPTS;if(At==="main"){var jt=Lt.cc;this.initPTS[Lt.cc]=$t,this.log("InitPTS for cc: "+jt+" found from main: "+$t),this.videoTrackCC=jt,this.state===lt.State.WAITING_INIT_PTS&&this.tick()}},Pt.startLoad=function(It){if(!this.levels){this.startPosition=It,this.state=lt.State.STOPPED;return}var kt=this.lastCurrentTime;this.stopLoad(),this.setInterval(Et),this.fragLoadError=0,kt>0&&It===-1?(this.log("Override startPosition with lastCurrentTime @"+kt.toFixed(3)),It=kt,this.state=lt.State.IDLE):(this.loadedmetadata=!1,this.state=lt.State.WAITING_TRACK),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=It,this.tick()},Pt.doTick=function(){switch(this.state){case lt.State.IDLE:this.doTickIdle();break;case lt.State.WAITING_TRACK:{var It,kt=this.levels,Lt=this.trackId,At=kt==null||(It=kt[Lt])===null||It===void 0?void 0:It.details;if(At){if(this.waitForCdnTuneIn(At))break;this.state=lt.State.WAITING_INIT_PTS}break}case lt.State.FRAG_LOADING_WAITING_RETRY:{var $t,jt=performance.now(),Nt=this.retryDate;(!Nt||jt>=Nt||($t=this.media)!==null&&$t!==void 0&&$t.seeking)&&(this.log("RetryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded(this.trackId),this.state=lt.State.IDLE);break}case lt.State.WAITING_INIT_PTS:{var Ft=this.waitingData;if(Ft){var Bt=Ft.frag,Ut=Ft.part,Ht=Ft.cache,Kt=Ft.complete;if(this.initPTS[Bt.cc]!==void 0){this.waitingData=null,this.waitingVideoCC=-1,this.state=lt.State.FRAG_LOADING;var Gt=Ht.flush(),Wt={frag:Bt,part:Ut,payload:Gt,networkDetails:null};this._handleFragmentLoadProgress(Wt),Kt&&bt.prototype._handleFragmentLoadComplete.call(this,Wt)}else if(this.videoTrackCC!==this.waitingVideoCC)this.log("Waiting fragment cc ("+Bt.cc+") cancelled because video is at cc "+this.videoTrackCC),this.clearWaitingFragment();else{var Vt=this.getLoadPosition(),zt=ct.BufferHelper.bufferInfo(this.mediaBuffer,Vt,this.config.maxBufferHole),Yt=(0,xt.fragmentWithinToleranceTest)(zt.end,this.config.maxFragLookUpTolerance,Bt);Yt<0&&(this.log("Waiting fragment cc ("+Bt.cc+") @ "+Bt.start+" cancelled because another fragment at "+zt.end+" is needed"),this.clearWaitingFragment())}}else this.state=lt.State.IDLE}}this.onTickEnd()},Pt.clearWaitingFragment=function(){var It=this.waitingData;It&&(this.fragmentTracker.removeFragment(It.frag),this.waitingData=null,this.waitingVideoCC=-1,this.state=lt.State.IDLE)},Pt.resetLoadingState=function(){this.clearWaitingFragment(),bt.prototype.resetLoadingState.call(this)},Pt.onTickEnd=function(){var It=this.media;!It||!It.readyState||(this.lastCurrentTime=It.currentTime)},Pt.doTickIdle=function(){var It,kt,Lt=this.hls,At=this.levels,$t=this.media,jt=this.trackId,Nt=Lt.config;if(!(!At||!At[jt])&&!(!$t&&(this.startFragRequested||!Nt.startFragPrefetch))){var Ft=At[jt],Bt=Ft.details;if(!Bt||Bt.live&&this.levelLastLoaded!==jt||this.waitForCdnTuneIn(Bt)){this.state=lt.State.WAITING_TRACK;return}var Ut=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&Ut&&(this.bufferFlushed=!1,this.afterBufferFlushed(Ut,ht.ElementaryStreamTypes.AUDIO,Rt.PlaylistLevelType.AUDIO));var Ht=this.getFwdBufferInfo(Ut,Rt.PlaylistLevelType.AUDIO);if(Ht!==null){var Kt=this.getFwdBufferInfo(this.videoBuffer?this.videoBuffer:this.media,Rt.PlaylistLevelType.MAIN),Gt=Ht.len,Wt=this.getMaxBufferLength(Kt==null?void 0:Kt.len),Vt=this.audioSwitch;if(!(Gt>=Wt&&!Vt)){if(!Vt&&this._streamEnded(Ht,Bt)){Lt.trigger(gt.Events.BUFFER_EOS,{type:"audio"}),this.state=lt.State.ENDED;return}var zt=Bt.fragments,Yt=zt[0].start,Xt=Ht.end;if(Vt&&$t){var Qt=this.getLoadPosition();Xt=Qt,Bt.PTSKnown&&Qt<Yt&&(Ht.end>Yt||Ht.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),$t.currentTime=Yt+.05)}if(!(Kt&&Xt>Kt.end+Bt.targetduration)&&!((!Kt||!Kt.len)&&Ht.len)){var qt=this.getNextFragment(Xt,Bt);if(!qt){this.bufferFlushed=!0;return}((It=qt.decryptdata)===null||It===void 0?void 0:It.keyFormat)==="identity"&&!((kt=qt.decryptdata)!==null&&kt!==void 0&&kt.key)?this.loadKey(qt,Bt):this.loadFragment(qt,Bt,Xt)}}}}},Pt.getMaxBufferLength=function(It){var kt=bt.prototype.getMaxBufferLength.call(this);return It?Math.max(kt,It):kt},Pt.onMediaDetaching=function(){this.videoBuffer=null,bt.prototype.onMediaDetaching.call(this)},Pt.onAudioTracksUpdated=function(It,kt){var Lt=kt.audioTracks;this.resetTransmuxer(),this.levels=Lt.map(function(At){return new Tt.Level(At)})},Pt.onAudioTrackSwitching=function(It,kt){var Lt=!!kt.url;this.trackId=kt.id;var At=this.fragCurrent;At!=null&&At.loader&&At.loader.abort(),this.fragCurrent=null,this.clearWaitingFragment(),Lt?this.setInterval(Et):this.resetTransmuxer(),Lt?(this.audioSwitch=!0,this.state=lt.State.IDLE):this.state=lt.State.STOPPED,this.tick()},Pt.onManifestLoading=function(){this.mainDetails=null,this.fragmentTracker.removeAllFragments(),this.startPosition=this.lastCurrentTime=0,this.bufferFlushed=!1},Pt.onLevelLoaded=function(It,kt){this.mainDetails=kt.details,this.cachedTrackLoadedData!==null&&(this.hls.trigger(gt.Events.AUDIO_TRACK_LOADED,this.cachedTrackLoadedData),this.cachedTrackLoadedData=null)},Pt.onAudioTrackLoaded=function(It,kt){var Lt;if(this.mainDetails==null){this.cachedTrackLoadedData=kt;return}var At=this.levels,$t=kt.details,jt=kt.id;if(!At){this.warn("Audio tracks were reset while loading level "+jt);return}this.log("Track "+jt+" loaded ["+$t.startSN+","+$t.endSN+"],duration:"+$t.totalduration);var Nt=At[jt],Ft=0;if($t.live||(Lt=Nt.details)!==null&&Lt!==void 0&&Lt.live){var Bt=this.mainDetails;if($t.fragments[0]||($t.deltaUpdateFailed=!0),$t.deltaUpdateFailed||!Bt)return;!Nt.details&&$t.hasProgramDateTime&&Bt.hasProgramDateTime?((0,Ct.alignMediaPlaylistByPDT)($t,Bt),Ft=$t.fragments[0].start):Ft=this.alignPlaylists($t,Nt.details)}Nt.details=$t,this.levelLastLoaded=jt,!this.startFragRequested&&(this.mainDetails||!$t.live)&&this.setStartPosition(Nt.details,Ft),this.state===lt.State.WAITING_TRACK&&!this.waitForCdnTuneIn($t)&&(this.state=lt.State.IDLE),this.tick()},Pt._handleFragmentLoadProgress=function(It){var kt,Lt=It.frag,At=It.part,$t=It.payload,jt=this.config,Nt=this.trackId,Ft=this.levels;if(!Ft){this.warn("Audio tracks were reset while fragment load was in progress. Fragment "+Lt.sn+" of level "+Lt.level+" will not be buffered");return}var Bt=Ft[Nt];console.assert(Bt,"Audio track is defined on fragment load progress");var Ut=Bt.details;console.assert(Ut,"Audio track details are defined on fragment load progress");var Ht=jt.defaultAudioCodec||Bt.audioCodec||"mp4a.40.2",Kt=this.transmuxer;Kt||(Kt=this.transmuxer=new ft.default(this.hls,Rt.PlaylistLevelType.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));var Gt=this.initPTS[Lt.cc],Wt=(kt=Lt.initSegment)===null||kt===void 0?void 0:kt.data;if(Gt!==void 0){var Vt=!1,zt=At?At.index:-1,Yt=zt!==-1,Xt=new yt.ChunkMetadata(Lt.level,Lt.sn,Lt.stats.chunkCount,$t.byteLength,zt,Yt);Kt.push($t,Wt,Ht,"",Lt,At,Ut.totalduration,Vt,Xt,Gt)}else{this.log("Unknown video PTS for cc "+Lt.cc+", waiting for video PTS before demuxing audio frag "+Lt.sn+" of ["+Ut.startSN+" ,"+Ut.endSN+"],track "+Nt);var Qt=this.waitingData=this.waitingData||{frag:Lt,part:At,cache:new ut.default,complete:!1},qt=Qt.cache;qt.push(new Uint8Array($t)),this.waitingVideoCC=this.videoTrackCC,this.state=lt.State.WAITING_INIT_PTS}},Pt._handleFragmentLoadComplete=function(It){if(this.waitingData){this.waitingData.complete=!0;return}bt.prototype._handleFragmentLoadComplete.call(this,It)},Pt.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},Pt.onBufferCreated=function(It,kt){var Lt=kt.tracks.audio;Lt&&(this.mediaBuffer=Lt.buffer||null),kt.tracks.video&&(this.videoBuffer=kt.tracks.video.buffer||null)},Pt.onFragBuffered=function(It,kt){var Lt=kt.frag,At=kt.part;if(Lt.type!==Rt.PlaylistLevelType.AUDIO){if(!this.loadedmetadata&&Lt.type===Rt.PlaylistLevelType.MAIN){var $t;($t=this.videoBuffer||this.media)!==null&&$t!==void 0&&$t.buffered.length&&(this.loadedmetadata=!0)}return}if(this.fragContextChanged(Lt)){this.warn("Fragment "+Lt.sn+(At?" p: "+At.index:"")+" of level "+Lt.level+" finished buffering, but was aborted. state: "+this.state+", audioSwitch: "+this.audioSwitch);return}Lt.sn!=="initSegment"&&(this.fragPrevious=Lt,this.audioSwitch&&(this.audioSwitch=!1,this.hls.trigger(gt.Events.AUDIO_TRACK_SWITCHED,{id:this.trackId}))),this.fragBufferedComplete(Lt,At)},Pt.onError=function(It,kt){switch(kt.details){case pt.ErrorDetails.FRAG_LOAD_ERROR:case pt.ErrorDetails.FRAG_LOAD_TIMEOUT:case pt.ErrorDetails.KEY_LOAD_ERROR:case pt.ErrorDetails.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(Rt.PlaylistLevelType.AUDIO,kt);break;case pt.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case pt.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:this.state!==lt.State.ERROR&&this.state!==lt.State.STOPPED&&(this.state=kt.fatal?lt.State.ERROR:lt.State.IDLE,this.warn(kt.details+" while loading frag, switching to "+this.state+" state"));break;case pt.ErrorDetails.BUFFER_FULL_ERROR:if(kt.parent==="audio"&&(this.state===lt.State.PARSING||this.state===lt.State.PARSED)){var Lt=!0,At=this.getFwdBufferInfo(this.mediaBuffer,Rt.PlaylistLevelType.AUDIO);At&&At.len>.5&&(Lt=!this.reduceMaxBufferLength(At.len)),Lt&&(this.warn("Buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,bt.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio")),this.resetLoadingState()}break}},Pt.onBufferFlushed=function(It,kt){var Lt=kt.type;Lt===ht.ElementaryStreamTypes.AUDIO&&(this.bufferFlushed=!0)},Pt._handleTransmuxComplete=function(It){var kt,Lt="audio",At=this.hls,$t=It.remuxResult,jt=It.chunkMeta,Nt=this.getCurrentContext(jt);if(!Nt){this.warn("The loading context changed while buffering fragment "+jt.sn+" of level "+jt.level+". This chunk will not be buffered."),this.resetStartWhenNotLoaded(jt.level);return}var Ft=Nt.frag,Bt=Nt.part,Ut=Nt.level.details,Ht=$t.audio,Kt=$t.text,Gt=$t.id3,Wt=$t.initSegment;if(!(this.fragContextChanged(Ft)||!Ut)){if(this.state=lt.State.PARSING,this.audioSwitch&&Ht&&this.completeAudioSwitch(),Wt!=null&&Wt.tracks&&(this._bufferInitSegment(Wt.tracks,Ft,jt),At.trigger(gt.Events.FRAG_PARSING_INIT_SEGMENT,{frag:Ft,id:Lt,tracks:Wt.tracks})),Ht){var Vt=Ht.startPTS,zt=Ht.endPTS,Yt=Ht.startDTS,Xt=Ht.endDTS;Bt&&(Bt.elementaryStreams[ht.ElementaryStreamTypes.AUDIO]={startPTS:Vt,endPTS:zt,startDTS:Yt,endDTS:Xt}),Ft.setElementaryStreamInfo(ht.ElementaryStreamTypes.AUDIO,Vt,zt,Yt,Xt),this.bufferFragmentData(Ht,Ft,Bt,jt)}if(Gt!=null&&(kt=Gt.samples)!==null&&kt!==void 0&&kt.length){var Qt=dt({id:Lt,frag:Ft,details:Ut},Gt);At.trigger(gt.Events.FRAG_PARSING_METADATA,Qt)}if(Kt){var qt=dt({id:Lt,frag:Ft,details:Ut},Kt);At.trigger(gt.Events.FRAG_PARSING_USERDATA,qt)}}},Pt._bufferInitSegment=function(It,kt,Lt){if(this.state===lt.State.PARSING){It.video&&delete It.video;var At=It.audio;if(!!At){At.levelCodec=At.codec,At.id="audio",this.log("Init audio buffer, container:"+At.container+", codecs[parsed]=["+At.codec+"]"),this.hls.trigger(gt.Events.BUFFER_CODECS,It);var $t=At.initSegment;if($t!=null&&$t.byteLength){var jt={type:"audio",frag:kt,part:null,chunkMeta:Lt,parent:kt.type,data:$t};this.hls.trigger(gt.Events.BUFFER_APPENDING,jt)}this.tick()}}},Pt.loadFragment=function(It,kt,Lt){var At=this.fragmentTracker.getState(It);this.fragCurrent=It,(this.audioSwitch||At===wt.FragmentState.NOT_LOADED||At===wt.FragmentState.PARTIAL)&&(It.sn==="initSegment"?this._loadInitSegment(It):kt.live&&!(0,st.isFiniteNumber)(this.initPTS[It.cc])?(this.log("Waiting for video PTS in continuity counter "+It.cc+" of live stream before loading audio fragment "+It.sn+" of level "+this.trackId),this.state=lt.State.WAITING_INIT_PTS):(this.startFragRequested=!0,bt.prototype.loadFragment.call(this,It,kt,Lt)))},Pt.completeAudioSwitch=function(){var It=this.hls,kt=this.media,Lt=this.trackId;kt&&(this.log("Switching audio track : flushing all audio"),bt.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio")),this.audioSwitch=!1,It.trigger(gt.Events.AUDIO_TRACK_SWITCHED,{id:Lt})},Ot}(lt.default);const _t=mt},"./src/controller/audio-track-controller.ts":(at,it,ot)=>{ot.r(it),ot.d(it,{default:()=>ft});var st=ot("./src/events.ts"),lt=ot("./src/errors.ts"),gt=ot("./src/controller/base-playlist-controller.ts"),ct=ot("./src/types/loader.ts");function wt(yt,xt){for(var Ct=0;Ct<xt.length;Ct++){var pt=xt[Ct];pt.enumerable=pt.enumerable||!1,pt.configurable=!0,"value"in pt&&(pt.writable=!0),Object.defineProperty(yt,pt.key,pt)}}function Tt(yt,xt,Ct){return xt&&wt(yt.prototype,xt),Ct&&wt(yt,Ct),Object.defineProperty(yt,"prototype",{writable:!1}),yt}function Rt(yt,xt){yt.prototype=Object.create(xt.prototype),yt.prototype.constructor=yt,ht(yt,xt)}function ht(yt,xt){return ht=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(pt,dt){return pt.__proto__=dt,pt},ht(yt,xt)}var ut=function(yt){Rt(xt,yt);function xt(pt){var dt;return dt=yt.call(this,pt,"[audio-track-controller]")||this,dt.tracks=[],dt.groupId=null,dt.tracksInGroup=[],dt.trackId=-1,dt.trackName="",dt.selectDefaultTrack=!0,dt.registerListeners(),dt}var Ct=xt.prototype;return Ct.registerListeners=function(){var dt=this.hls;dt.on(st.Events.MANIFEST_LOADING,this.onManifestLoading,this),dt.on(st.Events.MANIFEST_PARSED,this.onManifestParsed,this),dt.on(st.Events.LEVEL_LOADING,this.onLevelLoading,this),dt.on(st.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),dt.on(st.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),dt.on(st.Events.ERROR,this.onError,this)},Ct.unregisterListeners=function(){var dt=this.hls;dt.off(st.Events.MANIFEST_LOADING,this.onManifestLoading,this),dt.off(st.Events.MANIFEST_PARSED,this.onManifestParsed,this),dt.off(st.Events.LEVEL_LOADING,this.onLevelLoading,this),dt.off(st.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),dt.off(st.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),dt.off(st.Events.ERROR,this.onError,this)},Ct.destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,yt.prototype.destroy.call(this)},Ct.onManifestLoading=function(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.trackName="",this.selectDefaultTrack=!0},Ct.onManifestParsed=function(dt,vt){this.tracks=vt.audioTracks||[]},Ct.onAudioTrackLoaded=function(dt,vt){var St=vt.id,Et=vt.details,mt=this.tracksInGroup[St];if(!mt){this.warn("Invalid audio track id "+St);return}var _t=mt.details;mt.details=vt.details,this.log("audioTrack "+St+" loaded ["+Et.startSN+"-"+Et.endSN+"]"),St===this.trackId&&(this.retryCount=0,this.playlistLoaded(St,vt,_t))},Ct.onLevelLoading=function(dt,vt){this.switchLevel(vt.level)},Ct.onLevelSwitching=function(dt,vt){this.switchLevel(vt.level)},Ct.switchLevel=function(dt){var vt=this.hls.levels[dt];if(!!(vt!=null&&vt.audioGroupIds)){var St=vt.audioGroupIds[vt.urlId];if(this.groupId!==St){this.groupId=St;var Et=this.tracks.filter(function(_t){return!St||_t.groupId===St});this.selectDefaultTrack&&!Et.some(function(_t){return _t.default})&&(this.selectDefaultTrack=!1),this.tracksInGroup=Et;var mt={audioTracks:Et};this.log("Updating audio tracks, "+Et.length+' track(s) found in "'+St+'" group-id'),this.hls.trigger(st.Events.AUDIO_TRACKS_UPDATED,mt),this.selectInitialTrack()}}},Ct.onError=function(dt,vt){yt.prototype.onError.call(this,dt,vt),!(vt.fatal||!vt.context)&&vt.context.type===ct.PlaylistContextType.AUDIO_TRACK&&vt.context.id===this.trackId&&vt.context.groupId===this.groupId&&this.retryLoadingOrFail(vt)},Ct.setAudioTrack=function(dt){var vt=this.tracksInGroup;if(dt<0||dt>=vt.length){this.warn("Invalid id passed to audio-track controller");return}this.clearTimer();var St=vt[this.trackId];this.log("Now switching to audio-track index "+dt);var Et=vt[dt],mt=Et.id,_t=Et.groupId,bt=_t===void 0?"":_t,Ot=Et.name,Pt=Et.type,Dt=Et.url;if(this.trackId=dt,this.trackName=Ot,this.selectDefaultTrack=!1,this.hls.trigger(st.Events.AUDIO_TRACK_SWITCHING,{id:mt,groupId:bt,name:Ot,type:Pt,url:Dt}),!(Et.details&&!Et.details.live)){var It=this.switchParams(Et.url,St==null?void 0:St.details);this.loadPlaylist(It)}},Ct.selectInitialTrack=function(){var dt=this.tracksInGroup;console.assert(dt.length,"Initial audio track should be selected when tracks are known");var vt=this.trackName,St=this.findTrackId(vt)||this.findTrackId();St!==-1?this.setAudioTrack(St):(this.warn("No track found for running audio group-ID: "+this.groupId),this.hls.trigger(st.Events.ERROR,{type:lt.ErrorTypes.MEDIA_ERROR,details:lt.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,fatal:!0}))},Ct.findTrackId=function(dt){for(var vt=this.tracksInGroup,St=0;St<vt.length;St++){var Et=vt[St];if((!this.selectDefaultTrack||Et.default)&&(!dt||dt===Et.name))return Et.id}return-1},Ct.loadPlaylist=function(dt){var vt=this.tracksInGroup[this.trackId];if(this.shouldLoadTrack(vt)){var St=vt.id,Et=vt.groupId,mt=vt.url;if(dt)try{mt=dt.addDirectives(mt)}catch(_t){this.warn("Could not construct new URL with HLS Delivery Directives: "+_t)}this.log("loading audio-track playlist for id: "+St),this.clearTimer(),this.hls.trigger(st.Events.AUDIO_TRACK_LOADING,{url:mt,id:St,groupId:Et,deliveryDirectives:dt||null})}},Tt(xt,[{key:"audioTracks",get:function(){return this.tracksInGroup}},{key:"audioTrack",get:function(){return this.trackId},set:function(dt){this.selectDefaultTrack=!1,this.setAudioTrack(dt)}}]),xt}(gt.default);const ft=ut},"./src/controller/base-playlist-controller.ts":(at,it,ot)=>{ot.r(it),ot.d(it,{default:()=>Tt});var st=ot("./src/polyfills/number.ts"),lt=ot("./src/types/level.ts"),gt=ot("./src/controller/level-helper.ts"),ct=ot("./src/utils/logger.ts"),wt=ot("./src/errors.ts"),Tt=function(){function Rt(ut,ft){this.hls=void 0,this.timer=-1,this.canLoad=!1,this.retryCount=0,this.log=void 0,this.warn=void 0,this.log=ct.logger.log.bind(ct.logger,ft+":"),this.warn=ct.logger.warn.bind(ct.logger,ft+":"),this.hls=ut}var ht=Rt.prototype;return ht.destroy=function(){this.clearTimer(),this.hls=this.log=this.warn=null},ht.onError=function(ft,yt){yt.fatal&&yt.type===wt.ErrorTypes.NETWORK_ERROR&&this.clearTimer()},ht.clearTimer=function(){clearTimeout(this.timer),this.timer=-1},ht.startLoad=function(){this.canLoad=!0,this.retryCount=0,this.loadPlaylist()},ht.stopLoad=function(){this.canLoad=!1,this.clearTimer()},ht.switchParams=function(ft,yt){var xt=yt==null?void 0:yt.renditionReports;if(xt)for(var Ct=0;Ct<xt.length;Ct++){var pt=xt[Ct],dt=""+pt.URI;if(dt===ft.slice(-dt.length)){var vt=parseInt(pt["LAST-MSN"]),St=parseInt(pt["LAST-PART"]);if(yt&&this.hls.config.lowLatencyMode){var Et=Math.min(yt.age-yt.partTarget,yt.targetduration);St!==void 0&&Et>yt.partTarget&&(St+=1)}if((0,st.isFiniteNumber)(vt))return new lt.HlsUrlParameters(vt,(0,st.isFiniteNumber)(St)?St:void 0,lt.HlsSkip.No)}}},ht.loadPlaylist=function(ft){},ht.shouldLoadTrack=function(ft){return this.canLoad&&ft&&!!ft.url&&(!ft.details||ft.details.live)},ht.playlistLoaded=function(ft,yt,xt){var Ct=this,pt=yt.details,dt=yt.stats,vt=dt.loading.end?Math.max(0,self.performance.now()-dt.loading.end):0;if(pt.advancedDateTime=Date.now()-vt,pt.live||xt!=null&&xt.live){if(pt.reloaded(xt),xt&&this.log("live playlist "+ft+" "+(pt.advanced?"REFRESHED "+pt.lastPartSn+"-"+pt.lastPartIndex:"MISSED")),xt&&pt.fragments.length>0&&(0,gt.mergeDetails)(xt,pt),!this.canLoad||!pt.live)return;var St,Et=void 0,mt=void 0;if(pt.canBlockReload&&pt.endSN&&pt.advanced){var _t=this.hls.config.lowLatencyMode,bt=pt.lastPartSn,Ot=pt.endSN,Pt=pt.lastPartIndex,Dt=Pt!==-1,It=bt===Ot,kt=_t?0:Pt;Dt?(Et=It?Ot+1:bt,mt=It?kt:Pt+1):Et=Ot+1;var Lt=pt.age,At=Lt+pt.ageHeader,$t=Math.min(At-pt.partTarget,pt.targetduration*1.5);if($t>0){if(xt&&$t>xt.tuneInGoal)this.warn("CDN Tune-in goal increased from: "+xt.tuneInGoal+" to: "+$t+" with playlist age: "+pt.age),$t=0;else{var jt=Math.floor($t/pt.targetduration);if(Et+=jt,mt!==void 0){var Nt=Math.round($t%pt.targetduration/pt.partTarget);mt+=Nt}this.log("CDN Tune-in age: "+pt.ageHeader+"s last advanced "+Lt.toFixed(2)+"s goal: "+$t+" skip sn "+jt+" to part "+mt)}pt.tuneInGoal=$t}if(St=this.getDeliveryDirectives(pt,yt.deliveryDirectives,Et,mt),_t||!It){this.loadPlaylist(St);return}}else St=this.getDeliveryDirectives(pt,yt.deliveryDirectives,Et,mt);var Ft=(0,gt.computeReloadInterval)(pt,dt);Et!==void 0&&pt.canBlockReload&&(Ft-=pt.partTarget||1),this.log("reload live playlist "+ft+" in "+Math.round(Ft)+" ms"),this.timer=self.setTimeout(function(){return Ct.loadPlaylist(St)},Ft)}else this.clearTimer()},ht.getDeliveryDirectives=function(ft,yt,xt,Ct){var pt=(0,lt.getSkipValue)(ft,xt);return yt!=null&&yt.skip&&ft.deltaUpdateFailed&&(xt=yt.msn,Ct=yt.part,pt=lt.HlsSkip.No),new lt.HlsUrlParameters(xt,Ct,pt)},ht.retryLoadingOrFail=function(ft){var yt=this,xt=this.hls.config,Ct=this.retryCount<xt.levelLoadingMaxRetry;if(Ct){var pt;if(this.retryCount++,ft.details.indexOf("LoadTimeOut")>-1&&(pt=ft.context)!==null&&pt!==void 0&&pt.deliveryDirectives)this.warn("retry playlist loading #"+this.retryCount+' after "'+ft.details+'"'),this.loadPlaylist();else{var dt=Math.min(Math.pow(2,this.retryCount)*xt.levelLoadingRetryDelay,xt.levelLoadingMaxRetryTimeout);this.timer=self.setTimeout(function(){return yt.loadPlaylist()},dt),this.warn("retry playlist loading #"+this.retryCount+" in "+dt+' ms after "'+ft.details+'"')}}else this.warn('cannot recover from error "'+ft.details+'"'),this.clearTimer(),ft.fatal=!0;return Ct},Rt}()},"./src/controller/base-stream-controller.ts":(at,it,ot)=>{ot.r(it),ot.d(it,{State:()=>Ot,default:()=>Pt});var st=ot("./src/polyfills/number.ts"),lt=ot("./src/task-loop.ts"),gt=ot("./src/controller/fragment-tracker.ts"),ct=ot("./src/utils/buffer-helper.ts"),wt=ot("./src/utils/logger.ts"),Tt=ot("./src/events.ts"),Rt=ot("./src/errors.ts"),ht=ot("./src/types/transmuxer.ts"),ut=ot("./src/utils/mp4-tools.ts"),ft=ot("./src/utils/discontinuities.ts"),yt=ot("./src/controller/fragment-finders.ts"),xt=ot("./src/controller/level-helper.ts"),Ct=ot("./src/loader/fragment-loader.ts"),pt=ot("./src/crypt/decrypter.ts"),dt=ot("./src/utils/time-ranges.ts"),vt=ot("./src/types/loader.ts");function St(Dt,It){for(var kt=0;kt<It.length;kt++){var Lt=It[kt];Lt.enumerable=Lt.enumerable||!1,Lt.configurable=!0,"value"in Lt&&(Lt.writable=!0),Object.defineProperty(Dt,Lt.key,Lt)}}function Et(Dt,It,kt){return It&&St(Dt.prototype,It),kt&&St(Dt,kt),Object.defineProperty(Dt,"prototype",{writable:!1}),Dt}function mt(Dt){if(Dt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Dt}function _t(Dt,It){Dt.prototype=Object.create(It.prototype),Dt.prototype.constructor=Dt,bt(Dt,It)}function bt(Dt,It){return bt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Lt,At){return Lt.__proto__=At,Lt},bt(Dt,It)}var Ot={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"},Pt=function(Dt){_t(It,Dt);function It(Lt,At,$t){var jt;return jt=Dt.call(this)||this,jt.hls=void 0,jt.fragPrevious=null,jt.fragCurrent=null,jt.fragmentTracker=void 0,jt.transmuxer=null,jt._state=Ot.STOPPED,jt.media=null,jt.mediaBuffer=null,jt.config=void 0,jt.bitrateTest=!1,jt.lastCurrentTime=0,jt.nextLoadPosition=0,jt.startPosition=0,jt.loadedmetadata=!1,jt.fragLoadError=0,jt.retryDate=0,jt.levels=null,jt.fragmentLoader=void 0,jt.levelLastLoaded=null,jt.startFragRequested=!1,jt.decrypter=void 0,jt.initPTS=[],jt.onvseeking=null,jt.onvended=null,jt.logPrefix="",jt.log=void 0,jt.warn=void 0,jt.logPrefix=$t,jt.log=wt.logger.log.bind(wt.logger,$t+":"),jt.warn=wt.logger.warn.bind(wt.logger,$t+":"),jt.hls=Lt,jt.fragmentLoader=new Ct.default(Lt.config),jt.fragmentTracker=At,jt.config=Lt.config,jt.decrypter=new pt.default(Lt,Lt.config),Lt.on(Tt.Events.KEY_LOADED,jt.onKeyLoaded,mt(jt)),Lt.on(Tt.Events.LEVEL_SWITCHING,jt.onLevelSwitching,mt(jt)),jt}var kt=It.prototype;return kt.doTick=function(){this.onTickEnd()},kt.onTickEnd=function(){},kt.startLoad=function(At){},kt.stopLoad=function(){this.fragmentLoader.abort();var At=this.fragCurrent;At&&this.fragmentTracker.removeFragment(At),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=Ot.STOPPED},kt._streamEnded=function(At,$t){var jt=this.fragCurrent,Nt=this.fragmentTracker;if(!$t.live&&jt&&this.media&&jt.sn>=$t.endSN&&!At.nextStart){var Ft=$t.partList;if(Ft!=null&&Ft.length){var Bt=Ft[Ft.length-1],Ut=ct.BufferHelper.isBuffered(this.media,Bt.start+Bt.duration/2);return Ut}var Ht=Nt.getState(jt);return Ht===gt.FragmentState.PARTIAL||Ht===gt.FragmentState.OK}return!1},kt.onMediaAttached=function(At,$t){var jt=this.media=this.mediaBuffer=$t.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),jt.addEventListener("seeking",this.onvseeking),jt.addEventListener("ended",this.onvended);var Nt=this.config;this.levels&&Nt.autoStartLoad&&this.state===Ot.STOPPED&&this.startLoad(Nt.startPosition)},kt.onMediaDetaching=function(){var At=this.media;At!=null&&At.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),At&&this.onvseeking&&this.onvended&&(At.removeEventListener("seeking",this.onvseeking),At.removeEventListener("ended",this.onvended),this.onvseeking=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()},kt.onMediaSeeking=function(){var At=this.config,$t=this.fragCurrent,jt=this.media,Nt=this.mediaBuffer,Ft=this.state,Bt=jt?jt.currentTime:0,Ut=ct.BufferHelper.bufferInfo(Nt||jt,Bt,At.maxBufferHole);if(this.log("media seeking to "+((0,st.isFiniteNumber)(Bt)?Bt.toFixed(3):Bt)+", state: "+Ft),Ft===Ot.ENDED)this.resetLoadingState();else if($t){var Ht=At.maxFragLookUpTolerance,Kt=$t.start-Ht,Gt=$t.start+$t.duration+Ht;if(!Ut.len||Gt<Ut.start||Kt>Ut.end){var Wt=Bt>Gt;(Bt<Kt||Wt)&&(Wt&&$t.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),$t.loader.abort()),this.resetLoadingState())}}jt&&(this.lastCurrentTime=Bt),!this.loadedmetadata&&!Ut.len&&(this.nextLoadPosition=this.startPosition=Bt),this.tickImmediate()},kt.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},kt.onKeyLoaded=function(At,$t){if(!(this.state!==Ot.KEY_LOADING||$t.frag!==this.fragCurrent||!this.levels)){this.state=Ot.IDLE;var jt=this.levels[$t.frag.level].details;jt&&this.loadFragment($t.frag,jt,$t.frag.start)}},kt.onLevelSwitching=function(At,$t){this.fragLoadError=0},kt.onHandlerDestroying=function(){this.stopLoad(),Dt.prototype.onHandlerDestroying.call(this)},kt.onHandlerDestroyed=function(){this.state=Ot.STOPPED,this.hls.off(Tt.Events.KEY_LOADED,this.onKeyLoaded,this),this.hls.off(Tt.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),this.fragmentLoader&&this.fragmentLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.fragmentLoader=this.fragmentTracker=null,Dt.prototype.onHandlerDestroyed.call(this)},kt.loadKey=function(At,$t){this.log("Loading key for "+At.sn+" of ["+$t.startSN+"-"+$t.endSN+"], "+(this.logPrefix==="[stream-controller]"?"level":"track")+" "+At.level),this.state=Ot.KEY_LOADING,this.fragCurrent=At,this.hls.trigger(Tt.Events.KEY_LOADING,{frag:At})},kt.loadFragment=function(At,$t,jt){this._loadFragForPlayback(At,$t,jt)},kt._loadFragForPlayback=function(At,$t,jt){var Nt=this,Ft=function(Ut){if(Nt.fragContextChanged(At)){Nt.warn("Fragment "+At.sn+(Ut.part?" p: "+Ut.part.index:"")+" of level "+At.level+" was dropped during download."),Nt.fragmentTracker.removeFragment(At);return}At.stats.chunkCount++,Nt._handleFragmentLoadProgress(Ut)};this._doFragLoad(At,$t,jt,Ft).then(function(Bt){if(!!Bt){Nt.fragLoadError=0;var Ut=Nt.state;if(Nt.fragContextChanged(At)){(Ut===Ot.FRAG_LOADING||!Nt.fragCurrent&&Ut===Ot.PARSING)&&(Nt.fragmentTracker.removeFragment(At),Nt.state=Ot.IDLE);return}"payload"in Bt&&(Nt.log("Loaded fragment "+At.sn+" of level "+At.level),Nt.hls.trigger(Tt.Events.FRAG_LOADED,Bt)),Nt._handleFragmentLoadComplete(Bt)}}).catch(function(Bt){Nt.state===Ot.STOPPED||Nt.state===Ot.ERROR||(Nt.warn(Bt),Nt.resetFragmentLoading(At))})},kt.flushMainBuffer=function(At,$t,jt){if(jt===void 0&&(jt=null),!!(At-$t)){var Nt={startOffset:At,endOffset:$t,type:jt};this.fragLoadError=0,this.hls.trigger(Tt.Events.BUFFER_FLUSHING,Nt)}},kt._loadInitSegment=function(At){var $t=this;this._doFragLoad(At).then(function(jt){if(!jt||$t.fragContextChanged(At)||!$t.levels)throw new Error("init load aborted");return jt}).then(function(jt){var Nt=$t.hls,Ft=jt.payload,Bt=At.decryptdata;if(Ft&&Ft.byteLength>0&&Bt&&Bt.key&&Bt.iv&&Bt.method==="AES-128"){var Ut=self.performance.now();return $t.decrypter.webCryptoDecrypt(new Uint8Array(Ft),Bt.key.buffer,Bt.iv.buffer).then(function(Ht){var Kt=self.performance.now();return Nt.trigger(Tt.Events.FRAG_DECRYPTED,{frag:At,payload:Ht,stats:{tstart:Ut,tdecrypt:Kt}}),jt.payload=Ht,jt})}return jt}).then(function(jt){var Nt=$t.fragCurrent,Ft=$t.hls,Bt=$t.levels;if(!Bt)throw new Error("init load aborted, missing levels");var Ut=Bt[At.level].details;console.assert(Ut,"Level details are defined when init segment is loaded");var Ht=At.stats;$t.state=Ot.IDLE,$t.fragLoadError=0,At.data=new Uint8Array(jt.payload),Ht.parsing.start=Ht.buffering.start=self.performance.now(),Ht.parsing.end=Ht.buffering.end=self.performance.now(),jt.frag===Nt&&Ft.trigger(Tt.Events.FRAG_BUFFERED,{stats:Ht,frag:Nt,part:null,id:At.type}),$t.tick()}).catch(function(jt){$t.state===Ot.STOPPED||$t.state===Ot.ERROR||($t.warn(jt),$t.resetFragmentLoading(At))})},kt.fragContextChanged=function(At){var $t=this.fragCurrent;return!At||!$t||At.level!==$t.level||At.sn!==$t.sn||At.urlId!==$t.urlId},kt.fragBufferedComplete=function(At,$t){var jt,Nt,Ft=this.mediaBuffer?this.mediaBuffer:this.media;this.log("Buffered "+At.type+" sn: "+At.sn+($t?" part: "+$t.index:"")+" of "+(this.logPrefix==="[stream-controller]"?"level":"track")+" "+At.level+" "+(Ft?dt.default.toString(ct.BufferHelper.getBuffered(Ft)):"(detached)")),this.state=Ot.IDLE,Ft&&(!this.loadedmetadata&&At.type==vt.PlaylistLevelType.MAIN&&Ft.buffered.length&&((jt=this.fragCurrent)===null||jt===void 0?void 0:jt.sn)===((Nt=this.fragPrevious)===null||Nt===void 0?void 0:Nt.sn)&&(this.loadedmetadata=!0,this.seekToStartPos()),this.tick())},kt.seekToStartPos=function(){},kt._handleFragmentLoadComplete=function(At){var $t=this.transmuxer;if(!!$t){var jt=At.frag,Nt=At.part,Ft=At.partsLoaded,Bt=!Ft||Ft.length===0||Ft.some(function(Ht){return!Ht}),Ut=new ht.ChunkMetadata(jt.level,jt.sn,jt.stats.chunkCount+1,0,Nt?Nt.index:-1,!Bt);$t.flush(Ut)}},kt._handleFragmentLoadProgress=function(At){},kt._doFragLoad=function(At,$t,jt,Nt){var Ft=this;if(jt===void 0&&(jt=null),!this.levels)throw new Error("frag load aborted, missing levels");if(jt=Math.max(At.start,jt||0),this.config.lowLatencyMode&&$t){var Bt=$t.partList;if(Bt&&Nt){jt>At.end&&$t.fragmentHint&&(At=$t.fragmentHint);var Ut=this.getNextPart(Bt,At,jt);if(Ut>-1){var Ht=Bt[Ut];return this.log("Loading part sn: "+At.sn+" p: "+Ht.index+" cc: "+At.cc+" of playlist ["+$t.startSN+"-"+$t.endSN+"] parts [0-"+Ut+"-"+(Bt.length-1)+"] "+(this.logPrefix==="[stream-controller]"?"level":"track")+": "+At.level+", target: "+parseFloat(jt.toFixed(3))),this.nextLoadPosition=Ht.start+Ht.duration,this.state=Ot.FRAG_LOADING,this.hls.trigger(Tt.Events.FRAG_LOADING,{frag:At,part:Bt[Ut],targetBufferTime:jt}),this.doFragPartsLoad(At,Bt,Ut,Nt).catch(function(Kt){return Ft.handleFragLoadError(Kt)})}else if(!At.url||this.loadedEndOfParts(Bt,jt))return Promise.resolve(null)}}return this.log("Loading fragment "+At.sn+" cc: "+At.cc+" "+($t?"of ["+$t.startSN+"-"+$t.endSN+"] ":"")+(this.logPrefix==="[stream-controller]"?"level":"track")+": "+At.level+", target: "+parseFloat(jt.toFixed(3))),(0,st.isFiniteNumber)(At.sn)&&!this.bitrateTest&&(this.nextLoadPosition=At.start+At.duration),this.state=Ot.FRAG_LOADING,this.hls.trigger(Tt.Events.FRAG_LOADING,{frag:At,targetBufferTime:jt}),this.fragmentLoader.load(At,Nt).catch(function(Kt){return Ft.handleFragLoadError(Kt)})},kt.doFragPartsLoad=function(At,$t,jt,Nt){var Ft=this;return new Promise(function(Bt,Ut){var Ht=[],Kt=function Gt(Wt){var Vt=$t[Wt];Ft.fragmentLoader.loadPart(At,Vt,Nt).then(function(zt){Ht[Vt.index]=zt;var Yt=zt.part;Ft.hls.trigger(Tt.Events.FRAG_LOADED,zt);var Xt=$t[Wt+1];if(Xt&&Xt.fragment===At)Gt(Wt+1);else return Bt({frag:At,part:Yt,partsLoaded:Ht})}).catch(Ut)};Kt(jt)})},kt.handleFragLoadError=function(At){var $t=At.data;return $t&&$t.details===Rt.ErrorDetails.INTERNAL_ABORTED?this.handleFragLoadAborted($t.frag,$t.part):this.hls.trigger(Tt.Events.ERROR,$t),null},kt._handleTransmuxerFlush=function(At){var $t=this.getCurrentContext(At);if(!$t||this.state!==Ot.PARSING){this.fragCurrent||(this.state=Ot.IDLE);return}var jt=$t.frag,Nt=$t.part,Ft=$t.level,Bt=self.performance.now();jt.stats.parsing.end=Bt,Nt&&(Nt.stats.parsing.end=Bt),this.updateLevelTiming(jt,Nt,Ft,At.partial)},kt.getCurrentContext=function(At){var $t=this.levels,jt=At.level,Nt=At.sn,Ft=At.part;if(!$t||!$t[jt])return this.warn("Levels object was unset while buffering fragment "+Nt+" of level "+jt+". The current chunk will not be buffered."),null;var Bt=$t[jt],Ut=Ft>-1?(0,xt.getPartWith)(Bt,Nt,Ft):null,Ht=Ut?Ut.fragment:(0,xt.getFragmentWithSN)(Bt,Nt,this.fragCurrent);return Ht?{frag:Ht,part:Ut,level:Bt}:null},kt.bufferFragmentData=function(At,$t,jt,Nt){if(!(!At||this.state!==Ot.PARSING)){var Ft=At.data1,Bt=At.data2,Ut=Ft;if(Ft&&Bt&&(Ut=(0,ut.appendUint8Array)(Ft,Bt)),!(!Ut||!Ut.length)){var Ht={type:At.type,frag:$t,part:jt,chunkMeta:Nt,parent:$t.type,data:Ut};this.hls.trigger(Tt.Events.BUFFER_APPENDING,Ht),At.dropped&&At.independent&&!jt&&this.flushBufferGap($t)}}},kt.flushBufferGap=function(At){var $t=this.media;if(!!$t){if(!ct.BufferHelper.isBuffered($t,$t.currentTime)){this.flushMainBuffer(0,At.start);return}var jt=$t.currentTime,Nt=ct.BufferHelper.bufferInfo($t,jt,0),Ft=At.duration,Bt=Math.min(this.config.maxFragLookUpTolerance*2,Ft*.25),Ut=Math.max(Math.min(At.start-Bt,Nt.end-Bt),jt+Bt);At.start-Ut>Bt&&this.flushMainBuffer(Ut,At.start)}},kt.getFwdBufferInfo=function(At,$t){var jt=this.config,Nt=this.getLoadPosition();if(!(0,st.isFiniteNumber)(Nt))return null;var Ft=ct.BufferHelper.bufferInfo(At,Nt,jt.maxBufferHole);if(Ft.len===0&&Ft.nextStart!==void 0){var Bt=this.fragmentTracker.getBufferedFrag(Nt,$t);if(Bt&&Ft.nextStart<Bt.end)return ct.BufferHelper.bufferInfo(At,Nt,Math.max(Ft.nextStart,jt.maxBufferHole))}return Ft},kt.getMaxBufferLength=function(At){var $t=this.config,jt;return At?jt=Math.max(8*$t.maxBufferSize/At,$t.maxBufferLength):jt=$t.maxBufferLength,Math.min(jt,$t.maxMaxBufferLength)},kt.reduceMaxBufferLength=function(At){var $t=this.config,jt=At||$t.maxBufferLength;return $t.maxMaxBufferLength>=jt?($t.maxMaxBufferLength/=2,this.warn("Reduce max buffer length to "+$t.maxMaxBufferLength+"s"),!0):!1},kt.getNextFragment=function(At,$t){var jt=$t.fragments,Nt=jt.length;if(!Nt)return null;var Ft=this.config,Bt=jt[0].start,Ut;if($t.live){var Ht=Ft.initialLiveManifestSize;if(Nt<Ht)return this.warn("Not enough fragments to start playback (have: "+Nt+", need: "+Ht+")"),null;!$t.PTSKnown&&!this.startFragRequested&&this.startPosition===-1&&(Ut=this.getInitialLiveFragment($t,jt),this.startPosition=Ut?this.hls.liveSyncPosition||Ut.start:At)}else At<=Bt&&(Ut=jt[0]);if(!Ut){var Kt=Ft.lowLatencyMode?$t.partEnd:$t.fragmentEnd;Ut=this.getFragmentAtPosition(At,Kt,$t)}return this.mapToInitFragWhenRequired(Ut)},kt.mapToInitFragWhenRequired=function(At){return At!=null&&At.initSegment&&!(At!=null&&At.initSegment.data)&&!this.bitrateTest?At.initSegment:At},kt.getNextPart=function(At,$t,jt){for(var Nt=-1,Ft=!1,Bt=!0,Ut=0,Ht=At.length;Ut<Ht;Ut++){var Kt=At[Ut];if(Bt=Bt&&!Kt.independent,Nt>-1&&jt<Kt.start)break;var Gt=Kt.loaded;!Gt&&(Ft||Kt.independent||Bt)&&Kt.fragment===$t&&(Nt=Ut),Ft=Gt}return Nt},kt.loadedEndOfParts=function(At,$t){var jt=At[At.length-1];return jt&&$t>jt.start&&jt.loaded},kt.getInitialLiveFragment=function(At,$t){var jt=this.fragPrevious,Nt=null;if(jt){if(At.hasProgramDateTime&&(this.log("Live playlist, switching playlist, load frag with same PDT: "+jt.programDateTime),Nt=(0,yt.findFragmentByPDT)($t,jt.endProgramDateTime,this.config.maxFragLookUpTolerance)),!Nt){var Ft=jt.sn+1;if(Ft>=At.startSN&&Ft<=At.endSN){var Bt=$t[Ft-At.startSN];jt.cc===Bt.cc&&(Nt=Bt,this.log("Live playlist, switching playlist, load frag with next SN: "+Nt.sn))}Nt||(Nt=(0,yt.findFragWithCC)($t,jt.cc),Nt&&this.log("Live playlist, switching playlist, load frag with same CC: "+Nt.sn))}}else{var Ut=this.hls.liveSyncPosition;Ut!==null&&(Nt=this.getFragmentAtPosition(Ut,this.bitrateTest?At.fragmentEnd:At.edge,At))}return Nt},kt.getFragmentAtPosition=function(At,$t,jt){var Nt=this.config,Ft=this.fragPrevious,Bt=jt.fragments,Ut=jt.endSN,Ht=jt.fragmentHint,Kt=Nt.maxFragLookUpTolerance,Gt=!!(Nt.lowLatencyMode&&jt.partList&&Ht);Gt&&Ht&&!this.bitrateTest&&(Bt=Bt.concat(Ht),Ut=Ht.sn);var Wt;if(At<$t){var Vt=At>$t-Kt?0:Kt;Wt=(0,yt.findFragmentByPTS)(Ft,Bt,At,Vt)}else Wt=Bt[Bt.length-1];if(Wt){var zt=Wt.sn-jt.startSN;if(this.fragmentTracker.getState(Wt)===gt.FragmentState.OK&&(Ft=Wt),Ft&&Wt.sn===Ft.sn&&!Gt){var Yt=Ft&&Wt.level===Ft.level;if(Yt){var Xt=Bt[zt+1];Wt.sn<Ut&&this.fragmentTracker.getState(Xt)!==gt.FragmentState.OK?(this.log("SN "+Wt.sn+" just loaded, load next one: "+Xt.sn),Wt=Xt):Wt=null}}}return Wt},kt.synchronizeToLiveEdge=function(At){var $t=this.config,jt=this.media;if(!!jt){var Nt=this.hls.liveSyncPosition,Ft=jt.currentTime,Bt=At.fragments[0].start,Ut=At.edge,Ht=Ft>=Bt-$t.maxFragLookUpTolerance&&Ft<=Ut;if(Nt!==null&&jt.duration>Nt&&(Ft<Nt||!Ht)){var Kt=$t.liveMaxLatencyDuration!==void 0?$t.liveMaxLatencyDuration:$t.liveMaxLatencyDurationCount*At.targetduration;(!Ht&&jt.readyState<4||Ft<Ut-Kt)&&(this.loadedmetadata||(this.nextLoadPosition=Nt),jt.readyState&&(this.warn("Playback: "+Ft.toFixed(3)+" is located too far from the end of live sliding playlist: "+Ut+", reset currentTime to : "+Nt.toFixed(3)),jt.currentTime=Nt))}}},kt.alignPlaylists=function(At,$t){var jt=this.levels,Nt=this.levelLastLoaded,Ft=this.fragPrevious,Bt=Nt!==null?jt[Nt]:null,Ut=At.fragments.length;if(!Ut)return this.warn("No fragments in live playlist"),0;var Ht=At.fragments[0].start,Kt=!$t,Gt=At.alignedSliding&&(0,st.isFiniteNumber)(Ht);if(Kt||!Gt&&!Ht){(0,ft.alignStream)(Ft,Bt,At);var Wt=At.fragments[0].start;return this.log("Live playlist sliding: "+Wt.toFixed(2)+" start-sn: "+($t?$t.startSN:"na")+"->"+At.startSN+" prev-sn: "+(Ft?Ft.sn:"na")+" fragments: "+Ut),Wt}return Ht},kt.waitForCdnTuneIn=function(At){var $t=3;return At.live&&At.canBlockReload&&At.partTarget&&At.tuneInGoal>Math.max(At.partHoldBack,At.partTarget*$t)},kt.setStartPosition=function(At,$t){var jt=this.startPosition;if(jt<$t&&(jt=-1),jt===-1||this.lastCurrentTime===-1){var Nt=At.startTimeOffset;(0,st.isFiniteNumber)(Nt)?(jt=$t+Nt,Nt<0&&(jt+=At.totalduration),jt=Math.min(Math.max($t,jt),$t+At.totalduration),this.log("Start time offset "+Nt+" found in playlist, adjust startPosition to "+jt),this.startPosition=jt):At.live?jt=this.hls.liveSyncPosition||$t:this.startPosition=jt=0,this.lastCurrentTime=jt}this.nextLoadPosition=jt},kt.getLoadPosition=function(){var At=this.media,$t=0;return this.loadedmetadata&&At?$t=At.currentTime:this.nextLoadPosition&&($t=this.nextLoadPosition),$t},kt.handleFragLoadAborted=function(At,$t){this.transmuxer&&At.sn!=="initSegment"&&At.stats.aborted&&(this.warn("Fragment "+At.sn+($t?" part"+$t.index:"")+" of level "+At.level+" was aborted"),this.resetFragmentLoading(At))},kt.resetFragmentLoading=function(At){(!this.fragCurrent||!this.fragContextChanged(At)&&this.state!==Ot.FRAG_LOADING_WAITING_RETRY)&&(this.state=Ot.IDLE)},kt.onFragmentOrKeyLoadError=function(At,$t){if(!$t.fatal){var jt=$t.frag;if(!(!jt||jt.type!==At)){var Nt=this.fragCurrent;console.assert(Nt&&jt.sn===Nt.sn&&jt.level===Nt.level&&jt.urlId===Nt.urlId,"Frag load error must match current frag to retry");var Ft=this.config;if(this.fragLoadError+1<=Ft.fragLoadingMaxRetry){this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition);var Bt=Math.min(Math.pow(2,this.fragLoadError)*Ft.fragLoadingRetryDelay,Ft.fragLoadingMaxRetryTimeout);this.warn("Fragment "+jt.sn+" of "+At+" "+jt.level+" failed to load, retrying in "+Bt+"ms"),this.retryDate=self.performance.now()+Bt,this.fragLoadError++,this.state=Ot.FRAG_LOADING_WAITING_RETRY}else $t.levelRetry?(At===vt.PlaylistLevelType.AUDIO&&(this.fragCurrent=null),this.fragLoadError=0,this.state=Ot.IDLE):(wt.logger.error($t.details+" reaches max retry, redispatch as fatal ..."),$t.fatal=!0,this.hls.stopLoad(),this.state=Ot.ERROR)}}},kt.afterBufferFlushed=function(At,$t,jt){if(!!At){var Nt=ct.BufferHelper.getBuffered(At);this.fragmentTracker.detectEvictedFragments($t,Nt,jt),this.state===Ot.ENDED&&this.resetLoadingState()}},kt.resetLoadingState=function(){this.fragCurrent=null,this.fragPrevious=null,this.state=Ot.IDLE},kt.resetStartWhenNotLoaded=function(At){if(!this.loadedmetadata){this.startFragRequested=!1;var $t=this.levels?this.levels[At].details:null;$t!=null&&$t.live?(this.startPosition=-1,this.setStartPosition($t,0),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}},kt.updateLevelTiming=function(At,$t,jt,Nt){var Ft=this,Bt=jt.details;console.assert(!!Bt,"level.details must be defined");var Ut=Object.keys(At.elementaryStreams).reduce(function(Ht,Kt){var Gt=At.elementaryStreams[Kt];if(Gt){var Wt=Gt.endPTS-Gt.startPTS;if(Wt<=0)return Ft.warn("Could not parse fragment "+At.sn+" "+Kt+" duration reliably ("+Wt+")"),Ht||!1;var Vt=Nt?0:(0,xt.updateFragPTSDTS)(Bt,At,Gt.startPTS,Gt.endPTS,Gt.startDTS,Gt.endDTS);return Ft.hls.trigger(Tt.Events.LEVEL_PTS_UPDATED,{details:Bt,level:jt,drift:Vt,type:Kt,frag:At,start:Gt.startPTS,end:Gt.endPTS}),!0}return Ht},!1);Ut||(this.warn("Found no media in fragment "+At.sn+" of level "+jt.id+" resetting transmuxer to fallback to playlist timing"),this.resetTransmuxer()),this.state=Ot.PARSED,this.hls.trigger(Tt.Events.FRAG_PARSED,{frag:At,part:$t})},kt.resetTransmuxer=function(){this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null)},Et(It,[{key:"state",get:function(){return this._state},set:function(At){var $t=this._state;$t!==At&&(this._state=At,this.log($t+"->"+At))}}]),It}(lt.default)},"./src/controller/buffer-controller.ts":(at,it,ot)=>{ot.r(it),ot.d(it,{default:()=>yt});var st=ot("./src/polyfills/number.ts"),lt=ot("./src/events.ts"),gt=ot("./src/utils/logger.ts"),ct=ot("./src/errors.ts"),wt=ot("./src/utils/buffer-helper.ts"),Tt=ot("./src/utils/mediasource-helper.ts"),Rt=ot("./src/loader/fragment.ts"),ht=ot("./src/controller/buffer-operation-queue.ts"),ut=(0,Tt.getMediaSource)(),ft=/([ha]vc.)(?:\.[^.,]+)+/,yt=function(){function xt(pt){var dt=this;this.details=null,this._objectUrl=null,this.operationQueue=void 0,this.listeners=void 0,this.hls=void 0,this.bufferCodecEventsExpected=0,this._bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.appendError=0,this.tracks={},this.pendingTracks={},this.sourceBuffer=void 0,this._onMediaSourceOpen=function(){var vt=dt.hls,St=dt.media,Et=dt.mediaSource;gt.logger.log("[buffer-controller]: Media source opened"),St&&(dt.updateMediaElementDuration(),vt.trigger(lt.Events.MEDIA_ATTACHED,{media:St})),Et&&Et.removeEventListener("sourceopen",dt._onMediaSourceOpen),dt.checkPendingTracks()},this._onMediaSourceClose=function(){gt.logger.log("[buffer-controller]: Media source closed")},this._onMediaSourceEnded=function(){gt.logger.log("[buffer-controller]: Media source ended")},this.hls=pt,this._initSourceBuffer(),this.registerListeners()}var Ct=xt.prototype;return Ct.hasSourceTypes=function(){return this.getSourceBufferTypes().length>0||Object.keys(this.pendingTracks).length>0},Ct.destroy=function(){this.unregisterListeners(),this.details=null},Ct.registerListeners=function(){var dt=this.hls;dt.on(lt.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),dt.on(lt.Events.MEDIA_DETACHING,this.onMediaDetaching,this),dt.on(lt.Events.MANIFEST_PARSED,this.onManifestParsed,this),dt.on(lt.Events.BUFFER_RESET,this.onBufferReset,this),dt.on(lt.Events.BUFFER_APPENDING,this.onBufferAppending,this),dt.on(lt.Events.BUFFER_CODECS,this.onBufferCodecs,this),dt.on(lt.Events.BUFFER_EOS,this.onBufferEos,this),dt.on(lt.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),dt.on(lt.Events.LEVEL_UPDATED,this.onLevelUpdated,this),dt.on(lt.Events.FRAG_PARSED,this.onFragParsed,this),dt.on(lt.Events.FRAG_CHANGED,this.onFragChanged,this)},Ct.unregisterListeners=function(){var dt=this.hls;dt.off(lt.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),dt.off(lt.Events.MEDIA_DETACHING,this.onMediaDetaching,this),dt.off(lt.Events.MANIFEST_PARSED,this.onManifestParsed,this),dt.off(lt.Events.BUFFER_RESET,this.onBufferReset,this),dt.off(lt.Events.BUFFER_APPENDING,this.onBufferAppending,this),dt.off(lt.Events.BUFFER_CODECS,this.onBufferCodecs,this),dt.off(lt.Events.BUFFER_EOS,this.onBufferEos,this),dt.off(lt.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),dt.off(lt.Events.LEVEL_UPDATED,this.onLevelUpdated,this),dt.off(lt.Events.FRAG_PARSED,this.onFragParsed,this),dt.off(lt.Events.FRAG_CHANGED,this.onFragChanged,this)},Ct._initSourceBuffer=function(){this.sourceBuffer={},this.operationQueue=new ht.default(this.sourceBuffer),this.listeners={audio:[],video:[],audiovideo:[]}},Ct.onManifestParsed=function(dt,vt){var St=2;(vt.audio&&!vt.video||!vt.altAudio)&&(St=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=St,this.details=null,gt.logger.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},Ct.onMediaAttaching=function(dt,vt){var St=this.media=vt.media;if(St&&ut){var Et=this.mediaSource=new ut;Et.addEventListener("sourceopen",this._onMediaSourceOpen),Et.addEventListener("sourceended",this._onMediaSourceEnded),Et.addEventListener("sourceclose",this._onMediaSourceClose),St.src=self.URL.createObjectURL(Et),this._objectUrl=St.src}},Ct.onMediaDetaching=function(){var dt=this.media,vt=this.mediaSource,St=this._objectUrl;if(vt){if(gt.logger.log("[buffer-controller]: media source detaching"),vt.readyState==="open")try{vt.endOfStream()}catch(Et){gt.logger.warn("[buffer-controller]: onMediaDetaching: "+Et.message+" while calling endOfStream")}this.onBufferReset(),vt.removeEventListener("sourceopen",this._onMediaSourceOpen),vt.removeEventListener("sourceended",this._onMediaSourceEnded),vt.removeEventListener("sourceclose",this._onMediaSourceClose),dt&&(St&&self.URL.revokeObjectURL(St),dt.src===St?(dt.removeAttribute("src"),dt.load()):gt.logger.warn("[buffer-controller]: media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={}}this.hls.trigger(lt.Events.MEDIA_DETACHED,void 0)},Ct.onBufferReset=function(){var dt=this;this.getSourceBufferTypes().forEach(function(vt){var St=dt.sourceBuffer[vt];try{St&&(dt.removeBufferListeners(vt),dt.mediaSource&&dt.mediaSource.removeSourceBuffer(St),dt.sourceBuffer[vt]=void 0)}catch(Et){gt.logger.warn("[buffer-controller]: Failed to reset the "+vt+" buffer",Et)}}),this._initSourceBuffer()},Ct.onBufferCodecs=function(dt,vt){var St=this,Et=this.getSourceBufferTypes().length;Object.keys(vt).forEach(function(mt){if(Et){var _t=St.tracks[mt];if(_t&&typeof _t.buffer.changeType=="function"){var bt=vt[mt],Ot=bt.id,Pt=bt.codec,Dt=bt.levelCodec,It=bt.container,kt=bt.metadata,Lt=(_t.levelCodec||_t.codec).replace(ft,"$1"),At=(Dt||Pt).replace(ft,"$1");if(Lt!==At){var $t=It+";codecs="+(Dt||Pt);St.appendChangeType(mt,$t),gt.logger.log("[buffer-controller]: switching codec "+Lt+" to "+At),St.tracks[mt]={buffer:_t.buffer,codec:Pt,container:It,levelCodec:Dt,metadata:kt,id:Ot}}}}else St.pendingTracks[mt]=vt[mt]}),!Et&&(this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&this.mediaSource.readyState==="open"&&this.checkPendingTracks())},Ct.appendChangeType=function(dt,vt){var St=this,Et=this.operationQueue,mt={execute:function(){var bt=St.sourceBuffer[dt];bt&&(gt.logger.log("[buffer-controller]: changing "+dt+" sourceBuffer type to "+vt),bt.changeType(vt)),Et.shiftAndExecuteNext(dt)},onStart:function(){},onComplete:function(){},onError:function(bt){gt.logger.warn("[buffer-controller]: Failed to change "+dt+" SourceBuffer type",bt)}};Et.append(mt,dt)},Ct.onBufferAppending=function(dt,vt){var St=this,Et=this.hls,mt=this.operationQueue,_t=this.tracks,bt=vt.data,Ot=vt.type,Pt=vt.frag,Dt=vt.part,It=vt.chunkMeta,kt=It.buffering[Ot],Lt=self.performance.now();kt.start=Lt;var At=Pt.stats.buffering,$t=Dt?Dt.stats.buffering:null;At.start===0&&(At.start=Lt),$t&&$t.start===0&&($t.start=Lt);var jt=_t.audio,Nt=Ot==="audio"&&It.id===1&&(jt==null?void 0:jt.container)==="audio/mpeg",Ft={execute:function(){if(kt.executeStart=self.performance.now(),Nt){var Ut=St.sourceBuffer[Ot];if(Ut){var Ht=Pt.start-Ut.timestampOffset;Math.abs(Ht)>=.1&&(gt.logger.log("[buffer-controller]: Updating audio SourceBuffer timestampOffset to "+Pt.start+" (delta: "+Ht+") sn: "+Pt.sn+")"),Ut.timestampOffset=Pt.start)}}St.appendExecutor(bt,Ot)},onStart:function(){},onComplete:function(){var Ut=self.performance.now();kt.executeEnd=kt.end=Ut,At.first===0&&(At.first=Ut),$t&&$t.first===0&&($t.first=Ut);var Ht=St.sourceBuffer,Kt={};for(var Gt in Ht)Kt[Gt]=wt.BufferHelper.getBuffered(Ht[Gt]);St.appendError=0,St.hls.trigger(lt.Events.BUFFER_APPENDED,{type:Ot,frag:Pt,part:Dt,chunkMeta:It,parent:Pt.type,timeRanges:Kt})},onError:function(Ut){gt.logger.error("[buffer-controller]: Error encountered while trying to append to the "+Ot+" SourceBuffer",Ut);var Ht={type:ct.ErrorTypes.MEDIA_ERROR,parent:Pt.type,details:ct.ErrorDetails.BUFFER_APPEND_ERROR,err:Ut,fatal:!1};Ut.code===DOMException.QUOTA_EXCEEDED_ERR?Ht.details=ct.ErrorDetails.BUFFER_FULL_ERROR:(St.appendError++,Ht.details=ct.ErrorDetails.BUFFER_APPEND_ERROR,St.appendError>Et.config.appendErrorMaxRetry&&(gt.logger.error("[buffer-controller]: Failed "+Et.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),Ht.fatal=!0,Et.stopLoad())),Et.trigger(lt.Events.ERROR,Ht)}};mt.append(Ft,Ot)},Ct.onBufferFlushing=function(dt,vt){var St=this,Et=this.operationQueue,mt=function(bt){return{execute:St.removeExecutor.bind(St,bt,vt.startOffset,vt.endOffset),onStart:function(){},onComplete:function(){St.hls.trigger(lt.Events.BUFFER_FLUSHED,{type:bt})},onError:function(Pt){gt.logger.warn("[buffer-controller]: Failed to remove from "+bt+" SourceBuffer",Pt)}}};vt.type?Et.append(mt(vt.type),vt.type):this.getSourceBufferTypes().forEach(function(_t){Et.append(mt(_t),_t)})},Ct.onFragParsed=function(dt,vt){var St=this,Et=vt.frag,mt=vt.part,_t=[],bt=mt?mt.elementaryStreams:Et.elementaryStreams;bt[Rt.ElementaryStreamTypes.AUDIOVIDEO]?_t.push("audiovideo"):(bt[Rt.ElementaryStreamTypes.AUDIO]&&_t.push("audio"),bt[Rt.ElementaryStreamTypes.VIDEO]&&_t.push("video"));var Ot=function(){var Dt=self.performance.now();Et.stats.buffering.end=Dt,mt&&(mt.stats.buffering.end=Dt);var It=mt?mt.stats:Et.stats;St.hls.trigger(lt.Events.FRAG_BUFFERED,{frag:Et,part:mt,stats:It,id:Et.type})};_t.length===0&&gt.logger.warn("Fragments must have at least one ElementaryStreamType set. type: "+Et.type+" level: "+Et.level+" sn: "+Et.sn),this.blockBuffers(Ot,_t)},Ct.onFragChanged=function(dt,vt){this.flushBackBuffer()},Ct.onBufferEos=function(dt,vt){var St=this,Et=this.getSourceBufferTypes().reduce(function(mt,_t){var bt=St.sourceBuffer[_t];return(!vt.type||vt.type===_t)&&bt&&!bt.ended&&(bt.ended=!0,gt.logger.log("[buffer-controller]: "+_t+" sourceBuffer now EOS")),mt&&!!(!bt||bt.ended)},!0);Et&&this.blockBuffers(function(){var mt=St.mediaSource;!mt||mt.readyState!=="open"||mt.endOfStream()})},Ct.onLevelUpdated=function(dt,vt){var St=vt.details;!St.fragments.length||(this.details=St,this.getSourceBufferTypes().length?this.blockBuffers(this.updateMediaElementDuration.bind(this)):this.updateMediaElementDuration())},Ct.flushBackBuffer=function(){var dt=this.hls,vt=this.details,St=this.media,Et=this.sourceBuffer;if(!(!St||vt===null)){var mt=this.getSourceBufferTypes();if(!!mt.length){var _t=vt.live&&dt.config.liveBackBufferLength!==null?dt.config.liveBackBufferLength:dt.config.backBufferLength;if(!(!(0,st.isFiniteNumber)(_t)||_t<0)){var bt=St.currentTime,Ot=vt.levelTargetDuration,Pt=Math.max(_t,Ot),Dt=Math.floor(bt/Ot)*Ot-Pt;mt.forEach(function(It){var kt=Et[It];if(kt){var Lt=wt.BufferHelper.getBuffered(kt);Lt.length>0&&Dt>Lt.start(0)&&(dt.trigger(lt.Events.BACK_BUFFER_REACHED,{bufferEnd:Dt}),vt.live&&dt.trigger(lt.Events.LIVE_BACK_BUFFER_REACHED,{bufferEnd:Dt}),dt.trigger(lt.Events.BUFFER_FLUSHING,{startOffset:0,endOffset:Dt,type:It}))}})}}}},Ct.updateMediaElementDuration=function(){if(!(!this.details||!this.media||!this.mediaSource||this.mediaSource.readyState!=="open")){var dt=this.details,vt=this.hls,St=this.media,Et=this.mediaSource,mt=dt.fragments[0].start+dt.totalduration,_t=St.duration,bt=(0,st.isFiniteNumber)(Et.duration)?Et.duration:0;dt.live&&vt.config.liveDurationInfinity?(gt.logger.log("[buffer-controller]: Media Source duration is set to Infinity"),Et.duration=1/0,this.updateSeekableRange(dt)):(mt>bt&&mt>_t||!(0,st.isFiniteNumber)(_t))&&(gt.logger.log("[buffer-controller]: Updating Media Source duration to "+mt.toFixed(3)),Et.duration=mt)}},Ct.updateSeekableRange=function(dt){var vt=this.mediaSource,St=dt.fragments,Et=St.length;if(Et&&dt.live&&vt!==null&&vt!==void 0&&vt.setLiveSeekableRange){var mt=Math.max(0,St[0].start),_t=Math.max(mt,mt+dt.totalduration);vt.setLiveSeekableRange(mt,_t)}},Ct.checkPendingTracks=function(){var dt=this.bufferCodecEventsExpected,vt=this.operationQueue,St=this.pendingTracks,Et=Object.keys(St).length;if(Et&&!dt||Et===2){this.createSourceBuffers(St),this.pendingTracks={};var mt=this.getSourceBufferTypes();if(mt.length===0){this.hls.trigger(lt.Events.ERROR,{type:ct.ErrorTypes.MEDIA_ERROR,details:ct.ErrorDetails.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,reason:"could not create source buffer for media codec(s)"});return}mt.forEach(function(_t){vt.executeNext(_t)})}},Ct.createSourceBuffers=function(dt){var vt=this.sourceBuffer,St=this.mediaSource;if(!St)throw Error("createSourceBuffers called when mediaSource was null");var Et=0;for(var mt in dt)if(!vt[mt]){var _t=dt[mt];if(!_t)throw Error("source buffer exists for track "+mt+", however track does not");var bt=_t.levelCodec||_t.codec,Ot=_t.container+";codecs="+bt;gt.logger.log("[buffer-controller]: creating sourceBuffer("+Ot+")");try{var Pt=vt[mt]=St.addSourceBuffer(Ot),Dt=mt;this.addBufferListener(Dt,"updatestart",this._onSBUpdateStart),this.addBufferListener(Dt,"updateend",this._onSBUpdateEnd),this.addBufferListener(Dt,"error",this._onSBUpdateError),this.tracks[mt]={buffer:Pt,codec:bt,container:_t.container,levelCodec:_t.levelCodec,metadata:_t.metadata,id:_t.id},Et++}catch(It){gt.logger.error("[buffer-controller]: error while trying to add sourceBuffer: "+It.message),this.hls.trigger(lt.Events.ERROR,{type:ct.ErrorTypes.MEDIA_ERROR,details:ct.ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:It,mimeType:Ot})}}Et&&this.hls.trigger(lt.Events.BUFFER_CREATED,{tracks:this.tracks})},Ct._onSBUpdateStart=function(dt){var vt=this.operationQueue,St=vt.current(dt);St.onStart()},Ct._onSBUpdateEnd=function(dt){var vt=this.operationQueue,St=vt.current(dt);St.onComplete(),vt.shiftAndExecuteNext(dt)},Ct._onSBUpdateError=function(dt,vt){gt.logger.error("[buffer-controller]: "+dt+" SourceBuffer error",vt),this.hls.trigger(lt.Events.ERROR,{type:ct.ErrorTypes.MEDIA_ERROR,details:ct.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1});var St=this.operationQueue.current(dt);St&&St.onError(vt)},Ct.removeExecutor=function(dt,vt,St){var Et=this.media,mt=this.mediaSource,_t=this.operationQueue,bt=this.sourceBuffer,Ot=bt[dt];if(!Et||!mt||!Ot){gt.logger.warn("[buffer-controller]: Attempting to remove from the "+dt+" SourceBuffer, but it does not exist"),_t.shiftAndExecuteNext(dt);return}var Pt=(0,st.isFiniteNumber)(Et.duration)?Et.duration:1/0,Dt=(0,st.isFiniteNumber)(mt.duration)?mt.duration:1/0,It=Math.max(0,vt),kt=Math.min(St,Pt,Dt);kt>It?(gt.logger.log("[buffer-controller]: Removing ["+It+","+kt+"] from the "+dt+" SourceBuffer"),console.assert(!Ot.updating,dt+" sourceBuffer must not be updating"),Ot.remove(It,kt)):_t.shiftAndExecuteNext(dt)},Ct.appendExecutor=function(dt,vt){var St=this.operationQueue,Et=this.sourceBuffer,mt=Et[vt];if(!mt){gt.logger.warn("[buffer-controller]: Attempting to append to the "+vt+" SourceBuffer, but it does not exist"),St.shiftAndExecuteNext(vt);return}mt.ended=!1,console.assert(!mt.updating,vt+" sourceBuffer must not be updating"),mt.appendBuffer(dt)},Ct.blockBuffers=function(dt,vt){var St=this;if(vt===void 0&&(vt=this.getSourceBufferTypes()),!vt.length){gt.logger.log("[buffer-controller]: Blocking operation requested, but no SourceBuffers exist"),Promise.resolve().then(dt);return}var Et=this.operationQueue,mt=vt.map(function(_t){return Et.appendBlocker(_t)});Promise.all(mt).then(function(){dt(),vt.forEach(function(_t){var bt=St.sourceBuffer[_t];(!bt||!bt.updating)&&Et.shiftAndExecuteNext(_t)})})},Ct.getSourceBufferTypes=function(){return Object.keys(this.sourceBuffer)},Ct.addBufferListener=function(dt,vt,St){var Et=this.sourceBuffer[dt];if(!!Et){var mt=St.bind(this,dt);this.listeners[dt].push({event:vt,listener:mt}),Et.addEventListener(vt,mt)}},Ct.removeBufferListeners=function(dt){var vt=this.sourceBuffer[dt];!vt||this.listeners[dt].forEach(function(St){vt.removeEventListener(St.event,St.listener)})},xt}()},"./src/controller/buffer-operation-queue.ts":(at,it,ot)=>{ot.r(it),ot.d(it,{default:()=>lt});var st=ot("./src/utils/logger.ts"),lt=function(){function gt(wt){this.buffers=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.buffers=wt}var ct=gt.prototype;return ct.append=function(Tt,Rt){var ht=this.queues[Rt];ht.push(Tt),ht.length===1&&this.buffers[Rt]&&this.executeNext(Rt)},ct.insertAbort=function(Tt,Rt){var ht=this.queues[Rt];ht.unshift(Tt),this.executeNext(Rt)},ct.appendBlocker=function(Tt){var Rt,ht=new Promise(function(ft){Rt=ft}),ut={execute:Rt,onStart:function(){},onComplete:function(){},onError:function(){}};return this.append(ut,Tt),ht},ct.executeNext=function(Tt){var Rt=this.buffers,ht=this.queues,ut=Rt[Tt],ft=ht[Tt];if(ft.length){var yt=ft[0];try{yt.execute()}catch(xt){st.logger.warn("[buffer-operation-queue]: Unhandled exception executing the current operation"),yt.onError(xt),(!ut||!ut.updating)&&(ft.shift(),this.executeNext(Tt))}}},ct.shiftAndExecuteNext=function(Tt){this.queues[Tt].shift(),this.executeNext(Tt)},ct.current=function(Tt){return this.queues[Tt][0]},gt}()},"./src/controller/cap-level-controller.ts":(at,it,ot)=>{ot.r(it),ot.d(it,{default:()=>wt});var st=ot("./src/events.ts");function lt(Tt,Rt){for(var ht=0;ht<Rt.length;ht++){var ut=Rt[ht];ut.enumerable=ut.enumerable||!1,ut.configurable=!0,"value"in ut&&(ut.writable=!0),Object.defineProperty(Tt,ut.key,ut)}}function gt(Tt,Rt,ht){return Rt&&lt(Tt.prototype,Rt),ht&&lt(Tt,ht),Object.defineProperty(Tt,"prototype",{writable:!1}),Tt}var ct=function(){function Tt(ht){this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.hls=void 0,this.streamController=void 0,this.clientRect=void 0,this.hls=ht,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}var Rt=Tt.prototype;return Rt.setStreamController=function(ut){this.streamController=ut},Rt.destroy=function(){this.unregisterListener(),this.hls.config.capLevelToPlayerSize&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null},Rt.registerListeners=function(){var ut=this.hls;ut.on(st.Events.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),ut.on(st.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),ut.on(st.Events.MANIFEST_PARSED,this.onManifestParsed,this),ut.on(st.Events.BUFFER_CODECS,this.onBufferCodecs,this),ut.on(st.Events.MEDIA_DETACHING,this.onMediaDetaching,this)},Rt.unregisterListener=function(){var ut=this.hls;ut.off(st.Events.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),ut.off(st.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),ut.off(st.Events.MANIFEST_PARSED,this.onManifestParsed,this),ut.off(st.Events.BUFFER_CODECS,this.onBufferCodecs,this),ut.off(st.Events.MEDIA_DETACHING,this.onMediaDetaching,this)},Rt.onFpsDropLevelCapping=function(ut,ft){Tt.isLevelAllowed(ft.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(ft.droppedLevel)},Rt.onMediaAttaching=function(ut,ft){this.media=ft.media instanceof HTMLVideoElement?ft.media:null},Rt.onManifestParsed=function(ut,ft){var yt=this.hls;this.restrictedLevels=[],this.firstLevel=ft.firstLevel,yt.config.capLevelToPlayerSize&&ft.video&&this.startCapping()},Rt.onBufferCodecs=function(ut,ft){var yt=this.hls;yt.config.capLevelToPlayerSize&&ft.video&&this.startCapping()},Rt.onMediaDetaching=function(){this.stopCapping()},Rt.detectPlayerSize=function(){if(this.media&&this.mediaHeight>0&&this.mediaWidth>0){var ut=this.hls.levels;if(ut.length){var ft=this.hls;ft.autoLevelCapping=this.getMaxLevel(ut.length-1),ft.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=ft.autoLevelCapping}}},Rt.getMaxLevel=function(ut){var ft=this,yt=this.hls.levels;if(!yt.length)return-1;var xt=yt.filter(function(Ct,pt){return Tt.isLevelAllowed(pt,ft.restrictedLevels)&&pt<=ut});return this.clientRect=null,Tt.getMaxLevelByMediaSize(xt,this.mediaWidth,this.mediaHeight)},Rt.startCapping=function(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},Rt.stopCapping=function(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)},Rt.getDimensions=function(){if(this.clientRect)return this.clientRect;var ut=this.media,ft={width:0,height:0};if(ut){var yt=ut.getBoundingClientRect();ft.width=yt.width,ft.height=yt.height,!ft.width&&!ft.height&&(ft.width=yt.right-yt.left||ut.width||0,ft.height=yt.bottom-yt.top||ut.height||0)}return this.clientRect=ft,ft},Tt.isLevelAllowed=function(ut,ft){return ft===void 0&&(ft=[]),ft.indexOf(ut)===-1},Tt.getMaxLevelByMediaSize=function(ut,ft,yt){if(!ut||!ut.length)return-1;for(var xt=function(St,Et){return Et?St.width!==Et.width||St.height!==Et.height:!0},Ct=ut.length-1,pt=0;pt<ut.length;pt+=1){var dt=ut[pt];if((dt.width>=ft||dt.height>=yt)&&xt(dt,ut[pt+1])){Ct=pt;break}}return Ct},gt(Tt,[{key:"mediaWidth",get:function(){return this.getDimensions().width*this.contentScaleFactor}},{key:"mediaHeight",get:function(){return this.getDimensions().height*this.contentScaleFactor}},{key:"contentScaleFactor",get:function(){var ut=1;if(!this.hls.config.ignoreDevicePixelRatio)try{ut=self.devicePixelRatio}catch{}return ut}}]),Tt}();const wt=ct},"./src/controller/cmcd-controller.ts":(at,it,ot)=>{ot.r(it),ot.d(it,{default:()=>yt});var st=ot("./src/events.ts"),lt=ot("./src/types/cmcd.ts"),gt=ot("./src/utils/buffer-helper.ts"),ct=ot("./src/utils/logger.ts");function wt(xt,Ct){for(var pt=0;pt<Ct.length;pt++){var dt=Ct[pt];dt.enumerable=dt.enumerable||!1,dt.configurable=!0,"value"in dt&&(dt.writable=!0),Object.defineProperty(xt,dt.key,dt)}}function Tt(xt,Ct,pt){return Ct&&wt(xt.prototype,Ct),pt&&wt(xt,pt),Object.defineProperty(xt,"prototype",{writable:!1}),xt}function Rt(xt,Ct){var pt=typeof Symbol<"u"&&xt[Symbol.iterator]||xt["@@iterator"];if(pt)return(pt=pt.call(xt)).next.bind(pt);if(Array.isArray(xt)||(pt=ht(xt))||Ct&&xt&&typeof xt.length=="number"){pt&&(xt=pt);var dt=0;return function(){return dt>=xt.length?{done:!0}:{done:!1,value:xt[dt++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ht(xt,Ct){if(!!xt){if(typeof xt=="string")return ut(xt,Ct);var pt=Object.prototype.toString.call(xt).slice(8,-1);if(pt==="Object"&&xt.constructor&&(pt=xt.constructor.name),pt==="Map"||pt==="Set")return Array.from(xt);if(pt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(pt))return ut(xt,Ct)}}function ut(xt,Ct){(Ct==null||Ct>xt.length)&&(Ct=xt.length);for(var pt=0,dt=new Array(Ct);pt<Ct;pt++)dt[pt]=xt[pt];return dt}function ft(){return ft=Object.assign?Object.assign.bind():function(xt){for(var Ct=1;Ct<arguments.length;Ct++){var pt=arguments[Ct];for(var dt in pt)Object.prototype.hasOwnProperty.call(pt,dt)&&(xt[dt]=pt[dt])}return xt},ft.apply(this,arguments)}var yt=function(){function xt(pt){var dt=this;this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=function(){dt.initialized&&(dt.starved=!0),dt.buffering=!0},this.onPlaying=function(){dt.initialized||(dt.initialized=!0),dt.buffering=!1},this.applyPlaylistData=function(Et){try{dt.apply(Et,{ot:lt.CMCDObjectType.MANIFEST,su:!dt.initialized})}catch(mt){ct.logger.warn("Could not generate manifest CMCD data.",mt)}},this.applyFragmentData=function(Et){try{var mt=Et.frag,_t=dt.hls.levels[mt.level],bt=dt.getObjectType(mt),Ot={d:mt.duration*1e3,ot:bt};(bt===lt.CMCDObjectType.VIDEO||bt===lt.CMCDObjectType.AUDIO||bt==lt.CMCDObjectType.MUXED)&&(Ot.br=_t.bitrate/1e3,Ot.tb=dt.getTopBandwidth(bt)/1e3,Ot.bl=dt.getBufferLength(bt)),dt.apply(Et,Ot)}catch(Pt){ct.logger.warn("Could not generate segment CMCD data.",Pt)}},this.hls=pt;var vt=this.config=pt.config,St=vt.cmcd;St!=null&&(vt.pLoader=this.createPlaylistLoader(),vt.fLoader=this.createFragmentLoader(),this.sid=St.sessionId||xt.uuid(),this.cid=St.contentId,this.useHeaders=St.useHeaders===!0,this.registerListeners())}var Ct=xt.prototype;return Ct.registerListeners=function(){var dt=this.hls;dt.on(st.Events.MEDIA_ATTACHED,this.onMediaAttached,this),dt.on(st.Events.MEDIA_DETACHED,this.onMediaDetached,this),dt.on(st.Events.BUFFER_CREATED,this.onBufferCreated,this)},Ct.unregisterListeners=function(){var dt=this.hls;dt.off(st.Events.MEDIA_ATTACHED,this.onMediaAttached,this),dt.off(st.Events.MEDIA_DETACHED,this.onMediaDetached,this),dt.off(st.Events.BUFFER_CREATED,this.onBufferCreated,this),this.onMediaDetached()},Ct.destroy=function(){this.unregisterListeners(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null},Ct.onMediaAttached=function(dt,vt){this.media=vt.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)},Ct.onMediaDetached=function(){!this.media||(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)},Ct.onBufferCreated=function(dt,vt){var St,Et;this.audioBuffer=(St=vt.tracks.audio)===null||St===void 0?void 0:St.buffer,this.videoBuffer=(Et=vt.tracks.video)===null||Et===void 0?void 0:Et.buffer},Ct.createData=function(){var dt;return{v:lt.CMCDVersion,sf:lt.CMCDStreamingFormat.HLS,sid:this.sid,cid:this.cid,pr:(dt=this.media)===null||dt===void 0?void 0:dt.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}},Ct.apply=function(dt,vt){vt===void 0&&(vt={}),ft(vt,this.createData());var St=vt.ot===lt.CMCDObjectType.INIT||vt.ot===lt.CMCDObjectType.VIDEO||vt.ot===lt.CMCDObjectType.MUXED;if(this.starved&&St&&(vt.bs=!0,vt.su=!0,this.starved=!1),vt.su==null&&(vt.su=this.buffering),this.useHeaders){var Et=xt.toHeaders(vt);if(!Object.keys(Et).length)return;dt.headers||(dt.headers={}),ft(dt.headers,Et)}else{var mt=xt.toQuery(vt);if(!mt)return;dt.url=xt.appendQueryToUri(dt.url,mt)}},Ct.getObjectType=function(dt){var vt=dt.type;if(vt==="subtitle")return lt.CMCDObjectType.TIMED_TEXT;if(dt.sn==="initSegment")return lt.CMCDObjectType.INIT;if(vt==="audio")return lt.CMCDObjectType.AUDIO;if(vt==="main")return this.hls.audioTracks.length?lt.CMCDObjectType.VIDEO:lt.CMCDObjectType.MUXED},Ct.getTopBandwidth=function(dt){var vt=0,St,Et=this.hls;if(dt===lt.CMCDObjectType.AUDIO)St=Et.audioTracks;else{var mt=Et.maxAutoLevel,_t=mt>-1?mt+1:Et.levels.length;St=Et.levels.slice(0,_t)}for(var bt=Rt(St),Ot;!(Ot=bt()).done;){var Pt=Ot.value;Pt.bitrate>vt&&(vt=Pt.bitrate)}return vt>0?vt:NaN},Ct.getBufferLength=function(dt){var vt=this.hls.media,St=dt===lt.CMCDObjectType.AUDIO?this.audioBuffer:this.videoBuffer;if(!St||!vt)return NaN;var Et=gt.BufferHelper.bufferInfo(St,vt.currentTime,this.config.maxBufferHole);return Et.len*1e3},Ct.createPlaylistLoader=function(){var dt=this.config.pLoader,vt=this.applyPlaylistData,St=dt||this.config.loader;return function(){function Et(_t){this.loader=void 0,this.loader=new St(_t)}var mt=Et.prototype;return mt.destroy=function(){this.loader.destroy()},mt.abort=function(){this.loader.abort()},mt.load=function(bt,Ot,Pt){vt(bt),this.loader.load(bt,Ot,Pt)},Tt(Et,[{key:"stats",get:function(){return this.loader.stats}},{key:"context",get:function(){return this.loader.context}}]),Et}()},Ct.createFragmentLoader=function(){var dt=this.config.fLoader,vt=this.applyFragmentData,St=dt||this.config.loader;return function(){function Et(_t){this.loader=void 0,this.loader=new St(_t)}var mt=Et.prototype;return mt.destroy=function(){this.loader.destroy()},mt.abort=function(){this.loader.abort()},mt.load=function(bt,Ot,Pt){vt(bt),this.loader.load(bt,Ot,Pt)},Tt(Et,[{key:"stats",get:function(){return this.loader.stats}},{key:"context",get:function(){return this.loader.context}}]),Et}()},xt.uuid=function(){var dt=URL.createObjectURL(new Blob),vt=dt.toString();return URL.revokeObjectURL(dt),vt.slice(vt.lastIndexOf("/")+1)},xt.serialize=function(dt){for(var vt=[],St=function(Nt){return!Number.isNaN(Nt)&&Nt!=null&&Nt!==""&&Nt!==!1},Et=function(Nt){return Math.round(Nt)},mt=function(Nt){return Et(Nt/100)*100},_t=function(Nt){return encodeURIComponent(Nt)},bt={br:Et,d:Et,bl:mt,dl:mt,mtp:mt,nor:_t,rtp:mt,tb:Et},Ot=Object.keys(dt||{}).sort(),Pt=Rt(Ot),Dt;!(Dt=Pt()).done;){var It=Dt.value,kt=dt[It];if(!!St(kt)&&!(It==="v"&&kt===1)&&!(It=="pr"&&kt===1)){var Lt=bt[It];Lt&&(kt=Lt(kt));var At=typeof kt,$t=void 0;It==="ot"||It==="sf"||It==="st"?$t=It+"="+kt:At==="boolean"?$t=It:At==="number"?$t=It+"="+kt:$t=It+"="+JSON.stringify(kt),vt.push($t)}}return vt.join(",")},xt.toHeaders=function(dt){for(var vt=Object.keys(dt),St={},Et=["Object","Request","Session","Status"],mt=[{},{},{},{}],_t={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3},bt=0,Ot=vt;bt<Ot.length;bt++){var Pt=Ot[bt],Dt=_t[Pt]!=null?_t[Pt]:1;mt[Dt][Pt]=dt[Pt]}for(var It=0;It<mt.length;It++){var kt=xt.serialize(mt[It]);kt&&(St["CMCD-"+Et[It]]=kt)}return St},xt.toQuery=function(dt){return"CMCD="+encodeURIComponent(xt.serialize(dt))},xt.appendQueryToUri=function(dt,vt){if(!vt)return dt;var St=dt.includes("?")?"&":"?";return""+dt+St+vt},xt}()},"./src/controller/eme-controller.ts":(at,it,ot)=>{ot.r(it),ot.d(it,{default:()=>yt});var st=ot("./src/events.ts"),lt=ot("./src/errors.ts"),gt=ot("./src/utils/logger.ts"),ct=ot("./src/utils/mediakeys-helper.ts");function wt(xt,Ct){for(var pt=0;pt<Ct.length;pt++){var dt=Ct[pt];dt.enumerable=dt.enumerable||!1,dt.configurable=!0,"value"in dt&&(dt.writable=!0),Object.defineProperty(xt,dt.key,dt)}}function Tt(xt,Ct,pt){return Ct&&wt(xt.prototype,Ct),pt&&wt(xt,pt),Object.defineProperty(xt,"prototype",{writable:!1}),xt}var Rt=3,ht=function(Ct,pt,dt){var vt={audioCapabilities:[],videoCapabilities:[]};return Ct.forEach(function(St){vt.audioCapabilities.push({contentType:'audio/mp4; codecs="'+St+'"',robustness:dt.audioRobustness||""})}),pt.forEach(function(St){vt.videoCapabilities.push({contentType:'video/mp4; codecs="'+St+'"',robustness:dt.videoRobustness||""})}),[vt]},ut=function(Ct,pt,dt,vt){switch(Ct){case ct.KeySystems.WIDEVINE:return ht(pt,dt,vt);default:throw new Error("Unknown key-system: "+Ct)}},ft=function(){function xt(pt){this.hls=void 0,this._widevineLicenseUrl=void 0,this._licenseXhrSetup=void 0,this._licenseResponseCallback=void 0,this._emeEnabled=void 0,this._requestMediaKeySystemAccess=void 0,this._drmSystemOptions=void 0,this._config=void 0,this._mediaKeysList=[],this._media=null,this._hasSetMediaKeys=!1,this._requestLicenseFailureCount=0,this.mediaKeysPromise=null,this._onMediaEncrypted=this.onMediaEncrypted.bind(this),this.hls=pt,this._config=pt.config,this._widevineLicenseUrl=this._config.widevineLicenseUrl,this._licenseXhrSetup=this._config.licenseXhrSetup,this._licenseResponseCallback=this._config.licenseResponseCallback,this._emeEnabled=this._config.emeEnabled,this._requestMediaKeySystemAccess=this._config.requestMediaKeySystemAccessFunc,this._drmSystemOptions=this._config.drmSystemOptions,this._registerListeners()}var Ct=xt.prototype;return Ct.destroy=function(){this._unregisterListeners(),this.hls=this._onMediaEncrypted=null,this._requestMediaKeySystemAccess=null},Ct._registerListeners=function(){this.hls.on(st.Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(st.Events.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(st.Events.MANIFEST_PARSED,this.onManifestParsed,this)},Ct._unregisterListeners=function(){this.hls.off(st.Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(st.Events.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(st.Events.MANIFEST_PARSED,this.onManifestParsed,this)},Ct.getLicenseServerUrl=function(dt){switch(dt){case ct.KeySystems.WIDEVINE:if(!this._widevineLicenseUrl)break;return this._widevineLicenseUrl}throw new Error('no license server URL configured for key-system "'+dt+'"')},Ct._attemptKeySystemAccess=function(dt,vt,St){var Et=this,mt=ut(dt,vt,St,this._drmSystemOptions);gt.logger.log("Requesting encrypted media key-system access");var _t=this.requestMediaKeySystemAccess(dt,mt);this.mediaKeysPromise=_t.then(function(bt){return Et._onMediaKeySystemAccessObtained(dt,bt)}),_t.catch(function(bt){gt.logger.error('Failed to obtain key-system "'+dt+'" access:',bt)})},Ct._onMediaKeySystemAccessObtained=function(dt,vt){var St=this;gt.logger.log('Access for key-system "'+dt+'" obtained');var Et={mediaKeysSessionInitialized:!1,mediaKeySystemAccess:vt,mediaKeySystemDomain:dt};this._mediaKeysList.push(Et);var mt=Promise.resolve().then(function(){return vt.createMediaKeys()}).then(function(_t){return Et.mediaKeys=_t,gt.logger.log('Media-keys created for key-system "'+dt+'"'),St._onMediaKeysCreated(),_t});return mt.catch(function(_t){gt.logger.error("Failed to create media-keys:",_t)}),mt},Ct._onMediaKeysCreated=function(){var dt=this;this._mediaKeysList.forEach(function(vt){vt.mediaKeysSession||(vt.mediaKeysSession=vt.mediaKeys.createSession(),dt._onNewMediaKeySession(vt.mediaKeysSession))})},Ct._onNewMediaKeySession=function(dt){var vt=this;gt.logger.log("New key-system session "+dt.sessionId),dt.addEventListener("message",function(St){vt._onKeySessionMessage(dt,St.message)},!1)},Ct._onKeySessionMessage=function(dt,vt){gt.logger.log("Got EME message event, creating license request"),this._requestLicense(vt,function(St){gt.logger.log("Received license data (length: "+(St&&St.byteLength)+"), updating key-session"),dt.update(St).catch(function(Et){gt.logger.warn("Updating key-session failed: "+Et)})})},Ct.onMediaEncrypted=function(dt){var vt=this;if(gt.logger.log('Media is encrypted using "'+dt.initDataType+'" init data type'),!this.mediaKeysPromise){gt.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been requested"),this.hls.trigger(st.Events.ERROR,{type:lt.ErrorTypes.KEY_SYSTEM_ERROR,details:lt.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});return}var St=function(mt){!vt._media||(vt._attemptSetMediaKeys(mt),vt._generateRequestWithPreferredKeySession(dt.initDataType,dt.initData))};this.mediaKeysPromise.then(St).catch(St)},Ct._attemptSetMediaKeys=function(dt){if(!this._media)throw new Error("Attempted to set mediaKeys without first attaching a media element");if(!this._hasSetMediaKeys){var vt=this._mediaKeysList[0];if(!vt||!vt.mediaKeys){gt.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been obtained yet"),this.hls.trigger(st.Events.ERROR,{type:lt.ErrorTypes.KEY_SYSTEM_ERROR,details:lt.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});return}gt.logger.log("Setting keys for encrypted media"),this._media.setMediaKeys(vt.mediaKeys),this._hasSetMediaKeys=!0}},Ct._generateRequestWithPreferredKeySession=function(dt,vt){var St=this,Et=this._mediaKeysList[0];if(!Et){gt.logger.error("Fatal: Media is encrypted but not any key-system access has been obtained yet"),this.hls.trigger(st.Events.ERROR,{type:lt.ErrorTypes.KEY_SYSTEM_ERROR,details:lt.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});return}if(Et.mediaKeysSessionInitialized){gt.logger.warn("Key-Session already initialized but requested again");return}var mt=Et.mediaKeysSession;if(!mt){gt.logger.error("Fatal: Media is encrypted but no key-session existing"),this.hls.trigger(st.Events.ERROR,{type:lt.ErrorTypes.KEY_SYSTEM_ERROR,details:lt.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!0});return}if(!vt){gt.logger.warn("Fatal: initData required for generating a key session is null"),this.hls.trigger(st.Events.ERROR,{type:lt.ErrorTypes.KEY_SYSTEM_ERROR,details:lt.ErrorDetails.KEY_SYSTEM_NO_INIT_DATA,fatal:!0});return}gt.logger.log('Generating key-session request for "'+dt+'" init data type'),Et.mediaKeysSessionInitialized=!0,mt.generateRequest(dt,vt).then(function(){gt.logger.debug("Key-session generation succeeded")}).catch(function(_t){gt.logger.error("Error generating key-session request:",_t),St.hls.trigger(st.Events.ERROR,{type:lt.ErrorTypes.KEY_SYSTEM_ERROR,details:lt.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!1})})},Ct._createLicenseXhr=function(dt,vt,St){var Et=new XMLHttpRequest;Et.responseType="arraybuffer",Et.onreadystatechange=this._onLicenseRequestReadyStageChange.bind(this,Et,dt,vt,St);var mt=this._licenseXhrSetup;if(mt)try{mt.call(this.hls,Et,dt),mt=void 0}catch(_t){gt.logger.error(_t)}try{Et.readyState||Et.open("POST",dt,!0),mt&&mt.call(this.hls,Et,dt)}catch(_t){throw new Error("issue setting up KeySystem license XHR "+_t)}return Et},Ct._onLicenseRequestReadyStageChange=function(dt,vt,St,Et){switch(dt.readyState){case 4:if(dt.status===200){this._requestLicenseFailureCount=0,gt.logger.log("License request succeeded");var mt=dt.response,_t=this._licenseResponseCallback;if(_t)try{mt=_t.call(this.hls,dt,vt)}catch(Ot){gt.logger.error(Ot)}Et(mt)}else{if(gt.logger.error("License Request XHR failed ("+vt+"). Status: "+dt.status+" ("+dt.statusText+")"),this._requestLicenseFailureCount++,this._requestLicenseFailureCount>Rt){this.hls.trigger(st.Events.ERROR,{type:lt.ErrorTypes.KEY_SYSTEM_ERROR,details:lt.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0});return}var bt=Rt-this._requestLicenseFailureCount+1;gt.logger.warn("Retrying license request, "+bt+" attempts left"),this._requestLicense(St,Et)}break}},Ct._generateLicenseRequestChallenge=function(dt,vt){switch(dt.mediaKeySystemDomain){case ct.KeySystems.WIDEVINE:return vt}throw new Error("unsupported key-system: "+dt.mediaKeySystemDomain)},Ct._requestLicense=function(dt,vt){gt.logger.log("Requesting content license for key-system");var St=this._mediaKeysList[0];if(!St){gt.logger.error("Fatal error: Media is encrypted but no key-system access has been obtained yet"),this.hls.trigger(st.Events.ERROR,{type:lt.ErrorTypes.KEY_SYSTEM_ERROR,details:lt.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});return}try{var Et=this.getLicenseServerUrl(St.mediaKeySystemDomain),mt=this._createLicenseXhr(Et,dt,vt);gt.logger.log("Sending license request to URL: "+Et);var _t=this._generateLicenseRequestChallenge(St,dt);mt.send(_t)}catch(bt){gt.logger.error("Failure requesting DRM license: "+bt),this.hls.trigger(st.Events.ERROR,{type:lt.ErrorTypes.KEY_SYSTEM_ERROR,details:lt.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}},Ct.onMediaAttached=function(dt,vt){if(!!this._emeEnabled){var St=vt.media;this._media=St,St.addEventListener("encrypted",this._onMediaEncrypted)}},Ct.onMediaDetached=function(){var dt=this._media,vt=this._mediaKeysList;!dt||(dt.removeEventListener("encrypted",this._onMediaEncrypted),this._media=null,this._mediaKeysList=[],Promise.all(vt.map(function(St){if(St.mediaKeysSession)return St.mediaKeysSession.close().catch(function(){})})).then(function(){return dt.setMediaKeys(null)}).catch(function(){}))},Ct.onManifestParsed=function(dt,vt){if(!!this._emeEnabled){var St=vt.levels.map(function(mt){return mt.audioCodec}).filter(function(mt){return!!mt}),Et=vt.levels.map(function(mt){return mt.videoCodec}).filter(function(mt){return!!mt});this._attemptKeySystemAccess(ct.KeySystems.WIDEVINE,St,Et)}},Tt(xt,[{key:"requestMediaKeySystemAccess",get:function(){if(!this._requestMediaKeySystemAccess)throw new Error("No requestMediaKeySystemAccess function configured");return this._requestMediaKeySystemAccess}}]),xt}();const yt=ft},"./src/controller/fps-controller.ts":(at,it,ot)=>{ot.r(it),ot.d(it,{default:()=>ct});var st=ot("./src/events.ts"),lt=ot("./src/utils/logger.ts"),gt=function(){function wt(Rt){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=Rt,this.registerListeners()}var Tt=wt.prototype;return Tt.setStreamController=function(ht){this.streamController=ht},Tt.registerListeners=function(){this.hls.on(st.Events.MEDIA_ATTACHING,this.onMediaAttaching,this)},Tt.unregisterListeners=function(){this.hls.off(st.Events.MEDIA_ATTACHING,this.onMediaAttaching)},Tt.destroy=function(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null},Tt.onMediaAttaching=function(ht,ut){var ft=this.hls.config;if(ft.capLevelOnFPSDrop){var yt=ut.media instanceof self.HTMLVideoElement?ut.media:null;this.media=yt,yt&&typeof yt.getVideoPlaybackQuality=="function"&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),ft.fpsDroppedMonitoringPeriod)}},Tt.checkFPS=function(ht,ut,ft){var yt=performance.now();if(ut){if(this.lastTime){var xt=yt-this.lastTime,Ct=ft-this.lastDroppedFrames,pt=ut-this.lastDecodedFrames,dt=1e3*Ct/xt,vt=this.hls;if(vt.trigger(st.Events.FPS_DROP,{currentDropped:Ct,currentDecoded:pt,totalDroppedFrames:ft}),dt>0&&Ct>vt.config.fpsDroppedMonitoringThreshold*pt){var St=vt.currentLevel;lt.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+St),St>0&&(vt.autoLevelCapping===-1||vt.autoLevelCapping>=St)&&(St=St-1,vt.trigger(st.Events.FPS_DROP_LEVEL_CAPPING,{level:St,droppedLevel:vt.currentLevel}),vt.autoLevelCapping=St,this.streamController.nextLevelSwitch())}}this.lastTime=yt,this.lastDroppedFrames=ft,this.lastDecodedFrames=ut}},Tt.checkFPSInterval=function(){var ht=this.media;if(ht)if(this.isVideoPlaybackQualityAvailable){var ut=ht.getVideoPlaybackQuality();this.checkFPS(ht,ut.totalVideoFrames,ut.droppedVideoFrames)}else this.checkFPS(ht,ht.webkitDecodedFrameCount,ht.webkitDroppedFrameCount)},wt}();const ct=gt},"./src/controller/fragment-finders.ts":(at,it,ot)=>{ot.r(it),ot.d(it,{findFragWithCC:()=>Rt,findFragmentByPDT:()=>gt,findFragmentByPTS:()=>ct,fragmentWithinToleranceTest:()=>wt,pdtWithinToleranceTest:()=>Tt});var st=ot("./src/polyfills/number.ts"),lt=ot("./src/utils/binary-search.ts");function gt(ht,ut,ft){if(ut===null||!Array.isArray(ht)||!ht.length||!(0,st.isFiniteNumber)(ut))return null;var yt=ht[0].programDateTime;if(ut<(yt||0))return null;var xt=ht[ht.length-1].endProgramDateTime;if(ut>=(xt||0))return null;ft=ft||0;for(var Ct=0;Ct<ht.length;++Ct){var pt=ht[Ct];if(Tt(ut,ft,pt))return pt}return null}function ct(ht,ut,ft,yt){ft===void 0&&(ft=0),yt===void 0&&(yt=0);var xt=null;if(ht?xt=ut[ht.sn-ut[0].sn+1]||null:ft===0&&ut[0].start===0&&(xt=ut[0]),xt&&wt(ft,yt,xt)===0)return xt;var Ct=lt.default.search(ut,wt.bind(null,ft,yt));return Ct||xt}function wt(ht,ut,ft){ht===void 0&&(ht=0),ut===void 0&&(ut=0);var yt=Math.min(ut,ft.duration+(ft.deltaPTS?ft.deltaPTS:0));return ft.start+ft.duration-yt<=ht?1:ft.start-yt>ht&&ft.start?-1:0}function Tt(ht,ut,ft){var yt=Math.min(ut,ft.duration+(ft.deltaPTS?ft.deltaPTS:0))*1e3,xt=ft.endProgramDateTime||0;return xt-yt>ht}function Rt(ht,ut){return lt.default.search(ht,function(ft){return ft.cc<ut?1:ft.cc>ut?-1:0})}},"./src/controller/fragment-tracker.ts":(at,it,ot)=>{ot.r(it),ot.d(it,{FragmentState:()=>gt,FragmentTracker:()=>ct});var st=ot("./src/events.ts"),lt=ot("./src/types/loader.ts"),gt;(function(Rt){Rt.NOT_LOADED="NOT_LOADED",Rt.APPENDING="APPENDING",Rt.PARTIAL="PARTIAL",Rt.OK="OK"})(gt||(gt={}));var ct=function(){function Rt(ut){this.activeFragment=null,this.activeParts=null,this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hls=ut,this._registerListeners()}var ht=Rt.prototype;return ht._registerListeners=function(){var ft=this.hls;ft.on(st.Events.BUFFER_APPENDED,this.onBufferAppended,this),ft.on(st.Events.FRAG_BUFFERED,this.onFragBuffered,this),ft.on(st.Events.FRAG_LOADED,this.onFragLoaded,this)},ht._unregisterListeners=function(){var ft=this.hls;ft.off(st.Events.BUFFER_APPENDED,this.onBufferAppended,this),ft.off(st.Events.FRAG_BUFFERED,this.onFragBuffered,this),ft.off(st.Events.FRAG_LOADED,this.onFragLoaded,this)},ht.destroy=function(){this._unregisterListeners(),this.fragments=this.timeRanges=null},ht.getAppendedFrag=function(ft,yt){if(yt===lt.PlaylistLevelType.MAIN){var xt=this.activeFragment,Ct=this.activeParts;if(!xt)return null;if(Ct)for(var pt=Ct.length;pt--;){var dt=Ct[pt],vt=dt?dt.end:xt.appendedPTS;if(dt.start<=ft&&vt!==void 0&&ft<=vt)return pt>9&&(this.activeParts=Ct.slice(pt-9)),dt}else if(xt.start<=ft&&xt.appendedPTS!==void 0&&ft<=xt.appendedPTS)return xt}return this.getBufferedFrag(ft,yt)},ht.getBufferedFrag=function(ft,yt){for(var xt=this.fragments,Ct=Object.keys(xt),pt=Ct.length;pt--;){var dt=xt[Ct[pt]];if((dt==null?void 0:dt.body.type)===yt&&dt.buffered){var vt=dt.body;if(vt.start<=ft&&ft<=vt.end)return vt}}return null},ht.detectEvictedFragments=function(ft,yt,xt){var Ct=this;Object.keys(this.fragments).forEach(function(pt){var dt=Ct.fragments[pt];if(!!dt){if(!dt.buffered){dt.body.type===xt&&Ct.removeFragment(dt.body);return}var vt=dt.range[ft];!vt||vt.time.some(function(St){var Et=!Ct.isTimeBuffered(St.startPTS,St.endPTS,yt);return Et&&Ct.removeFragment(dt.body),Et})}})},ht.detectPartialFragments=function(ft){var yt=this,xt=this.timeRanges,Ct=ft.frag,pt=ft.part;if(!(!xt||Ct.sn==="initSegment")){var dt=Tt(Ct),vt=this.fragments[dt];!vt||(Object.keys(xt).forEach(function(St){var Et=Ct.elementaryStreams[St];if(!!Et){var mt=xt[St],_t=pt!==null||Et.partial===!0;vt.range[St]=yt.getBufferedTimes(Ct,pt,_t,mt)}}),vt.loaded=null,Object.keys(vt.range).length?vt.buffered=!0:this.removeFragment(vt.body))}},ht.fragBuffered=function(ft){var yt=Tt(ft),xt=this.fragments[yt];xt&&(xt.loaded=null,xt.buffered=!0)},ht.getBufferedTimes=function(ft,yt,xt,Ct){for(var pt={time:[],partial:xt},dt=yt?yt.start:ft.start,vt=yt?yt.end:ft.end,St=ft.minEndPTS||vt,Et=ft.maxStartPTS||dt,mt=0;mt<Ct.length;mt++){var _t=Ct.start(mt)-this.bufferPadding,bt=Ct.end(mt)+this.bufferPadding;if(Et>=_t&&St<=bt){pt.time.push({startPTS:Math.max(dt,Ct.start(mt)),endPTS:Math.min(vt,Ct.end(mt))});break}else if(dt<bt&&vt>_t)pt.partial=!0,pt.time.push({startPTS:Math.max(dt,Ct.start(mt)),endPTS:Math.min(vt,Ct.end(mt))});else if(vt<=_t)break}return pt},ht.getPartialFragment=function(ft){var yt=null,xt,Ct,pt,dt=0,vt=this.bufferPadding,St=this.fragments;return Object.keys(St).forEach(function(Et){var mt=St[Et];!mt||wt(mt)&&(Ct=mt.body.start-vt,pt=mt.body.end+vt,ft>=Ct&&ft<=pt&&(xt=Math.min(ft-Ct,pt-ft),dt<=xt&&(yt=mt.body,dt=xt)))}),yt},ht.getState=function(ft){var yt=Tt(ft),xt=this.fragments[yt];return xt?xt.buffered?wt(xt)?gt.PARTIAL:gt.OK:gt.APPENDING:gt.NOT_LOADED},ht.isTimeBuffered=function(ft,yt,xt){for(var Ct,pt,dt=0;dt<xt.length;dt++){if(Ct=xt.start(dt)-this.bufferPadding,pt=xt.end(dt)+this.bufferPadding,ft>=Ct&&yt<=pt)return!0;if(yt<=Ct)return!1}return!1},ht.onFragLoaded=function(ft,yt){var xt=yt.frag,Ct=yt.part;if(!(xt.sn==="initSegment"||xt.bitrateTest||Ct)){var pt=Tt(xt);this.fragments[pt]={body:xt,loaded:yt,buffered:!1,range:Object.create(null)}}},ht.onBufferAppended=function(ft,yt){var xt=this,Ct=yt.frag,pt=yt.part,dt=yt.timeRanges;if(Ct.type===lt.PlaylistLevelType.MAIN)if(this.activeFragment=Ct,pt){var vt=this.activeParts;vt||(this.activeParts=vt=[]),vt.push(pt)}else this.activeParts=null;this.timeRanges=dt,Object.keys(dt).forEach(function(St){var Et=dt[St];if(xt.detectEvictedFragments(St,Et),!pt)for(var mt=0;mt<Et.length;mt++)Ct.appendedPTS=Math.max(Et.end(mt),Ct.appendedPTS||0)})},ht.onFragBuffered=function(ft,yt){this.detectPartialFragments(yt)},ht.hasFragment=function(ft){var yt=Tt(ft);return!!this.fragments[yt]},ht.removeFragmentsInRange=function(ft,yt,xt){var Ct=this;Object.keys(this.fragments).forEach(function(pt){var dt=Ct.fragments[pt];if(!!dt&&dt.buffered){var vt=dt.body;vt.type===xt&&vt.start<yt&&vt.end>ft&&Ct.removeFragment(vt)}})},ht.removeFragment=function(ft){var yt=Tt(ft);ft.stats.loaded=0,ft.clearElementaryStreamInfo(),delete this.fragments[yt]},ht.removeAllFragments=function(){this.fragments=Object.create(null),this.activeFragment=null,this.activeParts=null},Rt}();function wt(Rt){var ht,ut;return Rt.buffered&&(((ht=Rt.range.video)===null||ht===void 0?void 0:ht.partial)||((ut=Rt.range.audio)===null||ut===void 0?void 0:ut.partial))}function Tt(Rt){return Rt.type+"_"+Rt.level+"_"+Rt.urlId+"_"+Rt.sn}},"./src/controller/gap-controller.ts":(at,it,ot)=>{ot.r(it),ot.d(it,{MAX_START_GAP_JUMP:()=>Tt,SKIP_BUFFER_HOLE_STEP_SECONDS:()=>Rt,SKIP_BUFFER_RANGE_START:()=>ht,STALL_MINIMUM_DURATION_MS:()=>wt,default:()=>ut});var st=ot("./src/utils/buffer-helper.ts"),lt=ot("./src/errors.ts"),gt=ot("./src/events.ts"),ct=ot("./src/utils/logger.ts"),wt=250,Tt=2,Rt=.1,ht=.05,ut=function(){function ft(xt,Ct,pt,dt){this.config=void 0,this.media=null,this.fragmentTracker=void 0,this.hls=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.config=xt,this.media=Ct,this.fragmentTracker=pt,this.hls=dt}var yt=ft.prototype;return yt.destroy=function(){this.media=null,this.hls=this.fragmentTracker=null},yt.poll=function(Ct,pt){var dt=this.config,vt=this.media,St=this.stalled;if(vt!==null){var Et=vt.currentTime,mt=vt.seeking,_t=this.seeking&&!mt,bt=!this.seeking&&mt;if(this.seeking=mt,Et!==Ct){if(this.moved=!0,St!==null){if(this.stallReported){var Ot=self.performance.now()-St;ct.logger.warn("playback not stuck anymore @"+Et+", after "+Math.round(Ot)+"ms"),this.stallReported=!1}this.stalled=null,this.nudgeRetry=0}return}if((bt||_t)&&(this.stalled=null),!(vt.paused&&!mt||vt.ended||vt.playbackRate===0||!st.BufferHelper.getBuffered(vt).length)){var Pt=st.BufferHelper.bufferInfo(vt,Et,0),Dt=Pt.len>0,It=Pt.nextStart||0;if(!(!Dt&&!It)){if(mt){var kt=Pt.len>Tt,Lt=!It||pt&&pt.start<=Et||It-Et>Tt&&!this.fragmentTracker.getPartialFragment(Et);if(kt||Lt)return;this.moved=!1}if(!this.moved&&this.stalled!==null){var At,$t=Math.max(It,Pt.start||0)-Et,jt=this.hls.levels?this.hls.levels[this.hls.currentLevel]:null,Nt=jt==null||(At=jt.details)===null||At===void 0?void 0:At.live,Ft=Nt?jt.details.targetduration*2:Tt;if($t>0&&$t<=Ft){this._trySkipBufferHole(null);return}}var Bt=self.performance.now();if(St===null){this.stalled=Bt;return}var Ut=Bt-St;if(!(!mt&&Ut>=wt&&(this._reportStall(Pt),!this.media))){var Ht=st.BufferHelper.bufferInfo(vt,Et,dt.maxBufferHole);this._tryFixBufferStall(Ht,Ut)}}}}},yt._tryFixBufferStall=function(Ct,pt){var dt=this.config,vt=this.fragmentTracker,St=this.media;if(St!==null){var Et=St.currentTime,mt=vt.getPartialFragment(Et);if(mt){var _t=this._trySkipBufferHole(mt);if(_t||!this.media)return}Ct.len>dt.maxBufferHole&&pt>dt.highBufferWatchdogPeriod*1e3&&(ct.logger.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())}},yt._reportStall=function(Ct){var pt=this.hls,dt=this.media,vt=this.stallReported;!vt&&dt&&(this.stallReported=!0,ct.logger.warn("Playback stalling at @"+dt.currentTime+" due to low buffer ("+JSON.stringify(Ct)+")"),pt.trigger(gt.Events.ERROR,{type:lt.ErrorTypes.MEDIA_ERROR,details:lt.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:Ct.len}))},yt._trySkipBufferHole=function(Ct){var pt=this.config,dt=this.hls,vt=this.media;if(vt===null)return 0;for(var St=vt.currentTime,Et=0,mt=st.BufferHelper.getBuffered(vt),_t=0;_t<mt.length;_t++){var bt=mt.start(_t);if(St+pt.maxBufferHole>=Et&&St<bt){var Ot=Math.max(bt+ht,vt.currentTime+Rt);return ct.logger.warn("skipping hole, adjusting currentTime from "+St+" to "+Ot),this.moved=!0,this.stalled=null,vt.currentTime=Ot,Ct&&dt.trigger(gt.Events.ERROR,{type:lt.ErrorTypes.MEDIA_ERROR,details:lt.ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+St+" to "+Ot,frag:Ct}),Ot}Et=mt.end(_t)}return 0},yt._tryNudgeBuffer=function(){var Ct=this.config,pt=this.hls,dt=this.media,vt=this.nudgeRetry;if(dt!==null){var St=dt.currentTime;if(this.nudgeRetry++,vt<Ct.nudgeMaxRetry){var Et=St+(vt+1)*Ct.nudgeOffset;ct.logger.warn("Nudging 'currentTime' from "+St+" to "+Et),dt.currentTime=Et,pt.trigger(gt.Events.ERROR,{type:lt.ErrorTypes.MEDIA_ERROR,details:lt.ErrorDetails.BUFFER_NUDGE_ON_STALL,fatal:!1})}else ct.logger.error("Playhead still not moving while enough data buffered @"+St+" after "+Ct.nudgeMaxRetry+" nudges"),pt.trigger(gt.Events.ERROR,{type:lt.ErrorTypes.MEDIA_ERROR,details:lt.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!0})}},ft}()},"./src/controller/id3-track-controller.ts":(at,it,ot)=>{ot.r(it),ot.d(it,{default:()=>Ct});var st=ot("./src/polyfills/number.ts"),lt=ot("./src/events.ts"),gt=ot("./src/utils/texttrack-utils.ts"),ct=ot("./src/demux/id3.ts"),wt=ot("./src/loader/date-range.ts"),Tt=ot("./src/types/demuxer.ts"),Rt=.25;function ht(){return self.WebKitDataCue||self.VTTCue||self.TextTrackCue}var ut=function(){var pt=ht();try{new pt(0,Number.POSITIVE_INFINITY,"")}catch{return Number.MAX_VALUE}return Number.POSITIVE_INFINITY}();function ft(pt,dt){return pt.getTime()/1e3-dt}function yt(pt){return Uint8Array.from(pt.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer}var xt=function(){function pt(vt){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=vt,this._registerListeners()}var dt=pt.prototype;return dt.destroy=function(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=null},dt._registerListeners=function(){var St=this.hls;St.on(lt.Events.MEDIA_ATTACHED,this.onMediaAttached,this),St.on(lt.Events.MEDIA_DETACHING,this.onMediaDetaching,this),St.on(lt.Events.MANIFEST_LOADING,this.onManifestLoading,this),St.on(lt.Events.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),St.on(lt.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),St.on(lt.Events.LEVEL_UPDATED,this.onLevelUpdated,this)},dt._unregisterListeners=function(){var St=this.hls;St.off(lt.Events.MEDIA_ATTACHED,this.onMediaAttached,this),St.off(lt.Events.MEDIA_DETACHING,this.onMediaDetaching,this),St.off(lt.Events.MANIFEST_LOADING,this.onManifestLoading,this),St.off(lt.Events.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),St.off(lt.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),St.off(lt.Events.LEVEL_UPDATED,this.onLevelUpdated,this)},dt.onMediaAttached=function(St,Et){this.media=Et.media},dt.onMediaDetaching=function(){!this.id3Track||((0,gt.clearCurrentCues)(this.id3Track),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={})},dt.onManifestLoading=function(){this.dateRangeCuesAppended={}},dt.createTrack=function(St){var Et=this.getID3Track(St.textTracks);return Et.mode="hidden",Et},dt.getID3Track=function(St){if(!!this.media){for(var Et=0;Et<St.length;Et++){var mt=St[Et];if(mt.kind==="metadata"&&mt.label==="id3")return(0,gt.sendAddTrackEvent)(mt,this.media),mt}return this.media.addTextTrack("metadata","id3")}},dt.onFragParsingMetadata=function(St,Et){if(!!this.media){var mt=this.hls.config,_t=mt.enableEmsgMetadataCues,bt=mt.enableID3MetadataCues;if(!(!_t&&!bt)){Et.frag;var Ot=Et.samples;Et.details,this.id3Track||(this.id3Track=this.createTrack(this.media));for(var Pt=ht(),Dt=0;Dt<Ot.length;Dt++){var It=Ot[Dt].type;if(!(It===Tt.MetadataSchema.emsg&&!_t||!bt)){var kt=ct.getID3Frames(Ot[Dt].data);if(kt){var Lt=Ot[Dt].pts,At=Lt+Ot[Dt].duration;At>ut&&(At=ut);var $t=At-Lt;$t<=0&&(At=Lt+Rt);for(var jt=0;jt<kt.length;jt++){var Nt=kt[jt];if(!ct.isTimeStampFrame(Nt)){this.updateId3CueEnds(Lt);var Ft=new Pt(Lt,At,"");Ft.value=Nt,It&&(Ft.type=It),this.id3Track.addCue(Ft)}}}}}}}},dt.updateId3CueEnds=function(St){var Et,mt=(Et=this.id3Track)===null||Et===void 0?void 0:Et.cues;if(mt)for(var _t=mt.length;_t--;){var bt=mt[_t];bt.startTime<St&&bt.endTime===ut&&(bt.endTime=St)}},dt.onBufferFlushing=function(St,Et){var mt=Et.startOffset,_t=Et.endOffset,bt=Et.type,Ot=this.id3Track,Pt=this.hls;if(!!Pt){var Dt=Pt.config,It=Dt.enableEmsgMetadataCues,kt=Dt.enableID3MetadataCues;if(Ot&&(It||kt)){var Lt;bt==="audio"?Lt=function($t){return $t.type===Tt.MetadataSchema.audioId3&&kt}:bt==="video"?Lt=function($t){return $t.type===Tt.MetadataSchema.emsg&&It}:Lt=function($t){return $t.type===Tt.MetadataSchema.audioId3&&kt||$t.type===Tt.MetadataSchema.emsg&&It},(0,gt.removeCuesInRange)(Ot,mt,_t,Lt)}}},dt.onLevelUpdated=function(St,Et){var mt=this,_t=Et.details;if(!(!this.media||!_t.hasProgramDateTime||!this.hls.config.enableDateRangeMetadataCues)){var bt=this.dateRangeCuesAppended,Ot=this.id3Track,Pt=_t.dateRanges,Dt=Object.keys(Pt);if(Ot)for(var It=Object.keys(bt).filter(function(Bt){return!Dt.includes(Bt)}),kt=function(Ut){var Ht=It[Ut];Object.keys(bt[Ht].cues).forEach(function(Kt){Ot.removeCue(bt[Ht].cues[Kt])}),delete bt[Ht]},Lt=It.length;Lt--;)kt(Lt);var At=_t.fragments[_t.fragments.length-1];if(!(Dt.length===0||!(0,st.isFiniteNumber)(At==null?void 0:At.programDateTime))){this.id3Track||(this.id3Track=this.createTrack(this.media));for(var $t=At.programDateTime/1e3-At.start,jt=ht(),Nt=function(Ut){var Ht=Dt[Ut],Kt=Pt[Ht],Gt=bt[Ht],Wt=(Gt==null?void 0:Gt.cues)||{},Vt=(Gt==null?void 0:Gt.durationKnown)||!1,zt=ft(Kt.startDate,$t),Yt=ut,Xt=Kt.endDate;if(Xt)Yt=ft(Xt,$t),Vt=!0;else if(Kt.endOnNext&&!Vt){var Qt=Dt.reduce(function(nr,rr){var ir=Pt[rr];return ir.class===Kt.class&&ir.id!==rr&&ir.startDate>Kt.startDate&&nr.push(ir),nr},[]).sort(function(nr,rr){return nr.startDate.getTime()-rr.startDate.getTime()})[0];Qt&&(Yt=ft(Qt.startDate,$t),Vt=!0)}for(var qt=Object.keys(Kt.attr),er=0;er<qt.length;er++){var tr=qt[er];if(!(tr===wt.DateRangeAttribute.ID||tr===wt.DateRangeAttribute.CLASS||tr===wt.DateRangeAttribute.START_DATE||tr===wt.DateRangeAttribute.DURATION||tr===wt.DateRangeAttribute.END_DATE||tr===wt.DateRangeAttribute.END_ON_NEXT)){var Zt=Wt[tr];if(Zt)Vt&&!Gt.durationKnown&&(Zt.endTime=Yt);else{var Jt=Kt.attr[tr];Zt=new jt(zt,Yt,""),(tr===wt.DateRangeAttribute.SCTE35_OUT||tr===wt.DateRangeAttribute.SCTE35_IN)&&(Jt=yt(Jt)),Zt.value={key:tr,data:Jt},Zt.type=Tt.MetadataSchema.dateRange,mt.id3Track.addCue(Zt),Wt[tr]=Zt}}}bt[Ht]={cues:Wt,dateRange:Kt,durationKnown:Vt}},Ft=0;Ft<Dt.length;Ft++)Nt(Ft)}}},pt}();const Ct=xt},"./src/controller/latency-controller.ts":(at,it,ot)=>{ot.r(it),ot.d(it,{default:()=>Tt});var st=ot("./src/errors.ts"),lt=ot("./src/events.ts"),gt=ot("./src/utils/logger.ts");function ct(Rt,ht){for(var ut=0;ut<ht.length;ut++){var ft=ht[ut];ft.enumerable=ft.enumerable||!1,ft.configurable=!0,"value"in ft&&(ft.writable=!0),Object.defineProperty(Rt,ft.key,ft)}}function wt(Rt,ht,ut){return ht&&ct(Rt.prototype,ht),ut&&ct(Rt,ut),Object.defineProperty(Rt,"prototype",{writable:!1}),Rt}var Tt=function(){function Rt(ut){var ft=this;this.hls=void 0,this.config=void 0,this.media=null,this.levelDetails=null,this.currentTime=0,this.stallCount=0,this._latency=null,this.timeupdateHandler=function(){return ft.timeupdate()},this.hls=ut,this.config=ut.config,this.registerListeners()}var ht=Rt.prototype;return ht.destroy=function(){this.unregisterListeners(),this.onMediaDetaching(),this.levelDetails=null,this.hls=this.timeupdateHandler=null},ht.registerListeners=function(){this.hls.on(lt.Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(lt.Events.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.on(lt.Events.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(lt.Events.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.on(lt.Events.ERROR,this.onError,this)},ht.unregisterListeners=function(){this.hls.off(lt.Events.MEDIA_ATTACHED,this.onMediaAttached),this.hls.off(lt.Events.MEDIA_DETACHING,this.onMediaDetaching),this.hls.off(lt.Events.MANIFEST_LOADING,this.onManifestLoading),this.hls.off(lt.Events.LEVEL_UPDATED,this.onLevelUpdated),this.hls.off(lt.Events.ERROR,this.onError)},ht.onMediaAttached=function(ft,yt){this.media=yt.media,this.media.addEventListener("timeupdate",this.timeupdateHandler)},ht.onMediaDetaching=function(){this.media&&(this.media.removeEventListener("timeupdate",this.timeupdateHandler),this.media=null)},ht.onManifestLoading=function(){this.levelDetails=null,this._latency=null,this.stallCount=0},ht.onLevelUpdated=function(ft,yt){var xt=yt.details;this.levelDetails=xt,xt.advanced&&this.timeupdate(),!xt.live&&this.media&&this.media.removeEventListener("timeupdate",this.timeupdateHandler)},ht.onError=function(ft,yt){yt.details===st.ErrorDetails.BUFFER_STALLED_ERROR&&(this.stallCount++,gt.logger.warn("[playback-rate-controller]: Stall detected, adjusting target latency"))},ht.timeupdate=function(){var ft=this.media,yt=this.levelDetails;if(!(!ft||!yt)){this.currentTime=ft.currentTime;var xt=this.computeLatency();if(xt!==null){this._latency=xt;var Ct=this.config,pt=Ct.lowLatencyMode,dt=Ct.maxLiveSyncPlaybackRate;if(!(!pt||dt===1)){var vt=this.targetLatency;if(vt!==null){var St=xt-vt,Et=Math.min(this.maxLatency,vt+yt.targetduration),mt=St<Et;if(yt.live&&mt&&St>.05&&this.forwardBufferLength>1){var _t=Math.min(2,Math.max(1,dt)),bt=Math.round(2/(1+Math.exp(-.75*St-this.edgeStalled))*20)/20;ft.playbackRate=Math.min(_t,Math.max(1,bt))}else ft.playbackRate!==1&&ft.playbackRate!==0&&(ft.playbackRate=1)}}}}},ht.estimateLiveEdge=function(){var ft=this.levelDetails;return ft===null?null:ft.edge+ft.age},ht.computeLatency=function(){var ft=this.estimateLiveEdge();return ft===null?null:ft-this.currentTime},wt(Rt,[{key:"latency",get:function(){return this._latency||0}},{key:"maxLatency",get:function(){var ft=this.config,yt=this.levelDetails;return ft.liveMaxLatencyDuration!==void 0?ft.liveMaxLatencyDuration:yt?ft.liveMaxLatencyDurationCount*yt.targetduration:0}},{key:"targetLatency",get:function(){var ft=this.levelDetails;if(ft===null)return null;var yt=ft.holdBack,xt=ft.partHoldBack,Ct=ft.targetduration,pt=this.config,dt=pt.liveSyncDuration,vt=pt.liveSyncDurationCount,St=pt.lowLatencyMode,Et=this.hls.userConfig,mt=St&&xt||yt;(Et.liveSyncDuration||Et.liveSyncDurationCount||mt===0)&&(mt=dt!==void 0?dt:vt*Ct);var _t=Ct,bt=1;return mt+Math.min(this.stallCount*bt,_t)}},{key:"liveSyncPosition",get:function(){var ft=this.estimateLiveEdge(),yt=this.targetLatency,xt=this.levelDetails;if(ft===null||yt===null||xt===null)return null;var Ct=xt.edge,pt=ft-yt-this.edgeStalled,dt=Ct-xt.totalduration,vt=Ct-(this.config.lowLatencyMode&&xt.partTarget||xt.targetduration);return Math.min(Math.max(dt,pt),vt)}},{key:"drift",get:function(){var ft=this.levelDetails;return ft===null?1:ft.drift}},{key:"edgeStalled",get:function(){var ft=this.levelDetails;if(ft===null)return 0;var yt=(this.config.lowLatencyMode&&ft.partTarget||ft.targetduration)*3;return Math.max(ft.age-yt,0)}},{key:"forwardBufferLength",get:function(){var ft=this.media,yt=this.levelDetails;if(!ft||!yt)return 0;var xt=ft.buffered.length;return(xt?ft.buffered.end(xt-1):yt.edge)-this.currentTime}}]),Rt}()},"./src/controller/level-controller.ts":(at,it,ot)=>{ot.r(it),ot.d(it,{default:()=>pt});var st=ot("./src/types/level.ts"),lt=ot("./src/events.ts"),gt=ot("./src/errors.ts"),ct=ot("./src/utils/codecs.ts"),wt=ot("./src/controller/level-helper.ts"),Tt=ot("./src/controller/base-playlist-controller.ts"),Rt=ot("./src/types/loader.ts");function ht(){return ht=Object.assign?Object.assign.bind():function(dt){for(var vt=1;vt<arguments.length;vt++){var St=arguments[vt];for(var Et in St)Object.prototype.hasOwnProperty.call(St,Et)&&(dt[Et]=St[Et])}return dt},ht.apply(this,arguments)}function ut(dt,vt){for(var St=0;St<vt.length;St++){var Et=vt[St];Et.enumerable=Et.enumerable||!1,Et.configurable=!0,"value"in Et&&(Et.writable=!0),Object.defineProperty(dt,Et.key,Et)}}function ft(dt,vt,St){return vt&&ut(dt.prototype,vt),St&&ut(dt,St),Object.defineProperty(dt,"prototype",{writable:!1}),dt}function yt(dt,vt){dt.prototype=Object.create(vt.prototype),dt.prototype.constructor=dt,xt(dt,vt)}function xt(dt,vt){return xt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Et,mt){return Et.__proto__=mt,Et},xt(dt,vt)}var Ct=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),pt=function(dt){yt(vt,dt);function vt(Et){var mt;return mt=dt.call(this,Et,"[level-controller]")||this,mt._levels=[],mt._firstLevel=-1,mt._startLevel=void 0,mt.currentLevelIndex=-1,mt.manualLevelIndex=-1,mt.onParsedComplete=void 0,mt._registerListeners(),mt}var St=vt.prototype;return St._registerListeners=function(){var mt=this.hls;mt.on(lt.Events.MANIFEST_LOADED,this.onManifestLoaded,this),mt.on(lt.Events.LEVEL_LOADED,this.onLevelLoaded,this),mt.on(lt.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),mt.on(lt.Events.FRAG_LOADED,this.onFragLoaded,this),mt.on(lt.Events.ERROR,this.onError,this)},St._unregisterListeners=function(){var mt=this.hls;mt.off(lt.Events.MANIFEST_LOADED,this.onManifestLoaded,this),mt.off(lt.Events.LEVEL_LOADED,this.onLevelLoaded,this),mt.off(lt.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),mt.off(lt.Events.FRAG_LOADED,this.onFragLoaded,this),mt.off(lt.Events.ERROR,this.onError,this)},St.destroy=function(){this._unregisterListeners(),this.manualLevelIndex=-1,this._levels.length=0,dt.prototype.destroy.call(this)},St.startLoad=function(){var mt=this._levels;mt.forEach(function(_t){_t.loadError=0}),dt.prototype.startLoad.call(this)},St.onManifestLoaded=function(mt,_t){var bt=[],Ot=[],Pt=[],Dt,It={},kt,Lt=!1,At=!1,$t=!1;if(_t.levels.forEach(function(Bt){var Ut=Bt.attrs;Lt=Lt||!!(Bt.width&&Bt.height),At=At||!!Bt.videoCodec,$t=$t||!!Bt.audioCodec,Ct&&Bt.audioCodec&&Bt.audioCodec.indexOf("mp4a.40.34")!==-1&&(Bt.audioCodec=void 0);var Ht=Bt.bitrate+"-"+Bt.attrs.RESOLUTION+"-"+Bt.attrs.CODECS;kt=It[Ht],kt?kt.url.push(Bt.url):(kt=new st.Level(Bt),It[Ht]=kt,bt.push(kt)),Ut&&(Ut.AUDIO&&(0,wt.addGroupId)(kt,"audio",Ut.AUDIO),Ut.SUBTITLES&&(0,wt.addGroupId)(kt,"text",Ut.SUBTITLES))}),(Lt||At)&&$t&&(bt=bt.filter(function(Bt){var Ut=Bt.videoCodec,Ht=Bt.width,Kt=Bt.height;return!!Ut||!!(Ht&&Kt)})),bt=bt.filter(function(Bt){var Ut=Bt.audioCodec,Ht=Bt.videoCodec;return(!Ut||(0,ct.isCodecSupportedInMp4)(Ut,"audio"))&&(!Ht||(0,ct.isCodecSupportedInMp4)(Ht,"video"))}),_t.audioTracks&&(Ot=_t.audioTracks.filter(function(Bt){return!Bt.audioCodec||(0,ct.isCodecSupportedInMp4)(Bt.audioCodec,"audio")}),(0,wt.assignTrackIdsByGroup)(Ot)),_t.subtitles&&(Pt=_t.subtitles,(0,wt.assignTrackIdsByGroup)(Pt)),bt.length>0){Dt=bt[0].bitrate,bt.sort(function(Bt,Ut){return Bt.bitrate-Ut.bitrate}),this._levels=bt;for(var jt=0;jt<bt.length;jt++)if(bt[jt].bitrate===Dt){this._firstLevel=jt,this.log("manifest loaded, "+bt.length+" level(s) found, first bitrate: "+Dt);break}var Nt=$t&&!At,Ft={levels:bt,audioTracks:Ot,subtitleTracks:Pt,firstLevel:this._firstLevel,stats:_t.stats,audio:$t,video:At,altAudio:!Nt&&Ot.some(function(Bt){return!!Bt.url})};this.hls.trigger(lt.Events.MANIFEST_PARSED,Ft),(this.hls.config.autoStartLoad||this.hls.forceStartLoad)&&this.hls.startLoad(this.hls.config.startPosition)}else this.hls.trigger(lt.Events.ERROR,{type:gt.ErrorTypes.MEDIA_ERROR,details:gt.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:_t.url,reason:"no level with compatible codecs found in manifest"})},St.onError=function(mt,_t){var bt;if(dt.prototype.onError.call(this,mt,_t),!_t.fatal){var Ot=_t.context,Pt=this._levels[this.currentLevelIndex];if(Ot&&(Ot.type===Rt.PlaylistContextType.AUDIO_TRACK&&Pt.audioGroupIds&&Ot.groupId===Pt.audioGroupIds[Pt.urlId]||Ot.type===Rt.PlaylistContextType.SUBTITLE_TRACK&&Pt.textGroupIds&&Ot.groupId===Pt.textGroupIds[Pt.urlId])){this.redundantFailover(this.currentLevelIndex);return}var Dt=!1,It=!0,kt;switch(_t.details){case gt.ErrorDetails.FRAG_LOAD_ERROR:case gt.ErrorDetails.FRAG_LOAD_TIMEOUT:case gt.ErrorDetails.KEY_LOAD_ERROR:case gt.ErrorDetails.KEY_LOAD_TIMEOUT:if(_t.frag){var Lt=_t.frag.type===Rt.PlaylistLevelType.MAIN?_t.frag.level:this.currentLevelIndex,At=this._levels[Lt];At?(At.fragmentError++,At.fragmentError>this.hls.config.fragLoadingMaxRetry&&(kt=Lt)):kt=Lt}break;case gt.ErrorDetails.LEVEL_LOAD_ERROR:case gt.ErrorDetails.LEVEL_LOAD_TIMEOUT:Ot&&(Ot.deliveryDirectives&&(It=!1),kt=Ot.level),Dt=!0;break;case gt.ErrorDetails.REMUX_ALLOC_ERROR:kt=(bt=_t.level)!=null?bt:this.currentLevelIndex,Dt=!0;break}kt!==void 0&&this.recoverLevel(_t,kt,Dt,It)}},St.recoverLevel=function(mt,_t,bt,Ot){var Pt=mt.details,Dt=this._levels[_t];if(Dt.loadError++,bt){var It=this.retryLoadingOrFail(mt);if(It)mt.levelRetry=!0;else{this.currentLevelIndex=-1;return}}if(Ot){var kt=Dt.url.length;if(kt>1&&Dt.loadError<kt)mt.levelRetry=!0,this.redundantFailover(_t);else if(this.manualLevelIndex===-1){for(var Lt=-1,At=this._levels,$t=At.length;$t--;){var jt=($t+this.currentLevelIndex)%At.length;if(jt!==this.currentLevelIndex&&At[jt].loadError===0){Lt=jt;break}}Lt>-1&&this.currentLevelIndex!==Lt&&(this.warn(Pt+": switch to "+Lt),mt.levelRetry=!0,this.hls.nextAutoLevel=Lt)}}},St.redundantFailover=function(mt){var _t=this._levels[mt],bt=_t.url.length;if(bt>1){var Ot=(_t.urlId+1)%bt;this.warn("Switching to redundant URL-id "+Ot),this._levels.forEach(function(Pt){Pt.urlId=Ot}),this.level=mt}},St.onFragLoaded=function(mt,_t){var bt=_t.frag;if(bt!==void 0&&bt.type===Rt.PlaylistLevelType.MAIN){var Ot=this._levels[bt.level];Ot!==void 0&&(Ot.fragmentError=0,Ot.loadError=0)}},St.onLevelLoaded=function(mt,_t){var bt,Ot=_t.level,Pt=_t.details,Dt=this._levels[Ot];if(!Dt){var It;this.warn("Invalid level index "+Ot),(It=_t.deliveryDirectives)!==null&&It!==void 0&&It.skip&&(Pt.deltaUpdateFailed=!0);return}Ot===this.currentLevelIndex?(Dt.fragmentError===0&&(Dt.loadError=0,this.retryCount=0),this.playlistLoaded(Ot,_t,Dt.details)):(bt=_t.deliveryDirectives)!==null&&bt!==void 0&&bt.skip&&(Pt.deltaUpdateFailed=!0)},St.onAudioTrackSwitched=function(mt,_t){var bt=this.hls.levels[this.currentLevelIndex];if(!!bt&&bt.audioGroupIds){for(var Ot=-1,Pt=this.hls.audioTracks[_t.id].groupId,Dt=0;Dt<bt.audioGroupIds.length;Dt++)if(bt.audioGroupIds[Dt]===Pt){Ot=Dt;break}Ot!==bt.urlId&&(bt.urlId=Ot,this.startLoad())}},St.loadPlaylist=function(mt){var _t=this.currentLevelIndex,bt=this._levels[_t];if(this.canLoad&&bt&&bt.url.length>0){var Ot=bt.urlId,Pt=bt.url[Ot];if(mt)try{Pt=mt.addDirectives(Pt)}catch(Dt){this.warn("Could not construct new URL with HLS Delivery Directives: "+Dt)}this.log("Attempt loading level index "+_t+(mt?" at sn "+mt.msn+" part "+mt.part:"")+" with URL-id "+Ot+" "+Pt),this.clearTimer(),this.hls.trigger(lt.Events.LEVEL_LOADING,{url:Pt,level:_t,id:Ot,deliveryDirectives:mt||null})}},St.removeLevel=function(mt,_t){var bt=function(Dt,It){return It!==_t},Ot=this._levels.filter(function(Pt,Dt){return Dt!==mt?!0:Pt.url.length>1&&_t!==void 0?(Pt.url=Pt.url.filter(bt),Pt.audioGroupIds&&(Pt.audioGroupIds=Pt.audioGroupIds.filter(bt)),Pt.textGroupIds&&(Pt.textGroupIds=Pt.textGroupIds.filter(bt)),Pt.urlId=0,!0):!1}).map(function(Pt,Dt){var It=Pt.details;return It!=null&&It.fragments&&It.fragments.forEach(function(kt){kt.level=Dt}),Pt});this._levels=Ot,this.hls.trigger(lt.Events.LEVELS_UPDATED,{levels:Ot})},ft(vt,[{key:"levels",get:function(){return this._levels.length===0?null:this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(mt){var _t,bt=this._levels;if(bt.length!==0&&!(this.currentLevelIndex===mt&&(_t=bt[mt])!==null&&_t!==void 0&&_t.details)){if(mt<0||mt>=bt.length){var Ot=mt<0;if(this.hls.trigger(lt.Events.ERROR,{type:gt.ErrorTypes.OTHER_ERROR,details:gt.ErrorDetails.LEVEL_SWITCH_ERROR,level:mt,fatal:Ot,reason:"invalid level idx"}),Ot)return;mt=Math.min(mt,bt.length-1)}this.clearTimer();var Pt=this.currentLevelIndex,Dt=bt[Pt],It=bt[mt];this.log("switching to level "+mt+" from "+Pt),this.currentLevelIndex=mt;var kt=ht({},It,{level:mt,maxBitrate:It.maxBitrate,uri:It.uri,urlId:It.urlId});delete kt._urlId,this.hls.trigger(lt.Events.LEVEL_SWITCHING,kt);var Lt=It.details;if(!Lt||Lt.live){var At=this.switchParams(It.uri,Dt==null?void 0:Dt.details);this.loadPlaylist(At)}}}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(mt){this.manualLevelIndex=mt,this._startLevel===void 0&&(this._startLevel=mt),mt!==-1&&(this.level=mt)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(mt){this._firstLevel=mt}},{key:"startLevel",get:function(){if(this._startLevel===void 0){var mt=this.hls.config.startLevel;return mt!==void 0?mt:this._firstLevel}else return this._startLevel},set:function(mt){this._startLevel=mt}},{key:"nextLoadLevel",get:function(){return this.manualLevelIndex!==-1?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(mt){this.level=mt,this.manualLevelIndex===-1&&(this.hls.nextAutoLevel=mt)}}]),vt}(Tt.default)},"./src/controller/level-helper.ts":(at,it,ot)=>{ot.r(it),ot.d(it,{addGroupId:()=>wt,addSliding:()=>dt,adjustSliding:()=>pt,assignTrackIdsByGroup:()=>Tt,computeReloadInterval:()=>vt,getFragmentWithSN:()=>St,getPartWith:()=>Et,mapFragmentIntersection:()=>Ct,mapPartIntersection:()=>xt,mergeDetails:()=>ft,updateFragPTSDTS:()=>ut,updatePTS:()=>Rt});var st=ot("./src/polyfills/number.ts"),lt=ot("./src/utils/logger.ts"),gt=ot("./src/loader/date-range.ts");function ct(){return ct=Object.assign?Object.assign.bind():function(mt){for(var _t=1;_t<arguments.length;_t++){var bt=arguments[_t];for(var Ot in bt)Object.prototype.hasOwnProperty.call(bt,Ot)&&(mt[Ot]=bt[Ot])}return mt},ct.apply(this,arguments)}function wt(mt,_t,bt){switch(_t){case"audio":mt.audioGroupIds||(mt.audioGroupIds=[]),mt.audioGroupIds.push(bt);break;case"text":mt.textGroupIds||(mt.textGroupIds=[]),mt.textGroupIds.push(bt);break}}function Tt(mt){var _t={};mt.forEach(function(bt){var Ot=bt.groupId||"";bt.id=_t[Ot]=_t[Ot]||0,_t[Ot]++})}function Rt(mt,_t,bt){var Ot=mt[_t],Pt=mt[bt];ht(Ot,Pt)}function ht(mt,_t){var bt=_t.startPTS;if((0,st.isFiniteNumber)(bt)){var Ot=0,Pt;_t.sn>mt.sn?(Ot=bt-mt.start,Pt=mt):(Ot=mt.start-bt,Pt=_t),Pt.duration!==Ot&&(Pt.duration=Ot)}else if(_t.sn>mt.sn){var Dt=mt.cc===_t.cc;Dt&&mt.minEndPTS?_t.start=mt.start+(mt.minEndPTS-mt.start):_t.start=mt.start+mt.duration}else _t.start=Math.max(mt.start-_t.duration,0)}function ut(mt,_t,bt,Ot,Pt,Dt){var It=Ot-bt;It<=0&&(lt.logger.warn("Fragment should have a positive duration",_t),Ot=bt+_t.duration,Dt=Pt+_t.duration);var kt=bt,Lt=Ot,At=_t.startPTS,$t=_t.endPTS;if((0,st.isFiniteNumber)(At)){var jt=Math.abs(At-bt);(0,st.isFiniteNumber)(_t.deltaPTS)?_t.deltaPTS=Math.max(jt,_t.deltaPTS):_t.deltaPTS=jt,kt=Math.max(bt,At),bt=Math.min(bt,At),Pt=Math.min(Pt,_t.startDTS),Lt=Math.min(Ot,$t),Ot=Math.max(Ot,$t),Dt=Math.max(Dt,_t.endDTS)}_t.duration=Ot-bt;var Nt=bt-_t.start;_t.appendedPTS=Ot,_t.start=_t.startPTS=bt,_t.maxStartPTS=kt,_t.startDTS=Pt,_t.endPTS=Ot,_t.minEndPTS=Lt,_t.endDTS=Dt;var Ft=_t.sn;if(!mt||Ft<mt.startSN||Ft>mt.endSN)return 0;var Bt,Ut=Ft-mt.startSN,Ht=mt.fragments;for(Ht[Ut]=_t,Bt=Ut;Bt>0;Bt--)ht(Ht[Bt],Ht[Bt-1]);for(Bt=Ut;Bt<Ht.length-1;Bt++)ht(Ht[Bt],Ht[Bt+1]);return mt.fragmentHint&&ht(Ht[Ht.length-1],mt.fragmentHint),mt.PTSKnown=mt.alignedSliding=!0,Nt}function ft(mt,_t){for(var bt=null,Ot=mt.fragments,Pt=Ot.length-1;Pt>=0;Pt--){var Dt=Ot[Pt].initSegment;if(Dt){bt=Dt;break}}mt.fragmentHint&&delete mt.fragmentHint.endPTS;var It=0,kt;if(Ct(mt,_t,function(Bt,Ut){Bt.relurl&&(It=Bt.cc-Ut.cc),(0,st.isFiniteNumber)(Bt.startPTS)&&(0,st.isFiniteNumber)(Bt.endPTS)&&(Ut.start=Ut.startPTS=Bt.startPTS,Ut.startDTS=Bt.startDTS,Ut.appendedPTS=Bt.appendedPTS,Ut.maxStartPTS=Bt.maxStartPTS,Ut.endPTS=Bt.endPTS,Ut.endDTS=Bt.endDTS,Ut.minEndPTS=Bt.minEndPTS,Ut.duration=Bt.endPTS-Bt.startPTS,Ut.duration&&(kt=Ut),_t.PTSKnown=_t.alignedSliding=!0),Ut.elementaryStreams=Bt.elementaryStreams,Ut.loader=Bt.loader,Ut.stats=Bt.stats,Ut.urlId=Bt.urlId,Bt.initSegment&&(Ut.initSegment=Bt.initSegment,bt=Bt.initSegment)}),bt){var Lt=_t.fragmentHint?_t.fragments.concat(_t.fragmentHint):_t.fragments;Lt.forEach(function(Bt){var Ut;(!Bt.initSegment||Bt.initSegment.relurl===((Ut=bt)===null||Ut===void 0?void 0:Ut.relurl))&&(Bt.initSegment=bt)})}if(_t.skippedSegments)if(_t.deltaUpdateFailed=_t.fragments.some(function(Bt){return!Bt}),_t.deltaUpdateFailed){lt.logger.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(var At=_t.skippedSegments;At--;)_t.fragments.shift();_t.startSN=_t.fragments[0].sn,_t.startCC=_t.fragments[0].cc}else _t.canSkipDateRanges&&(_t.dateRanges=yt(mt.dateRanges,_t.dateRanges,_t.recentlyRemovedDateranges));var $t=_t.fragments;if(It){lt.logger.warn("discontinuity sliding from playlist, take drift into account");for(var jt=0;jt<$t.length;jt++)$t[jt].cc+=It}_t.skippedSegments&&(_t.startCC=_t.fragments[0].cc),xt(mt.partList,_t.partList,function(Bt,Ut){Ut.elementaryStreams=Bt.elementaryStreams,Ut.stats=Bt.stats}),kt?ut(_t,kt,kt.startPTS,kt.endPTS,kt.startDTS,kt.endDTS):pt(mt,_t),$t.length&&(_t.totalduration=_t.edge-$t[0].start),_t.driftStartTime=mt.driftStartTime,_t.driftStart=mt.driftStart;var Nt=_t.advancedDateTime;if(_t.advanced&&Nt){var Ft=_t.edge;_t.driftStart||(_t.driftStartTime=Nt,_t.driftStart=Ft),_t.driftEndTime=Nt,_t.driftEnd=Ft}else _t.driftEndTime=mt.driftEndTime,_t.driftEnd=mt.driftEnd,_t.advancedDateTime=mt.advancedDateTime}function yt(mt,_t,bt){var Ot=ct({},mt);return bt&&bt.forEach(function(Pt){delete Ot[Pt]}),Object.keys(_t).forEach(function(Pt){var Dt=new gt.DateRange(_t[Pt].attr,Ot[Pt]);Dt.isValid?Ot[Pt]=Dt:lt.logger.warn('Ignoring invalid Playlist Delta Update DATERANGE tag: "'+JSON.stringify(_t[Pt].attr)+'"')}),Ot}function xt(mt,_t,bt){if(mt&&_t)for(var Ot=0,Pt=0,Dt=mt.length;Pt<=Dt;Pt++){var It=mt[Pt],kt=_t[Pt+Ot];It&&kt&&It.index===kt.index&&It.fragment.sn===kt.fragment.sn?bt(It,kt):Ot--}}function Ct(mt,_t,bt){for(var Ot=_t.skippedSegments,Pt=Math.max(mt.startSN,_t.startSN)-_t.startSN,Dt=(mt.fragmentHint?1:0)+(Ot?_t.endSN:Math.min(mt.endSN,_t.endSN))-_t.startSN,It=_t.startSN-mt.startSN,kt=_t.fragmentHint?_t.fragments.concat(_t.fragmentHint):_t.fragments,Lt=mt.fragmentHint?mt.fragments.concat(mt.fragmentHint):mt.fragments,At=Pt;At<=Dt;At++){var $t=Lt[It+At],jt=kt[At];Ot&&!jt&&At<Ot&&(jt=_t.fragments[At]=$t),$t&&jt&&bt($t,jt)}}function pt(mt,_t){var bt=_t.startSN+_t.skippedSegments-mt.startSN,Ot=mt.fragments;bt<0||bt>=Ot.length||dt(_t,Ot[bt].start)}function dt(mt,_t){if(_t){for(var bt=mt.fragments,Ot=mt.skippedSegments;Ot<bt.length;Ot++)bt[Ot].start+=_t;mt.fragmentHint&&(mt.fragmentHint.start+=_t)}}function vt(mt,_t){var bt=1e3*mt.levelTargetDuration,Ot=bt/2,Pt=mt.age,Dt=Pt>0&&Pt<bt*3,It=_t.loading.end-_t.loading.start,kt,Lt=mt.availabilityDelay;if(mt.updated===!1)if(Dt){var At=333*mt.misses;kt=Math.max(Math.min(Ot,It*2),At),mt.availabilityDelay=(mt.availabilityDelay||0)+kt}else kt=Ot;else Dt?(Lt=Math.min(Lt||bt/2,Pt),mt.availabilityDelay=Lt,kt=Lt+bt-Pt):kt=bt-It;return Math.round(kt)}function St(mt,_t,bt){if(!mt||!mt.details)return null;var Ot=mt.details,Pt=Ot.fragments[_t-Ot.startSN];return Pt||(Pt=Ot.fragmentHint,Pt&&Pt.sn===_t)?Pt:_t<Ot.startSN&&bt&&bt.sn===_t?bt:null}function Et(mt,_t,bt){if(!mt||!mt.details)return null;var Ot=mt.details.partList;if(Ot)for(var Pt=Ot.length;Pt--;){var Dt=Ot[Pt];if(Dt.index===bt&&Dt.fragment.sn===_t)return Dt}return null}},"./src/controller/stream-controller.ts":(at,it,ot)=>{ot.r(it),ot.d(it,{default:()=>Et});var st=ot("./src/polyfills/number.ts"),lt=ot("./src/controller/base-stream-controller.ts"),gt=ot("./src/is-supported.ts"),ct=ot("./src/events.ts"),wt=ot("./src/utils/buffer-helper.ts"),Tt=ot("./src/controller/fragment-tracker.ts"),Rt=ot("./src/types/loader.ts"),ht=ot("./src/loader/fragment.ts"),ut=ot("./src/demux/transmuxer-interface.ts"),ft=ot("./src/types/transmuxer.ts"),yt=ot("./src/controller/gap-controller.ts"),xt=ot("./src/errors.ts");function Ct(mt,_t){for(var bt=0;bt<_t.length;bt++){var Ot=_t[bt];Ot.enumerable=Ot.enumerable||!1,Ot.configurable=!0,"value"in Ot&&(Ot.writable=!0),Object.defineProperty(mt,Ot.key,Ot)}}function pt(mt,_t,bt){return _t&&Ct(mt.prototype,_t),bt&&Ct(mt,bt),Object.defineProperty(mt,"prototype",{writable:!1}),mt}function dt(mt,_t){mt.prototype=Object.create(_t.prototype),mt.prototype.constructor=mt,vt(mt,_t)}function vt(mt,_t){return vt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Ot,Pt){return Ot.__proto__=Pt,Ot},vt(mt,_t)}var St=100,Et=function(mt){dt(_t,mt);function _t(Ot,Pt){var Dt;return Dt=mt.call(this,Ot,Pt,"[stream-controller]")||this,Dt.audioCodecSwap=!1,Dt.gapController=null,Dt.level=-1,Dt._forceStartLoad=!1,Dt.altAudio=!1,Dt.audioOnly=!1,Dt.fragPlaying=null,Dt.onvplaying=null,Dt.onvseeked=null,Dt.fragLastKbps=0,Dt.couldBacktrack=!1,Dt.backtrackFragment=null,Dt.audioCodecSwitch=!1,Dt.videoBuffer=null,Dt._registerListeners(),Dt}var bt=_t.prototype;return bt._registerListeners=function(){var Pt=this.hls;Pt.on(ct.Events.MEDIA_ATTACHED,this.onMediaAttached,this),Pt.on(ct.Events.MEDIA_DETACHING,this.onMediaDetaching,this),Pt.on(ct.Events.MANIFEST_LOADING,this.onManifestLoading,this),Pt.on(ct.Events.MANIFEST_PARSED,this.onManifestParsed,this),Pt.on(ct.Events.LEVEL_LOADING,this.onLevelLoading,this),Pt.on(ct.Events.LEVEL_LOADED,this.onLevelLoaded,this),Pt.on(ct.Events.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),Pt.on(ct.Events.ERROR,this.onError,this),Pt.on(ct.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),Pt.on(ct.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),Pt.on(ct.Events.BUFFER_CREATED,this.onBufferCreated,this),Pt.on(ct.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),Pt.on(ct.Events.LEVELS_UPDATED,this.onLevelsUpdated,this),Pt.on(ct.Events.FRAG_BUFFERED,this.onFragBuffered,this)},bt._unregisterListeners=function(){var Pt=this.hls;Pt.off(ct.Events.MEDIA_ATTACHED,this.onMediaAttached,this),Pt.off(ct.Events.MEDIA_DETACHING,this.onMediaDetaching,this),Pt.off(ct.Events.MANIFEST_LOADING,this.onManifestLoading,this),Pt.off(ct.Events.MANIFEST_PARSED,this.onManifestParsed,this),Pt.off(ct.Events.LEVEL_LOADED,this.onLevelLoaded,this),Pt.off(ct.Events.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),Pt.off(ct.Events.ERROR,this.onError,this),Pt.off(ct.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),Pt.off(ct.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),Pt.off(ct.Events.BUFFER_CREATED,this.onBufferCreated,this),Pt.off(ct.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),Pt.off(ct.Events.LEVELS_UPDATED,this.onLevelsUpdated,this),Pt.off(ct.Events.FRAG_BUFFERED,this.onFragBuffered,this)},bt.onHandlerDestroying=function(){this._unregisterListeners(),this.onMediaDetaching()},bt.startLoad=function(Pt){if(this.levels){var Dt=this.lastCurrentTime,It=this.hls;if(this.stopLoad(),this.setInterval(St),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var kt=It.startLevel;kt===-1&&(It.config.testBandwidth&&this.levels.length>1?(kt=0,this.bitrateTest=!0):kt=It.nextAutoLevel),this.level=It.nextLoadLevel=kt,this.loadedmetadata=!1}Dt>0&&Pt===-1&&(this.log("Override startPosition with lastCurrentTime @"+Dt.toFixed(3)),Pt=Dt),this.state=lt.State.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=Pt,this.tick()}else this._forceStartLoad=!0,this.state=lt.State.STOPPED},bt.stopLoad=function(){this._forceStartLoad=!1,mt.prototype.stopLoad.call(this)},bt.doTick=function(){switch(this.state){case lt.State.IDLE:this.doTickIdle();break;case lt.State.WAITING_LEVEL:{var Pt,Dt=this.levels,It=this.level,kt=Dt==null||(Pt=Dt[It])===null||Pt===void 0?void 0:Pt.details;if(kt&&(!kt.live||this.levelLastLoaded===this.level)){if(this.waitForCdnTuneIn(kt))break;this.state=lt.State.IDLE;break}break}case lt.State.FRAG_LOADING_WAITING_RETRY:{var Lt,At=self.performance.now(),$t=this.retryDate;(!$t||At>=$t||(Lt=this.media)!==null&&Lt!==void 0&&Lt.seeking)&&(this.log("retryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded(this.level),this.state=lt.State.IDLE)}break}this.onTickEnd()},bt.onTickEnd=function(){mt.prototype.onTickEnd.call(this),this.checkBuffer(),this.checkFragmentChanged()},bt.doTickIdle=function(){var Pt,Dt,It=this.hls,kt=this.levelLastLoaded,Lt=this.levels,At=this.media,$t=It.config,jt=It.nextLoadLevel;if(!(kt===null||!At&&(this.startFragRequested||!$t.startFragPrefetch))&&!(this.altAudio&&this.audioOnly)&&!(!Lt||!Lt[jt])){var Nt=Lt[jt];this.level=It.nextLoadLevel=jt;var Ft=Nt.details;if(!Ft||this.state===lt.State.WAITING_LEVEL||Ft.live&&this.levelLastLoaded!==jt){this.state=lt.State.WAITING_LEVEL;return}var Bt=this.getMainFwdBufferInfo();if(Bt!==null){var Ut=Bt.len,Ht=this.getMaxBufferLength(Nt.maxBitrate);if(!(Ut>=Ht)){if(this._streamEnded(Bt,Ft)){var Kt={};this.altAudio&&(Kt.type="video"),this.hls.trigger(ct.Events.BUFFER_EOS,Kt),this.state=lt.State.ENDED;return}this.backtrackFragment&&this.backtrackFragment.start>Bt.end&&(this.backtrackFragment=null);var Gt=this.backtrackFragment?this.backtrackFragment.start:Bt.end,Wt=this.getNextFragment(Gt,Ft);if(this.couldBacktrack&&!this.fragPrevious&&Wt&&Wt.sn!=="initSegment"&&this.fragmentTracker.getState(Wt)!==Tt.FragmentState.OK){var Vt,zt=((Vt=this.backtrackFragment)!=null?Vt:Wt).sn,Yt=zt-Ft.startSN,Xt=Ft.fragments[Yt-1];Xt&&Wt.cc===Xt.cc&&(Wt=Xt,this.fragmentTracker.removeFragment(Xt))}else this.backtrackFragment&&Bt.len&&(this.backtrackFragment=null);if(Wt&&this.fragmentTracker.getState(Wt)===Tt.FragmentState.OK&&this.nextLoadPosition>Gt){var Qt=this.audioOnly&&!this.altAudio?ht.ElementaryStreamTypes.AUDIO:ht.ElementaryStreamTypes.VIDEO;At&&this.afterBufferFlushed(At,Qt,Rt.PlaylistLevelType.MAIN),Wt=this.getNextFragment(this.nextLoadPosition,Ft)}!Wt||(Wt.initSegment&&!Wt.initSegment.data&&!this.bitrateTest&&(Wt=Wt.initSegment),((Pt=Wt.decryptdata)===null||Pt===void 0?void 0:Pt.keyFormat)==="identity"&&!((Dt=Wt.decryptdata)!==null&&Dt!==void 0&&Dt.key)?this.loadKey(Wt,Ft):this.loadFragment(Wt,Ft,Gt))}}}},bt.loadFragment=function(Pt,Dt,It){var kt,Lt=this.fragmentTracker.getState(Pt);this.fragCurrent=Pt,Lt===Tt.FragmentState.NOT_LOADED?Pt.sn==="initSegment"?this._loadInitSegment(Pt):this.bitrateTest?(this.log("Fragment "+Pt.sn+" of level "+Pt.level+" is being downloaded to test bitrate and will not be buffered"),this._loadBitrateTestFrag(Pt)):(this.startFragRequested=!0,mt.prototype.loadFragment.call(this,Pt,Dt,It)):Lt===Tt.FragmentState.APPENDING?this.reduceMaxBufferLength(Pt.duration)&&this.fragmentTracker.removeFragment(Pt):((kt=this.media)===null||kt===void 0?void 0:kt.buffered.length)===0&&this.fragmentTracker.removeAllFragments()},bt.getAppendedFrag=function(Pt){var Dt=this.fragmentTracker.getAppendedFrag(Pt,Rt.PlaylistLevelType.MAIN);return Dt&&"fragment"in Dt?Dt.fragment:Dt},bt.getBufferedFrag=function(Pt){return this.fragmentTracker.getBufferedFrag(Pt,Rt.PlaylistLevelType.MAIN)},bt.followingBufferedFrag=function(Pt){return Pt?this.getBufferedFrag(Pt.end+.5):null},bt.immediateLevelSwitch=function(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},bt.nextLevelSwitch=function(){var Pt=this.levels,Dt=this.media;if(Dt!=null&&Dt.readyState){var It,kt=this.getAppendedFrag(Dt.currentTime);if(kt&&kt.start>1&&this.flushMainBuffer(0,kt.start-1),!Dt.paused&&Pt){var Lt=this.hls.nextLoadLevel,At=Pt[Lt],$t=this.fragLastKbps;$t&&this.fragCurrent?It=this.fragCurrent.duration*At.maxBitrate/(1e3*$t)+1:It=0}else It=0;var jt=this.getBufferedFrag(Dt.currentTime+It);if(jt){var Nt=this.followingBufferedFrag(jt);if(Nt){this.abortCurrentFrag();var Ft=Nt.maxStartPTS?Nt.maxStartPTS:Nt.start,Bt=Nt.duration,Ut=Math.max(jt.end,Ft+Math.min(Math.max(Bt-this.config.maxFragLookUpTolerance,Bt*.5),Bt*.75));this.flushMainBuffer(Ut,Number.POSITIVE_INFINITY)}}}},bt.abortCurrentFrag=function(){var Pt=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,Pt!=null&&Pt.loader&&Pt.loader.abort(),this.state){case lt.State.KEY_LOADING:case lt.State.FRAG_LOADING:case lt.State.FRAG_LOADING_WAITING_RETRY:case lt.State.PARSING:case lt.State.PARSED:this.state=lt.State.IDLE;break}this.nextLoadPosition=this.getLoadPosition()},bt.flushMainBuffer=function(Pt,Dt){mt.prototype.flushMainBuffer.call(this,Pt,Dt,this.altAudio?"video":null)},bt.onMediaAttached=function(Pt,Dt){mt.prototype.onMediaAttached.call(this,Pt,Dt);var It=Dt.media;this.onvplaying=this.onMediaPlaying.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),It.addEventListener("playing",this.onvplaying),It.addEventListener("seeked",this.onvseeked),this.gapController=new yt.default(this.config,It,this.fragmentTracker,this.hls)},bt.onMediaDetaching=function(){var Pt=this.media;Pt&&this.onvplaying&&this.onvseeked&&(Pt.removeEventListener("playing",this.onvplaying),Pt.removeEventListener("seeked",this.onvseeked),this.onvplaying=this.onvseeked=null,this.videoBuffer=null),this.fragPlaying=null,this.gapController&&(this.gapController.destroy(),this.gapController=null),mt.prototype.onMediaDetaching.call(this)},bt.onMediaPlaying=function(){this.tick()},bt.onMediaSeeked=function(){var Pt=this.media,Dt=Pt?Pt.currentTime:null;(0,st.isFiniteNumber)(Dt)&&this.log("Media seeked to "+Dt.toFixed(3)),this.tick()},bt.onManifestLoading=function(){this.log("Trigger BUFFER_RESET"),this.hls.trigger(ct.Events.BUFFER_RESET,void 0),this.fragmentTracker.removeAllFragments(),this.couldBacktrack=!1,this.startPosition=this.lastCurrentTime=0,this.fragPlaying=null,this.backtrackFragment=null},bt.onManifestParsed=function(Pt,Dt){var It=!1,kt=!1,Lt;Dt.levels.forEach(function(At){Lt=At.audioCodec,Lt&&(Lt.indexOf("mp4a.40.2")!==-1&&(It=!0),Lt.indexOf("mp4a.40.5")!==-1&&(kt=!0))}),this.audioCodecSwitch=It&&kt&&!(0,gt.changeTypeSupported)(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=Dt.levels,this.startFragRequested=!1},bt.onLevelLoading=function(Pt,Dt){var It=this.levels;if(!(!It||this.state!==lt.State.IDLE)){var kt=It[Dt.level];(!kt.details||kt.details.live&&this.levelLastLoaded!==Dt.level||this.waitForCdnTuneIn(kt.details))&&(this.state=lt.State.WAITING_LEVEL)}},bt.onLevelLoaded=function(Pt,Dt){var It,kt=this.levels,Lt=Dt.level,At=Dt.details,$t=At.totalduration;if(!kt){this.warn("Levels were reset while loading level "+Lt);return}this.log("Level "+Lt+" loaded ["+At.startSN+","+At.endSN+"], cc ["+At.startCC+", "+At.endCC+"] duration:"+$t);var jt=this.fragCurrent;jt&&(this.state===lt.State.FRAG_LOADING||this.state===lt.State.FRAG_LOADING_WAITING_RETRY)&&jt.level!==Dt.level&&jt.loader&&(this.state=lt.State.IDLE,this.backtrackFragment=null,jt.loader.abort());var Nt=kt[Lt],Ft=0;if(At.live||(It=Nt.details)!==null&&It!==void 0&&It.live){if(At.fragments[0]||(At.deltaUpdateFailed=!0),At.deltaUpdateFailed)return;Ft=this.alignPlaylists(At,Nt.details)}if(Nt.details=At,this.levelLastLoaded=Lt,this.hls.trigger(ct.Events.LEVEL_UPDATED,{details:At,level:Lt}),this.state===lt.State.WAITING_LEVEL){if(this.waitForCdnTuneIn(At))return;this.state=lt.State.IDLE}this.startFragRequested?At.live&&this.synchronizeToLiveEdge(At):this.setStartPosition(At,Ft),this.tick()},bt._handleFragmentLoadProgress=function(Pt){var Dt,It=Pt.frag,kt=Pt.part,Lt=Pt.payload,At=this.levels;if(!At){this.warn("Levels were reset while fragment load was in progress. Fragment "+It.sn+" of level "+It.level+" will not be buffered");return}var $t=At[It.level],jt=$t.details;if(!jt){this.warn("Dropping fragment "+It.sn+" of level "+It.level+" after level details were reset");return}var Nt=$t.videoCodec,Ft=jt.PTSKnown||!jt.live,Bt=(Dt=It.initSegment)===null||Dt===void 0?void 0:Dt.data,Ut=this._getAudioCodec($t),Ht=this.transmuxer=this.transmuxer||new ut.default(this.hls,Rt.PlaylistLevelType.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),Kt=kt?kt.index:-1,Gt=Kt!==-1,Wt=new ft.ChunkMetadata(It.level,It.sn,It.stats.chunkCount,Lt.byteLength,Kt,Gt),Vt=this.initPTS[It.cc];Ht.push(Lt,Bt,Ut,Nt,It,kt,jt.totalduration,Ft,Wt,Vt)},bt.onAudioTrackSwitching=function(Pt,Dt){var It=this.altAudio,kt=!!Dt.url,Lt=Dt.id;if(!kt){if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var At=this.fragCurrent;At!=null&&At.loader&&(this.log("Switching to main audio track, cancel main fragment load"),At.loader.abort()),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();var $t=this.hls;It&&$t.trigger(ct.Events.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),$t.trigger(ct.Events.AUDIO_TRACK_SWITCHED,{id:Lt})}},bt.onAudioTrackSwitched=function(Pt,Dt){var It=Dt.id,kt=!!this.hls.audioTracks[It].url;if(kt){var Lt=this.videoBuffer;Lt&&this.mediaBuffer!==Lt&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=Lt)}this.altAudio=kt,this.tick()},bt.onBufferCreated=function(Pt,Dt){var It=Dt.tracks,kt,Lt,At=!1;for(var $t in It){var jt=It[$t];if(jt.id==="main"){if(Lt=$t,kt=jt,$t==="video"){var Nt=It[$t];Nt&&(this.videoBuffer=Nt.buffer)}}else At=!0}At&&kt?(this.log("Alternate track found, use "+Lt+".buffered to schedule main fragment loading"),this.mediaBuffer=kt.buffer):this.mediaBuffer=this.media},bt.onFragBuffered=function(Pt,Dt){var It=Dt.frag,kt=Dt.part;if(!(It&&It.type!==Rt.PlaylistLevelType.MAIN)){if(this.fragContextChanged(It)){this.warn("Fragment "+It.sn+(kt?" p: "+kt.index:"")+" of level "+It.level+" finished buffering, but was aborted. state: "+this.state),this.state===lt.State.PARSED&&(this.state=lt.State.IDLE);return}var Lt=kt?kt.stats:It.stats;this.fragLastKbps=Math.round(8*Lt.total/(Lt.buffering.end-Lt.loading.first)),It.sn!=="initSegment"&&(this.fragPrevious=It),this.fragBufferedComplete(It,kt)}},bt.onError=function(Pt,Dt){switch(Dt.details){case xt.ErrorDetails.FRAG_LOAD_ERROR:case xt.ErrorDetails.FRAG_LOAD_TIMEOUT:case xt.ErrorDetails.KEY_LOAD_ERROR:case xt.ErrorDetails.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(Rt.PlaylistLevelType.MAIN,Dt);break;case xt.ErrorDetails.LEVEL_LOAD_ERROR:case xt.ErrorDetails.LEVEL_LOAD_TIMEOUT:this.state!==lt.State.ERROR&&(Dt.fatal?(this.warn(""+Dt.details),this.state=lt.State.ERROR):!Dt.levelRetry&&this.state===lt.State.WAITING_LEVEL&&(this.state=lt.State.IDLE));break;case xt.ErrorDetails.BUFFER_FULL_ERROR:if(Dt.parent==="main"&&(this.state===lt.State.PARSING||this.state===lt.State.PARSED)){var It=!0,kt=this.getFwdBufferInfo(this.media,Rt.PlaylistLevelType.MAIN);kt&&kt.len>.5&&(It=!this.reduceMaxBufferLength(kt.len)),It&&(this.warn("buffer full error also media.currentTime is not buffered, flush main"),this.immediateLevelSwitch()),this.resetLoadingState()}break}},bt.checkBuffer=function(){var Pt=this.media,Dt=this.gapController;if(!(!Pt||!Dt||!Pt.readyState)){if(this.loadedmetadata||!wt.BufferHelper.getBuffered(Pt).length){var It=this.state!==lt.State.IDLE?this.fragCurrent:null;Dt.poll(this.lastCurrentTime,It)}this.lastCurrentTime=Pt.currentTime}},bt.onFragLoadEmergencyAborted=function(){this.state=lt.State.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tickImmediate()},bt.onBufferFlushed=function(Pt,Dt){var It=Dt.type;if(It!==ht.ElementaryStreamTypes.AUDIO||this.audioOnly&&!this.altAudio){var kt=(It===ht.ElementaryStreamTypes.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;this.afterBufferFlushed(kt,It,Rt.PlaylistLevelType.MAIN)}},bt.onLevelsUpdated=function(Pt,Dt){this.levels=Dt.levels},bt.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},bt.seekToStartPos=function(){var Pt=this.media;if(!!Pt){var Dt=Pt.currentTime,It=this.startPosition;if(It>=0&&Dt<It){if(Pt.seeking){this.log("could not seek to "+It+", already seeking at "+Dt);return}var kt=wt.BufferHelper.getBuffered(Pt),Lt=kt.length?kt.start(0):0,At=Lt-It;At>0&&(At<this.config.maxBufferHole||At<this.config.maxFragLookUpTolerance)&&(this.log("adjusting start position by "+At+" to match buffer start"),It+=At,this.startPosition=It),this.log("seek to target start position "+It+" from current time "+Dt),Pt.currentTime=It}}},bt._getAudioCodec=function(Pt){var Dt=this.config.defaultAudioCodec||Pt.audioCodec;return this.audioCodecSwap&&Dt&&(this.log("Swapping audio codec"),Dt.indexOf("mp4a.40.5")!==-1?Dt="mp4a.40.2":Dt="mp4a.40.5"),Dt},bt._loadBitrateTestFrag=function(Pt){var Dt=this;Pt.bitrateTest=!0,this._doFragLoad(Pt).then(function(It){var kt=Dt.hls;if(!(!It||kt.nextLoadLevel||Dt.fragContextChanged(Pt))){Dt.fragLoadError=0,Dt.state=lt.State.IDLE,Dt.startFragRequested=!1,Dt.bitrateTest=!1;var Lt=Pt.stats;Lt.parsing.start=Lt.parsing.end=Lt.buffering.start=Lt.buffering.end=self.performance.now(),kt.trigger(ct.Events.FRAG_LOADED,It),Pt.bitrateTest=!1}})},bt._handleTransmuxComplete=function(Pt){var Dt,It="main",kt=this.hls,Lt=Pt.remuxResult,At=Pt.chunkMeta,$t=this.getCurrentContext(At);if(!$t){this.warn("The loading context changed while buffering fragment "+At.sn+" of level "+At.level+". This chunk will not be buffered."),this.resetStartWhenNotLoaded(At.level);return}var jt=$t.frag,Nt=$t.part,Ft=$t.level,Bt=Lt.video,Ut=Lt.text,Ht=Lt.id3,Kt=Lt.initSegment,Gt=Ft.details,Wt=this.altAudio?void 0:Lt.audio;if(!this.fragContextChanged(jt)){if(this.state=lt.State.PARSING,Kt){Kt.tracks&&(this._bufferInitSegment(Ft,Kt.tracks,jt,At),kt.trigger(ct.Events.FRAG_PARSING_INIT_SEGMENT,{frag:jt,id:It,tracks:Kt.tracks}));var Vt=Kt.initPTS,zt=Kt.timescale;(0,st.isFiniteNumber)(Vt)&&(this.initPTS[jt.cc]=Vt,kt.trigger(ct.Events.INIT_PTS_FOUND,{frag:jt,id:It,initPTS:Vt,timescale:zt}))}if(Bt&&Lt.independent!==!1){if(Gt){var Yt=Bt.startPTS,Xt=Bt.endPTS,Qt=Bt.startDTS,qt=Bt.endDTS;if(Nt)Nt.elementaryStreams[Bt.type]={startPTS:Yt,endPTS:Xt,startDTS:Qt,endDTS:qt};else if(Bt.firstKeyFrame&&Bt.independent&&(this.couldBacktrack=!0),Bt.dropped&&Bt.independent){var er=this.getMainFwdBufferInfo(),tr=(er?er.end:this.getLoadPosition())+this.config.maxBufferHole,Zt=Bt.firstKeyFramePTS?Bt.firstKeyFramePTS:Yt;if(tr<Zt-this.config.maxBufferHole){this.backtrack(jt);return}jt.setElementaryStreamInfo(Bt.type,jt.start,Xt,jt.start,qt,!0)}jt.setElementaryStreamInfo(Bt.type,Yt,Xt,Qt,qt),this.backtrackFragment&&(this.backtrackFragment=jt),this.bufferFragmentData(Bt,jt,Nt,At)}}else if(Lt.independent===!1){this.backtrack(jt);return}if(Wt){var Jt=Wt.startPTS,nr=Wt.endPTS,rr=Wt.startDTS,ir=Wt.endDTS;Nt&&(Nt.elementaryStreams[ht.ElementaryStreamTypes.AUDIO]={startPTS:Jt,endPTS:nr,startDTS:rr,endDTS:ir}),jt.setElementaryStreamInfo(ht.ElementaryStreamTypes.AUDIO,Jt,nr,rr,ir),this.bufferFragmentData(Wt,jt,Nt,At)}if(Gt&&Ht!==null&&Ht!==void 0&&(Dt=Ht.samples)!==null&&Dt!==void 0&&Dt.length){var lr={id:It,frag:jt,details:Gt,samples:Ht.samples};kt.trigger(ct.Events.FRAG_PARSING_METADATA,lr)}if(Gt&&Ut){var ar={id:It,frag:jt,details:Gt,samples:Ut.samples};kt.trigger(ct.Events.FRAG_PARSING_USERDATA,ar)}}},bt._bufferInitSegment=function(Pt,Dt,It,kt){var Lt=this;if(this.state===lt.State.PARSING){this.audioOnly=!!Dt.audio&&!Dt.video,this.altAudio&&!this.audioOnly&&delete Dt.audio;var At=Dt.audio,$t=Dt.video,jt=Dt.audiovideo;if(At){var Nt=Pt.audioCodec,Ft=navigator.userAgent.toLowerCase();this.audioCodecSwitch&&(Nt&&(Nt.indexOf("mp4a.40.5")!==-1?Nt="mp4a.40.2":Nt="mp4a.40.5"),At.metadata.channelCount!==1&&Ft.indexOf("firefox")===-1&&(Nt="mp4a.40.5")),Ft.indexOf("android")!==-1&&At.container!=="audio/mpeg"&&(Nt="mp4a.40.2",this.log("Android: force audio codec to "+Nt)),Pt.audioCodec&&Pt.audioCodec!==Nt&&this.log('Swapping manifest audio codec "'+Pt.audioCodec+'" for "'+Nt+'"'),At.levelCodec=Nt,At.id="main",this.log("Init audio buffer, container:"+At.container+", codecs[selected/level/parsed]=["+(Nt||"")+"/"+(Pt.audioCodec||"")+"/"+At.codec+"]")}$t&&($t.levelCodec=Pt.videoCodec,$t.id="main",this.log("Init video buffer, container:"+$t.container+", codecs[level/parsed]=["+(Pt.videoCodec||"")+"/"+$t.codec+"]")),jt&&this.log("Init audiovideo buffer, container:"+jt.container+", codecs[level/parsed]=["+(Pt.attrs.CODECS||"")+"/"+jt.codec+"]"),this.hls.trigger(ct.Events.BUFFER_CODECS,Dt),Object.keys(Dt).forEach(function(Bt){var Ut=Dt[Bt],Ht=Ut.initSegment;Ht!=null&&Ht.byteLength&&Lt.hls.trigger(ct.Events.BUFFER_APPENDING,{type:Bt,data:Ht,frag:It,part:null,chunkMeta:kt,parent:It.type})}),this.tick()}},bt.getMainFwdBufferInfo=function(){return this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:this.media,Rt.PlaylistLevelType.MAIN)},bt.backtrack=function(Pt){this.couldBacktrack=!0,this.backtrackFragment=Pt,this.resetTransmuxer(),this.flushBufferGap(Pt),this.fragmentTracker.removeFragment(Pt),this.fragPrevious=null,this.nextLoadPosition=Pt.start,this.state=lt.State.IDLE},bt.checkFragmentChanged=function(){var Pt=this.media,Dt=null;if(Pt&&Pt.readyState>1&&Pt.seeking===!1){var It=Pt.currentTime;if(wt.BufferHelper.isBuffered(Pt,It)?Dt=this.getAppendedFrag(It):wt.BufferHelper.isBuffered(Pt,It+.1)&&(Dt=this.getAppendedFrag(It+.1)),Dt){this.backtrackFragment=null;var kt=this.fragPlaying,Lt=Dt.level;(!kt||Dt.sn!==kt.sn||kt.level!==Lt||Dt.urlId!==kt.urlId)&&(this.hls.trigger(ct.Events.FRAG_CHANGED,{frag:Dt}),(!kt||kt.level!==Lt)&&this.hls.trigger(ct.Events.LEVEL_SWITCHED,{level:Lt}),this.fragPlaying=Dt)}}},pt(_t,[{key:"nextLevel",get:function(){var Pt=this.nextBufferedFrag;return Pt?Pt.level:-1}},{key:"currentFrag",get:function(){var Pt=this.media;return Pt?this.fragPlaying||this.getAppendedFrag(Pt.currentTime):null}},{key:"currentProgramDateTime",get:function(){var Pt=this.media;if(Pt){var Dt=Pt.currentTime,It=this.currentFrag;if(It&&(0,st.isFiniteNumber)(Dt)&&(0,st.isFiniteNumber)(It.programDateTime)){var kt=It.programDateTime+(Dt-It.start)*1e3;return new Date(kt)}}return null}},{key:"currentLevel",get:function(){var Pt=this.currentFrag;return Pt?Pt.level:-1}},{key:"nextBufferedFrag",get:function(){var Pt=this.currentFrag;return Pt?this.followingBufferedFrag(Pt):null}},{key:"forceStartLoad",get:function(){return this._forceStartLoad}}]),_t}(lt.default)},"./src/controller/subtitle-stream-controller.ts":(at,it,ot)=>{ot.r(it),ot.d(it,{SubtitleStreamController:()=>dt});var st=ot("./src/events.ts"),lt=ot("./src/utils/buffer-helper.ts"),gt=ot("./src/controller/fragment-finders.ts"),ct=ot("./src/utils/discontinuities.ts"),wt=ot("./src/controller/level-helper.ts"),Tt=ot("./src/controller/fragment-tracker.ts"),Rt=ot("./src/controller/base-stream-controller.ts"),ht=ot("./src/types/loader.ts"),ut=ot("./src/types/level.ts");function ft(St,Et){for(var mt=0;mt<Et.length;mt++){var _t=Et[mt];_t.enumerable=_t.enumerable||!1,_t.configurable=!0,"value"in _t&&(_t.writable=!0),Object.defineProperty(St,_t.key,_t)}}function yt(St,Et,mt){return Et&&ft(St.prototype,Et),mt&&ft(St,mt),Object.defineProperty(St,"prototype",{writable:!1}),St}function xt(St,Et){St.prototype=Object.create(Et.prototype),St.prototype.constructor=St,Ct(St,Et)}function Ct(St,Et){return Ct=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(_t,bt){return _t.__proto__=bt,_t},Ct(St,Et)}var pt=500,dt=function(St){xt(Et,St);function Et(_t,bt){var Ot;return Ot=St.call(this,_t,bt,"[subtitle-stream-controller]")||this,Ot.levels=[],Ot.currentTrackId=-1,Ot.tracksBuffered=[],Ot.mainDetails=null,Ot._registerListeners(),Ot}var mt=Et.prototype;return mt.onHandlerDestroying=function(){this._unregisterListeners(),this.mainDetails=null},mt._registerListeners=function(){var bt=this.hls;bt.on(st.Events.MEDIA_ATTACHED,this.onMediaAttached,this),bt.on(st.Events.MEDIA_DETACHING,this.onMediaDetaching,this),bt.on(st.Events.MANIFEST_LOADING,this.onManifestLoading,this),bt.on(st.Events.LEVEL_LOADED,this.onLevelLoaded,this),bt.on(st.Events.ERROR,this.onError,this),bt.on(st.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),bt.on(st.Events.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),bt.on(st.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),bt.on(st.Events.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),bt.on(st.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),bt.on(st.Events.FRAG_BUFFERED,this.onFragBuffered,this)},mt._unregisterListeners=function(){var bt=this.hls;bt.off(st.Events.MEDIA_ATTACHED,this.onMediaAttached,this),bt.off(st.Events.MEDIA_DETACHING,this.onMediaDetaching,this),bt.off(st.Events.MANIFEST_LOADING,this.onManifestLoading,this),bt.off(st.Events.LEVEL_LOADED,this.onLevelLoaded,this),bt.off(st.Events.ERROR,this.onError,this),bt.off(st.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),bt.off(st.Events.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),bt.off(st.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),bt.off(st.Events.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),bt.off(st.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),bt.off(st.Events.FRAG_BUFFERED,this.onFragBuffered,this)},mt.startLoad=function(bt){this.stopLoad(),this.state=Rt.State.IDLE,this.setInterval(pt),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=bt,this.tick()},mt.onManifestLoading=function(){this.mainDetails=null,this.fragmentTracker.removeAllFragments()},mt.onLevelLoaded=function(bt,Ot){this.mainDetails=Ot.details},mt.onSubtitleFragProcessed=function(bt,Ot){var Pt=Ot.frag,Dt=Ot.success;if(this.fragPrevious=Pt,this.state=Rt.State.IDLE,!!Dt){var It=this.tracksBuffered[this.currentTrackId];if(!!It){for(var kt,Lt=Pt.start,At=0;At<It.length;At++)if(Lt>=It[At].start&&Lt<=It[At].end){kt=It[At];break}var $t=Pt.start+Pt.duration;kt?kt.end=$t:(kt={start:Lt,end:$t},It.push(kt)),this.fragmentTracker.fragBuffered(Pt)}}},mt.onBufferFlushing=function(bt,Ot){var Pt=Ot.startOffset,Dt=Ot.endOffset;if(Pt===0&&Dt!==Number.POSITIVE_INFINITY){var It=this.currentTrackId,kt=this.levels;if(!kt.length||!kt[It]||!kt[It].details)return;var Lt=kt[It].details,At=Lt.targetduration,$t=Dt-At;if($t<=0)return;Ot.endOffsetSubtitles=Math.max(0,$t),this.tracksBuffered.forEach(function(jt){for(var Nt=0;Nt<jt.length;){if(jt[Nt].end<=$t){jt.shift();continue}else if(jt[Nt].start<$t)jt[Nt].start=$t;else break;Nt++}}),this.fragmentTracker.removeFragmentsInRange(Pt,$t,ht.PlaylistLevelType.SUBTITLE)}},mt.onFragBuffered=function(bt,Ot){if(!this.loadedmetadata&&Ot.frag.type===ht.PlaylistLevelType.MAIN){var Pt;(Pt=this.media)!==null&&Pt!==void 0&&Pt.buffered.length&&(this.loadedmetadata=!0)}},mt.onError=function(bt,Ot){var Pt,Dt=Ot.frag;!Dt||Dt.type!==ht.PlaylistLevelType.SUBTITLE||((Pt=this.fragCurrent)!==null&&Pt!==void 0&&Pt.loader&&this.fragCurrent.loader.abort(),this.state=Rt.State.IDLE)},mt.onSubtitleTracksUpdated=function(bt,Ot){var Pt=this,Dt=Ot.subtitleTracks;this.tracksBuffered=[],this.levels=Dt.map(function(It){return new ut.Level(It)}),this.fragmentTracker.removeAllFragments(),this.fragPrevious=null,this.levels.forEach(function(It){Pt.tracksBuffered[It.id]=[]}),this.mediaBuffer=null},mt.onSubtitleTrackSwitch=function(bt,Ot){if(this.currentTrackId=Ot.id,!this.levels.length||this.currentTrackId===-1){this.clearInterval();return}var Pt=this.levels[this.currentTrackId];Pt!=null&&Pt.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,Pt&&this.setInterval(pt)},mt.onSubtitleTrackLoaded=function(bt,Ot){var Pt,Dt=Ot.details,It=Ot.id,kt=this.currentTrackId,Lt=this.levels;if(!!Lt.length){var At=Lt[kt];if(!(It>=Lt.length||It!==kt||!At)){this.mediaBuffer=this.mediaBufferTimeRanges;var $t=0;if(Dt.live||(Pt=At.details)!==null&&Pt!==void 0&&Pt.live){var jt=this.mainDetails;if(Dt.deltaUpdateFailed||!jt)return;var Nt=jt.fragments[0];At.details?($t=this.alignPlaylists(Dt,At.details),$t===0&&Nt&&($t=Nt.start,(0,wt.addSliding)(Dt,$t))):Dt.hasProgramDateTime&&jt.hasProgramDateTime?((0,ct.alignMediaPlaylistByPDT)(Dt,jt),$t=Dt.fragments[0].start):Nt&&($t=Nt.start,(0,wt.addSliding)(Dt,$t))}if(At.details=Dt,this.levelLastLoaded=It,!this.startFragRequested&&(this.mainDetails||!Dt.live)&&this.setStartPosition(At.details,$t),this.tick(),Dt.live&&!this.fragCurrent&&this.media&&this.state===Rt.State.IDLE){var Ft=(0,gt.findFragmentByPTS)(null,Dt.fragments,this.media.currentTime,0);Ft||(this.warn("Subtitle playlist not aligned with playback"),At.details=void 0)}}}},mt._handleFragmentLoadComplete=function(bt){var Ot=bt.frag,Pt=bt.payload,Dt=Ot.decryptdata,It=this.hls;if(!this.fragContextChanged(Ot)&&Pt&&Pt.byteLength>0&&Dt&&Dt.key&&Dt.iv&&Dt.method==="AES-128"){var kt=performance.now();this.decrypter.webCryptoDecrypt(new Uint8Array(Pt),Dt.key.buffer,Dt.iv.buffer).then(function(Lt){var At=performance.now();It.trigger(st.Events.FRAG_DECRYPTED,{frag:Ot,payload:Lt,stats:{tstart:kt,tdecrypt:At}})})}},mt.doTick=function(){if(!this.media){this.state=Rt.State.IDLE;return}if(this.state===Rt.State.IDLE){var bt=this.currentTrackId,Ot=this.levels;if(!Ot.length||!Ot[bt]||!Ot[bt].details)return;var Pt=Ot[bt].details,Dt=Pt.targetduration,It=this.config,kt=this.getLoadPosition(),Lt=lt.BufferHelper.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],kt-Dt,It.maxBufferHole),At=Lt.end,$t=Lt.len,jt=this.getFwdBufferInfo(this.media,ht.PlaylistLevelType.MAIN),Nt=this.getMaxBufferLength(jt==null?void 0:jt.len)+Dt;if($t>Nt)return;console.assert(Pt,"Subtitle track details are defined on idle subtitle stream controller tick");var Ft=Pt.fragments,Bt=Ft.length,Ut=Pt.edge,Ht,Kt=this.fragPrevious;if(At<Ut){var Gt=It.maxFragLookUpTolerance;Ht=(0,gt.findFragmentByPTS)(Kt,Ft,Math.max(Ft[0].start,At),Gt),!Ht&&Kt&&Kt.start<Ft[0].start&&(Ht=Ft[0])}else Ht=Ft[Bt-1];if(Ht=this.mapToInitFragWhenRequired(Ht),!Ht||this.fragmentTracker.getState(Ht)!==Tt.FragmentState.NOT_LOADED)return;Ht.encrypted?this.loadKey(Ht,Pt):this.loadFragment(Ht,Pt,At)}},mt.getMaxBufferLength=function(bt){var Ot=St.prototype.getMaxBufferLength.call(this);return bt?Math.max(Ot,bt):Ot},mt.loadFragment=function(bt,Ot,Pt){this.fragCurrent=bt,bt.sn==="initSegment"?this._loadInitSegment(bt):(this.startFragRequested=!0,St.prototype.loadFragment.call(this,bt,Ot,Pt))},yt(Et,[{key:"mediaBufferTimeRanges",get:function(){return new vt(this.tracksBuffered[this.currentTrackId]||[])}}]),Et}(Rt.default),vt=function(Et){this.buffered=void 0;var mt=function(bt,Ot,Pt){if(Ot=Ot>>>0,Ot>Pt-1)throw new DOMException("Failed to execute '"+bt+"' on 'TimeRanges': The index provided ("+Ot+") is greater than the maximum bound ("+Pt+")");return Et[Ot][bt]};this.buffered={get length(){return Et.length},end:function(bt){return mt("end",bt,Et.length)},start:function(bt){return mt("start",bt,Et.length)}}}},"./src/controller/subtitle-track-controller.ts":(at,it,ot)=>{ot.r(it),ot.d(it,{default:()=>yt});var st=ot("./src/events.ts"),lt=ot("./src/utils/texttrack-utils.ts"),gt=ot("./src/controller/base-playlist-controller.ts"),ct=ot("./src/types/loader.ts");function wt(xt,Ct){for(var pt=0;pt<Ct.length;pt++){var dt=Ct[pt];dt.enumerable=dt.enumerable||!1,dt.configurable=!0,"value"in dt&&(dt.writable=!0),Object.defineProperty(xt,dt.key,dt)}}function Tt(xt,Ct,pt){return Ct&&wt(xt.prototype,Ct),pt&&wt(xt,pt),Object.defineProperty(xt,"prototype",{writable:!1}),xt}function Rt(xt,Ct){xt.prototype=Object.create(Ct.prototype),xt.prototype.constructor=xt,ht(xt,Ct)}function ht(xt,Ct){return ht=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(dt,vt){return dt.__proto__=vt,dt},ht(xt,Ct)}var ut=function(xt){Rt(Ct,xt);function Ct(dt){var vt;return vt=xt.call(this,dt,"[subtitle-track-controller]")||this,vt.media=null,vt.tracks=[],vt.groupId=null,vt.tracksInGroup=[],vt.trackId=-1,vt.selectDefaultTrack=!0,vt.queuedDefaultTrack=-1,vt.trackChangeListener=function(){return vt.onTextTracksChanged()},vt.asyncPollTrackChange=function(){return vt.pollTrackChange(0)},vt.useTextTrackPolling=!1,vt.subtitlePollingInterval=-1,vt._subtitleDisplay=!0,vt.registerListeners(),vt}var pt=Ct.prototype;return pt.destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.trackChangeListener=this.asyncPollTrackChange=null,xt.prototype.destroy.call(this)},pt.registerListeners=function(){var vt=this.hls;vt.on(st.Events.MEDIA_ATTACHED,this.onMediaAttached,this),vt.on(st.Events.MEDIA_DETACHING,this.onMediaDetaching,this),vt.on(st.Events.MANIFEST_LOADING,this.onManifestLoading,this),vt.on(st.Events.MANIFEST_PARSED,this.onManifestParsed,this),vt.on(st.Events.LEVEL_LOADING,this.onLevelLoading,this),vt.on(st.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),vt.on(st.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),vt.on(st.Events.ERROR,this.onError,this)},pt.unregisterListeners=function(){var vt=this.hls;vt.off(st.Events.MEDIA_ATTACHED,this.onMediaAttached,this),vt.off(st.Events.MEDIA_DETACHING,this.onMediaDetaching,this),vt.off(st.Events.MANIFEST_LOADING,this.onManifestLoading,this),vt.off(st.Events.MANIFEST_PARSED,this.onManifestParsed,this),vt.off(st.Events.LEVEL_LOADING,this.onLevelLoading,this),vt.off(st.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),vt.off(st.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),vt.off(st.Events.ERROR,this.onError,this)},pt.onMediaAttached=function(vt,St){this.media=St.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))},pt.pollTrackChange=function(vt){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.trackChangeListener,vt)},pt.onMediaDetaching=function(){if(!!this.media){self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||this.media.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId);var vt=ft(this.media.textTracks);vt.forEach(function(St){(0,lt.clearCurrentCues)(St)}),this.subtitleTrack=-1,this.media=null}},pt.onManifestLoading=function(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.selectDefaultTrack=!0},pt.onManifestParsed=function(vt,St){this.tracks=St.subtitleTracks},pt.onSubtitleTrackLoaded=function(vt,St){var Et=St.id,mt=St.details,_t=this.trackId,bt=this.tracksInGroup[_t];if(!bt){this.warn("Invalid subtitle track id "+Et);return}var Ot=bt.details;bt.details=St.details,this.log("subtitle track "+Et+" loaded ["+mt.startSN+"-"+mt.endSN+"]"),Et===this.trackId&&(this.retryCount=0,this.playlistLoaded(Et,St,Ot))},pt.onLevelLoading=function(vt,St){this.switchLevel(St.level)},pt.onLevelSwitching=function(vt,St){this.switchLevel(St.level)},pt.switchLevel=function(vt){var St=this.hls.levels[vt];if(!!(St!=null&&St.textGroupIds)){var Et=St.textGroupIds[St.urlId];if(this.groupId!==Et){var mt=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0,_t=this.tracks.filter(function(Pt){return!Et||Pt.groupId===Et});this.tracksInGroup=_t;var bt=this.findTrackId(mt==null?void 0:mt.name)||this.findTrackId();this.groupId=Et;var Ot={subtitleTracks:_t};this.log("Updating subtitle tracks, "+_t.length+' track(s) found in "'+Et+'" group-id'),this.hls.trigger(st.Events.SUBTITLE_TRACKS_UPDATED,Ot),bt!==-1&&this.setSubtitleTrack(bt,mt)}}},pt.findTrackId=function(vt){for(var St=this.tracksInGroup,Et=0;Et<St.length;Et++){var mt=St[Et];if((!this.selectDefaultTrack||mt.default)&&(!vt||vt===mt.name))return mt.id}return-1},pt.onError=function(vt,St){xt.prototype.onError.call(this,vt,St),!(St.fatal||!St.context)&&St.context.type===ct.PlaylistContextType.SUBTITLE_TRACK&&St.context.id===this.trackId&&St.context.groupId===this.groupId&&this.retryLoadingOrFail(St)},pt.loadPlaylist=function(vt){var St=this.tracksInGroup[this.trackId];if(this.shouldLoadTrack(St)){var Et=St.id,mt=St.groupId,_t=St.url;if(vt)try{_t=vt.addDirectives(_t)}catch(bt){this.warn("Could not construct new URL with HLS Delivery Directives: "+bt)}this.log("Loading subtitle playlist for id "+Et),this.hls.trigger(st.Events.SUBTITLE_TRACK_LOADING,{url:_t,id:Et,groupId:mt,deliveryDirectives:vt||null})}},pt.toggleTrackModes=function(vt){var St=this,Et=this.media,mt=this.trackId;if(!!Et){var _t=ft(Et.textTracks),bt=_t.filter(function(Dt){return Dt.groupId===St.groupId});if(vt===-1)[].slice.call(_t).forEach(function(Dt){Dt.mode="disabled"});else{var Ot=bt[mt];Ot&&(Ot.mode="disabled")}var Pt=bt[vt];Pt&&(Pt.mode=this.subtitleDisplay?"showing":"hidden")}},pt.setSubtitleTrack=function(vt,St){var Et,mt=this.tracksInGroup;if(!this.media){this.queuedDefaultTrack=vt;return}if(this.trackId!==vt&&this.toggleTrackModes(vt),!(this.trackId===vt&&(vt===-1||(Et=mt[vt])!==null&&Et!==void 0&&Et.details)||vt<-1||vt>=mt.length)){this.clearTimer();var _t=mt[vt];if(this.log("Switching to subtitle track "+vt),this.trackId=vt,_t){var bt=_t.id,Ot=_t.groupId,Pt=Ot===void 0?"":Ot,Dt=_t.name,It=_t.type,kt=_t.url;this.hls.trigger(st.Events.SUBTITLE_TRACK_SWITCH,{id:bt,groupId:Pt,name:Dt,type:It,url:kt});var Lt=this.switchParams(_t.url,St==null?void 0:St.details);this.loadPlaylist(Lt)}else this.hls.trigger(st.Events.SUBTITLE_TRACK_SWITCH,{id:vt})}},pt.onTextTracksChanged=function(){if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),!(!this.media||!this.hls.config.renderTextTracksNatively)){for(var vt=-1,St=ft(this.media.textTracks),Et=0;Et<St.length;Et++)if(St[Et].mode==="hidden")vt=Et;else if(St[Et].mode==="showing"){vt=Et;break}this.subtitleTrack!==vt&&(this.subtitleTrack=vt)}},Tt(Ct,[{key:"subtitleDisplay",get:function(){return this._subtitleDisplay},set:function(vt){this._subtitleDisplay=vt,this.trackId>-1&&this.toggleTrackModes(this.trackId)}},{key:"subtitleTracks",get:function(){return this.tracksInGroup}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(vt){this.selectDefaultTrack=!1;var St=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0;this.setSubtitleTrack(vt,St)}}]),Ct}(gt.default);function ft(xt){for(var Ct=[],pt=0;pt<xt.length;pt++){var dt=xt[pt];dt.kind==="subtitles"&&dt.label&&Ct.push(xt[pt])}return Ct}const yt=ut},"./src/controller/timeline-controller.ts":(at,it,ot)=>{ot.r(it),ot.d(it,{TimelineController:()=>yt});var st=ot("./src/polyfills/number.ts"),lt=ot("./src/events.ts"),gt=ot("./src/utils/cea-608-parser.ts"),ct=ot("./src/utils/output-filter.ts"),wt=ot("./src/utils/webvtt-parser.ts"),Tt=ot("./src/utils/texttrack-utils.ts"),Rt=ot("./src/utils/imsc1-ttml-parser.ts"),ht=ot("./src/utils/mp4-tools.ts"),ut=ot("./src/types/loader.ts"),ft=ot("./src/utils/logger.ts"),yt=function(){function dt(St){if(this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.timescale=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=pt(),this.captionsProperties=void 0,this.hls=St,this.config=St.config,this.Cues=St.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},this.config.enableCEA708Captions){var Et=new ct.default(this,"textTrack1"),mt=new ct.default(this,"textTrack2"),_t=new ct.default(this,"textTrack3"),bt=new ct.default(this,"textTrack4");this.cea608Parser1=new gt.default(1,Et,mt),this.cea608Parser2=new gt.default(3,_t,bt)}St.on(lt.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),St.on(lt.Events.MEDIA_DETACHING,this.onMediaDetaching,this),St.on(lt.Events.MANIFEST_LOADING,this.onManifestLoading,this),St.on(lt.Events.MANIFEST_LOADED,this.onManifestLoaded,this),St.on(lt.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),St.on(lt.Events.FRAG_LOADING,this.onFragLoading,this),St.on(lt.Events.FRAG_LOADED,this.onFragLoaded,this),St.on(lt.Events.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),St.on(lt.Events.FRAG_DECRYPTED,this.onFragDecrypted,this),St.on(lt.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),St.on(lt.Events.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),St.on(lt.Events.BUFFER_FLUSHING,this.onBufferFlushing,this)}var vt=dt.prototype;return vt.destroy=function(){var Et=this.hls;Et.off(lt.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),Et.off(lt.Events.MEDIA_DETACHING,this.onMediaDetaching,this),Et.off(lt.Events.MANIFEST_LOADING,this.onManifestLoading,this),Et.off(lt.Events.MANIFEST_LOADED,this.onManifestLoaded,this),Et.off(lt.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),Et.off(lt.Events.FRAG_LOADING,this.onFragLoading,this),Et.off(lt.Events.FRAG_LOADED,this.onFragLoaded,this),Et.off(lt.Events.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),Et.off(lt.Events.FRAG_DECRYPTED,this.onFragDecrypted,this),Et.off(lt.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),Et.off(lt.Events.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),Et.off(lt.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.cea608Parser1=this.cea608Parser2=null},vt.addCues=function(Et,mt,_t,bt,Ot){for(var Pt=!1,Dt=Ot.length;Dt--;){var It=Ot[Dt],kt=Ct(It[0],It[1],mt,_t);if(kt>=0&&(It[0]=Math.min(It[0],mt),It[1]=Math.max(It[1],_t),Pt=!0,kt/(_t-mt)>.5))return}if(Pt||Ot.push([mt,_t]),this.config.renderTextTracksNatively){var Lt=this.captionsTracks[Et];this.Cues.newCue(Lt,mt,_t,bt)}else{var At=this.Cues.newCue(null,mt,_t,bt);this.hls.trigger(lt.Events.CUES_PARSED,{type:"captions",cues:At,track:Et})}},vt.onInitPtsFound=function(Et,mt){var _t=this,bt=mt.frag,Ot=mt.id,Pt=mt.initPTS,Dt=mt.timescale,It=this.unparsedVttFrags;Ot==="main"&&(this.initPTS[bt.cc]=Pt,this.timescale[bt.cc]=Dt),It.length&&(this.unparsedVttFrags=[],It.forEach(function(kt){_t.onFragLoaded(lt.Events.FRAG_LOADED,kt)}))},vt.getExistingTrack=function(Et){var mt=this.media;if(mt)for(var _t=0;_t<mt.textTracks.length;_t++){var bt=mt.textTracks[_t];if(bt[Et])return bt}return null},vt.createCaptionsTrack=function(Et){this.config.renderTextTracksNatively?this.createNativeTrack(Et):this.createNonNativeTrack(Et)},vt.createNativeTrack=function(Et){if(!this.captionsTracks[Et]){var mt=this.captionsProperties,_t=this.captionsTracks,bt=this.media,Ot=mt[Et],Pt=Ot.label,Dt=Ot.languageCode,It=this.getExistingTrack(Et);if(It)_t[Et]=It,(0,Tt.clearCurrentCues)(_t[Et]),(0,Tt.sendAddTrackEvent)(_t[Et],bt);else{var kt=this.createTextTrack("captions",Pt,Dt);kt&&(kt[Et]=!0,_t[Et]=kt)}}},vt.createNonNativeTrack=function(Et){if(!this.nonNativeCaptionsTracks[Et]){var mt=this.captionsProperties[Et];if(!!mt){var _t=mt.label,bt={_id:Et,label:_t,kind:"captions",default:mt.media?!!mt.media.default:!1,closedCaptions:mt.media};this.nonNativeCaptionsTracks[Et]=bt,this.hls.trigger(lt.Events.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[bt]})}}},vt.createTextTrack=function(Et,mt,_t){var bt=this.media;if(!!bt)return bt.addTextTrack(Et,mt,_t)},vt.onMediaAttaching=function(Et,mt){this.media=mt.media,this._cleanTracks()},vt.onMediaDetaching=function(){var Et=this.captionsTracks;Object.keys(Et).forEach(function(mt){(0,Tt.clearCurrentCues)(Et[mt]),delete Et[mt]}),this.nonNativeCaptionsTracks={}},vt.onManifestLoading=function(){this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=pt(),this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=[],this.timescale=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())},vt._cleanTracks=function(){var Et=this.media;if(!!Et){var mt=Et.textTracks;if(mt)for(var _t=0;_t<mt.length;_t++)(0,Tt.clearCurrentCues)(mt[_t])}},vt.onSubtitleTracksUpdated=function(Et,mt){var _t=this;this.textTracks=[];var bt=mt.subtitleTracks||[],Ot=bt.some(function(kt){return kt.textCodec===Rt.IMSC1_CODEC});if(this.config.enableWebVTT||Ot&&this.config.enableIMSC1){var Pt=this.tracks&&bt&&this.tracks.length===bt.length;if(this.tracks=bt||[],this.config.renderTextTracksNatively){var Dt=this.media?this.media.textTracks:[];this.tracks.forEach(function(kt,Lt){var At;if(Lt<Dt.length){for(var $t=null,jt=0;jt<Dt.length;jt++)if(xt(Dt[jt],kt)){$t=Dt[jt];break}$t&&(At=$t)}if(At)(0,Tt.clearCurrentCues)(At);else{var Nt=_t._captionsOrSubtitlesFromCharacteristics(kt);At=_t.createTextTrack(Nt,kt.name,kt.lang),At&&(At.mode="disabled")}At&&(At.groupId=kt.groupId,_t.textTracks.push(At))})}else if(!Pt&&this.tracks&&this.tracks.length){var It=this.tracks.map(function(kt){return{label:kt.name,kind:kt.type.toLowerCase(),default:kt.default,subtitleTrack:kt}});this.hls.trigger(lt.Events.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:It})}}},vt._captionsOrSubtitlesFromCharacteristics=function(Et){var mt;if((mt=Et.attrs)!==null&&mt!==void 0&&mt.CHARACTERISTICS){var _t=/transcribes-spoken-dialog/gi.test(Et.attrs.CHARACTERISTICS),bt=/describes-music-and-sound/gi.test(Et.attrs.CHARACTERISTICS);if(_t&&bt)return"captions"}return"subtitles"},vt.onManifestLoaded=function(Et,mt){var _t=this;this.config.enableCEA708Captions&&mt.captions&&mt.captions.forEach(function(bt){var Ot=/(?:CC|SERVICE)([1-4])/.exec(bt.instreamId);if(!!Ot){var Pt="textTrack"+Ot[1],Dt=_t.captionsProperties[Pt];!Dt||(Dt.label=bt.name,bt.lang&&(Dt.languageCode=bt.lang),Dt.media=bt)}})},vt.closedCaptionsForLevel=function(Et){var mt=this.hls.levels[Et.level];return mt==null?void 0:mt.attrs["CLOSED-CAPTIONS"]},vt.onFragLoading=function(Et,mt){var _t=this.cea608Parser1,bt=this.cea608Parser2,Ot=this.lastSn,Pt=this.lastPartIndex;if(!(!this.enabled||!(_t&&bt))&&mt.frag.type===ut.PlaylistLevelType.MAIN){var Dt,It,kt=mt.frag.sn,Lt=(Dt=mt==null||(It=mt.part)===null||It===void 0?void 0:It.index)!=null?Dt:-1;kt===Ot+1||kt===Ot&&Lt===Pt+1||(_t.reset(),bt.reset()),this.lastSn=kt,this.lastPartIndex=Lt}},vt.onFragLoaded=function(Et,mt){var _t=mt.frag,bt=mt.payload,Ot=this.initPTS,Pt=this.unparsedVttFrags;if(_t.type===ut.PlaylistLevelType.SUBTITLE)if(bt.byteLength){if(!(0,st.isFiniteNumber)(Ot[_t.cc])){Pt.push(mt),Ot.length&&this.hls.trigger(lt.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:_t,error:new Error("Missing initial subtitle PTS")});return}var Dt=_t.decryptdata,It="stats"in mt;if(Dt==null||Dt.key==null||Dt.method!=="AES-128"||It){var kt=this.tracks[_t.level],Lt=this.vttCCs;Lt[_t.cc]||(Lt[_t.cc]={start:_t.start,prevCC:this.prevCC,new:!0},this.prevCC=_t.cc),kt&&kt.textCodec===Rt.IMSC1_CODEC?this._parseIMSC1(_t,bt):this._parseVTTs(_t,bt,Lt)}}else this.hls.trigger(lt.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:_t,error:new Error("Empty subtitle payload")})},vt._parseIMSC1=function(Et,mt){var _t=this,bt=this.hls;(0,Rt.parseIMSC1)(mt,this.initPTS[Et.cc],this.timescale[Et.cc],function(Ot){_t._appendCues(Ot,Et.level),bt.trigger(lt.Events.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:Et})},function(Ot){ft.logger.log("Failed to parse IMSC1: "+Ot),bt.trigger(lt.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:Et,error:Ot})})},vt._parseVTTs=function(Et,mt,_t){var bt,Ot=this,Pt=this.hls,Dt=(bt=Et.initSegment)!==null&&bt!==void 0&&bt.data?(0,ht.appendUint8Array)(Et.initSegment.data,new Uint8Array(mt)):mt;(0,wt.parseWebVTT)(Dt,this.initPTS[Et.cc],this.timescale[Et.cc],_t,Et.cc,Et.start,function(It){Ot._appendCues(It,Et.level),Pt.trigger(lt.Events.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:Et})},function(It){Ot._fallbackToIMSC1(Et,mt),ft.logger.log("Failed to parse VTT cue: "+It),Pt.trigger(lt.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:Et,error:It})})},vt._fallbackToIMSC1=function(Et,mt){var _t=this,bt=this.tracks[Et.level];bt.textCodec||(0,Rt.parseIMSC1)(mt,this.initPTS[Et.cc],this.timescale[Et.cc],function(){bt.textCodec=Rt.IMSC1_CODEC,_t._parseIMSC1(Et,mt)},function(){bt.textCodec="wvtt"})},vt._appendCues=function(Et,mt){var _t=this.hls;if(this.config.renderTextTracksNatively){var bt=this.textTracks[mt];if(!bt||bt.mode==="disabled")return;Et.forEach(function(Dt){return(0,Tt.addCueToTrack)(bt,Dt)})}else{var Ot=this.tracks[mt];if(!Ot)return;var Pt=Ot.default?"default":"subtitles"+mt;_t.trigger(lt.Events.CUES_PARSED,{type:"subtitles",cues:Et,track:Pt})}},vt.onFragDecrypted=function(Et,mt){var _t=mt.frag;if(_t.type===ut.PlaylistLevelType.SUBTITLE){if(!(0,st.isFiniteNumber)(this.initPTS[_t.cc])){this.unparsedVttFrags.push(mt);return}this.onFragLoaded(lt.Events.FRAG_LOADED,mt)}},vt.onSubtitleTracksCleared=function(){this.tracks=[],this.captionsTracks={}},vt.onFragParsingUserdata=function(Et,mt){var _t=this.cea608Parser1,bt=this.cea608Parser2;if(!(!this.enabled||!(_t&&bt))){var Ot=mt.frag,Pt=mt.samples;if(!(Ot.type===ut.PlaylistLevelType.MAIN&&this.closedCaptionsForLevel(Ot)==="NONE"))for(var Dt=0;Dt<Pt.length;Dt++){var It=Pt[Dt].bytes;if(It){var kt=this.extractCea608Data(It);_t.addData(Pt[Dt].pts,kt[0]),bt.addData(Pt[Dt].pts,kt[1])}}}},vt.onBufferFlushing=function(Et,mt){var _t=mt.startOffset,bt=mt.endOffset,Ot=mt.endOffsetSubtitles,Pt=mt.type,Dt=this.media;if(!(!Dt||Dt.currentTime<bt)){if(!Pt||Pt==="video"){var It=this.captionsTracks;Object.keys(It).forEach(function(Lt){return(0,Tt.removeCuesInRange)(It[Lt],_t,bt)})}if(this.config.renderTextTracksNatively&&_t===0&&Ot!==void 0){var kt=this.textTracks;Object.keys(kt).forEach(function(Lt){return(0,Tt.removeCuesInRange)(kt[Lt],_t,Ot)})}}},vt.extractCea608Data=function(Et){for(var mt=[[],[]],_t=Et[0]&31,bt=2,Ot=0;Ot<_t;Ot++){var Pt=Et[bt++],Dt=127&Et[bt++],It=127&Et[bt++];if(!(Dt===0&&It===0)){var kt=(4&Pt)!==0;if(kt){var Lt=3&Pt;(Lt===0||Lt===1)&&(mt[Lt].push(Dt),mt[Lt].push(It))}}}return mt},dt}();function xt(dt,vt){return dt&&dt.label===vt.name&&!(dt.textTrack1||dt.textTrack2)}function Ct(dt,vt,St,Et){return Math.min(vt,Et)-Math.max(dt,St)}function pt(){return{ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}}}},"./src/crypt/aes-crypto.ts":(at,it,ot)=>{ot.r(it),ot.d(it,{default:()=>st});var st=function(){function lt(ct,wt){this.subtle=void 0,this.aesIV=void 0,this.subtle=ct,this.aesIV=wt}var gt=lt.prototype;return gt.decrypt=function(wt,Tt){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},Tt,wt)},lt}()},"./src/crypt/aes-decryptor.ts":(at,it,ot)=>{ot.r(it),ot.d(it,{default:()=>gt,removePadding:()=>lt});var st=ot("./src/utils/typed-array.ts");function lt(ct){var wt=ct.byteLength,Tt=wt&&new DataView(ct.buffer).getUint8(wt-1);return Tt?(0,st.sliceUint8)(ct,0,wt-Tt):ct}var gt=function(){function ct(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}var wt=ct.prototype;return wt.uint8ArrayToUint32Array_=function(Rt){for(var ht=new DataView(Rt),ut=new Uint32Array(4),ft=0;ft<4;ft++)ut[ft]=ht.getUint32(ft*4);return ut},wt.initTable=function(){var Rt=this.sBox,ht=this.invSBox,ut=this.subMix,ft=ut[0],yt=ut[1],xt=ut[2],Ct=ut[3],pt=this.invSubMix,dt=pt[0],vt=pt[1],St=pt[2],Et=pt[3],mt=new Uint32Array(256),_t=0,bt=0,Ot=0;for(Ot=0;Ot<256;Ot++)Ot<128?mt[Ot]=Ot<<1:mt[Ot]=Ot<<1^283;for(Ot=0;Ot<256;Ot++){var Pt=bt^bt<<1^bt<<2^bt<<3^bt<<4;Pt=Pt>>>8^Pt&255^99,Rt[_t]=Pt,ht[Pt]=_t;var Dt=mt[_t],It=mt[Dt],kt=mt[It],Lt=mt[Pt]*257^Pt*16843008;ft[_t]=Lt<<24|Lt>>>8,yt[_t]=Lt<<16|Lt>>>16,xt[_t]=Lt<<8|Lt>>>24,Ct[_t]=Lt,Lt=kt*16843009^It*65537^Dt*257^_t*16843008,dt[Pt]=Lt<<24|Lt>>>8,vt[Pt]=Lt<<16|Lt>>>16,St[Pt]=Lt<<8|Lt>>>24,Et[Pt]=Lt,_t?(_t=Dt^mt[mt[mt[kt^Dt]]],bt^=mt[mt[bt]]):_t=bt=1}},wt.expandKey=function(Rt){for(var ht=this.uint8ArrayToUint32Array_(Rt),ut=!0,ft=0;ft<ht.length&&ut;)ut=ht[ft]===this.key[ft],ft++;if(!ut){this.key=ht;var yt=this.keySize=ht.length;if(yt!==4&&yt!==6&&yt!==8)throw new Error("Invalid aes key size="+yt);var xt=this.ksRows=(yt+6+1)*4,Ct,pt,dt=this.keySchedule=new Uint32Array(xt),vt=this.invKeySchedule=new Uint32Array(xt),St=this.sBox,Et=this.rcon,mt=this.invSubMix,_t=mt[0],bt=mt[1],Ot=mt[2],Pt=mt[3],Dt,It;for(Ct=0;Ct<xt;Ct++){if(Ct<yt){Dt=dt[Ct]=ht[Ct];continue}It=Dt,Ct%yt===0?(It=It<<8|It>>>24,It=St[It>>>24]<<24|St[It>>>16&255]<<16|St[It>>>8&255]<<8|St[It&255],It^=Et[Ct/yt|0]<<24):yt>6&&Ct%yt===4&&(It=St[It>>>24]<<24|St[It>>>16&255]<<16|St[It>>>8&255]<<8|St[It&255]),dt[Ct]=Dt=(dt[Ct-yt]^It)>>>0}for(pt=0;pt<xt;pt++)Ct=xt-pt,pt&3?It=dt[Ct]:It=dt[Ct-4],pt<4||Ct<=4?vt[pt]=It:vt[pt]=_t[St[It>>>24]]^bt[St[It>>>16&255]]^Ot[St[It>>>8&255]]^Pt[St[It&255]],vt[pt]=vt[pt]>>>0}},wt.networkToHostOrderSwap=function(Rt){return Rt<<24|(Rt&65280)<<8|(Rt&16711680)>>8|Rt>>>24},wt.decrypt=function(Rt,ht,ut){for(var ft=this.keySize+6,yt=this.invKeySchedule,xt=this.invSBox,Ct=this.invSubMix,pt=Ct[0],dt=Ct[1],vt=Ct[2],St=Ct[3],Et=this.uint8ArrayToUint32Array_(ut),mt=Et[0],_t=Et[1],bt=Et[2],Ot=Et[3],Pt=new Int32Array(Rt),Dt=new Int32Array(Pt.length),It,kt,Lt,At,$t,jt,Nt,Ft,Bt,Ut,Ht,Kt,Gt,Wt,Vt=this.networkToHostOrderSwap;ht<Pt.length;){for(Bt=Vt(Pt[ht]),Ut=Vt(Pt[ht+1]),Ht=Vt(Pt[ht+2]),Kt=Vt(Pt[ht+3]),$t=Bt^yt[0],jt=Kt^yt[1],Nt=Ht^yt[2],Ft=Ut^yt[3],Gt=4,Wt=1;Wt<ft;Wt++)It=pt[$t>>>24]^dt[jt>>16&255]^vt[Nt>>8&255]^St[Ft&255]^yt[Gt],kt=pt[jt>>>24]^dt[Nt>>16&255]^vt[Ft>>8&255]^St[$t&255]^yt[Gt+1],Lt=pt[Nt>>>24]^dt[Ft>>16&255]^vt[$t>>8&255]^St[jt&255]^yt[Gt+2],At=pt[Ft>>>24]^dt[$t>>16&255]^vt[jt>>8&255]^St[Nt&255]^yt[Gt+3],$t=It,jt=kt,Nt=Lt,Ft=At,Gt=Gt+4;It=xt[$t>>>24]<<24^xt[jt>>16&255]<<16^xt[Nt>>8&255]<<8^xt[Ft&255]^yt[Gt],kt=xt[jt>>>24]<<24^xt[Nt>>16&255]<<16^xt[Ft>>8&255]<<8^xt[$t&255]^yt[Gt+1],Lt=xt[Nt>>>24]<<24^xt[Ft>>16&255]<<16^xt[$t>>8&255]<<8^xt[jt&255]^yt[Gt+2],At=xt[Ft>>>24]<<24^xt[$t>>16&255]<<16^xt[jt>>8&255]<<8^xt[Nt&255]^yt[Gt+3],Dt[ht]=Vt(It^mt),Dt[ht+1]=Vt(At^_t),Dt[ht+2]=Vt(Lt^bt),Dt[ht+3]=Vt(kt^Ot),mt=Bt,_t=Ut,bt=Ht,Ot=Kt,ht=ht+4}return Dt.buffer},ct}()},"./src/crypt/decrypter.ts":(at,it,ot)=>{ot.r(it),ot.d(it,{default:()=>ht});var st=ot("./src/crypt/aes-crypto.ts"),lt=ot("./src/crypt/fast-aes-key.ts"),gt=ot("./src/crypt/aes-decryptor.ts"),ct=ot("./src/utils/logger.ts"),wt=ot("./src/utils/mp4-tools.ts"),Tt=ot("./src/utils/typed-array.ts"),Rt=16,ht=function(){function ut(yt,xt,Ct){var pt=Ct===void 0?{}:Ct,dt=pt.removePKCS7Padding,vt=dt===void 0?!0:dt;if(this.logEnabled=!0,this.observer=void 0,this.config=void 0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.observer=yt,this.config=xt,this.removePKCS7Padding=vt,vt)try{var St=self.crypto;St&&(this.subtle=St.subtle||St.webkitSubtle)}catch{}this.subtle===null&&(this.config.enableSoftwareAES=!0)}var ft=ut.prototype;return ft.destroy=function(){this.observer=null},ft.isSync=function(){return this.config.enableSoftwareAES},ft.flush=function(){var xt=this.currentResult;if(!xt){this.reset();return}var Ct=new Uint8Array(xt);return this.reset(),this.removePKCS7Padding?(0,gt.removePadding)(Ct):Ct},ft.reset=function(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)},ft.decrypt=function(xt,Ct,pt,dt){if(this.config.enableSoftwareAES){this.softwareDecrypt(new Uint8Array(xt),Ct,pt);var vt=this.flush();vt&&dt(vt.buffer)}else this.webCryptoDecrypt(new Uint8Array(xt),Ct,pt).then(dt)},ft.softwareDecrypt=function(xt,Ct,pt){var dt=this.currentIV,vt=this.currentResult,St=this.remainderData;this.logOnce("JS AES decrypt"),St&&(xt=(0,wt.appendUint8Array)(St,xt),this.remainderData=null);var Et=this.getValidChunk(xt);if(!Et.length)return null;dt&&(pt=dt);var mt=this.softwareDecrypter;mt||(mt=this.softwareDecrypter=new gt.default),mt.expandKey(Ct);var _t=vt;return this.currentResult=mt.decrypt(Et.buffer,0,pt),this.currentIV=(0,Tt.sliceUint8)(Et,-16).buffer,_t||null},ft.webCryptoDecrypt=function(xt,Ct,pt){var dt=this,vt=this.subtle;return(this.key!==Ct||!this.fastAesKey)&&(this.key=Ct,this.fastAesKey=new lt.default(vt,Ct)),this.fastAesKey.expandKey().then(function(St){if(!vt)return Promise.reject(new Error("web crypto not initialized"));var Et=new st.default(vt,pt);return Et.decrypt(xt.buffer,St)}).catch(function(St){return dt.onWebCryptoError(St,xt,Ct,pt)})},ft.onWebCryptoError=function(xt,Ct,pt,dt){return ct.logger.warn("[decrypter.ts]: WebCrypto Error, disable WebCrypto API:",xt),this.config.enableSoftwareAES=!0,this.logEnabled=!0,this.softwareDecrypt(Ct,pt,dt)},ft.getValidChunk=function(xt){var Ct=xt,pt=xt.length-xt.length%Rt;return pt!==xt.length&&(Ct=(0,Tt.sliceUint8)(xt,0,pt),this.remainderData=(0,Tt.sliceUint8)(xt,pt)),Ct},ft.logOnce=function(xt){!this.logEnabled||(ct.logger.log("[decrypter.ts]: "+xt),this.logEnabled=!1)},ut}()},"./src/crypt/fast-aes-key.ts":(at,it,ot)=>{ot.r(it),ot.d(it,{default:()=>st});var st=function(){function lt(ct,wt){this.subtle=void 0,this.key=void 0,this.subtle=ct,this.key=wt}var gt=lt.prototype;return gt.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},lt}()},"./src/demux/aacdemuxer.ts":(at,it,ot)=>{ot.r(it),ot.d(it,{default:()=>ht});var st=ot("./src/demux/base-audio-demuxer.ts"),lt=ot("./src/demux/adts.ts"),gt=ot("./src/utils/logger.ts"),ct=ot("./src/demux/id3.ts");function wt(ut,ft){ut.prototype=Object.create(ft.prototype),ut.prototype.constructor=ut,Tt(ut,ft)}function Tt(ut,ft){return Tt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(xt,Ct){return xt.__proto__=Ct,xt},Tt(ut,ft)}var Rt=function(ut){wt(ft,ut);function ft(xt,Ct){var pt;return pt=ut.call(this)||this,pt.observer=void 0,pt.config=void 0,pt.observer=xt,pt.config=Ct,pt}var yt=ft.prototype;return yt.resetInitSegment=function(Ct,pt,dt,vt){ut.prototype.resetInitSegment.call(this,Ct,pt,dt,vt),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:pt,duration:vt,inputTimeScale:9e4,dropped:0}},ft.probe=function(Ct){if(!Ct)return!1;for(var pt=ct.getID3Data(Ct,0)||[],dt=pt.length,vt=Ct.length;dt<vt;dt++)if(lt.probe(Ct,dt))return gt.logger.log("ADTS sync word found !"),!0;return!1},yt.canParse=function(Ct,pt){return lt.canParse(Ct,pt)},yt.appendFrame=function(Ct,pt,dt){lt.initTrackConfig(Ct,this.observer,pt,dt,Ct.manifestCodec);var vt=lt.appendFrame(Ct,pt,dt,this.basePTS,this.frameIndex);if(vt&&vt.missing===0)return vt},ft}(st.default);const ht=Rt},"./src/demux/adts.ts":(at,it,ot)=>{ot.r(it),ot.d(it,{appendFrame:()=>dt,canGetFrameLength:()=>ht,canParse:()=>ft,getAudioConfig:()=>ct,getFrameDuration:()=>Ct,getFullFrameLength:()=>Rt,getHeaderLength:()=>Tt,initTrackConfig:()=>xt,isHeader:()=>ut,isHeaderPattern:()=>wt,parseFrameHeader:()=>pt,probe:()=>yt});var st=ot("./src/utils/logger.ts"),lt=ot("./src/errors.ts"),gt=ot("./src/events.ts");function ct(vt,St,Et,mt){var _t,bt,Ot,Pt,Dt=navigator.userAgent.toLowerCase(),It=mt,kt=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];_t=((St[Et+2]&192)>>>6)+1;var Lt=(St[Et+2]&60)>>>2;if(Lt>kt.length-1){vt.trigger(gt.Events.ERROR,{type:lt.ErrorTypes.MEDIA_ERROR,details:lt.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+Lt});return}return Ot=(St[Et+2]&1)<<2,Ot|=(St[Et+3]&192)>>>6,st.logger.log("manifest codec:"+mt+", ADTS type:"+_t+", samplingIndex:"+Lt),/firefox/i.test(Dt)?Lt>=6?(_t=5,Pt=new Array(4),bt=Lt-3):(_t=2,Pt=new Array(2),bt=Lt):Dt.indexOf("android")!==-1?(_t=2,Pt=new Array(2),bt=Lt):(_t=5,Pt=new Array(4),mt&&(mt.indexOf("mp4a.40.29")!==-1||mt.indexOf("mp4a.40.5")!==-1)||!mt&&Lt>=6?bt=Lt-3:((mt&&mt.indexOf("mp4a.40.2")!==-1&&(Lt>=6&&Ot===1||/vivaldi/i.test(Dt))||!mt&&Ot===1)&&(_t=2,Pt=new Array(2)),bt=Lt)),Pt[0]=_t<<3,Pt[0]|=(Lt&14)>>1,Pt[1]|=(Lt&1)<<7,Pt[1]|=Ot<<3,_t===5&&(Pt[1]|=(bt&14)>>1,Pt[2]=(bt&1)<<7,Pt[2]|=8,Pt[3]=0),{config:Pt,samplerate:kt[Lt],channelCount:Ot,codec:"mp4a.40."+_t,manifestCodec:It}}function wt(vt,St){return vt[St]===255&&(vt[St+1]&246)===240}function Tt(vt,St){return vt[St+1]&1?7:9}function Rt(vt,St){return(vt[St+3]&3)<<11|vt[St+4]<<3|(vt[St+5]&224)>>>5}function ht(vt,St){return St+5<vt.length}function ut(vt,St){return St+1<vt.length&&wt(vt,St)}function ft(vt,St){return ht(vt,St)&&wt(vt,St)&&Rt(vt,St)<=vt.length-St}function yt(vt,St){if(ut(vt,St)){var Et=Tt(vt,St);if(St+Et>=vt.length)return!1;var mt=Rt(vt,St);if(mt<=Et)return!1;var _t=St+mt;return _t===vt.length||ut(vt,_t)}return!1}function xt(vt,St,Et,mt,_t){if(!vt.samplerate){var bt=ct(St,Et,mt,_t);if(!bt)return;vt.config=bt.config,vt.samplerate=bt.samplerate,vt.channelCount=bt.channelCount,vt.codec=bt.codec,vt.manifestCodec=bt.manifestCodec,st.logger.log("parsed codec:"+vt.codec+", rate:"+bt.samplerate+", channels:"+bt.channelCount)}}function Ct(vt){return 9216e4/vt}function pt(vt,St){var Et=Tt(vt,St);if(St+Et<=vt.length){var mt=Rt(vt,St)-Et;if(mt>0)return{headerLength:Et,frameLength:mt}}}function dt(vt,St,Et,mt,_t){var bt=Ct(vt.samplerate),Ot=mt+_t*bt,Pt=pt(St,Et),Dt;if(Pt){var It=Pt.frameLength,kt=Pt.headerLength,Lt=kt+It,At=Math.max(0,Et+Lt-St.length);At?(Dt=new Uint8Array(Lt-kt),Dt.set(St.subarray(Et+kt,St.length),0)):Dt=St.subarray(Et+kt,Et+Lt);var $t={unit:Dt,pts:Ot};return At||vt.samples.push($t),{sample:$t,length:Lt,missing:At}}var jt=St.length-Et;Dt=new Uint8Array(jt),Dt.set(St.subarray(Et,St.length),0);var Nt={unit:Dt,pts:Ot};return{sample:Nt,length:jt,missing:-1}}},"./src/demux/base-audio-demuxer.ts":(at,it,ot)=>{ot.r(it),ot.d(it,{default:()=>ut,initPTSFn:()=>ht});var st=ot("./src/polyfills/number.ts"),lt=ot("./src/demux/id3.ts"),gt=ot("./src/types/demuxer.ts"),ct=ot("./src/demux/dummy-demuxed-track.ts"),wt=ot("./src/utils/mp4-tools.ts"),Tt=ot("./src/utils/typed-array.ts"),Rt=function(){function ft(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}var yt=ft.prototype;return yt.resetInitSegment=function(Ct,pt,dt,vt){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}},yt.resetTimeStamp=function(Ct){this.initPTS=Ct,this.resetContiguity()},yt.resetContiguity=function(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0},yt.canParse=function(Ct,pt){return!1},yt.appendFrame=function(Ct,pt,dt){},yt.demux=function(Ct,pt){this.cachedData&&(Ct=(0,wt.appendUint8Array)(this.cachedData,Ct),this.cachedData=null);var dt=lt.getID3Data(Ct,0),vt=dt?dt.length:0,St,Et=this._audioTrack,mt=this._id3Track,_t=dt?lt.getTimeStamp(dt):void 0,bt=Ct.length;for((this.basePTS===null||this.frameIndex===0&&(0,st.isFiniteNumber)(_t))&&(this.basePTS=ht(_t,pt,this.initPTS),this.lastPTS=this.basePTS),this.lastPTS===null&&(this.lastPTS=this.basePTS),dt&&dt.length>0&&mt.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:dt,type:gt.MetadataSchema.audioId3,duration:Number.POSITIVE_INFINITY});vt<bt;){if(this.canParse(Ct,vt)){var Ot=this.appendFrame(Et,Ct,vt);Ot?(this.frameIndex++,this.lastPTS=Ot.sample.pts,vt+=Ot.length,St=vt):vt=bt}else lt.canParse(Ct,vt)?(dt=lt.getID3Data(Ct,vt),mt.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:dt,type:gt.MetadataSchema.audioId3,duration:Number.POSITIVE_INFINITY}),vt+=dt.length,St=vt):vt++;if(vt===bt&&St!==bt){var Pt=(0,Tt.sliceUint8)(Ct,St);this.cachedData?this.cachedData=(0,wt.appendUint8Array)(this.cachedData,Pt):this.cachedData=Pt}}return{audioTrack:Et,videoTrack:(0,ct.dummyTrack)(),id3Track:mt,textTrack:(0,ct.dummyTrack)()}},yt.demuxSampleAes=function(Ct,pt,dt){return Promise.reject(new Error("["+this+"] This demuxer does not support Sample-AES decryption"))},yt.flush=function(Ct){var pt=this.cachedData;return pt&&(this.cachedData=null,this.demux(pt,0)),{audioTrack:this._audioTrack,videoTrack:(0,ct.dummyTrack)(),id3Track:this._id3Track,textTrack:(0,ct.dummyTrack)()}},yt.destroy=function(){},ft}(),ht=function(yt,xt,Ct){return(0,st.isFiniteNumber)(yt)?yt*90:xt*9e4+(Ct||0)};const ut=Rt},"./src/demux/chunk-cache.ts":(at,it,ot)=>{ot.r(it),ot.d(it,{default:()=>st});var st=function(){function gt(){this.chunks=[],this.dataLength=0}var ct=gt.prototype;return ct.push=function(Tt){this.chunks.push(Tt),this.dataLength+=Tt.length},ct.flush=function(){var Tt=this.chunks,Rt=this.dataLength,ht;if(Tt.length)Tt.length===1?ht=Tt[0]:ht=lt(Tt,Rt);else return new Uint8Array(0);return this.reset(),ht},ct.reset=function(){this.chunks.length=0,this.dataLength=0},gt}();function lt(gt,ct){for(var wt=new Uint8Array(ct),Tt=0,Rt=0;Rt<gt.length;Rt++){var ht=gt[Rt];wt.set(ht,Tt),Tt+=ht.length}return wt}},"./src/demux/dummy-demuxed-track.ts":(at,it,ot)=>{ot.r(it),ot.d(it,{dummyTrack:()=>st});function st(lt,gt){return lt===void 0&&(lt=""),gt===void 0&&(gt=9e4),{type:lt,id:-1,pid:-1,inputTimeScale:gt,sequenceNumber:-1,samples:[],dropped:0}}},"./src/demux/exp-golomb.ts":(at,it,ot)=>{ot.r(it),ot.d(it,{default:()=>gt});var st=ot("./src/utils/logger.ts"),lt=function(){function ct(Tt){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=Tt,this.bytesAvailable=Tt.byteLength,this.word=0,this.bitsAvailable=0}var wt=ct.prototype;return wt.loadWord=function(){var Rt=this.data,ht=this.bytesAvailable,ut=Rt.byteLength-ht,ft=new Uint8Array(4),yt=Math.min(4,ht);if(yt===0)throw new Error("no bytes available");ft.set(Rt.subarray(ut,ut+yt)),this.word=new DataView(ft.buffer).getUint32(0),this.bitsAvailable=yt*8,this.bytesAvailable-=yt},wt.skipBits=function(Rt){var ht;this.bitsAvailable>Rt?(this.word<<=Rt,this.bitsAvailable-=Rt):(Rt-=this.bitsAvailable,ht=Rt>>3,Rt-=ht>>3,this.bytesAvailable-=ht,this.loadWord(),this.word<<=Rt,this.bitsAvailable-=Rt)},wt.readBits=function(Rt){var ht=Math.min(this.bitsAvailable,Rt),ut=this.word>>>32-ht;return Rt>32&&st.logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=ht,this.bitsAvailable>0?this.word<<=ht:this.bytesAvailable>0&&this.loadWord(),ht=Rt-ht,ht>0&&this.bitsAvailable?ut<<ht|this.readBits(ht):ut},wt.skipLZ=function(){var Rt;for(Rt=0;Rt<this.bitsAvailable;++Rt)if(this.word&2147483648>>>Rt)return this.word<<=Rt,this.bitsAvailable-=Rt,Rt;return this.loadWord(),Rt+this.skipLZ()},wt.skipUEG=function(){this.skipBits(1+this.skipLZ())},wt.skipEG=function(){this.skipBits(1+this.skipLZ())},wt.readUEG=function(){var Rt=this.skipLZ();return this.readBits(Rt+1)-1},wt.readEG=function(){var Rt=this.readUEG();return 1&Rt?1+Rt>>>1:-1*(Rt>>>1)},wt.readBoolean=function(){return this.readBits(1)===1},wt.readUByte=function(){return this.readBits(8)},wt.readUShort=function(){return this.readBits(16)},wt.readUInt=function(){return this.readBits(32)},wt.skipScalingList=function(Rt){for(var ht=8,ut=8,ft,yt=0;yt<Rt;yt++)ut!==0&&(ft=this.readEG(),ut=(ht+ft+256)%256),ht=ut===0?ht:ut},wt.readSPS=function(){var Rt=0,ht=0,ut=0,ft=0,yt,xt,Ct,pt=this.readUByte.bind(this),dt=this.readBits.bind(this),vt=this.readUEG.bind(this),St=this.readBoolean.bind(this),Et=this.skipBits.bind(this),mt=this.skipEG.bind(this),_t=this.skipUEG.bind(this),bt=this.skipScalingList.bind(this);pt();var Ot=pt();if(dt(5),Et(3),pt(),_t(),Ot===100||Ot===110||Ot===122||Ot===244||Ot===44||Ot===83||Ot===86||Ot===118||Ot===128){var Pt=vt();if(Pt===3&&Et(1),_t(),_t(),Et(1),St())for(xt=Pt!==3?8:12,Ct=0;Ct<xt;Ct++)St()&&(Ct<6?bt(16):bt(64))}_t();var Dt=vt();if(Dt===0)vt();else if(Dt===1)for(Et(1),mt(),mt(),yt=vt(),Ct=0;Ct<yt;Ct++)mt();_t(),Et(1);var It=vt(),kt=vt(),Lt=dt(1);Lt===0&&Et(1),Et(1),St()&&(Rt=vt(),ht=vt(),ut=vt(),ft=vt());var At=[1,1];if(St()&&St()){var $t=pt();switch($t){case 1:At=[1,1];break;case 2:At=[12,11];break;case 3:At=[10,11];break;case 4:At=[16,11];break;case 5:At=[40,33];break;case 6:At=[24,11];break;case 7:At=[20,11];break;case 8:At=[32,11];break;case 9:At=[80,33];break;case 10:At=[18,11];break;case 11:At=[15,11];break;case 12:At=[64,33];break;case 13:At=[160,99];break;case 14:At=[4,3];break;case 15:At=[3,2];break;case 16:At=[2,1];break;case 255:{At=[pt()<<8|pt(),pt()<<8|pt()];break}}}return{width:Math.ceil((It+1)*16-Rt*2-ht*2),height:(2-Lt)*(kt+1)*16-(Lt?2:4)*(ut+ft),pixelRatio:At}},wt.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},ct}();const gt=lt},"./src/demux/id3.ts":(at,it,ot)=>{ot.r(it),ot.d(it,{canParse:()=>wt,decodeFrame:()=>ft,getID3Data:()=>gt,getID3Frames:()=>ut,getTimeStamp:()=>Tt,isFooter:()=>lt,isHeader:()=>st,isTimeStampFrame:()=>Rt,testables:()=>vt,utf8ArrayToStr:()=>dt});var st=function(_t,bt){return bt+10<=_t.length&&_t[bt]===73&&_t[bt+1]===68&&_t[bt+2]===51&&_t[bt+3]<255&&_t[bt+4]<255&&_t[bt+6]<128&&_t[bt+7]<128&&_t[bt+8]<128&&_t[bt+9]<128},lt=function(_t,bt){return bt+10<=_t.length&&_t[bt]===51&&_t[bt+1]===68&&_t[bt+2]===73&&_t[bt+3]<255&&_t[bt+4]<255&&_t[bt+6]<128&&_t[bt+7]<128&&_t[bt+8]<128&&_t[bt+9]<128},gt=function(_t,bt){for(var Ot=bt,Pt=0;st(_t,bt);){Pt+=10;var Dt=ct(_t,bt+6);Pt+=Dt,lt(_t,bt+10)&&(Pt+=10),bt+=Pt}if(Pt>0)return _t.subarray(Ot,Ot+Pt)},ct=function(_t,bt){var Ot=0;return Ot=(_t[bt]&127)<<21,Ot|=(_t[bt+1]&127)<<14,Ot|=(_t[bt+2]&127)<<7,Ot|=_t[bt+3]&127,Ot},wt=function(_t,bt){return st(_t,bt)&&ct(_t,bt+6)+10<=_t.length-bt},Tt=function(_t){for(var bt=ut(_t),Ot=0;Ot<bt.length;Ot++){var Pt=bt[Ot];if(Rt(Pt))return pt(Pt)}},Rt=function(_t){return _t&&_t.key==="PRIV"&&_t.info==="com.apple.streaming.transportStreamTimestamp"},ht=function(_t){var bt=String.fromCharCode(_t[0],_t[1],_t[2],_t[3]),Ot=ct(_t,4),Pt=10;return{type:bt,size:Ot,data:_t.subarray(Pt,Pt+Ot)}},ut=function(_t){for(var bt=0,Ot=[];st(_t,bt);){var Pt=ct(_t,bt+6);bt+=10;for(var Dt=bt+Pt;bt+8<Dt;){var It=ht(_t.subarray(bt)),kt=ft(It);kt&&Ot.push(kt),bt+=It.size+10}lt(_t,bt)&&(bt+=10)}return Ot},ft=function(_t){return _t.type==="PRIV"?yt(_t):_t.type[0]==="W"?Ct(_t):xt(_t)},yt=function(_t){if(!(_t.size<2)){var bt=dt(_t.data,!0),Ot=new Uint8Array(_t.data.subarray(bt.length+1));return{key:_t.type,info:bt,data:Ot.buffer}}},xt=function(_t){if(!(_t.size<2)){if(_t.type==="TXXX"){var bt=1,Ot=dt(_t.data.subarray(bt),!0);bt+=Ot.length+1;var Pt=dt(_t.data.subarray(bt));return{key:_t.type,info:Ot,data:Pt}}var Dt=dt(_t.data.subarray(1));return{key:_t.type,data:Dt}}},Ct=function(_t){if(_t.type==="WXXX"){if(_t.size<2)return;var bt=1,Ot=dt(_t.data.subarray(bt),!0);bt+=Ot.length+1;var Pt=dt(_t.data.subarray(bt));return{key:_t.type,info:Ot,data:Pt}}var Dt=dt(_t.data);return{key:_t.type,data:Dt}},pt=function(_t){if(_t.data.byteLength===8){var bt=new Uint8Array(_t.data),Ot=bt[3]&1,Pt=(bt[4]<<23)+(bt[5]<<15)+(bt[6]<<7)+bt[7];return Pt/=45,Ot&&(Pt+=4772185884e-2),Math.round(Pt)}},dt=function(_t,bt){bt===void 0&&(bt=!1);var Ot=Et();if(Ot){var Pt=Ot.decode(_t);if(bt){var Dt=Pt.indexOf("\0");return Dt!==-1?Pt.substring(0,Dt):Pt}return Pt.replace(/\0/g,"")}for(var It=_t.length,kt,Lt,At,$t="",jt=0;jt<It;){if(kt=_t[jt++],kt===0&&bt)return $t;if(kt===0||kt===3)continue;switch(kt>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:$t+=String.fromCharCode(kt);break;case 12:case 13:Lt=_t[jt++],$t+=String.fromCharCode((kt&31)<<6|Lt&63);break;case 14:Lt=_t[jt++],At=_t[jt++],$t+=String.fromCharCode((kt&15)<<12|(Lt&63)<<6|(At&63)<<0);break}}return $t},vt={decodeTextFrame:xt},St;function Et(){return!St&&typeof self.TextDecoder<"u"&&(St=new self.TextDecoder("utf-8")),St}},"./src/demux/mp3demuxer.ts":(at,it,ot)=>{ot.r(it),ot.d(it,{default:()=>ht});var st=ot("./src/demux/base-audio-demuxer.ts"),lt=ot("./src/demux/id3.ts"),gt=ot("./src/utils/logger.ts"),ct=ot("./src/demux/mpegaudio.ts");function wt(ut,ft){ut.prototype=Object.create(ft.prototype),ut.prototype.constructor=ut,Tt(ut,ft)}function Tt(ut,ft){return Tt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(xt,Ct){return xt.__proto__=Ct,xt},Tt(ut,ft)}var Rt=function(ut){wt(ft,ut);function ft(){return ut.apply(this,arguments)||this}var yt=ft.prototype;return yt.resetInitSegment=function(Ct,pt,dt,vt){ut.prototype.resetInitSegment.call(this,Ct,pt,dt,vt),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:pt,duration:vt,inputTimeScale:9e4,dropped:0}},ft.probe=function(Ct){if(!Ct)return!1;for(var pt=lt.getID3Data(Ct,0)||[],dt=pt.length,vt=Ct.length;dt<vt;dt++)if(ct.probe(Ct,dt))return gt.logger.log("MPEG Audio sync word found !"),!0;return!1},yt.canParse=function(Ct,pt){return ct.canParse(Ct,pt)},yt.appendFrame=function(Ct,pt,dt){if(this.basePTS!==null)return ct.appendFrame(Ct,pt,dt,this.basePTS,this.frameIndex)},ft}(st.default);const ht=Rt},"./src/demux/mp4demuxer.ts":(at,it,ot)=>{ot.r(it),ot.d(it,{default:()=>Rt});var st=ot("./src/polyfills/number.ts"),lt=ot("./src/types/demuxer.ts"),gt=ot("./src/utils/mp4-tools.ts"),ct=ot("./src/demux/dummy-demuxed-track.ts"),wt=/\/emsg[-/]ID3/i,Tt=function(){function ht(ft,yt){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=yt}var ut=ht.prototype;return ut.resetTimeStamp=function(){},ut.resetInitSegment=function(yt,xt,Ct,pt){var dt=(0,gt.parseInitSegment)(yt),vt=this.videoTrack=(0,ct.dummyTrack)("video",1),St=this.audioTrack=(0,ct.dummyTrack)("audio",1),Et=this.txtTrack=(0,ct.dummyTrack)("text",1);if(this.id3Track=(0,ct.dummyTrack)("id3",1),this.timeOffset=0,dt.video){var mt=dt.video,_t=mt.id,bt=mt.timescale,Ot=mt.codec;vt.id=_t,vt.timescale=Et.timescale=bt,vt.codec=Ot}if(dt.audio){var Pt=dt.audio,Dt=Pt.id,It=Pt.timescale,kt=Pt.codec;St.id=Dt,St.timescale=It,St.codec=kt}Et.id=gt.RemuxerTrackIdConfig.text,vt.sampleDuration=0,vt.duration=St.duration=pt},ut.resetContiguity=function(){},ht.probe=function(yt){return yt=yt.length>16384?yt.subarray(0,16384):yt,(0,gt.findBox)(yt,["moof"]).length>0},ut.demux=function(yt,xt){this.timeOffset=xt;var Ct=yt,pt=this.videoTrack,dt=this.txtTrack;if(this.config.progressive){this.remainderData&&(Ct=(0,gt.appendUint8Array)(this.remainderData,yt));var vt=(0,gt.segmentValidRange)(Ct);this.remainderData=vt.remainder,pt.samples=vt.valid||new Uint8Array}else pt.samples=Ct;var St=this.extractID3Track(pt,xt);return dt.samples=(0,gt.parseSamples)(xt,pt),{videoTrack:pt,audioTrack:this.audioTrack,id3Track:St,textTrack:this.txtTrack}},ut.flush=function(){var yt=this.timeOffset,xt=this.videoTrack,Ct=this.txtTrack;xt.samples=this.remainderData||new Uint8Array,this.remainderData=null;var pt=this.extractID3Track(xt,this.timeOffset);return Ct.samples=(0,gt.parseSamples)(yt,xt),{videoTrack:xt,audioTrack:(0,ct.dummyTrack)(),id3Track:pt,textTrack:(0,ct.dummyTrack)()}},ut.extractID3Track=function(yt,xt){var Ct=this.id3Track;if(yt.samples.length){var pt=(0,gt.findBox)(yt.samples,["emsg"]);pt&&pt.forEach(function(dt){var vt=(0,gt.parseEmsg)(dt);if(wt.test(vt.schemeIdUri)){var St=(0,st.isFiniteNumber)(vt.presentationTime)?vt.presentationTime/vt.timeScale:xt+vt.presentationTimeDelta/vt.timeScale,Et=vt.eventDuration===4294967295?Number.POSITIVE_INFINITY:vt.eventDuration/vt.timeScale;Et<=.001&&(Et=Number.POSITIVE_INFINITY);var mt=vt.payload;Ct.samples.push({data:mt,len:mt.byteLength,dts:St,pts:St,type:lt.MetadataSchema.emsg,duration:Et})}})}return Ct},ut.demuxSampleAes=function(yt,xt,Ct){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))},ut.destroy=function(){},ht}();const Rt=Tt},"./src/demux/mpegaudio.ts":(at,it,ot)=>{ot.r(it),ot.d(it,{appendFrame:()=>Tt,canParse:()=>ft,isHeader:()=>ut,isHeaderPattern:()=>ht,parseHeader:()=>Rt,probe:()=>yt});var st=null,lt=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],gt=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],ct=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],wt=[0,1,1,4];function Tt(xt,Ct,pt,dt,vt){if(!(pt+24>Ct.length)){var St=Rt(Ct,pt);if(St&&pt+St.frameLength<=Ct.length){var Et=St.samplesPerFrame*9e4/St.sampleRate,mt=dt+vt*Et,_t={unit:Ct.subarray(pt,pt+St.frameLength),pts:mt,dts:mt};return xt.config=[],xt.channelCount=St.channelCount,xt.samplerate=St.sampleRate,xt.samples.push(_t),{sample:_t,length:St.frameLength,missing:0}}}}function Rt(xt,Ct){var pt=xt[Ct+1]>>3&3,dt=xt[Ct+1]>>1&3,vt=xt[Ct+2]>>4&15,St=xt[Ct+2]>>2&3;if(pt!==1&&vt!==0&&vt!==15&&St!==3){var Et=xt[Ct+2]>>1&1,mt=xt[Ct+3]>>6,_t=pt===3?3-dt:dt===3?3:4,bt=lt[_t*14+vt-1]*1e3,Ot=pt===3?0:pt===2?1:2,Pt=gt[Ot*3+St],Dt=mt===3?1:2,It=ct[pt][dt],kt=wt[dt],Lt=It*8*kt,At=Math.floor(It*bt/Pt+Et)*kt;if(st===null){var $t=navigator.userAgent||"",jt=$t.match(/Chrome\/(\d+)/i);st=jt?parseInt(jt[1]):0}var Nt=!!st&&st<=87;return Nt&&dt===2&&bt>=224e3&&mt===0&&(xt[Ct+3]=xt[Ct+3]|128),{sampleRate:Pt,channelCount:Dt,frameLength:At,samplesPerFrame:Lt}}}function ht(xt,Ct){return xt[Ct]===255&&(xt[Ct+1]&224)===224&&(xt[Ct+1]&6)!==0}function ut(xt,Ct){return Ct+1<xt.length&&ht(xt,Ct)}function ft(xt,Ct){var pt=4;return ht(xt,Ct)&&pt<=xt.length-Ct}function yt(xt,Ct){if(Ct+1<xt.length&&ht(xt,Ct)){var pt=4,dt=Rt(xt,Ct),vt=pt;dt!=null&&dt.frameLength&&(vt=dt.frameLength);var St=Ct+vt;return St===xt.length||ut(xt,St)}return!1}},"./src/demux/sample-aes.ts":(at,it,ot)=>{ot.r(it),ot.d(it,{default:()=>ct});var st=ot("./src/crypt/decrypter.ts"),lt=ot("./src/utils/mp4-tools.ts"),gt=function(){function wt(Rt,ht,ut){this.keyData=void 0,this.decrypter=void 0,this.keyData=ut,this.decrypter=new st.default(Rt,ht,{removePKCS7Padding:!1})}var Tt=wt.prototype;return Tt.decryptBuffer=function(ht,ut){this.decrypter.decrypt(ht,this.keyData.key.buffer,this.keyData.iv.buffer,ut)},Tt.decryptAacSample=function(ht,ut,ft,yt){var xt=ht[ut].unit;if(!(xt.length<=16)){var Ct=xt.subarray(16,xt.length-xt.length%16),pt=Ct.buffer.slice(Ct.byteOffset,Ct.byteOffset+Ct.length),dt=this;this.decryptBuffer(pt,function(vt){var St=new Uint8Array(vt);xt.set(St,16),yt||dt.decryptAacSamples(ht,ut+1,ft)})}},Tt.decryptAacSamples=function(ht,ut,ft){for(;;ut++){if(ut>=ht.length){ft();return}if(!(ht[ut].unit.length<32)){var yt=this.decrypter.isSync();if(this.decryptAacSample(ht,ut,ft,yt),!yt)return}}},Tt.getAvcEncryptedData=function(ht){for(var ut=Math.floor((ht.length-48)/160)*16+16,ft=new Int8Array(ut),yt=0,xt=32;xt<ht.length-16;xt+=160,yt+=16)ft.set(ht.subarray(xt,xt+16),yt);return ft},Tt.getAvcDecryptedUnit=function(ht,ut){for(var ft=new Uint8Array(ut),yt=0,xt=32;xt<ht.length-16;xt+=160,yt+=16)ht.set(ft.subarray(yt,yt+16),xt);return ht},Tt.decryptAvcSample=function(ht,ut,ft,yt,xt,Ct){var pt=(0,lt.discardEPB)(xt.data),dt=this.getAvcEncryptedData(pt),vt=this;this.decryptBuffer(dt.buffer,function(St){xt.data=vt.getAvcDecryptedUnit(pt,St),Ct||vt.decryptAvcSamples(ht,ut,ft+1,yt)})},Tt.decryptAvcSamples=function(ht,ut,ft,yt){if(ht instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;ut++,ft=0){if(ut>=ht.length){yt();return}for(var xt=ht[ut].units;!(ft>=xt.length);ft++){var Ct=xt[ft];if(!(Ct.data.length<=48||Ct.type!==1&&Ct.type!==5)){var pt=this.decrypter.isSync();if(this.decryptAvcSample(ht,ut,ft,yt,Ct,pt),!pt)return}}}},wt}();const ct=gt},"./src/demux/transmuxer-interface.ts":(at,it,ot)=>{ot.r(it),ot.d(it,{default:()=>ut});var st=ot("./src/demux/webworkify-webpack.js"),lt=ot("./src/events.ts"),gt=ot("./src/demux/transmuxer.ts"),ct=ot("./src/utils/logger.ts"),wt=ot("./src/errors.ts"),Tt=ot("./src/utils/mediasource-helper.ts"),Rt=ot("./node_modules/eventemitter3/index.js"),ht=(0,Tt.getMediaSource)()||{isTypeSupported:function(){return!1}},ut=function(){function ft(xt,Ct,pt,dt){var vt=this;this.hls=void 0,this.id=void 0,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.worker=void 0,this.onwmsg=void 0,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0;var St=xt.config;this.hls=xt,this.id=Ct,this.useWorker=!!St.enableWorker,this.onTransmuxComplete=pt,this.onFlush=dt;var Et=function(Pt,Dt){Dt=Dt||{},Dt.frag=vt.frag,Dt.id=vt.id,vt.hls.trigger(Pt,Dt)};this.observer=new Rt.EventEmitter,this.observer.on(lt.Events.FRAG_DECRYPTED,Et),this.observer.on(lt.Events.ERROR,Et);var mt={mp4:ht.isTypeSupported("video/mp4"),mpeg:ht.isTypeSupported("audio/mpeg"),mp3:ht.isTypeSupported('audio/mp4; codecs="mp3"')},_t=navigator.vendor;if(this.useWorker&&typeof Worker<"u"){ct.logger.log("demuxing in webworker");var bt;try{bt=this.worker=(0,st.default)("./src/demux/transmuxer-worker.ts"),this.onwmsg=this.onWorkerMessage.bind(this),bt.addEventListener("message",this.onwmsg),bt.onerror=function(Ot){vt.useWorker=!1,ct.logger.warn("Exception in webworker, fallback to inline"),vt.hls.trigger(lt.Events.ERROR,{type:wt.ErrorTypes.OTHER_ERROR,details:wt.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:new Error(Ot.message+"  ("+Ot.filename+":"+Ot.lineno+")")})},bt.postMessage({cmd:"init",typeSupported:mt,vendor:_t,id:Ct,config:JSON.stringify(St)})}catch(Ot){ct.logger.warn("Error in worker:",Ot),ct.logger.error("Error while initializing DemuxerWorker, fallback to inline"),bt&&self.URL.revokeObjectURL(bt.objectURL),this.transmuxer=new gt.default(this.observer,mt,St,_t,Ct),this.worker=null}}else this.transmuxer=new gt.default(this.observer,mt,St,_t,Ct)}var yt=ft.prototype;return yt.destroy=function(){var Ct=this.worker;if(Ct)Ct.removeEventListener("message",this.onwmsg),Ct.terminate(),this.worker=null,this.onwmsg=void 0;else{var pt=this.transmuxer;pt&&(pt.destroy(),this.transmuxer=null)}var dt=this.observer;dt&&dt.removeAllListeners(),this.frag=null,this.observer=null,this.hls=null},yt.push=function(Ct,pt,dt,vt,St,Et,mt,_t,bt,Ot){var Pt,Dt,It=this;bt.transmuxing.start=self.performance.now();var kt=this.transmuxer,Lt=this.worker,At=Et?Et.start:St.start,$t=St.decryptdata,jt=this.frag,Nt=!(jt&&St.cc===jt.cc),Ft=!(jt&&bt.level===jt.level),Bt=jt?bt.sn-jt.sn:-1,Ut=this.part?bt.part-this.part.index:-1,Ht=Bt===0&&bt.id>1&&bt.id===(jt==null?void 0:jt.stats.chunkCount),Kt=!Ft&&(Bt===1||Bt===0&&(Ut===1||Ht&&Ut<=0)),Gt=self.performance.now();(Ft||Bt||St.stats.parsing.start===0)&&(St.stats.parsing.start=Gt),Et&&(Ut||!Kt)&&(Et.stats.parsing.start=Gt);var Wt=!(jt&&((Pt=St.initSegment)===null||Pt===void 0?void 0:Pt.url)===((Dt=jt.initSegment)===null||Dt===void 0?void 0:Dt.url)),Vt=new gt.TransmuxState(Nt,Kt,_t,Ft,At,Wt);if(!Kt||Nt||Wt){ct.logger.log("[transmuxer-interface, "+St.type+"]: Starting new transmux session for sn: "+bt.sn+" p: "+bt.part+" level: "+bt.level+" id: "+bt.id+`
        discontinuity: `+Nt+`
        trackSwitch: `+Ft+`
        contiguous: `+Kt+`
        accurateTimeOffset: `+_t+`
        timeOffset: `+At+`
        initSegmentChange: `+Wt);var zt=new gt.TransmuxConfig(dt,vt,pt,mt,Ot);this.configureTransmuxer(zt)}if(this.frag=St,this.part=Et,Lt)Lt.postMessage({cmd:"demux",data:Ct,decryptdata:$t,chunkMeta:bt,state:Vt},Ct instanceof ArrayBuffer?[Ct]:[]);else if(kt){var Yt=kt.push(Ct,$t,bt,Vt);(0,gt.isPromise)(Yt)?Yt.then(function(Xt){It.handleTransmuxComplete(Xt)}):this.handleTransmuxComplete(Yt)}},yt.flush=function(Ct){var pt=this;Ct.transmuxing.start=self.performance.now();var dt=this.transmuxer,vt=this.worker;if(vt)vt.postMessage({cmd:"flush",chunkMeta:Ct});else if(dt){var St=dt.flush(Ct);(0,gt.isPromise)(St)?St.then(function(Et){pt.handleFlushResult(Et,Ct)}):this.handleFlushResult(St,Ct)}},yt.handleFlushResult=function(Ct,pt){var dt=this;Ct.forEach(function(vt){dt.handleTransmuxComplete(vt)}),this.onFlush(pt)},yt.onWorkerMessage=function(Ct){var pt=Ct.data,dt=this.hls;switch(pt.event){case"init":{self.URL.revokeObjectURL(this.worker.objectURL);break}case"transmuxComplete":{this.handleTransmuxComplete(pt.data);break}case"flush":{this.onFlush(pt.data);break}case"workerLog":ct.logger[pt.data.logType]&&ct.logger[pt.data.logType](pt.data.message);break;default:{pt.data=pt.data||{},pt.data.frag=this.frag,pt.data.id=this.id,dt.trigger(pt.event,pt.data);break}}},yt.configureTransmuxer=function(Ct){var pt=this.worker,dt=this.transmuxer;pt?pt.postMessage({cmd:"configure",config:Ct}):dt&&dt.configure(Ct)},yt.handleTransmuxComplete=function(Ct){Ct.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(Ct)},ft}()},"./src/demux/transmuxer-worker.ts":(at,it,ot)=>{ot.r(it),ot.d(it,{default:()=>wt});var st=ot("./src/demux/transmuxer.ts"),lt=ot("./src/events.ts"),gt=ot("./src/utils/logger.ts"),ct=ot("./node_modules/eventemitter3/index.js");function wt(ft){var yt=new ct.EventEmitter,xt=function(dt,vt){ft.postMessage({event:dt,data:vt})};yt.on(lt.Events.FRAG_DECRYPTED,xt),yt.on(lt.Events.ERROR,xt);var Ct=function(){var dt=function(Et){var mt=function(bt){xt("workerLog",{logType:Et,message:bt})};gt.logger[Et]=mt};for(var vt in gt.logger)dt(vt)};ft.addEventListener("message",function(pt){var dt=pt.data;switch(dt.cmd){case"init":{var vt=JSON.parse(dt.config);ft.transmuxer=new st.default(yt,dt.typeSupported,vt,dt.vendor,dt.id),(0,gt.enableLogs)(vt.debug,dt.id),Ct(),xt("init",null);break}case"configure":{ft.transmuxer.configure(dt.config);break}case"demux":{var St=ft.transmuxer.push(dt.data,dt.decryptdata,dt.chunkMeta,dt.state);(0,st.isPromise)(St)?St.then(function(_t){Tt(ft,_t)}):Tt(ft,St);break}case"flush":{var Et=dt.chunkMeta,mt=ft.transmuxer.flush(Et);(0,st.isPromise)(mt)?mt.then(function(_t){ht(ft,_t,Et)}):ht(ft,mt,Et);break}}})}function Tt(ft,yt){if(ut(yt.remuxResult))return!1;var xt=[],Ct=yt.remuxResult,pt=Ct.audio,dt=Ct.video;return pt&&Rt(xt,pt),dt&&Rt(xt,dt),ft.postMessage({event:"transmuxComplete",data:yt},xt),!0}function Rt(ft,yt){yt.data1&&ft.push(yt.data1.buffer),yt.data2&&ft.push(yt.data2.buffer)}function ht(ft,yt,xt){var Ct=yt.reduce(function(pt,dt){return Tt(ft,dt)||pt},!1);Ct||ft.postMessage({event:"transmuxComplete",data:yt[0]}),ft.postMessage({event:"flush",data:xt})}function ut(ft){return!ft.audio&&!ft.video&&!ft.text&&!ft.id3&&!ft.initSegment}},"./src/demux/transmuxer.ts":(at,it,ot)=>{ot.r(it),ot.d(it,{TransmuxConfig:()=>St,TransmuxState:()=>Et,default:()=>Ct,isPromise:()=>vt});var st=ot("./src/events.ts"),lt=ot("./src/errors.ts"),gt=ot("./src/crypt/decrypter.ts"),ct=ot("./src/demux/aacdemuxer.ts"),wt=ot("./src/demux/mp4demuxer.ts"),Tt=ot("./src/demux/tsdemuxer.ts"),Rt=ot("./src/demux/mp3demuxer.ts"),ht=ot("./src/remux/mp4-remuxer.ts"),ut=ot("./src/remux/passthrough-remuxer.ts"),ft=ot("./src/utils/logger.ts"),yt;try{yt=self.performance.now.bind(self.performance)}catch{ft.logger.debug("Unable to use Performance API on this environment"),yt=self.Date.now}var xt=[{demux:Tt.default,remux:ht.default},{demux:wt.default,remux:ut.default},{demux:ct.default,remux:ht.default},{demux:Rt.default,remux:ht.default}],Ct=function(){function mt(bt,Ot,Pt,Dt,It){this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.vendor=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=bt,this.typeSupported=Ot,this.config=Pt,this.vendor=Dt,this.id=It}var _t=mt.prototype;return _t.configure=function(Ot){this.transmuxConfig=Ot,this.decrypter&&this.decrypter.reset()},_t.push=function(Ot,Pt,Dt,It){var kt=this,Lt=Dt.transmuxing;Lt.executeStart=yt();var At=new Uint8Array(Ot),$t=this.config,jt=this.currentTransmuxState,Nt=this.transmuxConfig;It&&(this.currentTransmuxState=It);var Ft=It||jt,Bt=Ft.contiguous,Ut=Ft.discontinuity,Ht=Ft.trackSwitch,Kt=Ft.accurateTimeOffset,Gt=Ft.timeOffset,Wt=Ft.initSegmentChange,Vt=Nt.audioCodec,zt=Nt.videoCodec,Yt=Nt.defaultInitPts,Xt=Nt.duration,Qt=Nt.initSegmentData;(Ut||Ht||Wt)&&this.resetInitSegment(Qt,Vt,zt,Xt),(Ut||Wt)&&this.resetInitialTimestamp(Yt),Bt||this.resetContiguity();var qt=pt(At,Pt);if(qt&&qt.method==="AES-128"){var er=this.getDecrypter();if($t.enableSoftwareAES){var tr=er.softwareDecrypt(At,qt.key.buffer,qt.iv.buffer);if(!tr)return Lt.executeEnd=yt(),dt(Dt);At=new Uint8Array(tr)}else return this.decryptionPromise=er.webCryptoDecrypt(At,qt.key.buffer,qt.iv.buffer).then(function(nr){var rr=kt.push(nr,null,Dt);return kt.decryptionPromise=null,rr}),this.decryptionPromise}this.needsProbing(At,Ut,Ht)&&this.configureTransmuxer(At,Nt);var Zt=this.transmux(At,qt,Gt,Kt,Dt),Jt=this.currentTransmuxState;return Jt.contiguous=!0,Jt.discontinuity=!1,Jt.trackSwitch=!1,Lt.executeEnd=yt(),Zt},_t.flush=function(Ot){var Pt=this,Dt=Ot.transmuxing;Dt.executeStart=yt();var It=this.decrypter,kt=this.currentTransmuxState,Lt=this.decryptionPromise;if(Lt)return Lt.then(function(){return Pt.flush(Ot)});var At=[],$t=kt.timeOffset;if(It){var jt=It.flush();jt&&At.push(this.push(jt,null,Ot))}var Nt=this.demuxer,Ft=this.remuxer;if(!Nt||!Ft)return this.observer.emit(st.Events.ERROR,st.Events.ERROR,{type:lt.ErrorTypes.MEDIA_ERROR,details:lt.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"}),Dt.executeEnd=yt(),[dt(Ot)];var Bt=Nt.flush($t);return vt(Bt)?Bt.then(function(Ut){return Pt.flushRemux(At,Ut,Ot),At}):(this.flushRemux(At,Bt,Ot),At)},_t.flushRemux=function(Ot,Pt,Dt){var It=Pt.audioTrack,kt=Pt.videoTrack,Lt=Pt.id3Track,At=Pt.textTrack,$t=this.currentTransmuxState,jt=$t.accurateTimeOffset,Nt=$t.timeOffset;ft.logger.log("[transmuxer.ts]: Flushed fragment "+Dt.sn+(Dt.part>-1?" p: "+Dt.part:"")+" of level "+Dt.level);var Ft=this.remuxer.remux(It,kt,Lt,At,Nt,jt,!0,this.id);Ot.push({remuxResult:Ft,chunkMeta:Dt}),Dt.transmuxing.executeEnd=yt()},_t.resetInitialTimestamp=function(Ot){var Pt=this.demuxer,Dt=this.remuxer;!Pt||!Dt||(Pt.resetTimeStamp(Ot),Dt.resetTimeStamp(Ot))},_t.resetContiguity=function(){var Ot=this.demuxer,Pt=this.remuxer;!Ot||!Pt||(Ot.resetContiguity(),Pt.resetNextTimestamp())},_t.resetInitSegment=function(Ot,Pt,Dt,It){var kt=this.demuxer,Lt=this.remuxer;!kt||!Lt||(kt.resetInitSegment(Ot,Pt,Dt,It),Lt.resetInitSegment(Ot,Pt,Dt))},_t.destroy=function(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)},_t.transmux=function(Ot,Pt,Dt,It,kt){var Lt;return Pt&&Pt.method==="SAMPLE-AES"?Lt=this.transmuxSampleAes(Ot,Pt,Dt,It,kt):Lt=this.transmuxUnencrypted(Ot,Dt,It,kt),Lt},_t.transmuxUnencrypted=function(Ot,Pt,Dt,It){var kt=this.demuxer.demux(Ot,Pt,!1,!this.config.progressive),Lt=kt.audioTrack,At=kt.videoTrack,$t=kt.id3Track,jt=kt.textTrack,Nt=this.remuxer.remux(Lt,At,$t,jt,Pt,Dt,!1,this.id);return{remuxResult:Nt,chunkMeta:It}},_t.transmuxSampleAes=function(Ot,Pt,Dt,It,kt){var Lt=this;return this.demuxer.demuxSampleAes(Ot,Pt,Dt).then(function(At){var $t=Lt.remuxer.remux(At.audioTrack,At.videoTrack,At.id3Track,At.textTrack,Dt,It,!1,Lt.id);return{remuxResult:$t,chunkMeta:kt}})},_t.configureTransmuxer=function(Ot,Pt){for(var Dt=this.config,It=this.observer,kt=this.typeSupported,Lt=this.vendor,At=Pt.audioCodec,$t=Pt.defaultInitPts,jt=Pt.duration,Nt=Pt.initSegmentData,Ft=Pt.videoCodec,Bt,Ut=0,Ht=xt.length;Ut<Ht;Ut++)if(xt[Ut].demux.probe(Ot)){Bt=xt[Ut];break}Bt||(ft.logger.warn("Failed to find demuxer by probing frag, treating as mp4 passthrough"),Bt={demux:wt.default,remux:ut.default});var Kt=this.demuxer,Gt=this.remuxer,Wt=Bt.remux,Vt=Bt.demux;(!Gt||!(Gt instanceof Wt))&&(this.remuxer=new Wt(It,Dt,kt,Lt)),(!Kt||!(Kt instanceof Vt))&&(this.demuxer=new Vt(It,Dt,kt),this.probe=Vt.probe),this.resetInitSegment(Nt,At,Ft,jt),this.resetInitialTimestamp($t)},_t.needsProbing=function(Ot,Pt,Dt){return!this.demuxer||!this.remuxer||Pt||Dt},_t.getDecrypter=function(){var Ot=this.decrypter;return Ot||(Ot=this.decrypter=new gt.default(this.observer,this.config)),Ot},mt}();function pt(mt,_t){var bt=null;return mt.byteLength>0&&_t!=null&&_t.key!=null&&_t.iv!==null&&_t.method!=null&&(bt=_t),bt}var dt=function(_t){return{remuxResult:{},chunkMeta:_t}};function vt(mt){return"then"in mt&&mt.then instanceof Function}var St=function(_t,bt,Ot,Pt,Dt){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=_t,this.videoCodec=bt,this.initSegmentData=Ot,this.duration=Pt,this.defaultInitPts=Dt},Et=function(_t,bt,Ot,Pt,Dt,It){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=_t,this.contiguous=bt,this.accurateTimeOffset=Ot,this.trackSwitch=Pt,this.timeOffset=Dt,this.initSegmentChange=It}},"./src/demux/tsdemuxer.ts":(at,it,ot)=>{ot.r(it),ot.d(it,{default:()=>Et});var st=ot("./src/demux/adts.ts"),lt=ot("./src/demux/mpegaudio.ts"),gt=ot("./src/demux/exp-golomb.ts"),ct=ot("./src/demux/sample-aes.ts"),wt=ot("./src/events.ts"),Tt=ot("./src/utils/mp4-tools.ts"),Rt=ot("./src/utils/logger.ts"),ht=ot("./src/errors.ts"),ut=ot("./src/types/demuxer.ts");function ft(){return ft=Object.assign?Object.assign.bind():function(mt){for(var _t=1;_t<arguments.length;_t++){var bt=arguments[_t];for(var Ot in bt)Object.prototype.hasOwnProperty.call(bt,Ot)&&(mt[Ot]=bt[Ot])}return mt},ft.apply(this,arguments)}var yt=188,xt=function(){function mt(bt,Ot,Pt){this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._duration=0,this._pmtId=-1,this._avcTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.avcSample=null,this.remainderData=null,this.observer=bt,this.config=Ot,this.typeSupported=Pt}mt.probe=function(Ot){var Pt=mt.syncOffset(Ot);return Pt>0&&Rt.logger.warn("MPEG2-TS detected but first sync word found @ offset "+Pt),Pt!==-1},mt.syncOffset=function(Ot){for(var Pt=Math.min(yt*5,Ot.length-yt*2)+1,Dt=0;Dt<Pt;){if(Ot[Dt]===71&&Ot[Dt+yt]===71)return Dt;Dt++}return-1},mt.createTrack=function(Ot,Pt){return{container:Ot==="video"||Ot==="audio"?"video/mp2t":void 0,type:Ot,id:Tt.RemuxerTrackIdConfig[Ot],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:Ot==="audio"?Pt:void 0}};var _t=mt.prototype;return _t.resetInitSegment=function(Ot,Pt,Dt,It){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=mt.createTrack("video"),this._audioTrack=mt.createTrack("audio",It),this._id3Track=mt.createTrack("id3"),this._txtTrack=mt.createTrack("text"),this._audioTrack.segmentCodec="aac",this.aacOverFlow=null,this.avcSample=null,this.remainderData=null,this.audioCodec=Pt,this.videoCodec=Dt,this._duration=It},_t.resetTimeStamp=function(){},_t.resetContiguity=function(){var Ot=this._audioTrack,Pt=this._avcTrack,Dt=this._id3Track;Ot&&(Ot.pesData=null),Pt&&(Pt.pesData=null),Dt&&(Dt.pesData=null),this.aacOverFlow=null,this.avcSample=null,this.remainderData=null},_t.demux=function(Ot,Pt,Dt,It){Dt===void 0&&(Dt=!1),It===void 0&&(It=!1),Dt||(this.sampleAes=null);var kt,Lt=this._avcTrack,At=this._audioTrack,$t=this._id3Track,jt=this._txtTrack,Nt=Lt.pid,Ft=Lt.pesData,Bt=At.pid,Ut=$t.pid,Ht=At.pesData,Kt=$t.pesData,Gt=null,Wt=this.pmtParsed,Vt=this._pmtId,zt=Ot.length;if(this.remainderData&&(Ot=(0,Tt.appendUint8Array)(this.remainderData,Ot),zt=Ot.length,this.remainderData=null),zt<yt&&!It)return this.remainderData=Ot,{audioTrack:At,videoTrack:Lt,id3Track:$t,textTrack:jt};var Yt=Math.max(0,mt.syncOffset(Ot));zt-=(zt-Yt)%yt,zt<Ot.byteLength&&!It&&(this.remainderData=new Uint8Array(Ot.buffer,zt,Ot.buffer.byteLength-zt));for(var Xt=0,Qt=Yt;Qt<zt;Qt+=yt)if(Ot[Qt]===71){var qt=!!(Ot[Qt+1]&64),er=((Ot[Qt+1]&31)<<8)+Ot[Qt+2],tr=(Ot[Qt+3]&48)>>4,Zt=void 0;if(tr>1){if(Zt=Qt+5+Ot[Qt+4],Zt===Qt+yt)continue}else Zt=Qt+4;switch(er){case Nt:qt&&(Ft&&(kt=vt(Ft))&&this.parseAVCPES(Lt,jt,kt,!1),Ft={data:[],size:0}),Ft&&(Ft.data.push(Ot.subarray(Zt,Qt+yt)),Ft.size+=Qt+yt-Zt);break;case Bt:if(qt){if(Ht&&(kt=vt(Ht)))switch(At.segmentCodec){case"aac":this.parseAACPES(At,kt);break;case"mp3":this.parseMPEGPES(At,kt);break}Ht={data:[],size:0}}Ht&&(Ht.data.push(Ot.subarray(Zt,Qt+yt)),Ht.size+=Qt+yt-Zt);break;case Ut:qt&&(Kt&&(kt=vt(Kt))&&this.parseID3PES($t,kt),Kt={data:[],size:0}),Kt&&(Kt.data.push(Ot.subarray(Zt,Qt+yt)),Kt.size+=Qt+yt-Zt);break;case 0:qt&&(Zt+=Ot[Zt]+1),Vt=this._pmtId=pt(Ot,Zt);break;case Vt:{qt&&(Zt+=Ot[Zt]+1);var Jt=dt(Ot,Zt,this.typeSupported,Dt);Nt=Jt.avc,Nt>0&&(Lt.pid=Nt),Bt=Jt.audio,Bt>0&&(At.pid=Bt,At.segmentCodec=Jt.segmentCodec),Ut=Jt.id3,Ut>0&&($t.pid=Ut),Gt!==null&&!Wt&&(Rt.logger.log("unknown PID '"+Gt+"' in TS found"),Gt=null,Qt=Yt-188),Wt=this.pmtParsed=!0;break}case 17:case 8191:break;default:Gt=er;break}}else Xt++;Xt>0&&this.observer.emit(wt.Events.ERROR,wt.Events.ERROR,{type:ht.ErrorTypes.MEDIA_ERROR,details:ht.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"Found "+Xt+" TS packet/s that do not start with 0x47"}),Lt.pesData=Ft,At.pesData=Ht,$t.pesData=Kt;var nr={audioTrack:At,videoTrack:Lt,id3Track:$t,textTrack:jt};return It&&this.extractRemainingSamples(nr),nr},_t.flush=function(){var Ot=this.remainderData;this.remainderData=null;var Pt;return Ot?Pt=this.demux(Ot,-1,!1,!0):Pt={videoTrack:this._avcTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(Pt),this.sampleAes?this.decrypt(Pt,this.sampleAes):Pt},_t.extractRemainingSamples=function(Ot){var Pt=Ot.audioTrack,Dt=Ot.videoTrack,It=Ot.id3Track,kt=Ot.textTrack,Lt=Dt.pesData,At=Pt.pesData,$t=It.pesData,jt;if(Lt&&(jt=vt(Lt))?(this.parseAVCPES(Dt,kt,jt,!0),Dt.pesData=null):Dt.pesData=Lt,At&&(jt=vt(At))){switch(Pt.segmentCodec){case"aac":this.parseAACPES(Pt,jt);break;case"mp3":this.parseMPEGPES(Pt,jt);break}Pt.pesData=null}else At!=null&&At.size&&Rt.logger.log("last AAC PES packet truncated,might overlap between fragments"),Pt.pesData=At;$t&&(jt=vt($t))?(this.parseID3PES(It,jt),It.pesData=null):It.pesData=$t},_t.demuxSampleAes=function(Ot,Pt,Dt){var It=this.demux(Ot,Dt,!0,!this.config.progressive),kt=this.sampleAes=new ct.default(this.observer,this.config,Pt);return this.decrypt(It,kt)},_t.decrypt=function(Ot,Pt){return new Promise(function(Dt){var It=Ot.audioTrack,kt=Ot.videoTrack;It.samples&&It.segmentCodec==="aac"?Pt.decryptAacSamples(It.samples,0,function(){kt.samples?Pt.decryptAvcSamples(kt.samples,0,0,function(){Dt(Ot)}):Dt(Ot)}):kt.samples&&Pt.decryptAvcSamples(kt.samples,0,0,function(){Dt(Ot)})})},_t.destroy=function(){this._duration=0},_t.parseAVCPES=function(Ot,Pt,Dt,It){var kt=this,Lt=this.parseAVCNALu(Ot,Dt.data),At=this.avcSample,$t,jt=!1;Dt.data=null,At&&Lt.length&&!Ot.audFound&&(St(At,Ot),At=this.avcSample=Ct(!1,Dt.pts,Dt.dts,"")),Lt.forEach(function(Nt){switch(Nt.type){case 1:{$t=!0,At||(At=kt.avcSample=Ct(!0,Dt.pts,Dt.dts,"")),At.frame=!0;var Ft=Nt.data;if(jt&&Ft.length>4){var Bt=new gt.default(Ft).readSliceType();(Bt===2||Bt===4||Bt===7||Bt===9)&&(At.key=!0)}break}case 5:$t=!0,At||(At=kt.avcSample=Ct(!0,Dt.pts,Dt.dts,"")),At.key=!0,At.frame=!0;break;case 6:{$t=!0,(0,Tt.parseSEIMessageFromNALu)(Nt.data,1,Dt.pts,Pt.samples);break}case 7:if($t=!0,jt=!0,!Ot.sps){var Ut=new gt.default(Nt.data),Ht=Ut.readSPS();Ot.width=Ht.width,Ot.height=Ht.height,Ot.pixelRatio=Ht.pixelRatio,Ot.sps=[Nt.data],Ot.duration=kt._duration;for(var Kt=Nt.data.subarray(1,4),Gt="avc1.",Wt=0;Wt<3;Wt++){var Vt=Kt[Wt].toString(16);Vt.length<2&&(Vt="0"+Vt),Gt+=Vt}Ot.codec=Gt}break;case 8:$t=!0,Ot.pps||(Ot.pps=[Nt.data]);break;case 9:$t=!1,Ot.audFound=!0,At&&St(At,Ot),At=kt.avcSample=Ct(!1,Dt.pts,Dt.dts,"");break;case 12:$t=!0;break;default:$t=!1,At&&(At.debug+="unknown NAL "+Nt.type+" ");break}if(At&&$t){var zt=At.units;zt.push(Nt)}}),It&&At&&(St(At,Ot),this.avcSample=null)},_t.getLastNalUnit=function(Ot){var Pt,Dt=this.avcSample,It;if((!Dt||Dt.units.length===0)&&(Dt=Ot[Ot.length-1]),(Pt=Dt)!==null&&Pt!==void 0&&Pt.units){var kt=Dt.units;It=kt[kt.length-1]}return It},_t.parseAVCNALu=function(Ot,Pt){var Dt=Pt.byteLength,It=Ot.naluState||0,kt=It,Lt=[],At=0,$t,jt,Nt,Ft=-1,Bt=0;for(It===-1&&(Ft=0,Bt=Pt[0]&31,It=0,At=1);At<Dt;){if($t=Pt[At++],!It){It=$t?0:1;continue}if(It===1){It=$t?0:2;continue}if(!$t)It=3;else if($t===1){if(Ft>=0){var Ut={data:Pt.subarray(Ft,At-It-1),type:Bt};Lt.push(Ut)}else{var Ht=this.getLastNalUnit(Ot.samples);if(Ht&&(kt&&At<=4-kt&&Ht.state&&(Ht.data=Ht.data.subarray(0,Ht.data.byteLength-kt)),jt=At-It-1,jt>0)){var Kt=new Uint8Array(Ht.data.byteLength+jt);Kt.set(Ht.data,0),Kt.set(Pt.subarray(0,jt),Ht.data.byteLength),Ht.data=Kt,Ht.state=0}}At<Dt?(Nt=Pt[At]&31,Ft=At,Bt=Nt,It=0):It=-1}else It=0}if(Ft>=0&&It>=0){var Gt={data:Pt.subarray(Ft,Dt),type:Bt,state:It};Lt.push(Gt)}if(Lt.length===0){var Wt=this.getLastNalUnit(Ot.samples);if(Wt){var Vt=new Uint8Array(Wt.data.byteLength+Pt.byteLength);Vt.set(Wt.data,0),Vt.set(Pt,Wt.data.byteLength),Wt.data=Vt}}return Ot.naluState=It,Lt},_t.parseAACPES=function(Ot,Pt){var Dt=0,It=this.aacOverFlow,kt=Pt.data;if(It){this.aacOverFlow=null;var Lt=It.missing,At=It.sample.unit.byteLength;if(Lt===-1){var $t=new Uint8Array(At+kt.byteLength);$t.set(It.sample.unit,0),$t.set(kt,At),kt=$t}else{var jt=At-Lt;It.sample.unit.set(kt.subarray(0,Lt),jt),Ot.samples.push(It.sample),Dt=It.missing}}var Nt,Ft;for(Nt=Dt,Ft=kt.length;Nt<Ft-1&&!st.isHeader(kt,Nt);Nt++);if(Nt!==Dt){var Bt,Ut;if(Nt<Ft-1?(Bt="AAC PES did not start with ADTS header,offset:"+Nt,Ut=!1):(Bt="no ADTS header found in AAC PES",Ut=!0),Rt.logger.warn("parsing error:"+Bt),this.observer.emit(wt.Events.ERROR,wt.Events.ERROR,{type:ht.ErrorTypes.MEDIA_ERROR,details:ht.ErrorDetails.FRAG_PARSING_ERROR,fatal:Ut,reason:Bt}),Ut)return}st.initTrackConfig(Ot,this.observer,kt,Nt,this.audioCodec);var Ht;if(Pt.pts!==void 0)Ht=Pt.pts;else if(It){var Kt=st.getFrameDuration(Ot.samplerate);Ht=It.sample.pts+Kt}else{Rt.logger.warn("[tsdemuxer]: AAC PES unknown PTS");return}for(var Gt=0,Wt;Nt<Ft;)if(Wt=st.appendFrame(Ot,kt,Nt,Ht,Gt),Nt+=Wt.length,Wt.missing){this.aacOverFlow=Wt;break}else for(Gt++;Nt<Ft-1&&!st.isHeader(kt,Nt);Nt++);},_t.parseMPEGPES=function(Ot,Pt){var Dt=Pt.data,It=Dt.length,kt=0,Lt=0,At=Pt.pts;if(At===void 0){Rt.logger.warn("[tsdemuxer]: MPEG PES unknown PTS");return}for(;Lt<It;)if(lt.isHeader(Dt,Lt)){var $t=lt.appendFrame(Ot,Dt,Lt,At,kt);if($t)Lt+=$t.length,kt++;else break}else Lt++},_t.parseID3PES=function(Ot,Pt){if(Pt.pts===void 0){Rt.logger.warn("[tsdemuxer]: ID3 PES unknown PTS");return}var Dt=ft({},Pt,{type:this._avcTrack?ut.MetadataSchema.emsg:ut.MetadataSchema.audioId3,duration:Number.POSITIVE_INFINITY});Ot.samples.push(Dt)},mt}();function Ct(mt,_t,bt,Ot){return{key:mt,frame:!1,pts:_t,dts:bt,units:[],debug:Ot,length:0}}function pt(mt,_t){return(mt[_t+10]&31)<<8|mt[_t+11]}function dt(mt,_t,bt,Ot){var Pt={audio:-1,avc:-1,id3:-1,segmentCodec:"aac"},Dt=(mt[_t+1]&15)<<8|mt[_t+2],It=_t+3+Dt-4,kt=(mt[_t+10]&15)<<8|mt[_t+11];for(_t+=12+kt;_t<It;){var Lt=(mt[_t+1]&31)<<8|mt[_t+2];switch(mt[_t]){case 207:if(!Ot){Rt.logger.log("ADTS AAC with AES-128-CBC frame encryption found in unencrypted stream");break}case 15:Pt.audio===-1&&(Pt.audio=Lt);break;case 21:Pt.id3===-1&&(Pt.id3=Lt);break;case 219:if(!Ot){Rt.logger.log("H.264 with AES-128-CBC slice encryption found in unencrypted stream");break}case 27:Pt.avc===-1&&(Pt.avc=Lt);break;case 3:case 4:bt.mpeg!==!0&&bt.mp3!==!0?Rt.logger.log("MPEG audio found, not supported in this browser"):Pt.audio===-1&&(Pt.audio=Lt,Pt.segmentCodec="mp3");break;case 36:Rt.logger.warn("Unsupported HEVC stream type found");break}_t+=((mt[_t+3]&15)<<8|mt[_t+4])+5}return Pt}function vt(mt){var _t=0,bt,Ot,Pt,Dt,It,kt=mt.data;if(!mt||mt.size===0)return null;for(;kt[0].length<19&&kt.length>1;){var Lt=new Uint8Array(kt[0].length+kt[1].length);Lt.set(kt[0]),Lt.set(kt[1],kt[0].length),kt[0]=Lt,kt.splice(1,1)}bt=kt[0];var At=(bt[0]<<16)+(bt[1]<<8)+bt[2];if(At===1){if(Ot=(bt[4]<<8)+bt[5],Ot&&Ot>mt.size-6)return null;var $t=bt[7];$t&192&&(Dt=(bt[9]&14)*536870912+(bt[10]&255)*4194304+(bt[11]&254)*16384+(bt[12]&255)*128+(bt[13]&254)/2,$t&64?(It=(bt[14]&14)*536870912+(bt[15]&255)*4194304+(bt[16]&254)*16384+(bt[17]&255)*128+(bt[18]&254)/2,Dt-It>54e5&&(Rt.logger.warn(Math.round((Dt-It)/9e4)+"s delta between PTS and DTS, align them"),Dt=It)):It=Dt),Pt=bt[8];var jt=Pt+9;if(mt.size<=jt)return null;mt.size-=jt;for(var Nt=new Uint8Array(mt.size),Ft=0,Bt=kt.length;Ft<Bt;Ft++){bt=kt[Ft];var Ut=bt.byteLength;if(jt)if(jt>Ut){jt-=Ut;continue}else bt=bt.subarray(jt),Ut-=jt,jt=0;Nt.set(bt,_t),_t+=Ut}return Ot&&(Ot-=Pt+3),{data:Nt,pts:Dt,dts:It,len:Ot}}return null}function St(mt,_t){if(mt.units.length&&mt.frame){if(mt.pts===void 0){var bt=_t.samples,Ot=bt.length;if(Ot){var Pt=bt[Ot-1];mt.pts=Pt.pts,mt.dts=Pt.dts}else{_t.dropped++;return}}_t.samples.push(mt)}mt.debug.length&&Rt.logger.log(mt.pts+"/"+mt.dts+":"+mt.debug)}const Et=xt},"./src/demux/webworkify-webpack.js":(at,it,ot)=>{ot.r(it),ot.d(it,{default:()=>yt});var st=function(){var Ct=ENTRY_MODULE,pt={},dt=function St(Et){var mt=pt[Et];if(mt!==void 0)return mt.exports;var _t=pt[Et]={exports:{}};return Ct[Et].call(_t.exports,_t,_t.exports,St),_t.exports};dt.m=Ct,function(){dt.n=function(St){var Et=St&&St.__esModule?function(){return St.default}:function(){return St};return dt.d(Et,{a:Et}),Et}}(),function(){dt.d=function(St,Et){for(var mt in Et)dt.o(Et,mt)&&!dt.o(St,mt)&&Object.defineProperty(St,mt,{enumerable:!0,get:Et[mt]})}}(),function(){dt.o=function(St,Et){return Object.prototype.hasOwnProperty.call(St,Et)}}(),function(){dt.r=function(St){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(St,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(St,"__esModule",{value:!0})}}();var vt=dt(ENTRY_MODULE);return vt.default||vt},lt=st.toString().split("ENTRY_MODULE"),gt="[\\.|\\-|\\+|\\w|/|@]+",ct="\\(\\s*(/\\*.*?\\*/)?\\s*.*?("+gt+").*?\\)";function wt(xt){return(xt+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function Tt(xt){return!isNaN(1*xt)}function Rt(xt,Ct,pt){var dt={};dt[pt]=[];var vt=Ct.toString().replace(/^"[^"]+"/,"function"),St=vt.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/)||vt.match(/^\(\w+,\s*\w+,\s*(\w+)\)\s?\=\s?\>/);if(!St)return dt;for(var Et=St[1],mt=new RegExp("(\\\\n|\\W)"+wt(Et)+ct,"g"),_t;_t=mt.exec(vt);)_t[3]!=="dll-reference"&&dt[pt].push(_t[3]);for(mt=new RegExp("\\("+wt(Et)+'\\("(dll-reference\\s('+gt+'))"\\)\\)'+ct,"g");_t=mt.exec(vt);)xt[_t[2]]||(dt[pt].push(_t[1]),xt[_t[2]]=ot(_t[1]).m),dt[_t[2]]=dt[_t[2]]||[],dt[_t[2]].push(_t[4]);for(var bt=Object.keys(dt),Ot=0;Ot<bt.length;Ot++)for(var Pt=0;Pt<dt[bt[Ot]].length;Pt++)Tt(dt[bt[Ot]][Pt])&&(dt[bt[Ot]][Pt]=1*dt[bt[Ot]][Pt]);return dt}function ht(xt){var Ct=Object.keys(xt);return Ct.reduce(function(pt,dt){return pt||xt[dt].length>0},!1)}function ut(xt,Ct){for(var pt={main:[Ct]},dt={main:[]},vt={main:{}};ht(pt);)for(var St=Object.keys(pt),Et=0;Et<St.length;Et++){var mt=St[Et],_t=pt[mt],bt=_t.pop();if(vt[mt]=vt[mt]||{},!(vt[mt][bt]||!xt[mt][bt])){vt[mt][bt]=!0,dt[mt]=dt[mt]||[],dt[mt].push(bt);for(var Ot=Rt(xt,xt[mt][bt],mt),Pt=Object.keys(Ot),Dt=0;Dt<Pt.length;Dt++)pt[Pt[Dt]]=pt[Pt[Dt]]||[],pt[Pt[Dt]]=pt[Pt[Dt]].concat(Ot[Pt[Dt]])}}return dt}function ft(xt,Ct,pt,dt){var vt=xt[dt].map(function(St){return'"'+St+'": '+Ct[dt][St].toString().replace(/^"[^"]+"/,"function")}).join(",");return lt[0]+"{"+vt+"}"+lt[1]+'"'+pt+'"'+lt[2]}function yt(xt,Ct){Ct=Ct||{};var pt={main:ot.m},dt=Ct.all?{main:Object.keys(pt.main)}:ut(pt,xt),vt="";Object.keys(dt).filter(function(bt){return bt!=="main"}).forEach(function(bt){for(var Ot=0;dt[bt][Ot];)Ot++;dt[bt].push(Ot),pt[bt][Ot]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",vt=vt+("var "+bt+" = ("+ft(dt,pt,Ot,modules)+`)();
`)}),vt=vt+("new (("+ft(dt,pt,xt,"main")+")())(self);");var St=new window.Blob([vt],{type:"text/javascript"}),Et=window.URL||window.webkitURL||window.mozURL||window.msURL,mt=Et.createObjectURL(St),_t=new window.Worker(mt);return _t.objectURL=mt,_t}},"./src/errors.ts":(at,it,ot)=>{ot.r(it),ot.d(it,{ErrorDetails:()=>lt,ErrorTypes:()=>st});var st;(function(gt){gt.NETWORK_ERROR="networkError",gt.MEDIA_ERROR="mediaError",gt.KEY_SYSTEM_ERROR="keySystemError",gt.MUX_ERROR="muxError",gt.OTHER_ERROR="otherError"})(st||(st={}));var lt;(function(gt){gt.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",gt.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",gt.KEY_SYSTEM_NO_SESSION="keySystemNoSession",gt.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",gt.KEY_SYSTEM_NO_INIT_DATA="keySystemNoInitData",gt.MANIFEST_LOAD_ERROR="manifestLoadError",gt.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",gt.MANIFEST_PARSING_ERROR="manifestParsingError",gt.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",gt.LEVEL_EMPTY_ERROR="levelEmptyError",gt.LEVEL_LOAD_ERROR="levelLoadError",gt.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",gt.LEVEL_SWITCH_ERROR="levelSwitchError",gt.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",gt.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",gt.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",gt.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",gt.FRAG_LOAD_ERROR="fragLoadError",gt.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",gt.FRAG_DECRYPT_ERROR="fragDecryptError",gt.FRAG_PARSING_ERROR="fragParsingError",gt.REMUX_ALLOC_ERROR="remuxAllocError",gt.KEY_LOAD_ERROR="keyLoadError",gt.KEY_LOAD_TIMEOUT="keyLoadTimeOut",gt.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",gt.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",gt.BUFFER_APPEND_ERROR="bufferAppendError",gt.BUFFER_APPENDING_ERROR="bufferAppendingError",gt.BUFFER_STALLED_ERROR="bufferStalledError",gt.BUFFER_FULL_ERROR="bufferFullError",gt.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",gt.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",gt.INTERNAL_EXCEPTION="internalException",gt.INTERNAL_ABORTED="aborted",gt.UNKNOWN="unknown"})(lt||(lt={}))},"./src/events.ts":(at,it,ot)=>{ot.r(it),ot.d(it,{Events:()=>st});var st;(function(lt){lt.MEDIA_ATTACHING="hlsMediaAttaching",lt.MEDIA_ATTACHED="hlsMediaAttached",lt.MEDIA_DETACHING="hlsMediaDetaching",lt.MEDIA_DETACHED="hlsMediaDetached",lt.BUFFER_RESET="hlsBufferReset",lt.BUFFER_CODECS="hlsBufferCodecs",lt.BUFFER_CREATED="hlsBufferCreated",lt.BUFFER_APPENDING="hlsBufferAppending",lt.BUFFER_APPENDED="hlsBufferAppended",lt.BUFFER_EOS="hlsBufferEos",lt.BUFFER_FLUSHING="hlsBufferFlushing",lt.BUFFER_FLUSHED="hlsBufferFlushed",lt.MANIFEST_LOADING="hlsManifestLoading",lt.MANIFEST_LOADED="hlsManifestLoaded",lt.MANIFEST_PARSED="hlsManifestParsed",lt.LEVEL_SWITCHING="hlsLevelSwitching",lt.LEVEL_SWITCHED="hlsLevelSwitched",lt.LEVEL_LOADING="hlsLevelLoading",lt.LEVEL_LOADED="hlsLevelLoaded",lt.LEVEL_UPDATED="hlsLevelUpdated",lt.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",lt.LEVELS_UPDATED="hlsLevelsUpdated",lt.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",lt.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",lt.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",lt.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",lt.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",lt.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",lt.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",lt.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",lt.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",lt.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",lt.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",lt.CUES_PARSED="hlsCuesParsed",lt.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",lt.INIT_PTS_FOUND="hlsInitPtsFound",lt.FRAG_LOADING="hlsFragLoading",lt.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",lt.FRAG_LOADED="hlsFragLoaded",lt.FRAG_DECRYPTED="hlsFragDecrypted",lt.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",lt.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",lt.FRAG_PARSING_METADATA="hlsFragParsingMetadata",lt.FRAG_PARSED="hlsFragParsed",lt.FRAG_BUFFERED="hlsFragBuffered",lt.FRAG_CHANGED="hlsFragChanged",lt.FPS_DROP="hlsFpsDrop",lt.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",lt.ERROR="hlsError",lt.DESTROYING="hlsDestroying",lt.KEY_LOADING="hlsKeyLoading",lt.KEY_LOADED="hlsKeyLoaded",lt.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",lt.BACK_BUFFER_REACHED="hlsBackBufferReached"})(st||(st={}))},"./src/hls.ts":(at,it,ot)=>{ot.r(it),ot.d(it,{default:()=>St});var st=ot("./node_modules/url-toolkit/src/url-toolkit.js"),lt=ot("./src/loader/playlist-loader.ts"),gt=ot("./src/loader/key-loader.ts"),ct=ot("./src/controller/id3-track-controller.ts"),wt=ot("./src/controller/latency-controller.ts"),Tt=ot("./src/controller/level-controller.ts"),Rt=ot("./src/controller/fragment-tracker.ts"),ht=ot("./src/controller/stream-controller.ts"),ut=ot("./src/is-supported.ts"),ft=ot("./src/utils/logger.ts"),yt=ot("./src/config.ts"),xt=ot("./node_modules/eventemitter3/index.js"),Ct=ot("./src/events.ts"),pt=ot("./src/errors.ts");function dt(Et,mt){for(var _t=0;_t<mt.length;_t++){var bt=mt[_t];bt.enumerable=bt.enumerable||!1,bt.configurable=!0,"value"in bt&&(bt.writable=!0),Object.defineProperty(Et,bt.key,bt)}}function vt(Et,mt,_t){return mt&&dt(Et.prototype,mt),_t&&dt(Et,_t),Object.defineProperty(Et,"prototype",{writable:!1}),Et}var St=function(){Et.isSupported=function(){return(0,ut.isSupported)()};function Et(_t){_t===void 0&&(_t={}),this.config=void 0,this.userConfig=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new xt.EventEmitter,this._autoLevelCapping=void 0,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this.url=null;var bt=this.config=(0,yt.mergeConfig)(Et.DefaultConfig,_t);this.userConfig=_t,(0,ft.enableLogs)(bt.debug,"Hls instance"),this._autoLevelCapping=-1,bt.progressive&&(0,yt.enableStreamingMode)(bt);var Ot=bt.abrController,Pt=bt.bufferController,Dt=bt.capLevelController,It=bt.fpsController,kt=this.abrController=new Ot(this),Lt=this.bufferController=new Pt(this),At=this.capLevelController=new Dt(this),$t=new It(this),jt=new lt.default(this),Nt=new gt.default(this),Ft=new ct.default(this),Bt=this.levelController=new Tt.default(this),Ut=new Rt.FragmentTracker(this),Ht=this.streamController=new ht.default(this,Ut);At.setStreamController(Ht),$t.setStreamController(Ht);var Kt=[jt,Nt,Bt,Ht];this.networkControllers=Kt;var Gt=[kt,Lt,At,$t,Ft,Ut];this.audioTrackController=this.createController(bt.audioTrackController,null,Kt),this.createController(bt.audioStreamController,Ut,Kt),this.subtitleTrackController=this.createController(bt.subtitleTrackController,null,Kt),this.createController(bt.subtitleStreamController,Ut,Kt),this.createController(bt.timelineController,null,Gt),this.emeController=this.createController(bt.emeController,null,Gt),this.cmcdController=this.createController(bt.cmcdController,null,Gt),this.latencyController=this.createController(wt.default,null,Gt),this.coreComponents=Gt}var mt=Et.prototype;return mt.createController=function(bt,Ot,Pt){if(bt){var Dt=Ot?new bt(this,Ot):new bt(this);return Pt&&Pt.push(Dt),Dt}return null},mt.on=function(bt,Ot,Pt){Pt===void 0&&(Pt=this),this._emitter.on(bt,Ot,Pt)},mt.once=function(bt,Ot,Pt){Pt===void 0&&(Pt=this),this._emitter.once(bt,Ot,Pt)},mt.removeAllListeners=function(bt){this._emitter.removeAllListeners(bt)},mt.off=function(bt,Ot,Pt,Dt){Pt===void 0&&(Pt=this),this._emitter.off(bt,Ot,Pt,Dt)},mt.listeners=function(bt){return this._emitter.listeners(bt)},mt.emit=function(bt,Ot,Pt){return this._emitter.emit(bt,Ot,Pt)},mt.trigger=function(bt,Ot){if(this.config.debug)return this.emit(bt,bt,Ot);try{return this.emit(bt,bt,Ot)}catch(Pt){ft.logger.error("An internal error happened while handling event "+bt+'. Error message: "'+Pt.message+'". Here is a stacktrace:',Pt),this.trigger(Ct.Events.ERROR,{type:pt.ErrorTypes.OTHER_ERROR,details:pt.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:bt,error:Pt})}return!1},mt.listenerCount=function(bt){return this._emitter.listenerCount(bt)},mt.destroy=function(){ft.logger.log("destroy"),this.trigger(Ct.Events.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this.url=null,this.networkControllers.forEach(function(bt){return bt.destroy()}),this.networkControllers.length=0,this.coreComponents.forEach(function(bt){return bt.destroy()}),this.coreComponents.length=0},mt.attachMedia=function(bt){ft.logger.log("attachMedia"),this._media=bt,this.trigger(Ct.Events.MEDIA_ATTACHING,{media:bt})},mt.detachMedia=function(){ft.logger.log("detachMedia"),this.trigger(Ct.Events.MEDIA_DETACHING,void 0),this._media=null},mt.loadSource=function(bt){this.stopLoad();var Ot=this.media,Pt=this.url,Dt=this.url=st.buildAbsoluteURL(self.location.href,bt,{alwaysNormalize:!0});ft.logger.log("loadSource:"+Dt),Ot&&Pt&&Pt!==Dt&&this.bufferController.hasSourceTypes()&&(this.detachMedia(),this.attachMedia(Ot)),this.trigger(Ct.Events.MANIFEST_LOADING,{url:bt})},mt.startLoad=function(bt){bt===void 0&&(bt=-1),ft.logger.log("startLoad("+bt+")"),this.networkControllers.forEach(function(Ot){Ot.startLoad(bt)})},mt.stopLoad=function(){ft.logger.log("stopLoad"),this.networkControllers.forEach(function(bt){bt.stopLoad()})},mt.swapAudioCodec=function(){ft.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()},mt.recoverMediaError=function(){ft.logger.log("recoverMediaError");var bt=this._media;this.detachMedia(),bt&&this.attachMedia(bt)},mt.removeLevel=function(bt,Ot){Ot===void 0&&(Ot=0),this.levelController.removeLevel(bt,Ot)},vt(Et,[{key:"levels",get:function(){var bt=this.levelController.levels;return bt||[]}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(bt){ft.logger.log("set currentLevel:"+bt),this.loadLevel=bt,this.abrController.clearTimer(),this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(bt){ft.logger.log("set nextLevel:"+bt),this.levelController.manualLevel=bt,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(bt){ft.logger.log("set loadLevel:"+bt),this.levelController.manualLevel=bt}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(bt){this.levelController.nextLoadLevel=bt}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(bt){ft.logger.log("set firstLevel:"+bt),this.levelController.firstLevel=bt}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(bt){ft.logger.log("set startLevel:"+bt),bt!==-1&&(bt=Math.max(bt,this.minAutoLevel)),this.levelController.startLevel=bt}},{key:"capLevelToPlayerSize",get:function(){return this.config.capLevelToPlayerSize},set:function(bt){var Ot=!!bt;Ot!==this.config.capLevelToPlayerSize&&(Ot?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=Ot)}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(bt){this._autoLevelCapping!==bt&&(ft.logger.log("set autoLevelCapping:"+bt),this._autoLevelCapping=bt)}},{key:"bandwidthEstimate",get:function(){var bt=this.abrController.bwEstimator;return bt?bt.getEstimate():NaN}},{key:"autoLevelEnabled",get:function(){return this.levelController.manualLevel===-1}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){var bt=this.levels,Ot=this.config.minAutoBitrate;if(!bt)return 0;for(var Pt=bt.length,Dt=0;Dt<Pt;Dt++)if(bt[Dt].maxBitrate>=Ot)return Dt;return 0}},{key:"maxAutoLevel",get:function(){var bt=this.levels,Ot=this.autoLevelCapping,Pt;return Ot===-1&&bt&&bt.length?Pt=bt.length-1:Pt=Ot,Pt}},{key:"nextAutoLevel",get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(bt){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,bt)}},{key:"playingDate",get:function(){return this.streamController.currentProgramDateTime}},{key:"mainForwardBufferInfo",get:function(){return this.streamController.getMainFwdBufferInfo()}},{key:"audioTracks",get:function(){var bt=this.audioTrackController;return bt?bt.audioTracks:[]}},{key:"audioTrack",get:function(){var bt=this.audioTrackController;return bt?bt.audioTrack:-1},set:function(bt){var Ot=this.audioTrackController;Ot&&(Ot.audioTrack=bt)}},{key:"subtitleTracks",get:function(){var bt=this.subtitleTrackController;return bt?bt.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var bt=this.subtitleTrackController;return bt?bt.subtitleTrack:-1},set:function(bt){var Ot=this.subtitleTrackController;Ot&&(Ot.subtitleTrack=bt)}},{key:"media",get:function(){return this._media}},{key:"subtitleDisplay",get:function(){var bt=this.subtitleTrackController;return bt?bt.subtitleDisplay:!1},set:function(bt){var Ot=this.subtitleTrackController;Ot&&(Ot.subtitleDisplay=bt)}},{key:"lowLatencyMode",get:function(){return this.config.lowLatencyMode},set:function(bt){this.config.lowLatencyMode=bt}},{key:"liveSyncPosition",get:function(){return this.latencyController.liveSyncPosition}},{key:"latency",get:function(){return this.latencyController.latency}},{key:"maxLatency",get:function(){return this.latencyController.maxLatency}},{key:"targetLatency",get:function(){return this.latencyController.targetLatency}},{key:"drift",get:function(){return this.latencyController.drift}},{key:"forceStartLoad",get:function(){return this.streamController.forceStartLoad}}],[{key:"version",get:function(){return"1.2.9"}},{key:"Events",get:function(){return Ct.Events}},{key:"ErrorTypes",get:function(){return pt.ErrorTypes}},{key:"ErrorDetails",get:function(){return pt.ErrorDetails}},{key:"DefaultConfig",get:function(){return Et.defaultConfig?Et.defaultConfig:yt.hlsDefaultConfig},set:function(bt){Et.defaultConfig=bt}}]),Et}();St.defaultConfig=void 0},"./src/is-supported.ts":(at,it,ot)=>{ot.r(it),ot.d(it,{changeTypeSupported:()=>ct,isSupported:()=>gt});var st=ot("./src/utils/mediasource-helper.ts");function lt(){return self.SourceBuffer||self.WebKitSourceBuffer}function gt(){var wt=(0,st.getMediaSource)();if(!wt)return!1;var Tt=lt(),Rt=wt&&typeof wt.isTypeSupported=="function"&&wt.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),ht=!Tt||Tt.prototype&&typeof Tt.prototype.appendBuffer=="function"&&typeof Tt.prototype.remove=="function";return!!Rt&&!!ht}function ct(){var wt,Tt=lt();return typeof(Tt==null||(wt=Tt.prototype)===null||wt===void 0?void 0:wt.changeType)=="function"}},"./src/loader/date-range.ts":(at,it,ot)=>{ot.r(it),ot.d(it,{DateRange:()=>ht,DateRangeAttribute:()=>Rt});var st=ot("./src/polyfills/number.ts"),lt=ot("./src/utils/attr-list.ts"),gt=ot("./src/utils/logger.ts");function ct(){return ct=Object.assign?Object.assign.bind():function(ut){for(var ft=1;ft<arguments.length;ft++){var yt=arguments[ft];for(var xt in yt)Object.prototype.hasOwnProperty.call(yt,xt)&&(ut[xt]=yt[xt])}return ut},ct.apply(this,arguments)}function wt(ut,ft){for(var yt=0;yt<ft.length;yt++){var xt=ft[yt];xt.enumerable=xt.enumerable||!1,xt.configurable=!0,"value"in xt&&(xt.writable=!0),Object.defineProperty(ut,xt.key,xt)}}function Tt(ut,ft,yt){return ft&&wt(ut.prototype,ft),yt&&wt(ut,yt),Object.defineProperty(ut,"prototype",{writable:!1}),ut}var Rt;(function(ut){ut.ID="ID",ut.CLASS="CLASS",ut.START_DATE="START-DATE",ut.DURATION="DURATION",ut.END_DATE="END-DATE",ut.END_ON_NEXT="END-ON-NEXT",ut.PLANNED_DURATION="PLANNED-DURATION",ut.SCTE35_OUT="SCTE35-OUT",ut.SCTE35_IN="SCTE35-IN"})(Rt||(Rt={}));var ht=function(){function ut(ft,yt){if(this.attr=void 0,this._startDate=void 0,this._endDate=void 0,this._badValueForSameId=void 0,yt){var xt=yt.attr;for(var Ct in xt)if(Object.prototype.hasOwnProperty.call(ft,Ct)&&ft[Ct]!==xt[Ct]){gt.logger.warn('DATERANGE tag attribute: "'+Ct+'" does not match for tags with ID: "'+ft.ID+'"'),this._badValueForSameId=Ct;break}ft=ct(new lt.AttrList({}),xt,ft)}if(this.attr=ft,this._startDate=new Date(ft[Rt.START_DATE]),Rt.END_DATE in this.attr){var pt=new Date(this.attr[Rt.END_DATE]);(0,st.isFiniteNumber)(pt.getTime())&&(this._endDate=pt)}}return Tt(ut,[{key:"id",get:function(){return this.attr.ID}},{key:"class",get:function(){return this.attr.CLASS}},{key:"startDate",get:function(){return this._startDate}},{key:"endDate",get:function(){if(this._endDate)return this._endDate;var yt=this.duration;return yt!==null?new Date(this._startDate.getTime()+yt*1e3):null}},{key:"duration",get:function(){if(Rt.DURATION in this.attr){var yt=this.attr.decimalFloatingPoint(Rt.DURATION);if((0,st.isFiniteNumber)(yt))return yt}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}},{key:"plannedDuration",get:function(){return Rt.PLANNED_DURATION in this.attr?this.attr.decimalFloatingPoint(Rt.PLANNED_DURATION):null}},{key:"endOnNext",get:function(){return this.attr.bool(Rt.END_ON_NEXT)}},{key:"isValid",get:function(){return!!this.id&&!this._badValueForSameId&&(0,st.isFiniteNumber)(this.startDate.getTime())&&(this.duration===null||this.duration>=0)&&(!this.endOnNext||!!this.class)}}]),ut}()},"./src/loader/fragment-loader.ts":(at,it,ot)=>{ot.r(it),ot.d(it,{LoadError:()=>Ct,default:()=>yt});var st=ot("./src/polyfills/number.ts"),lt=ot("./src/errors.ts");function gt(pt,dt){pt.prototype=Object.create(dt.prototype),pt.prototype.constructor=pt,ht(pt,dt)}function ct(pt){var dt=typeof Map=="function"?new Map:void 0;return ct=function(St){if(St===null||!Rt(St))return St;if(typeof St!="function")throw new TypeError("Super expression must either be null or a function");if(typeof dt<"u"){if(dt.has(St))return dt.get(St);dt.set(St,Et)}function Et(){return wt(St,arguments,ut(this).constructor)}return Et.prototype=Object.create(St.prototype,{constructor:{value:Et,enumerable:!1,writable:!0,configurable:!0}}),ht(Et,St)},ct(pt)}function wt(pt,dt,vt){return Tt()?wt=Reflect.construct.bind():wt=function(Et,mt,_t){var bt=[null];bt.push.apply(bt,mt);var Ot=Function.bind.apply(Et,bt),Pt=new Ot;return _t&&ht(Pt,_t.prototype),Pt},wt.apply(null,arguments)}function Tt(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Rt(pt){return Function.toString.call(pt).indexOf("[native code]")!==-1}function ht(pt,dt){return ht=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(St,Et){return St.__proto__=Et,St},ht(pt,dt)}function ut(pt){return ut=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(vt){return vt.__proto__||Object.getPrototypeOf(vt)},ut(pt)}var ft=Math.pow(2,17),yt=function(){function pt(vt){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=vt}var dt=pt.prototype;return dt.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},dt.abort=function(){this.loader&&this.loader.abort()},dt.load=function(St,Et){var mt=this,_t=St.url;if(!_t)return Promise.reject(new Ct({type:lt.ErrorTypes.NETWORK_ERROR,details:lt.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:St,networkDetails:null},"Fragment does not have a "+(_t?"part list":"url")));this.abort();var bt=this.config,Ot=bt.fLoader,Pt=bt.loader;return new Promise(function(Dt,It){mt.loader&&mt.loader.destroy();var kt=mt.loader=St.loader=Ot?new Ot(bt):new Pt(bt),Lt=xt(St),At={timeout:bt.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:bt.fragLoadingMaxRetryTimeout,highWaterMark:St.sn==="initSegment"?1/0:ft};St.stats=kt.stats,kt.load(Lt,At,{onSuccess:function(jt,Nt,Ft,Bt){mt.resetLoader(St,kt),Dt({frag:St,part:null,payload:jt.data,networkDetails:Bt})},onError:function(jt,Nt,Ft){mt.resetLoader(St,kt),It(new Ct({type:lt.ErrorTypes.NETWORK_ERROR,details:lt.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:St,response:jt,networkDetails:Ft}))},onAbort:function(jt,Nt,Ft){mt.resetLoader(St,kt),It(new Ct({type:lt.ErrorTypes.NETWORK_ERROR,details:lt.ErrorDetails.INTERNAL_ABORTED,fatal:!1,frag:St,networkDetails:Ft}))},onTimeout:function(jt,Nt,Ft){mt.resetLoader(St,kt),It(new Ct({type:lt.ErrorTypes.NETWORK_ERROR,details:lt.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:St,networkDetails:Ft}))},onProgress:function(jt,Nt,Ft,Bt){Et&&Et({frag:St,part:null,payload:Ft,networkDetails:Bt})}})})},dt.loadPart=function(St,Et,mt){var _t=this;this.abort();var bt=this.config,Ot=bt.fLoader,Pt=bt.loader;return new Promise(function(Dt,It){_t.loader&&_t.loader.destroy();var kt=_t.loader=St.loader=Ot?new Ot(bt):new Pt(bt),Lt=xt(St,Et),At={timeout:bt.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:bt.fragLoadingMaxRetryTimeout,highWaterMark:ft};Et.stats=kt.stats,kt.load(Lt,At,{onSuccess:function(jt,Nt,Ft,Bt){_t.resetLoader(St,kt),_t.updateStatsFromPart(St,Et);var Ut={frag:St,part:Et,payload:jt.data,networkDetails:Bt};mt(Ut),Dt(Ut)},onError:function(jt,Nt,Ft){_t.resetLoader(St,kt),It(new Ct({type:lt.ErrorTypes.NETWORK_ERROR,details:lt.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:St,part:Et,response:jt,networkDetails:Ft}))},onAbort:function(jt,Nt,Ft){St.stats.aborted=Et.stats.aborted,_t.resetLoader(St,kt),It(new Ct({type:lt.ErrorTypes.NETWORK_ERROR,details:lt.ErrorDetails.INTERNAL_ABORTED,fatal:!1,frag:St,part:Et,networkDetails:Ft}))},onTimeout:function(jt,Nt,Ft){_t.resetLoader(St,kt),It(new Ct({type:lt.ErrorTypes.NETWORK_ERROR,details:lt.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:St,part:Et,networkDetails:Ft}))}})})},dt.updateStatsFromPart=function(St,Et){var mt=St.stats,_t=Et.stats,bt=_t.total;if(mt.loaded+=_t.loaded,bt){var Ot=Math.round(St.duration/Et.duration),Pt=Math.min(Math.round(mt.loaded/bt),Ot),Dt=Ot-Pt,It=Dt*Math.round(mt.loaded/Pt);mt.total=mt.loaded+It}else mt.total=Math.max(mt.loaded,mt.total);var kt=mt.loading,Lt=_t.loading;kt.start?kt.first+=Lt.first-Lt.start:(kt.start=Lt.start,kt.first=Lt.first),kt.end=Lt.end},dt.resetLoader=function(St,Et){St.loader=null,this.loader===Et&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),Et.destroy()},pt}();function xt(pt,dt){dt===void 0&&(dt=null);var vt=dt||pt,St={frag:pt,part:dt,responseType:"arraybuffer",url:vt.url,headers:{},rangeStart:0,rangeEnd:0},Et=vt.byteRangeStartOffset,mt=vt.byteRangeEndOffset;return(0,st.isFiniteNumber)(Et)&&(0,st.isFiniteNumber)(mt)&&(St.rangeStart=Et,St.rangeEnd=mt),St}var Ct=function(pt){gt(dt,pt);function dt(vt){for(var St,Et=arguments.length,mt=new Array(Et>1?Et-1:0),_t=1;_t<Et;_t++)mt[_t-1]=arguments[_t];return St=pt.call.apply(pt,[this].concat(mt))||this,St.data=void 0,St.data=vt,St}return dt}(ct(Error))},"./src/loader/fragment.ts":(at,it,ot)=>{ot.r(it),ot.d(it,{BaseSegment:()=>yt,ElementaryStreamTypes:()=>ft,Fragment:()=>xt,Part:()=>Ct});var st=ot("./src/polyfills/number.ts"),lt=ot("./node_modules/url-toolkit/src/url-toolkit.js"),gt=ot("./src/utils/logger.ts"),ct=ot("./src/loader/level-key.ts"),wt=ot("./src/loader/load-stats.ts");function Tt(pt,dt){pt.prototype=Object.create(dt.prototype),pt.prototype.constructor=pt,Rt(pt,dt)}function Rt(pt,dt){return Rt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(St,Et){return St.__proto__=Et,St},Rt(pt,dt)}function ht(pt,dt){for(var vt=0;vt<dt.length;vt++){var St=dt[vt];St.enumerable=St.enumerable||!1,St.configurable=!0,"value"in St&&(St.writable=!0),Object.defineProperty(pt,St.key,St)}}function ut(pt,dt,vt){return dt&&ht(pt.prototype,dt),vt&&ht(pt,vt),Object.defineProperty(pt,"prototype",{writable:!1}),pt}var ft;(function(pt){pt.AUDIO="audio",pt.VIDEO="video",pt.AUDIOVIDEO="audiovideo"})(ft||(ft={}));var yt=function(){function pt(vt){var St;this._byteRange=null,this._url=null,this.baseurl=void 0,this.relurl=void 0,this.elementaryStreams=(St={},St[ft.AUDIO]=null,St[ft.VIDEO]=null,St[ft.AUDIOVIDEO]=null,St),this.baseurl=vt}var dt=pt.prototype;return dt.setByteRange=function(St,Et){var mt=St.split("@",2),_t=[];mt.length===1?_t[0]=Et?Et.byteRangeEndOffset:0:_t[0]=parseInt(mt[1]),_t[1]=parseInt(mt[0])+_t[0],this._byteRange=_t},ut(pt,[{key:"byteRange",get:function(){return this._byteRange?this._byteRange:[]}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"url",get:function(){return!this._url&&this.baseurl&&this.relurl&&(this._url=(0,lt.buildAbsoluteURL)(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""},set:function(St){this._url=St}}]),pt}(),xt=function(pt){Tt(dt,pt);function dt(St,Et){var mt;return mt=pt.call(this,Et)||this,mt._decryptdata=null,mt.rawProgramDateTime=null,mt.programDateTime=null,mt.tagList=[],mt.duration=0,mt.sn=0,mt.levelkey=void 0,mt.type=void 0,mt.loader=null,mt.level=-1,mt.cc=0,mt.startPTS=void 0,mt.endPTS=void 0,mt.appendedPTS=void 0,mt.startDTS=void 0,mt.endDTS=void 0,mt.start=0,mt.deltaPTS=void 0,mt.maxStartPTS=void 0,mt.minEndPTS=void 0,mt.stats=new wt.LoadStats,mt.urlId=0,mt.data=void 0,mt.bitrateTest=!1,mt.title=null,mt.initSegment=null,mt.type=St,mt}var vt=dt.prototype;return vt.createInitializationVector=function(Et){for(var mt=new Uint8Array(16),_t=12;_t<16;_t++)mt[_t]=Et>>8*(15-_t)&255;return mt},vt.setDecryptDataFromLevelKey=function(Et,mt){var _t=Et;return(Et==null?void 0:Et.method)==="AES-128"&&Et.uri&&!Et.iv&&(_t=ct.LevelKey.fromURI(Et.uri),_t.method=Et.method,_t.iv=this.createInitializationVector(mt),_t.keyFormat="identity"),_t},vt.setElementaryStreamInfo=function(Et,mt,_t,bt,Ot,Pt){Pt===void 0&&(Pt=!1);var Dt=this.elementaryStreams,It=Dt[Et];if(!It){Dt[Et]={startPTS:mt,endPTS:_t,startDTS:bt,endDTS:Ot,partial:Pt};return}It.startPTS=Math.min(It.startPTS,mt),It.endPTS=Math.max(It.endPTS,_t),It.startDTS=Math.min(It.startDTS,bt),It.endDTS=Math.max(It.endDTS,Ot)},vt.clearElementaryStreamInfo=function(){var Et=this.elementaryStreams;Et[ft.AUDIO]=null,Et[ft.VIDEO]=null,Et[ft.AUDIOVIDEO]=null},ut(dt,[{key:"decryptdata",get:function(){if(!this.levelkey&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkey){var Et=this.sn;typeof Et!="number"&&(this.levelkey&&this.levelkey.method==="AES-128"&&!this.levelkey.iv&&gt.logger.warn('missing IV for initialization segment with method="'+this.levelkey.method+'" - compliance issue'),Et=0),this._decryptdata=this.setDecryptDataFromLevelKey(this.levelkey,Et)}return this._decryptdata}},{key:"end",get:function(){return this.start+this.duration}},{key:"endProgramDateTime",get:function(){if(this.programDateTime===null||!(0,st.isFiniteNumber)(this.programDateTime))return null;var Et=(0,st.isFiniteNumber)(this.duration)?this.duration:0;return this.programDateTime+Et*1e3}},{key:"encrypted",get:function(){var Et;return!!((Et=this.decryptdata)!==null&&Et!==void 0&&Et.keyFormat&&this.decryptdata.uri)}}]),dt}(yt),Ct=function(pt){Tt(dt,pt);function dt(vt,St,Et,mt,_t){var bt;bt=pt.call(this,Et)||this,bt.fragOffset=0,bt.duration=0,bt.gap=!1,bt.independent=!1,bt.relurl=void 0,bt.fragment=void 0,bt.index=void 0,bt.stats=new wt.LoadStats,bt.duration=vt.decimalFloatingPoint("DURATION"),bt.gap=vt.bool("GAP"),bt.independent=vt.bool("INDEPENDENT"),bt.relurl=vt.enumeratedString("URI"),bt.fragment=St,bt.index=mt;var Ot=vt.enumeratedString("BYTERANGE");return Ot&&bt.setByteRange(Ot,_t),_t&&(bt.fragOffset=_t.fragOffset+_t.duration),bt}return ut(dt,[{key:"start",get:function(){return this.fragment.start+this.fragOffset}},{key:"end",get:function(){return this.start+this.duration}},{key:"loaded",get:function(){var St=this.elementaryStreams;return!!(St.audio||St.video||St.audiovideo)}}]),dt}(yt)},"./src/loader/key-loader.ts":(at,it,ot)=>{ot.r(it),ot.d(it,{default:()=>ct});var st=ot("./src/events.ts"),lt=ot("./src/errors.ts"),gt=ot("./src/utils/logger.ts"),ct=function(){function wt(Rt){this.hls=void 0,this.loaders={},this.decryptkey=null,this.decrypturl=null,this.hls=Rt,this.registerListeners()}var Tt=wt.prototype;return Tt.startLoad=function(ht){},Tt.stopLoad=function(){this.destroyInternalLoaders()},Tt.registerListeners=function(){this.hls.on(st.Events.KEY_LOADING,this.onKeyLoading,this)},Tt.unregisterListeners=function(){this.hls.off(st.Events.KEY_LOADING,this.onKeyLoading)},Tt.destroyInternalLoaders=function(){for(var ht in this.loaders){var ut=this.loaders[ht];ut&&ut.destroy()}this.loaders={}},Tt.destroy=function(){this.unregisterListeners(),this.destroyInternalLoaders()},Tt.onKeyLoading=function(ht,ut){var ft=ut.frag,yt=ft.type,xt=this.loaders[yt];if(!ft.decryptdata){gt.logger.warn("Missing decryption data on fragment in onKeyLoading");return}var Ct=ft.decryptdata.uri;if(Ct!==this.decrypturl||this.decryptkey===null){var pt=this.hls.config;if(xt&&(gt.logger.warn("abort previous key loader for type:"+yt),xt.abort()),!Ct){gt.logger.warn("key uri is falsy");return}var dt=pt.loader,vt=ft.loader=this.loaders[yt]=new dt(pt);this.decrypturl=Ct,this.decryptkey=null;var St={url:Ct,frag:ft,responseType:"arraybuffer"},Et={timeout:pt.fragLoadingTimeOut,maxRetry:0,retryDelay:pt.fragLoadingRetryDelay,maxRetryDelay:pt.fragLoadingMaxRetryTimeout,highWaterMark:0},mt={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};vt.load(St,Et,mt)}else this.decryptkey&&(ft.decryptdata.key=this.decryptkey,this.hls.trigger(st.Events.KEY_LOADED,{frag:ft}))},Tt.loadsuccess=function(ht,ut,ft){var yt=ft.frag;if(!yt.decryptdata){gt.logger.error("after key load, decryptdata unset");return}this.decryptkey=yt.decryptdata.key=new Uint8Array(ht.data),yt.loader=null,delete this.loaders[yt.type],this.hls.trigger(st.Events.KEY_LOADED,{frag:yt})},Tt.loaderror=function(ht,ut){var ft=ut.frag,yt=ft.loader;yt&&yt.abort(),delete this.loaders[ft.type],this.hls.trigger(st.Events.ERROR,{type:lt.ErrorTypes.NETWORK_ERROR,details:lt.ErrorDetails.KEY_LOAD_ERROR,fatal:!1,frag:ft,response:ht})},Tt.loadtimeout=function(ht,ut){var ft=ut.frag,yt=ft.loader;yt&&yt.abort(),delete this.loaders[ft.type],this.hls.trigger(st.Events.ERROR,{type:lt.ErrorTypes.NETWORK_ERROR,details:lt.ErrorDetails.KEY_LOAD_TIMEOUT,fatal:!1,frag:ft})},wt}()},"./src/loader/level-details.ts":(at,it,ot)=>{ot.r(it),ot.d(it,{LevelDetails:()=>wt});var st=ot("./src/polyfills/number.ts");function lt(Tt,Rt){for(var ht=0;ht<Rt.length;ht++){var ut=Rt[ht];ut.enumerable=ut.enumerable||!1,ut.configurable=!0,"value"in ut&&(ut.writable=!0),Object.defineProperty(Tt,ut.key,ut)}}function gt(Tt,Rt,ht){return Rt&&lt(Tt.prototype,Rt),ht&&lt(Tt,ht),Object.defineProperty(Tt,"prototype",{writable:!1}),Tt}var ct=10,wt=function(){function Tt(ht){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.live=!0,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.availabilityDelay=void 0,this.misses=0,this.needSidxRanges=!1,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.fragments=[],this.dateRanges={},this.url=ht}var Rt=Tt.prototype;return Rt.reloaded=function(ut){if(!ut){this.advanced=!0,this.updated=!0;return}var ft=this.lastPartSn-ut.lastPartSn,yt=this.lastPartIndex-ut.lastPartIndex;this.updated=this.endSN!==ut.endSN||!!yt||!!ft,this.advanced=this.endSN>ut.endSN||ft>0||ft===0&&yt>0,this.updated||this.advanced?this.misses=Math.floor(ut.misses*.6):this.misses=ut.misses+1,this.availabilityDelay=ut.availabilityDelay},gt(Tt,[{key:"hasProgramDateTime",get:function(){return this.fragments.length?(0,st.isFiniteNumber)(this.fragments[this.fragments.length-1].programDateTime):!1}},{key:"levelTargetDuration",get:function(){return this.averagetargetduration||this.targetduration||ct}},{key:"drift",get:function(){var ut=this.driftEndTime-this.driftStartTime;if(ut>0){var ft=this.driftEnd-this.driftStart;return ft*1e3/ut}return 1}},{key:"edge",get:function(){return this.partEnd||this.fragmentEnd}},{key:"partEnd",get:function(){var ut;return(ut=this.partList)!==null&&ut!==void 0&&ut.length?this.partList[this.partList.length-1].end:this.fragmentEnd}},{key:"fragmentEnd",get:function(){var ut;return(ut=this.fragments)!==null&&ut!==void 0&&ut.length?this.fragments[this.fragments.length-1].end:0}},{key:"age",get:function(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}},{key:"lastPartIndex",get:function(){var ut;return(ut=this.partList)!==null&&ut!==void 0&&ut.length?this.partList[this.partList.length-1].index:-1}},{key:"lastPartSn",get:function(){var ut;return(ut=this.partList)!==null&&ut!==void 0&&ut.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}}]),Tt}()},"./src/loader/level-key.ts":(at,it,ot)=>{ot.r(it),ot.d(it,{LevelKey:()=>ct});var st=ot("./node_modules/url-toolkit/src/url-toolkit.js");function lt(wt,Tt){for(var Rt=0;Rt<Tt.length;Rt++){var ht=Tt[Rt];ht.enumerable=ht.enumerable||!1,ht.configurable=!0,"value"in ht&&(ht.writable=!0),Object.defineProperty(wt,ht.key,ht)}}function gt(wt,Tt,Rt){return Tt&&lt(wt.prototype,Tt),Rt&&lt(wt,Rt),Object.defineProperty(wt,"prototype",{writable:!1}),wt}var ct=function(){wt.fromURL=function(Rt,ht){return new wt(Rt,ht)},wt.fromURI=function(Rt){return new wt(Rt)};function wt(Tt,Rt){this._uri=null,this.method=null,this.keyFormat=null,this.keyFormatVersions=null,this.keyID=null,this.key=null,this.iv=null,Rt?this._uri=(0,st.buildAbsoluteURL)(Tt,Rt,{alwaysNormalize:!0}):this._uri=Tt}return gt(wt,[{key:"uri",get:function(){return this._uri}}]),wt}()},"./src/loader/load-stats.ts":(at,it,ot)=>{ot.r(it),ot.d(it,{LoadStats:()=>st});var st=function(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}},"./src/loader/m3u8-parser.ts":(at,it,ot)=>{ot.r(it),ot.d(it,{default:()=>vt});var st=ot("./src/polyfills/number.ts"),lt=ot("./node_modules/url-toolkit/src/url-toolkit.js"),gt=ot("./src/loader/date-range.ts"),ct=ot("./src/loader/fragment.ts"),wt=ot("./src/loader/level-details.ts"),Tt=ot("./src/loader/level-key.ts"),Rt=ot("./src/utils/attr-list.ts"),ht=ot("./src/utils/logger.ts"),ut=ot("./src/utils/codecs.ts"),ft=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-SESSION-DATA:([^\r\n]*)[\r\n]+/g,yt=/#EXT-X-MEDIA:(.*)/g,xt=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[\S ]*)/.source,/#EXT-X-BYTERANGE:*(.+)/.source,/#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/#.*/.source].join("|"),"g"),Ct=new RegExp([/#(EXTM3U)/.source,/#EXT-X-(DATERANGE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|")),pt=/\.(mp4|m4s|m4v|m4a)$/i;function dt(Ot){var Pt,Dt;return pt.test((Pt=(Dt=lt.parseURL(Ot))===null||Dt===void 0?void 0:Dt.path)!=null?Pt:"")}var vt=function(){function Ot(){}return Ot.findGroup=function(Dt,It){for(var kt=0;kt<Dt.length;kt++){var Lt=Dt[kt];if(Lt.id===It)return Lt}},Ot.convertAVC1ToAVCOTI=function(Dt){var It=Dt.split(".");if(It.length>2){var kt=It.shift()+".";return kt+=parseInt(It.shift()).toString(16),kt+=("000"+parseInt(It.shift()).toString(16)).slice(-4),kt}return Dt},Ot.resolve=function(Dt,It){return lt.buildAbsoluteURL(It,Dt,{alwaysNormalize:!0})},Ot.parseMasterPlaylist=function(Dt,It){var kt=[],Lt=[],At={},$t=!1;ft.lastIndex=0;for(var jt;(jt=ft.exec(Dt))!=null;)if(jt[1]){var Nt,Ft=new Rt.AttrList(jt[1]),Bt={attrs:Ft,bitrate:Ft.decimalInteger("AVERAGE-BANDWIDTH")||Ft.decimalInteger("BANDWIDTH"),name:Ft.NAME,url:Ot.resolve(jt[2],It)},Ut=Ft.decimalResolution("RESOLUTION");Ut&&(Bt.width=Ut.width,Bt.height=Ut.height),St((Ft.CODECS||"").split(/[ ,]+/).filter(function(Gt){return Gt}),Bt),Bt.videoCodec&&Bt.videoCodec.indexOf("avc1")!==-1&&(Bt.videoCodec=Ot.convertAVC1ToAVCOTI(Bt.videoCodec)),(Nt=Bt.unknownCodecs)!==null&&Nt!==void 0&&Nt.length||Lt.push(Bt),kt.push(Bt)}else if(jt[3]){var Ht=new Rt.AttrList(jt[3]);Ht["DATA-ID"]&&($t=!0,At[Ht["DATA-ID"]]=Ht)}var Kt=Lt.length>0&&Lt.length<kt.length;return{levels:Kt?Lt:kt,sessionData:$t?At:null}},Ot.parseMasterPlaylistMedia=function(Dt,It,kt,Lt){Lt===void 0&&(Lt=[]);var At,$t=[],jt=0;for(yt.lastIndex=0;(At=yt.exec(Dt))!==null;){var Nt=new Rt.AttrList(At[1]);if(Nt.TYPE===kt){var Ft={attrs:Nt,bitrate:0,id:jt++,groupId:Nt["GROUP-ID"],instreamId:Nt["INSTREAM-ID"],name:Nt.NAME||Nt.LANGUAGE||"",type:kt,default:Nt.bool("DEFAULT"),autoselect:Nt.bool("AUTOSELECT"),forced:Nt.bool("FORCED"),lang:Nt.LANGUAGE,url:Nt.URI?Ot.resolve(Nt.URI,It):""};if(Lt.length){var Bt=Ot.findGroup(Lt,Ft.groupId)||Lt[0];Et(Ft,Bt,"audioCodec"),Et(Ft,Bt,"textCodec")}$t.push(Ft)}}return $t},Ot.parseLevelPlaylist=function(Dt,It,kt,Lt,At){var $t=new wt.LevelDetails(It),jt=$t.fragments,Nt=null,Ft=0,Bt=0,Ut=0,Ht=0,Kt=null,Gt=new ct.Fragment(Lt,It),Wt,Vt,zt,Yt=-1,Xt=!1;for(xt.lastIndex=0,$t.m3u8=Dt;(Wt=xt.exec(Dt))!==null;){Xt&&(Xt=!1,Gt=new ct.Fragment(Lt,It),Gt.start=Ut,Gt.sn=Ft,Gt.cc=Ht,Gt.level=kt,Nt&&(Gt.initSegment=Nt,Gt.rawProgramDateTime=Nt.rawProgramDateTime,Nt.rawProgramDateTime=null));var Qt=Wt[1];if(Qt){Gt.duration=parseFloat(Qt);var qt=(" "+Wt[2]).slice(1);Gt.title=qt||null,Gt.tagList.push(qt?["INF",Qt,qt]:["INF",Qt])}else if(Wt[3])(0,st.isFiniteNumber)(Gt.duration)&&(Gt.start=Ut,zt&&(Gt.levelkey=zt),Gt.sn=Ft,Gt.level=kt,Gt.cc=Ht,Gt.urlId=At,jt.push(Gt),Gt.relurl=(" "+Wt[3]).slice(1),_t(Gt,Kt),Kt=Gt,Ut+=Gt.duration,Ft++,Bt=0,Xt=!0);else if(Wt[4]){var er=(" "+Wt[4]).slice(1);Kt?Gt.setByteRange(er,Kt):Gt.setByteRange(er)}else if(Wt[5])Gt.rawProgramDateTime=(" "+Wt[5]).slice(1),Gt.tagList.push(["PROGRAM-DATE-TIME",Gt.rawProgramDateTime]),Yt===-1&&(Yt=jt.length);else{if(Wt=Wt[0].match(Ct),!Wt){ht.logger.warn("No matches on slow regex match for level playlist!");continue}for(Vt=1;Vt<Wt.length&&!(typeof Wt[Vt]<"u");Vt++);var tr=(" "+Wt[Vt]).slice(1),Zt=(" "+Wt[Vt+1]).slice(1),Jt=Wt[Vt+2]?(" "+Wt[Vt+2]).slice(1):"";switch(tr){case"PLAYLIST-TYPE":$t.type=Zt.toUpperCase();break;case"MEDIA-SEQUENCE":Ft=$t.startSN=parseInt(Zt);break;case"SKIP":{var nr=new Rt.AttrList(Zt),rr=nr.decimalInteger("SKIPPED-SEGMENTS");if((0,st.isFiniteNumber)(rr)){$t.skippedSegments=rr;for(var ir=rr;ir--;)jt.unshift(null);Ft+=rr}var lr=nr.enumeratedString("RECENTLY-REMOVED-DATERANGES");lr&&($t.recentlyRemovedDateranges=lr.split("	"));break}case"TARGETDURATION":$t.targetduration=parseFloat(Zt);break;case"VERSION":$t.version=parseInt(Zt);break;case"EXTM3U":break;case"ENDLIST":$t.live=!1;break;case"#":(Zt||Jt)&&Gt.tagList.push(Jt?[Zt,Jt]:[Zt]);break;case"DISCONTINUITY":Ht++,Gt.tagList.push(["DIS"]);break;case"GAP":Gt.tagList.push([tr]);break;case"BITRATE":Gt.tagList.push([tr,Zt]);break;case"DATERANGE":{var ar=new Rt.AttrList(Zt),ur=new gt.DateRange(ar,$t.dateRanges[ar.ID]);ur.isValid||$t.skippedSegments?$t.dateRanges[ur.id]=ur:ht.logger.warn('Ignoring invalid DATERANGE tag: "'+Zt+'"'),Gt.tagList.push(["EXT-X-DATERANGE",Zt]);break}case"DISCONTINUITY-SEQUENCE":Ht=parseInt(Zt);break;case"KEY":{var sr,fr=new Rt.AttrList(Zt),hr=fr.enumeratedString("METHOD"),yr=fr.URI,pr=fr.hexadecimalInteger("IV"),vr=fr.enumeratedString("KEYFORMATVERSIONS"),xr=fr.enumeratedString("KEYID"),Sr=(sr=fr.enumeratedString("KEYFORMAT"))!=null?sr:"identity",_r=["com.apple.streamingkeydelivery","com.microsoft.playready","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed","com.widevine"];if(_r.indexOf(Sr)>-1){ht.logger.warn("Keyformat "+Sr+" is not supported from the manifest");continue}else if(Sr!=="identity")continue;hr&&(zt=Tt.LevelKey.fromURL(It,yr),yr&&["AES-128","SAMPLE-AES","SAMPLE-AES-CENC"].indexOf(hr)>=0&&(zt.method=hr,zt.keyFormat=Sr,xr&&(zt.keyID=xr),vr&&(zt.keyFormatVersions=vr),zt.iv=pr));break}case"START":{var Pr=new Rt.AttrList(Zt),cr=Pr.decimalFloatingPoint("TIME-OFFSET");(0,st.isFiniteNumber)(cr)&&($t.startTimeOffset=cr);break}case"MAP":{var dr=new Rt.AttrList(Zt);if(Gt.duration){var Tr=new ct.Fragment(Lt,It);bt(Tr,dr,kt,zt),Nt=Tr,Gt.initSegment=Nt,Nt.rawProgramDateTime&&!Gt.rawProgramDateTime&&(Gt.rawProgramDateTime=Nt.rawProgramDateTime)}else bt(Gt,dr,kt,zt),Nt=Gt,Xt=!0;break}case"SERVER-CONTROL":{var or=new Rt.AttrList(Zt);$t.canBlockReload=or.bool("CAN-BLOCK-RELOAD"),$t.canSkipUntil=or.optionalFloat("CAN-SKIP-UNTIL",0),$t.canSkipDateRanges=$t.canSkipUntil>0&&or.bool("CAN-SKIP-DATERANGES"),$t.partHoldBack=or.optionalFloat("PART-HOLD-BACK",0),$t.holdBack=or.optionalFloat("HOLD-BACK",0);break}case"PART-INF":{var gr=new Rt.AttrList(Zt);$t.partTarget=gr.decimalFloatingPoint("PART-TARGET");break}case"PART":{var Er=$t.partList;Er||(Er=$t.partList=[]);var Ar=Bt>0?Er[Er.length-1]:void 0,Ir=Bt++,Lr=new ct.Part(new Rt.AttrList(Zt),Gt,It,Ir,Ar);Er.push(Lr),Gt.duration+=Lr.duration;break}case"PRELOAD-HINT":{var br=new Rt.AttrList(Zt);$t.preloadHint=br;break}case"RENDITION-REPORT":{var Mr=new Rt.AttrList(Zt);$t.renditionReports=$t.renditionReports||[],$t.renditionReports.push(Mr);break}default:ht.logger.warn("line parsed but not handled: "+Wt);break}}}Kt&&!Kt.relurl?(jt.pop(),Ut-=Kt.duration,$t.partList&&($t.fragmentHint=Kt)):$t.partList&&(_t(Gt,Kt),Gt.cc=Ht,$t.fragmentHint=Gt);var $r=jt.length,Rr=jt[0],Dr=jt[$r-1];if(Ut+=$t.skippedSegments*$t.targetduration,Ut>0&&$r&&Dr){$t.averagetargetduration=Ut/$r;var Or=Dr.sn;$t.endSN=Or!=="initSegment"?Or:0,Rr&&($t.startCC=Rr.cc,Rr.initSegment||$t.fragments.every(function(mr){return mr.relurl&&dt(mr.relurl)})&&(ht.logger.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),Gt=new ct.Fragment(Lt,It),Gt.relurl=Dr.relurl,Gt.level=kt,Gt.sn="initSegment",Rr.initSegment=Gt,$t.needSidxRanges=!0))}else $t.endSN=0,$t.startCC=0;return $t.fragmentHint&&(Ut+=$t.fragmentHint.duration),$t.totalduration=Ut,$t.endCC=Ht,Yt>0&&mt(jt,Yt),$t},Ot}();function St(Ot,Pt){["video","audio","text"].forEach(function(Dt){var It=Ot.filter(function(Lt){return(0,ut.isCodecType)(Lt,Dt)});if(It.length){var kt=It.filter(function(Lt){return Lt.lastIndexOf("avc1",0)===0||Lt.lastIndexOf("mp4a",0)===0});Pt[Dt+"Codec"]=kt.length>0?kt[0]:It[0],Ot=Ot.filter(function(Lt){return It.indexOf(Lt)===-1})}}),Pt.unknownCodecs=Ot}function Et(Ot,Pt,Dt){var It=Pt[Dt];It&&(Ot[Dt]=It)}function mt(Ot,Pt){for(var Dt=Ot[Pt],It=Pt;It--;){var kt=Ot[It];if(!kt)return;kt.programDateTime=Dt.programDateTime-kt.duration*1e3,Dt=kt}}function _t(Ot,Pt){Ot.rawProgramDateTime?Ot.programDateTime=Date.parse(Ot.rawProgramDateTime):Pt!=null&&Pt.programDateTime&&(Ot.programDateTime=Pt.endProgramDateTime),(0,st.isFiniteNumber)(Ot.programDateTime)||(Ot.programDateTime=null,Ot.rawProgramDateTime=null)}function bt(Ot,Pt,Dt,It){Ot.relurl=Pt.URI,Pt.BYTERANGE&&Ot.setByteRange(Pt.BYTERANGE),Ot.level=Dt,Ot.sn="initSegment",It&&(Ot.levelkey=It),Ot.initSegment=null}},"./src/loader/playlist-loader.ts":(at,it,ot)=>{ot.r(it),ot.d(it,{default:()=>xt});var st=ot("./src/polyfills/number.ts"),lt=ot("./src/events.ts"),gt=ot("./src/errors.ts"),ct=ot("./src/utils/logger.ts"),wt=ot("./src/utils/mp4-tools.ts"),Tt=ot("./src/loader/m3u8-parser.ts"),Rt=ot("./src/types/loader.ts"),ht=ot("./src/utils/attr-list.ts");function ut(Ct){var pt=Ct.type;switch(pt){case Rt.PlaylistContextType.AUDIO_TRACK:return Rt.PlaylistLevelType.AUDIO;case Rt.PlaylistContextType.SUBTITLE_TRACK:return Rt.PlaylistLevelType.SUBTITLE;default:return Rt.PlaylistLevelType.MAIN}}function ft(Ct,pt){var dt=Ct.url;return(dt===void 0||dt.indexOf("data:")===0)&&(dt=pt.url),dt}var yt=function(){function Ct(dt){this.hls=void 0,this.loaders=Object.create(null),this.hls=dt,this.registerListeners()}var pt=Ct.prototype;return pt.startLoad=function(vt){},pt.stopLoad=function(){this.destroyInternalLoaders()},pt.registerListeners=function(){var vt=this.hls;vt.on(lt.Events.MANIFEST_LOADING,this.onManifestLoading,this),vt.on(lt.Events.LEVEL_LOADING,this.onLevelLoading,this),vt.on(lt.Events.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),vt.on(lt.Events.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},pt.unregisterListeners=function(){var vt=this.hls;vt.off(lt.Events.MANIFEST_LOADING,this.onManifestLoading,this),vt.off(lt.Events.LEVEL_LOADING,this.onLevelLoading,this),vt.off(lt.Events.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),vt.off(lt.Events.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},pt.createInternalLoader=function(vt){var St=this.hls.config,Et=St.pLoader,mt=St.loader,_t=Et||mt,bt=new _t(St);return vt.loader=bt,this.loaders[vt.type]=bt,bt},pt.getInternalLoader=function(vt){return this.loaders[vt.type]},pt.resetInternalLoader=function(vt){this.loaders[vt]&&delete this.loaders[vt]},pt.destroyInternalLoaders=function(){for(var vt in this.loaders){var St=this.loaders[vt];St&&St.destroy(),this.resetInternalLoader(vt)}},pt.destroy=function(){this.unregisterListeners(),this.destroyInternalLoaders()},pt.onManifestLoading=function(vt,St){var Et=St.url;this.load({id:null,groupId:null,level:0,responseType:"text",type:Rt.PlaylistContextType.MANIFEST,url:Et,deliveryDirectives:null})},pt.onLevelLoading=function(vt,St){var Et=St.id,mt=St.level,_t=St.url,bt=St.deliveryDirectives;this.load({id:Et,groupId:null,level:mt,responseType:"text",type:Rt.PlaylistContextType.LEVEL,url:_t,deliveryDirectives:bt})},pt.onAudioTrackLoading=function(vt,St){var Et=St.id,mt=St.groupId,_t=St.url,bt=St.deliveryDirectives;this.load({id:Et,groupId:mt,level:null,responseType:"text",type:Rt.PlaylistContextType.AUDIO_TRACK,url:_t,deliveryDirectives:bt})},pt.onSubtitleTrackLoading=function(vt,St){var Et=St.id,mt=St.groupId,_t=St.url,bt=St.deliveryDirectives;this.load({id:Et,groupId:mt,level:null,responseType:"text",type:Rt.PlaylistContextType.SUBTITLE_TRACK,url:_t,deliveryDirectives:bt})},pt.load=function(vt){var St,Et=this.hls.config,mt=this.getInternalLoader(vt);if(mt){var _t=mt.context;if(_t&&_t.url===vt.url){ct.logger.trace("[playlist-loader]: playlist request ongoing");return}ct.logger.log("[playlist-loader]: aborting previous loader for type: "+vt.type),mt.abort()}var bt,Ot,Pt,Dt;switch(vt.type){case Rt.PlaylistContextType.MANIFEST:bt=Et.manifestLoadingMaxRetry,Ot=Et.manifestLoadingTimeOut,Pt=Et.manifestLoadingRetryDelay,Dt=Et.manifestLoadingMaxRetryTimeout;break;case Rt.PlaylistContextType.LEVEL:case Rt.PlaylistContextType.AUDIO_TRACK:case Rt.PlaylistContextType.SUBTITLE_TRACK:bt=0,Ot=Et.levelLoadingTimeOut;break;default:bt=Et.levelLoadingMaxRetry,Ot=Et.levelLoadingTimeOut,Pt=Et.levelLoadingRetryDelay,Dt=Et.levelLoadingMaxRetryTimeout;break}if(mt=this.createInternalLoader(vt),(St=vt.deliveryDirectives)!==null&&St!==void 0&&St.part){var It;if(vt.type===Rt.PlaylistContextType.LEVEL&&vt.level!==null?It=this.hls.levels[vt.level].details:vt.type===Rt.PlaylistContextType.AUDIO_TRACK&&vt.id!==null?It=this.hls.audioTracks[vt.id].details:vt.type===Rt.PlaylistContextType.SUBTITLE_TRACK&&vt.id!==null&&(It=this.hls.subtitleTracks[vt.id].details),It){var kt=It.partTarget,Lt=It.targetduration;kt&&Lt&&(Ot=Math.min(Math.max(kt*3,Lt*.8)*1e3,Ot))}}var At={timeout:Ot,maxRetry:bt,retryDelay:Pt,maxRetryDelay:Dt,highWaterMark:0},$t={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};mt.load(vt,At,$t)},pt.loadsuccess=function(vt,St,Et,mt){if(mt===void 0&&(mt=null),Et.isSidxRequest){this.handleSidxRequest(vt,Et),this.handlePlaylistLoaded(vt,St,Et,mt);return}this.resetInternalLoader(Et.type);var _t=vt.data;if(_t.indexOf("#EXTM3U")!==0){this.handleManifestParsingError(vt,Et,"no EXTM3U delimiter",mt);return}St.parsing.start=performance.now(),_t.indexOf("#EXTINF:")>0||_t.indexOf("#EXT-X-TARGETDURATION:")>0?this.handleTrackOrLevelPlaylist(vt,St,Et,mt):this.handleMasterPlaylist(vt,St,Et,mt)},pt.loaderror=function(vt,St,Et){Et===void 0&&(Et=null),this.handleNetworkError(St,Et,!1,vt)},pt.loadtimeout=function(vt,St,Et){Et===void 0&&(Et=null),this.handleNetworkError(St,Et,!0)},pt.handleMasterPlaylist=function(vt,St,Et,mt){var _t=this.hls,bt=vt.data,Ot=ft(vt,Et),Pt=Tt.default.parseMasterPlaylist(bt,Ot),Dt=Pt.levels,It=Pt.sessionData;if(!Dt.length){this.handleManifestParsingError(vt,Et,"no level found in manifest",mt);return}var kt=Dt.map(function(Ft){return{id:Ft.attrs.AUDIO,audioCodec:Ft.audioCodec}}),Lt=Dt.map(function(Ft){return{id:Ft.attrs.SUBTITLES,textCodec:Ft.textCodec}}),At=Tt.default.parseMasterPlaylistMedia(bt,Ot,"AUDIO",kt),$t=Tt.default.parseMasterPlaylistMedia(bt,Ot,"SUBTITLES",Lt),jt=Tt.default.parseMasterPlaylistMedia(bt,Ot,"CLOSED-CAPTIONS");if(At.length){var Nt=At.some(function(Ft){return!Ft.url});!Nt&&Dt[0].audioCodec&&!Dt[0].attrs.AUDIO&&(ct.logger.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),At.unshift({type:"main",name:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new ht.AttrList({}),bitrate:0,url:""}))}_t.trigger(lt.Events.MANIFEST_LOADED,{levels:Dt,audioTracks:At,subtitles:$t,captions:jt,url:Ot,stats:St,networkDetails:mt,sessionData:It})},pt.handleTrackOrLevelPlaylist=function(vt,St,Et,mt){var _t=this.hls,bt=Et.id,Ot=Et.level,Pt=Et.type,Dt=ft(vt,Et),It=(0,st.isFiniteNumber)(bt)?bt:0,kt=(0,st.isFiniteNumber)(Ot)?Ot:It,Lt=ut(Et),At=Tt.default.parseLevelPlaylist(vt.data,Dt,kt,Lt,It);if(!At.fragments.length){_t.trigger(lt.Events.ERROR,{type:gt.ErrorTypes.NETWORK_ERROR,details:gt.ErrorDetails.LEVEL_EMPTY_ERROR,fatal:!1,url:Dt,reason:"no fragments found in level",level:typeof Et.level=="number"?Et.level:void 0});return}if(Pt===Rt.PlaylistContextType.MANIFEST){var $t={attrs:new ht.AttrList({}),bitrate:0,details:At,name:"",url:Dt};_t.trigger(lt.Events.MANIFEST_LOADED,{levels:[$t],audioTracks:[],url:Dt,stats:St,networkDetails:mt,sessionData:null})}if(St.parsing.end=performance.now(),At.needSidxRanges){var jt,Nt=(jt=At.fragments[0].initSegment)===null||jt===void 0?void 0:jt.url;this.load({url:Nt,isSidxRequest:!0,type:Pt,level:Ot,levelDetails:At,id:bt,groupId:null,rangeStart:0,rangeEnd:2048,responseType:"arraybuffer",deliveryDirectives:null});return}Et.levelDetails=At,this.handlePlaylistLoaded(vt,St,Et,mt)},pt.handleSidxRequest=function(vt,St){var Et=new Uint8Array(vt.data),mt=(0,wt.findBox)(Et,["sidx"])[0];if(!!mt){var _t=(0,wt.parseSegmentIndex)(mt);if(!!_t){var bt=_t.references,Ot=St.levelDetails;bt.forEach(function(Pt,Dt){var It=Pt.info,kt=Ot.fragments[Dt];if(kt.byteRange.length===0&&kt.setByteRange(String(1+It.end-It.start)+"@"+String(It.start)),kt.initSegment){var Lt=(0,wt.findBox)(Et,["moov"])[0],At=Lt?Lt.length:null;kt.initSegment.setByteRange(String(At)+"@0")}})}}},pt.handleManifestParsingError=function(vt,St,Et,mt){this.hls.trigger(lt.Events.ERROR,{type:gt.ErrorTypes.NETWORK_ERROR,details:gt.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:St.type===Rt.PlaylistContextType.MANIFEST,url:vt.url,reason:Et,response:vt,context:St,networkDetails:mt})},pt.handleNetworkError=function(vt,St,Et,mt){Et===void 0&&(Et=!1),ct.logger.warn("[playlist-loader]: A network "+(Et?"timeout":"error")+" occurred while loading "+vt.type+" level: "+vt.level+" id: "+vt.id+' group-id: "'+vt.groupId+'"');var _t=gt.ErrorDetails.UNKNOWN,bt=!1,Ot=this.getInternalLoader(vt);switch(vt.type){case Rt.PlaylistContextType.MANIFEST:_t=Et?gt.ErrorDetails.MANIFEST_LOAD_TIMEOUT:gt.ErrorDetails.MANIFEST_LOAD_ERROR,bt=!0;break;case Rt.PlaylistContextType.LEVEL:_t=Et?gt.ErrorDetails.LEVEL_LOAD_TIMEOUT:gt.ErrorDetails.LEVEL_LOAD_ERROR,bt=!1;break;case Rt.PlaylistContextType.AUDIO_TRACK:_t=Et?gt.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:gt.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,bt=!1;break;case Rt.PlaylistContextType.SUBTITLE_TRACK:_t=Et?gt.ErrorDetails.SUBTITLE_TRACK_LOAD_TIMEOUT:gt.ErrorDetails.SUBTITLE_LOAD_ERROR,bt=!1;break}Ot&&this.resetInternalLoader(vt.type);var Pt={type:gt.ErrorTypes.NETWORK_ERROR,details:_t,fatal:bt,url:vt.url,loader:Ot,context:vt,networkDetails:St};mt&&(Pt.response=mt),this.hls.trigger(lt.Events.ERROR,Pt)},pt.handlePlaylistLoaded=function(vt,St,Et,mt){var _t=Et.type,bt=Et.level,Ot=Et.id,Pt=Et.groupId,Dt=Et.loader,It=Et.levelDetails,kt=Et.deliveryDirectives;if(!(It!=null&&It.targetduration)){this.handleManifestParsingError(vt,Et,"invalid target duration",mt);return}if(!!Dt)switch(It.live&&(Dt.getCacheAge&&(It.ageHeader=Dt.getCacheAge()||0),(!Dt.getCacheAge||isNaN(It.ageHeader))&&(It.ageHeader=0)),_t){case Rt.PlaylistContextType.MANIFEST:case Rt.PlaylistContextType.LEVEL:this.hls.trigger(lt.Events.LEVEL_LOADED,{details:It,level:bt||0,id:Ot||0,stats:St,networkDetails:mt,deliveryDirectives:kt});break;case Rt.PlaylistContextType.AUDIO_TRACK:this.hls.trigger(lt.Events.AUDIO_TRACK_LOADED,{details:It,id:Ot||0,groupId:Pt||"",stats:St,networkDetails:mt,deliveryDirectives:kt});break;case Rt.PlaylistContextType.SUBTITLE_TRACK:this.hls.trigger(lt.Events.SUBTITLE_TRACK_LOADED,{details:It,id:Ot||0,groupId:Pt||"",stats:St,networkDetails:mt,deliveryDirectives:kt});break}},Ct}();const xt=yt},"./src/polyfills/number.ts":(at,it,ot)=>{ot.r(it),ot.d(it,{MAX_SAFE_INTEGER:()=>lt,isFiniteNumber:()=>st});var st=Number.isFinite||function(gt){return typeof gt=="number"&&isFinite(gt)},lt=Number.MAX_SAFE_INTEGER||9007199254740991},"./src/remux/aac-helper.ts":(at,it,ot)=>{ot.r(it),ot.d(it,{default:()=>lt});var st=function(){function gt(){}return gt.getSilentFrame=function(wt,Tt){switch(wt){case"mp4a.40.2":if(Tt===1)return new Uint8Array([0,200,0,128,35,128]);if(Tt===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(Tt===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(Tt===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(Tt===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(Tt===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(Tt===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(Tt===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(Tt===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);break}},gt}();const lt=st},"./src/remux/mp4-generator.ts":(at,it,ot)=>{ot.r(it),ot.d(it,{default:()=>gt});var st=Math.pow(2,32)-1,lt=function(){function ct(){}return ct.init=function(){ct.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};var Tt;for(Tt in ct.types)ct.types.hasOwnProperty(Tt)&&(ct.types[Tt]=[Tt.charCodeAt(0),Tt.charCodeAt(1),Tt.charCodeAt(2),Tt.charCodeAt(3)]);var Rt=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),ht=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);ct.HDLR_TYPES={video:Rt,audio:ht};var ut=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),ft=new Uint8Array([0,0,0,0,0,0,0,0]);ct.STTS=ct.STSC=ct.STCO=ft,ct.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),ct.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),ct.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),ct.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var yt=new Uint8Array([105,115,111,109]),xt=new Uint8Array([97,118,99,49]),Ct=new Uint8Array([0,0,0,1]);ct.FTYP=ct.box(ct.types.ftyp,yt,Ct,yt,xt),ct.DINF=ct.box(ct.types.dinf,ct.box(ct.types.dref,ut))},ct.box=function(Tt){for(var Rt=8,ht=arguments.length,ut=new Array(ht>1?ht-1:0),ft=1;ft<ht;ft++)ut[ft-1]=arguments[ft];for(var yt=ut.length,xt=yt;yt--;)Rt+=ut[yt].byteLength;var Ct=new Uint8Array(Rt);for(Ct[0]=Rt>>24&255,Ct[1]=Rt>>16&255,Ct[2]=Rt>>8&255,Ct[3]=Rt&255,Ct.set(Tt,4),yt=0,Rt=8;yt<xt;yt++)Ct.set(ut[yt],Rt),Rt+=ut[yt].byteLength;return Ct},ct.hdlr=function(Tt){return ct.box(ct.types.hdlr,ct.HDLR_TYPES[Tt])},ct.mdat=function(Tt){return ct.box(ct.types.mdat,Tt)},ct.mdhd=function(Tt,Rt){Rt*=Tt;var ht=Math.floor(Rt/(st+1)),ut=Math.floor(Rt%(st+1));return ct.box(ct.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,Tt>>24&255,Tt>>16&255,Tt>>8&255,Tt&255,ht>>24,ht>>16&255,ht>>8&255,ht&255,ut>>24,ut>>16&255,ut>>8&255,ut&255,85,196,0,0]))},ct.mdia=function(Tt){return ct.box(ct.types.mdia,ct.mdhd(Tt.timescale,Tt.duration),ct.hdlr(Tt.type),ct.minf(Tt))},ct.mfhd=function(Tt){return ct.box(ct.types.mfhd,new Uint8Array([0,0,0,0,Tt>>24,Tt>>16&255,Tt>>8&255,Tt&255]))},ct.minf=function(Tt){return Tt.type==="audio"?ct.box(ct.types.minf,ct.box(ct.types.smhd,ct.SMHD),ct.DINF,ct.stbl(Tt)):ct.box(ct.types.minf,ct.box(ct.types.vmhd,ct.VMHD),ct.DINF,ct.stbl(Tt))},ct.moof=function(Tt,Rt,ht){return ct.box(ct.types.moof,ct.mfhd(Tt),ct.traf(ht,Rt))},ct.moov=function(Tt){for(var Rt=Tt.length,ht=[];Rt--;)ht[Rt]=ct.trak(Tt[Rt]);return ct.box.apply(null,[ct.types.moov,ct.mvhd(Tt[0].timescale,Tt[0].duration)].concat(ht).concat(ct.mvex(Tt)))},ct.mvex=function(Tt){for(var Rt=Tt.length,ht=[];Rt--;)ht[Rt]=ct.trex(Tt[Rt]);return ct.box.apply(null,[ct.types.mvex].concat(ht))},ct.mvhd=function(Tt,Rt){Rt*=Tt;var ht=Math.floor(Rt/(st+1)),ut=Math.floor(Rt%(st+1)),ft=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,Tt>>24&255,Tt>>16&255,Tt>>8&255,Tt&255,ht>>24,ht>>16&255,ht>>8&255,ht&255,ut>>24,ut>>16&255,ut>>8&255,ut&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return ct.box(ct.types.mvhd,ft)},ct.sdtp=function(Tt){var Rt=Tt.samples||[],ht=new Uint8Array(4+Rt.length),ut,ft;for(ut=0;ut<Rt.length;ut++)ft=Rt[ut].flags,ht[ut+4]=ft.dependsOn<<4|ft.isDependedOn<<2|ft.hasRedundancy;return ct.box(ct.types.sdtp,ht)},ct.stbl=function(Tt){return ct.box(ct.types.stbl,ct.stsd(Tt),ct.box(ct.types.stts,ct.STTS),ct.box(ct.types.stsc,ct.STSC),ct.box(ct.types.stsz,ct.STSZ),ct.box(ct.types.stco,ct.STCO))},ct.avc1=function(Tt){var Rt=[],ht=[],ut,ft,yt;for(ut=0;ut<Tt.sps.length;ut++)ft=Tt.sps[ut],yt=ft.byteLength,Rt.push(yt>>>8&255),Rt.push(yt&255),Rt=Rt.concat(Array.prototype.slice.call(ft));for(ut=0;ut<Tt.pps.length;ut++)ft=Tt.pps[ut],yt=ft.byteLength,ht.push(yt>>>8&255),ht.push(yt&255),ht=ht.concat(Array.prototype.slice.call(ft));var xt=ct.box(ct.types.avcC,new Uint8Array([1,Rt[3],Rt[4],Rt[5],255,224|Tt.sps.length].concat(Rt).concat([Tt.pps.length]).concat(ht))),Ct=Tt.width,pt=Tt.height,dt=Tt.pixelRatio[0],vt=Tt.pixelRatio[1];return ct.box(ct.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,Ct>>8&255,Ct&255,pt>>8&255,pt&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),xt,ct.box(ct.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),ct.box(ct.types.pasp,new Uint8Array([dt>>24,dt>>16&255,dt>>8&255,dt&255,vt>>24,vt>>16&255,vt>>8&255,vt&255])))},ct.esds=function(Tt){var Rt=Tt.config.length;return new Uint8Array([0,0,0,0,3,23+Rt,0,1,0,4,15+Rt,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([Rt]).concat(Tt.config).concat([6,1,2]))},ct.mp4a=function(Tt){var Rt=Tt.samplerate;return ct.box(ct.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,Tt.channelCount,0,16,0,0,0,0,Rt>>8&255,Rt&255,0,0]),ct.box(ct.types.esds,ct.esds(Tt)))},ct.mp3=function(Tt){var Rt=Tt.samplerate;return ct.box(ct.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,Tt.channelCount,0,16,0,0,0,0,Rt>>8&255,Rt&255,0,0]))},ct.stsd=function(Tt){return Tt.type==="audio"?Tt.segmentCodec==="mp3"&&Tt.codec==="mp3"?ct.box(ct.types.stsd,ct.STSD,ct.mp3(Tt)):ct.box(ct.types.stsd,ct.STSD,ct.mp4a(Tt)):ct.box(ct.types.stsd,ct.STSD,ct.avc1(Tt))},ct.tkhd=function(Tt){var Rt=Tt.id,ht=Tt.duration*Tt.timescale,ut=Tt.width,ft=Tt.height,yt=Math.floor(ht/(st+1)),xt=Math.floor(ht%(st+1));return ct.box(ct.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,Rt>>24&255,Rt>>16&255,Rt>>8&255,Rt&255,0,0,0,0,yt>>24,yt>>16&255,yt>>8&255,yt&255,xt>>24,xt>>16&255,xt>>8&255,xt&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,ut>>8&255,ut&255,0,0,ft>>8&255,ft&255,0,0]))},ct.traf=function(Tt,Rt){var ht=ct.sdtp(Tt),ut=Tt.id,ft=Math.floor(Rt/(st+1)),yt=Math.floor(Rt%(st+1));return ct.box(ct.types.traf,ct.box(ct.types.tfhd,new Uint8Array([0,0,0,0,ut>>24,ut>>16&255,ut>>8&255,ut&255])),ct.box(ct.types.tfdt,new Uint8Array([1,0,0,0,ft>>24,ft>>16&255,ft>>8&255,ft&255,yt>>24,yt>>16&255,yt>>8&255,yt&255])),ct.trun(Tt,ht.length+16+20+8+16+8+8),ht)},ct.trak=function(Tt){return Tt.duration=Tt.duration||4294967295,ct.box(ct.types.trak,ct.tkhd(Tt),ct.mdia(Tt))},ct.trex=function(Tt){var Rt=Tt.id;return ct.box(ct.types.trex,new Uint8Array([0,0,0,0,Rt>>24,Rt>>16&255,Rt>>8&255,Rt&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},ct.trun=function(Tt,Rt){var ht=Tt.samples||[],ut=ht.length,ft=12+16*ut,yt=new Uint8Array(ft),xt,Ct,pt,dt,vt,St;for(Rt+=8+ft,yt.set([Tt.type==="video"?1:0,0,15,1,ut>>>24&255,ut>>>16&255,ut>>>8&255,ut&255,Rt>>>24&255,Rt>>>16&255,Rt>>>8&255,Rt&255],0),xt=0;xt<ut;xt++)Ct=ht[xt],pt=Ct.duration,dt=Ct.size,vt=Ct.flags,St=Ct.cts,yt.set([pt>>>24&255,pt>>>16&255,pt>>>8&255,pt&255,dt>>>24&255,dt>>>16&255,dt>>>8&255,dt&255,vt.isLeading<<2|vt.dependsOn,vt.isDependedOn<<6|vt.hasRedundancy<<4|vt.paddingValue<<1|vt.isNonSync,vt.degradPrio&240<<8,vt.degradPrio&15,St>>>24&255,St>>>16&255,St>>>8&255,St&255],12+16*xt);return ct.box(ct.types.trun,yt)},ct.initSegment=function(Tt){ct.types||ct.init();var Rt=ct.moov(Tt),ht=new Uint8Array(ct.FTYP.byteLength+Rt.byteLength);return ht.set(ct.FTYP),ht.set(Rt,ct.FTYP.byteLength),ht},ct}();lt.types=void 0,lt.HDLR_TYPES=void 0,lt.STTS=void 0,lt.STSC=void 0,lt.STCO=void 0,lt.STSZ=void 0,lt.VMHD=void 0,lt.SMHD=void 0,lt.STSD=void 0,lt.FTYP=void 0,lt.DINF=void 0;const gt=lt},"./src/remux/mp4-remuxer.ts":(at,it,ot)=>{ot.r(it),ot.d(it,{default:()=>dt,flushTextTrackMetadataCueSamples:()=>Et,flushTextTrackUserdataCueSamples:()=>mt,normalizePts:()=>vt});var st=ot("./src/polyfills/number.ts"),lt=ot("./src/remux/aac-helper.ts"),gt=ot("./src/remux/mp4-generator.ts"),ct=ot("./src/events.ts"),wt=ot("./src/errors.ts"),Tt=ot("./src/utils/logger.ts"),Rt=ot("./src/types/loader.ts"),ht=ot("./src/utils/timescale-conversion.ts");function ut(){return ut=Object.assign?Object.assign.bind():function(Ot){for(var Pt=1;Pt<arguments.length;Pt++){var Dt=arguments[Pt];for(var It in Dt)Object.prototype.hasOwnProperty.call(Dt,It)&&(Ot[It]=Dt[It])}return Ot},ut.apply(this,arguments)}var ft=10*1e3,yt=1024,xt=1152,Ct=null,pt=null,dt=function(){function Ot(Dt,It,kt,Lt){if(this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=void 0,this._initDTS=void 0,this.nextAvcDts=null,this.nextAudioPts=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.observer=Dt,this.config=It,this.typeSupported=kt,this.ISGenerated=!1,Ct===null){var At=navigator.userAgent||"",$t=At.match(/Chrome\/(\d+)/i);Ct=$t?parseInt($t[1]):0}if(pt===null){var jt=navigator.userAgent.match(/Safari\/(\d+)/i);pt=jt?parseInt(jt[1]):0}}var Pt=Ot.prototype;return Pt.destroy=function(){},Pt.resetTimeStamp=function(It){Tt.logger.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=It},Pt.resetNextTimestamp=function(){Tt.logger.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1},Pt.resetInitSegment=function(){Tt.logger.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1},Pt.getVideoStartPts=function(It){var kt=!1,Lt=It.reduce(function(At,$t){var jt=$t.pts-At;return jt<-4294967296?(kt=!0,vt(At,$t.pts)):jt>0?At:$t.pts},It[0].pts);return kt&&Tt.logger.debug("PTS rollover detected"),Lt},Pt.remux=function(It,kt,Lt,At,$t,jt,Nt,Ft){var Bt,Ut,Ht,Kt,Gt,Wt,Vt=$t,zt=$t,Yt=It.pid>-1,Xt=kt.pid>-1,Qt=kt.samples.length,qt=It.samples.length>0,er=Nt&&Qt>0||Qt>1,tr=(!Yt||qt)&&(!Xt||er)||this.ISGenerated||Nt;if(tr){this.ISGenerated||(Ht=this.generateIS(It,kt,$t));var Zt=this.isVideoContiguous,Jt=-1,nr;if(er&&(Jt=St(kt.samples),!Zt&&this.config.forceKeyFrameOnDiscontinuity))if(Wt=!0,Jt>0){Tt.logger.warn("[mp4-remuxer]: Dropped "+Jt+" out of "+Qt+" video samples due to a missing keyframe");var rr=this.getVideoStartPts(kt.samples);kt.samples=kt.samples.slice(Jt),kt.dropped+=Jt,zt+=(kt.samples[0].pts-rr)/kt.inputTimeScale,nr=zt}else Jt===-1&&(Tt.logger.warn("[mp4-remuxer]: No keyframe found out of "+Qt+" video samples"),Wt=!1);if(this.ISGenerated){if(qt&&er){var ir=this.getVideoStartPts(kt.samples),lr=vt(It.samples[0].pts,ir)-ir,ar=lr/kt.inputTimeScale;Vt+=Math.max(0,ar),zt+=Math.max(0,-ar)}if(qt){if(It.samplerate||(Tt.logger.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),Ht=this.generateIS(It,kt,$t)),Ut=this.remuxAudio(It,Vt,this.isAudioContiguous,jt,Xt||er||Ft===Rt.PlaylistLevelType.AUDIO?zt:void 0),er){var ur=Ut?Ut.endPTS-Ut.startPTS:0;kt.inputTimeScale||(Tt.logger.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),Ht=this.generateIS(It,kt,$t)),Bt=this.remuxVideo(kt,zt,Zt,ur)}}else er&&(Bt=this.remuxVideo(kt,zt,Zt,0));Bt&&(Bt.firstKeyFrame=Jt,Bt.independent=Jt!==-1,Bt.firstKeyFramePTS=nr)}}return this.ISGenerated&&(Lt.samples.length&&(Gt=Et(Lt,$t,this._initPTS,this._initDTS)),At.samples.length&&(Kt=mt(At,$t,this._initPTS))),{audio:Ut,video:Bt,initSegment:Ht,independent:Wt,text:Kt,id3:Gt}},Pt.generateIS=function(It,kt,Lt){var At=It.samples,$t=kt.samples,jt=this.typeSupported,Nt={},Ft=!(0,st.isFiniteNumber)(this._initPTS),Bt="audio/mp4",Ut,Ht,Kt;if(Ft&&(Ut=Ht=1/0),It.config&&At.length){switch(It.timescale=It.samplerate,It.segmentCodec){case"mp3":jt.mpeg?(Bt="audio/mpeg",It.codec=""):jt.mp3&&(It.codec="mp3");break}Nt.audio={id:"audio",container:Bt,codec:It.codec,initSegment:It.segmentCodec==="mp3"&&jt.mpeg?new Uint8Array(0):gt.default.initSegment([It]),metadata:{channelCount:It.channelCount}},Ft&&(Kt=It.inputTimeScale,Ut=Ht=At[0].pts-Math.round(Kt*Lt))}if(kt.sps&&kt.pps&&$t.length&&(kt.timescale=kt.inputTimeScale,Nt.video={id:"main",container:"video/mp4",codec:kt.codec,initSegment:gt.default.initSegment([kt]),metadata:{width:kt.width,height:kt.height}},Ft)){Kt=kt.inputTimeScale;var Gt=this.getVideoStartPts($t),Wt=Math.round(Kt*Lt);Ht=Math.min(Ht,vt($t[0].dts,Gt)-Wt),Ut=Math.min(Ut,Gt-Wt)}if(Object.keys(Nt).length)return this.ISGenerated=!0,Ft&&(this._initPTS=Ut,this._initDTS=Ht),{tracks:Nt,initPTS:Ut,timescale:Kt}},Pt.remuxVideo=function(It,kt,Lt,At){var $t=It.inputTimeScale,jt=It.samples,Nt=[],Ft=jt.length,Bt=this._initPTS,Ut=this.nextAvcDts,Ht=8,Kt=this.videoSampleDuration,Gt,Wt,Vt=Number.POSITIVE_INFINITY,zt=Number.NEGATIVE_INFINITY,Yt=!1;if(!Lt||Ut===null){var Xt=kt*$t,Qt=jt[0].pts-vt(jt[0].dts,jt[0].pts);Ut=Xt-Qt}for(var qt=0;qt<Ft;qt++){var er=jt[qt];er.pts=vt(er.pts-Bt,Ut),er.dts=vt(er.dts-Bt,Ut),er.dts<jt[qt>0?qt-1:qt].dts&&(Yt=!0)}Yt&&jt.sort(function(Br,Kr){var Zr=Br.dts-Kr.dts,qr=Br.pts-Kr.pts;return Zr||qr}),Gt=jt[0].dts,Wt=jt[jt.length-1].dts;var tr=Wt-Gt,Zt=tr?Math.round(tr/(Ft-1)):Kt||It.inputTimeScale/30;if(Lt){var Jt=Gt-Ut,nr=Jt>Zt,rr=Jt<-1;if((nr||rr)&&(nr?Tt.logger.warn("AVC: "+(0,ht.toMsFromMpegTsClock)(Jt,!0)+" ms ("+Jt+"dts) hole between fragments detected, filling it"):Tt.logger.warn("AVC: "+(0,ht.toMsFromMpegTsClock)(-Jt,!0)+" ms ("+Jt+"dts) overlapping between fragments detected"),!rr||Ut>jt[0].pts)){Gt=Ut;var ir=jt[0].pts-Jt;jt[0].dts=Gt,jt[0].pts=ir,Tt.logger.log("Video: First PTS/DTS adjusted: "+(0,ht.toMsFromMpegTsClock)(ir,!0)+"/"+(0,ht.toMsFromMpegTsClock)(Gt,!0)+", delta: "+(0,ht.toMsFromMpegTsClock)(Jt,!0)+" ms")}}Gt=Math.max(0,Gt);for(var lr=0,ar=0,ur=0;ur<Ft;ur++){for(var sr=jt[ur],fr=sr.units,hr=fr.length,yr=0,pr=0;pr<hr;pr++)yr+=fr[pr].data.length;ar+=yr,lr+=hr,sr.length=yr,sr.dts=Math.max(sr.dts,Gt),Vt=Math.min(sr.pts,Vt),zt=Math.max(sr.pts,zt)}Wt=jt[Ft-1].dts;var vr=ar+4*lr+8,xr;try{xr=new Uint8Array(vr)}catch{this.observer.emit(ct.Events.ERROR,ct.Events.ERROR,{type:wt.ErrorTypes.MUX_ERROR,details:wt.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:vr,reason:"fail allocating video mdat "+vr});return}var Sr=new DataView(xr.buffer);Sr.setUint32(0,vr),xr.set(gt.default.types.mdat,4);for(var _r=!1,Pr=Number.POSITIVE_INFINITY,cr=Number.POSITIVE_INFINITY,dr=Number.NEGATIVE_INFINITY,Tr=Number.NEGATIVE_INFINITY,or=0;or<Ft;or++){for(var gr=jt[or],Er=gr.units,Ar=0,Ir=0,Lr=Er.length;Ir<Lr;Ir++){var br=Er[Ir],Mr=br.data,$r=br.data.byteLength;Sr.setUint32(Ht,$r),Ht+=4,xr.set(Mr,Ht),Ht+=$r,Ar+=4+$r}var Rr=void 0;if(or<Ft-1)Kt=jt[or+1].dts-gr.dts,Rr=jt[or+1].pts-gr.pts;else{var Dr=this.config,Or=or>0?gr.dts-jt[or-1].dts:Zt;if(Rr=or>0?gr.pts-jt[or-1].pts:Zt,Dr.stretchShortVideoTrack&&this.nextAudioPts!==null){var mr=Math.floor(Dr.maxBufferHole*$t),wr=(At?Vt+At*$t:this.nextAudioPts)-gr.pts;wr>mr?(Kt=wr-Or,Kt<0?Kt=Or:_r=!0,Tt.logger.log("[mp4-remuxer]: It is approximately "+wr/90+" ms to the next segment; using duration "+Kt/90+" ms for the last video frame.")):Kt=Or}else Kt=Or}var jr=Math.round(gr.pts-gr.dts);Pr=Math.min(Pr,Kt),dr=Math.max(dr,Kt),cr=Math.min(cr,Rr),Tr=Math.max(Tr,Rr),Nt.push(new _t(gr.key,Kt,Ar,jr))}if(Nt.length){if(Ct){if(Ct<70){var Nr=Nt[0].flags;Nr.dependsOn=2,Nr.isNonSync=0}}else if(pt&&Tr-cr<dr-Pr&&Zt/dr<.025&&Nt[0].cts===0){Tt.logger.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");for(var Fr=Gt,Cr=0,Ur=Nt.length;Cr<Ur;Cr++){var Hr=Fr+Nt[Cr].duration,Wr=Fr+Nt[Cr].cts;if(Cr<Ur-1){var Vr=Hr+Nt[Cr+1].cts;Nt[Cr].duration=Vr-Wr}else Nt[Cr].duration=Cr?Nt[Cr-1].duration:Zt;Nt[Cr].cts=0,Fr=Hr}}}console.assert(Kt!==null,"mp4SampleDuration must be computed"),Kt=_r||!Kt?Zt:Kt,this.nextAvcDts=Ut=Wt+Kt,this.videoSampleDuration=Kt,this.isVideoContiguous=!0;var zr=gt.default.moof(It.sequenceNumber++,Gt,ut({},It,{samples:Nt})),Yr="video",Xr={data1:zr,data2:xr,startPTS:Vt/$t,endPTS:(zt+Kt)/$t,startDTS:Gt/$t,endDTS:Ut/$t,type:Yr,hasAudio:!1,hasVideo:!0,nb:Nt.length,dropped:It.dropped};return It.samples=[],It.dropped=0,console.assert(xr.length,"MDAT length must not be zero"),Xr},Pt.remuxAudio=function(It,kt,Lt,At,$t){var jt=It.inputTimeScale,Nt=It.samplerate?It.samplerate:jt,Ft=jt/Nt,Bt=It.segmentCodec==="aac"?yt:xt,Ut=Bt*Ft,Ht=this._initPTS,Kt=It.segmentCodec==="mp3"&&this.typeSupported.mpeg,Gt=[],Wt=$t!==void 0,Vt=It.samples,zt=Kt?0:8,Yt=this.nextAudioPts||-1,Xt=kt*jt;if(this.isAudioContiguous=Lt=Lt||Vt.length&&Yt>0&&(At&&Math.abs(Xt-Yt)<9e3||Math.abs(vt(Vt[0].pts-Ht,Xt)-Yt)<20*Ut),Vt.forEach(function(br){br.pts=vt(br.pts-Ht,Xt)}),!Lt||Yt<0){if(Vt=Vt.filter(function(br){return br.pts>=0}),!Vt.length)return;$t===0?Yt=0:At&&!Wt?Yt=Math.max(0,Xt):Yt=Vt[0].pts}if(It.segmentCodec==="aac")for(var Qt=this.config.maxAudioFramesDrift,qt=0,er=Yt;qt<Vt.length;qt++){var tr=Vt[qt],Zt=tr.pts,Jt=Zt-er,nr=Math.abs(1e3*Jt/jt);if(Jt<=-Qt*Ut&&Wt)qt===0&&(Tt.logger.warn("Audio frame @ "+(Zt/jt).toFixed(3)+"s overlaps nextAudioPts by "+Math.round(1e3*Jt/jt)+" ms."),this.nextAudioPts=Yt=er=Zt);else if(Jt>=Qt*Ut&&nr<ft&&Wt){var rr=Math.round(Jt/Ut);er=Zt-rr*Ut,er<0&&(rr--,er+=Ut),qt===0&&(this.nextAudioPts=Yt=er),Tt.logger.warn("[mp4-remuxer]: Injecting "+rr+" audio frame @ "+(er/jt).toFixed(3)+"s due to "+Math.round(1e3*Jt/jt)+" ms gap.");for(var ir=0;ir<rr;ir++){var lr=Math.max(er,0),ar=lt.default.getSilentFrame(It.manifestCodec||It.codec,It.channelCount);ar||(Tt.logger.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),ar=tr.unit.subarray()),Vt.splice(qt,0,{unit:ar,pts:lr}),er+=Ut,qt++}}tr.pts=er,er+=Ut}for(var ur=null,sr=null,fr,hr=0,yr=Vt.length;yr--;)hr+=Vt[yr].unit.byteLength;for(var pr=0,vr=Vt.length;pr<vr;pr++){var xr=Vt[pr],Sr=xr.unit,_r=xr.pts;if(sr!==null){var Pr=Gt[pr-1];Pr.duration=Math.round((_r-sr)/Ft)}else if(Lt&&It.segmentCodec==="aac"&&(_r=Yt),ur=_r,hr>0){hr+=zt;try{fr=new Uint8Array(hr)}catch{this.observer.emit(ct.Events.ERROR,ct.Events.ERROR,{type:wt.ErrorTypes.MUX_ERROR,details:wt.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:hr,reason:"fail allocating audio mdat "+hr});return}if(!Kt){var cr=new DataView(fr.buffer);cr.setUint32(0,hr),fr.set(gt.default.types.mdat,4)}}else return;fr.set(Sr,zt);var dr=Sr.byteLength;zt+=dr,Gt.push(new _t(!0,Bt,dr,0)),sr=_r}var Tr=Gt.length;if(!!Tr){var or=Gt[Gt.length-1];this.nextAudioPts=Yt=sr+Ft*or.duration;var gr=Kt?new Uint8Array(0):gt.default.moof(It.sequenceNumber++,ur/Ft,ut({},It,{samples:Gt}));It.samples=[];var Er=ur/jt,Ar=Yt/jt,Ir="audio",Lr={data1:gr,data2:fr,startPTS:Er,endPTS:Ar,startDTS:Er,endDTS:Ar,type:Ir,hasAudio:!0,hasVideo:!1,nb:Tr};return this.isAudioContiguous=!0,console.assert(fr.length,"MDAT length must not be zero"),Lr}},Pt.remuxEmptyAudio=function(It,kt,Lt,At){var $t=It.inputTimeScale,jt=It.samplerate?It.samplerate:$t,Nt=$t/jt,Ft=this.nextAudioPts,Bt=(Ft!==null?Ft:At.startDTS*$t)+this._initDTS,Ut=At.endDTS*$t+this._initDTS,Ht=Nt*yt,Kt=Math.ceil((Ut-Bt)/Ht),Gt=lt.default.getSilentFrame(It.manifestCodec||It.codec,It.channelCount);if(Tt.logger.warn("[mp4-remuxer]: remux empty Audio"),!Gt){Tt.logger.trace("[mp4-remuxer]: Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec");return}for(var Wt=[],Vt=0;Vt<Kt;Vt++){var zt=Bt+Vt*Ht;Wt.push({unit:Gt,pts:zt,dts:zt})}return It.samples=Wt,this.remuxAudio(It,kt,Lt,!1)},Ot}();function vt(Ot,Pt){var Dt;if(Pt===null)return Ot;for(Pt<Ot?Dt=-8589934592:Dt=8589934592;Math.abs(Ot-Pt)>4294967296;)Ot+=Dt;return Ot}function St(Ot){for(var Pt=0;Pt<Ot.length;Pt++)if(Ot[Pt].key)return Pt;return-1}function Et(Ot,Pt,Dt,It){var kt=Ot.samples.length;if(!!kt){for(var Lt=Ot.inputTimeScale,At=0;At<kt;At++){var $t=Ot.samples[At];$t.pts=vt($t.pts-Dt,Pt*Lt)/Lt,$t.dts=vt($t.dts-It,Pt*Lt)/Lt}var jt=Ot.samples;return Ot.samples=[],{samples:jt}}}function mt(Ot,Pt,Dt){var It=Ot.samples.length;if(!!It){for(var kt=Ot.inputTimeScale,Lt=0;Lt<It;Lt++){var At=Ot.samples[Lt];At.pts=vt(At.pts-Dt,Pt*kt)/kt}Ot.samples.sort(function(jt,Nt){return jt.pts-Nt.pts});var $t=Ot.samples;return Ot.samples=[],{samples:$t}}}var _t=function(Pt,Dt,It,kt){this.size=void 0,this.duration=void 0,this.cts=void 0,this.flags=void 0,this.duration=Dt,this.size=It,this.cts=kt,this.flags=new bt(Pt)},bt=function(Pt){this.isLeading=0,this.isDependedOn=0,this.hasRedundancy=0,this.degradPrio=0,this.dependsOn=1,this.isNonSync=1,this.dependsOn=Pt?2:1,this.isNonSync=Pt?0:1}},"./src/remux/passthrough-remuxer.ts":(at,it,ot)=>{ot.r(it),ot.d(it,{default:()=>ht});var st=ot("./src/polyfills/number.ts"),lt=ot("./src/remux/mp4-remuxer.ts"),gt=ot("./src/utils/mp4-tools.ts"),ct=ot("./src/loader/fragment.ts"),wt=ot("./src/utils/logger.ts"),Tt=function(){function ut(){this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=void 0,this.initTracks=void 0,this.lastEndTime=null}var ft=ut.prototype;return ft.destroy=function(){},ft.resetTimeStamp=function(xt){this.initPTS=xt,this.lastEndTime=null},ft.resetNextTimestamp=function(){this.lastEndTime=null},ft.resetInitSegment=function(xt,Ct,pt){this.audioCodec=Ct,this.videoCodec=pt,this.generateInitSegment(xt),this.emitInitSegment=!0},ft.generateInitSegment=function(xt){var Ct=this.audioCodec,pt=this.videoCodec;if(!xt||!xt.byteLength){this.initTracks=void 0,this.initData=void 0;return}var dt=this.initData=(0,gt.parseInitSegment)(xt);Ct||(Ct=Rt(dt.audio,ct.ElementaryStreamTypes.AUDIO)),pt||(pt=Rt(dt.video,ct.ElementaryStreamTypes.VIDEO));var vt={};dt.audio&&dt.video?vt.audiovideo={container:"video/mp4",codec:Ct+","+pt,initSegment:xt,id:"main"}:dt.audio?vt.audio={container:"audio/mp4",codec:Ct,initSegment:xt,id:"audio"}:dt.video?vt.video={container:"video/mp4",codec:pt,initSegment:xt,id:"main"}:wt.logger.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=vt},ft.remux=function(xt,Ct,pt,dt,vt){var St,Et=this.initPTS,mt=this.lastEndTime,_t={audio:void 0,video:void 0,text:dt,id3:pt,initSegment:void 0};(0,st.isFiniteNumber)(mt)||(mt=this.lastEndTime=vt||0);var bt=Ct.samples;if(!bt||!bt.length)return _t;var Ot={initPTS:void 0,timescale:1},Pt=this.initData;if((!Pt||!Pt.length)&&(this.generateInitSegment(bt),Pt=this.initData),!Pt||!Pt.length)return wt.logger.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),_t;this.emitInitSegment&&(Ot.tracks=this.initTracks,this.emitInitSegment=!1);var Dt=(0,gt.getStartDTS)(Pt,bt);(0,st.isFiniteNumber)(Et)||(this.initPTS=Ot.initPTS=Et=Dt-vt);var It=(0,gt.getDuration)(bt,Pt),kt=xt?Dt-Et:mt,Lt=kt+It;(0,gt.offsetStartDTS)(Pt,bt,Et),It>0?this.lastEndTime=Lt:(wt.logger.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());var At=!!Pt.audio,$t=!!Pt.video,jt="";At&&(jt+="audio"),$t&&(jt+="video");var Nt={data1:bt,startPTS:kt,startDTS:kt,endPTS:Lt,endDTS:Lt,type:jt,hasAudio:At,hasVideo:$t,nb:1,dropped:0};_t.audio=Nt.type==="audio"?Nt:void 0,_t.video=Nt.type!=="audio"?Nt:void 0,_t.initSegment=Ot;var Ft=(St=this.initPTS)!=null?St:0;return _t.id3=(0,lt.flushTextTrackMetadataCueSamples)(pt,vt,Ft,Ft),dt.samples.length&&(_t.text=(0,lt.flushTextTrackUserdataCueSamples)(dt,vt,Ft)),_t},ut}();function Rt(ut,ft){var yt=ut==null?void 0:ut.codec;return yt&&yt.length>4?yt:yt==="hvc1"||yt==="hev1"?"hvc1.1.c.L120.90":yt==="av01"?"av01.0.04M.08":yt==="avc1"||ft===ct.ElementaryStreamTypes.VIDEO?"avc1.42e01e":"mp4a.40.5"}const ht=Tt},"./src/task-loop.ts":(at,it,ot)=>{ot.r(it),ot.d(it,{default:()=>st});var st=function(){function lt(){this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}var gt=lt.prototype;return gt.destroy=function(){this.onHandlerDestroying(),this.onHandlerDestroyed()},gt.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},gt.onHandlerDestroyed=function(){},gt.hasInterval=function(){return!!this._tickInterval},gt.hasNextTick=function(){return!!this._tickTimer},gt.setInterval=function(wt){return this._tickInterval?!1:(this._tickInterval=self.setInterval(this._boundTick,wt),!0)},gt.clearInterval=function(){return this._tickInterval?(self.clearInterval(this._tickInterval),this._tickInterval=null,!0):!1},gt.clearNextTick=function(){return this._tickTimer?(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0):!1},gt.tick=function(){this._tickCallCount++,this._tickCallCount===1&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)},gt.tickImmediate=function(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)},gt.doTick=function(){},lt}()},"./src/types/cmcd.ts":(at,it,ot)=>{ot.r(it),ot.d(it,{CMCDObjectType:()=>lt,CMCDStreamType:()=>ct,CMCDStreamingFormat:()=>gt,CMCDVersion:()=>st});var st=1,lt;(function(wt){wt.MANIFEST="m",wt.AUDIO="a",wt.VIDEO="v",wt.MUXED="av",wt.INIT="i",wt.CAPTION="c",wt.TIMED_TEXT="tt",wt.KEY="k",wt.OTHER="o"})(lt||(lt={}));var gt;(function(wt){wt.DASH="d",wt.HLS="h",wt.SMOOTH="s",wt.OTHER="o"})(gt||(gt={}));var ct;(function(wt){wt.VOD="v",wt.LIVE="l"})(ct||(ct={}))},"./src/types/demuxer.ts":(at,it,ot)=>{ot.r(it),ot.d(it,{MetadataSchema:()=>st});var st;(function(lt){lt.audioId3="org.id3",lt.dateRange="com.apple.quicktime.HLS",lt.emsg="https://aomedia.org/emsg/ID3"})(st||(st={}))},"./src/types/level.ts":(at,it,ot)=>{ot.r(it),ot.d(it,{HlsSkip:()=>gt,HlsUrlParameters:()=>wt,Level:()=>Tt,getSkipValue:()=>ct});function st(Rt,ht){for(var ut=0;ut<ht.length;ut++){var ft=ht[ut];ft.enumerable=ft.enumerable||!1,ft.configurable=!0,"value"in ft&&(ft.writable=!0),Object.defineProperty(Rt,ft.key,ft)}}function lt(Rt,ht,ut){return ht&&st(Rt.prototype,ht),ut&&st(Rt,ut),Object.defineProperty(Rt,"prototype",{writable:!1}),Rt}var gt;(function(Rt){Rt.No="",Rt.Yes="YES",Rt.v2="v2"})(gt||(gt={}));function ct(Rt,ht){var ut=Rt.canSkipUntil,ft=Rt.canSkipDateRanges,yt=Rt.endSN,xt=ht!==void 0?ht-yt:0;return ut&&xt<ut?ft?gt.v2:gt.Yes:gt.No}var wt=function(){function Rt(ut,ft,yt){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=ut,this.part=ft,this.skip=yt}var ht=Rt.prototype;return ht.addDirectives=function(ft){var yt=new self.URL(ft);return this.msn!==void 0&&yt.searchParams.set("_HLS_msn",this.msn.toString()),this.part!==void 0&&yt.searchParams.set("_HLS_part",this.part.toString()),this.skip&&yt.searchParams.set("_HLS_skip",this.skip),yt.toString()},Rt}(),Tt=function(){function Rt(ht){this.attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.videoCodec=void 0,this.width=void 0,this.unknownCodecs=void 0,this.audioGroupIds=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.textGroupIds=void 0,this.url=void 0,this._urlId=0,this.url=[ht.url],this.attrs=ht.attrs,this.bitrate=ht.bitrate,ht.details&&(this.details=ht.details),this.id=ht.id||0,this.name=ht.name,this.width=ht.width||0,this.height=ht.height||0,this.audioCodec=ht.audioCodec,this.videoCodec=ht.videoCodec,this.unknownCodecs=ht.unknownCodecs,this.codecSet=[ht.videoCodec,ht.audioCodec].filter(function(ut){return ut}).join(",").replace(/\.[^.,]+/g,"")}return lt(Rt,[{key:"maxBitrate",get:function(){return Math.max(this.realBitrate,this.bitrate)}},{key:"uri",get:function(){return this.url[this._urlId]||""}},{key:"urlId",get:function(){return this._urlId},set:function(ut){var ft=ut%this.url.length;this._urlId!==ft&&(this.details=void 0,this._urlId=ft)}}]),Rt}()},"./src/types/loader.ts":(at,it,ot)=>{ot.r(it),ot.d(it,{PlaylistContextType:()=>st,PlaylistLevelType:()=>lt});var st;(function(gt){gt.MANIFEST="manifest",gt.LEVEL="level",gt.AUDIO_TRACK="audioTrack",gt.SUBTITLE_TRACK="subtitleTrack"})(st||(st={}));var lt;(function(gt){gt.MAIN="main",gt.AUDIO="audio",gt.SUBTITLE="subtitle"})(lt||(lt={}))},"./src/types/transmuxer.ts":(at,it,ot)=>{ot.r(it),ot.d(it,{ChunkMetadata:()=>st});var st=function(ct,wt,Tt,Rt,ht,ut){Rt===void 0&&(Rt=0),ht===void 0&&(ht=-1),ut===void 0&&(ut=!1),this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing=lt(),this.buffering={audio:lt(),video:lt(),audiovideo:lt()},this.level=ct,this.sn=wt,this.id=Tt,this.size=Rt,this.part=ht,this.partial=ut};function lt(){return{start:0,executeStart:0,executeEnd:0,end:0}}},"./src/utils/attr-list.ts":(at,it,ot)=>{ot.r(it),ot.d(it,{AttrList:()=>gt});var st=/^(\d+)x(\d+)$/,lt=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,gt=function(){function ct(Tt){typeof Tt=="string"&&(Tt=ct.parseAttrList(Tt));for(var Rt in Tt)Tt.hasOwnProperty(Rt)&&(this[Rt]=Tt[Rt])}var wt=ct.prototype;return wt.decimalInteger=function(Rt){var ht=parseInt(this[Rt],10);return ht>Number.MAX_SAFE_INTEGER?1/0:ht},wt.hexadecimalInteger=function(Rt){if(this[Rt]){var ht=(this[Rt]||"0x").slice(2);ht=(ht.length&1?"0":"")+ht;for(var ut=new Uint8Array(ht.length/2),ft=0;ft<ht.length/2;ft++)ut[ft]=parseInt(ht.slice(ft*2,ft*2+2),16);return ut}else return null},wt.hexadecimalIntegerAsNumber=function(Rt){var ht=parseInt(this[Rt],16);return ht>Number.MAX_SAFE_INTEGER?1/0:ht},wt.decimalFloatingPoint=function(Rt){return parseFloat(this[Rt])},wt.optionalFloat=function(Rt,ht){var ut=this[Rt];return ut?parseFloat(ut):ht},wt.enumeratedString=function(Rt){return this[Rt]},wt.bool=function(Rt){return this[Rt]==="YES"},wt.decimalResolution=function(Rt){var ht=st.exec(this[Rt]);if(ht!==null)return{width:parseInt(ht[1],10),height:parseInt(ht[2],10)}},ct.parseAttrList=function(Rt){var ht,ut={},ft='"';for(lt.lastIndex=0;(ht=lt.exec(Rt))!==null;){var yt=ht[2];yt.indexOf(ft)===0&&yt.lastIndexOf(ft)===yt.length-1&&(yt=yt.slice(1,-1)),ut[ht[1]]=yt}return ut},ct}()},"./src/utils/binary-search.ts":(at,it,ot)=>{ot.r(it),ot.d(it,{default:()=>lt});var st={search:function(ct,wt){for(var Tt=0,Rt=ct.length-1,ht=null,ut=null;Tt<=Rt;){ht=(Tt+Rt)/2|0,ut=ct[ht];var ft=wt(ut);if(ft>0)Tt=ht+1;else if(ft<0)Rt=ht-1;else return ut}return null}};const lt=st},"./src/utils/buffer-helper.ts":(at,it,ot)=>{ot.r(it),ot.d(it,{BufferHelper:()=>gt});var st=ot("./src/utils/logger.ts"),lt={length:0,start:function(){return 0},end:function(){return 0}},gt=function(){function ct(){}return ct.isBuffered=function(Tt,Rt){try{if(Tt){for(var ht=ct.getBuffered(Tt),ut=0;ut<ht.length;ut++)if(Rt>=ht.start(ut)&&Rt<=ht.end(ut))return!0}}catch{}return!1},ct.bufferInfo=function(Tt,Rt,ht){try{if(Tt){var ut=ct.getBuffered(Tt),ft=[],yt;for(yt=0;yt<ut.length;yt++)ft.push({start:ut.start(yt),end:ut.end(yt)});return this.bufferedInfo(ft,Rt,ht)}}catch{}return{len:0,start:Rt,end:Rt,nextStart:void 0}},ct.bufferedInfo=function(Tt,Rt,ht){Rt=Math.max(0,Rt),Tt.sort(function(_t,bt){var Ot=_t.start-bt.start;return Ot||bt.end-_t.end});var ut=[];if(ht)for(var ft=0;ft<Tt.length;ft++){var yt=ut.length;if(yt){var xt=ut[yt-1].end;Tt[ft].start-xt<ht?Tt[ft].end>xt&&(ut[yt-1].end=Tt[ft].end):ut.push(Tt[ft])}else ut.push(Tt[ft])}else ut=Tt;for(var Ct=0,pt,dt=Rt,vt=Rt,St=0;St<ut.length;St++){var Et=ut[St].start,mt=ut[St].end;if(Rt+ht>=Et&&Rt<mt)dt=Et,vt=mt,Ct=vt-Rt;else if(Rt+ht<Et){pt=Et;break}}return{len:Ct,start:dt||0,end:vt||0,nextStart:pt}},ct.getBuffered=function(Tt){try{return Tt.buffered}catch(Rt){return st.logger.log("failed to get media.buffered",Rt),lt}},ct}()},"./src/utils/cea-608-parser.ts":(at,it,ot)=>{ot.r(it),ot.d(it,{CaptionScreen:()=>St,Row:()=>vt,default:()=>Pt});var st=ot("./src/utils/logger.ts"),lt={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},gt=function(It){var kt=It;return lt.hasOwnProperty(It)&&(kt=lt[It]),String.fromCharCode(kt)},ct=15,wt=100,Tt={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},Rt={17:2,18:4,21:6,22:8,23:10,19:13,20:15},ht={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},ut={25:2,26:4,29:6,30:8,31:10,27:13,28:15},ft=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],yt;(function(Dt){Dt[Dt.ERROR=0]="ERROR",Dt[Dt.TEXT=1]="TEXT",Dt[Dt.WARNING=2]="WARNING",Dt[Dt.INFO=2]="INFO",Dt[Dt.DEBUG=3]="DEBUG",Dt[Dt.DATA=3]="DATA"})(yt||(yt={}));var xt=function(){function Dt(){this.time=null,this.verboseLevel=yt.ERROR}var It=Dt.prototype;return It.log=function(Lt,At){this.verboseLevel>=Lt&&st.logger.log(this.time+" ["+Lt+"] "+At)},Dt}(),Ct=function(It){for(var kt=[],Lt=0;Lt<It.length;Lt++)kt.push(It[Lt].toString(16));return kt},pt=function(){function Dt(kt,Lt,At,$t,jt){this.foreground=void 0,this.underline=void 0,this.italics=void 0,this.background=void 0,this.flash=void 0,this.foreground=kt||"white",this.underline=Lt||!1,this.italics=At||!1,this.background=$t||"black",this.flash=jt||!1}var It=Dt.prototype;return It.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},It.setStyles=function(Lt){for(var At=["foreground","underline","italics","background","flash"],$t=0;$t<At.length;$t++){var jt=At[$t];Lt.hasOwnProperty(jt)&&(this[jt]=Lt[jt])}},It.isDefault=function(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash},It.equals=function(Lt){return this.foreground===Lt.foreground&&this.underline===Lt.underline&&this.italics===Lt.italics&&this.background===Lt.background&&this.flash===Lt.flash},It.copy=function(Lt){this.foreground=Lt.foreground,this.underline=Lt.underline,this.italics=Lt.italics,this.background=Lt.background,this.flash=Lt.flash},It.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},Dt}(),dt=function(){function Dt(kt,Lt,At,$t,jt,Nt){this.uchar=void 0,this.penState=void 0,this.uchar=kt||" ",this.penState=new pt(Lt,At,$t,jt,Nt)}var It=Dt.prototype;return It.reset=function(){this.uchar=" ",this.penState.reset()},It.setChar=function(Lt,At){this.uchar=Lt,this.penState.copy(At)},It.setPenState=function(Lt){this.penState.copy(Lt)},It.equals=function(Lt){return this.uchar===Lt.uchar&&this.penState.equals(Lt.penState)},It.copy=function(Lt){this.uchar=Lt.uchar,this.penState.copy(Lt.penState)},It.isEmpty=function(){return this.uchar===" "&&this.penState.isDefault()},Dt}(),vt=function(){function Dt(kt){this.chars=void 0,this.pos=void 0,this.currPenState=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chars=[];for(var Lt=0;Lt<wt;Lt++)this.chars.push(new dt);this.logger=kt,this.pos=0,this.currPenState=new pt}var It=Dt.prototype;return It.equals=function(Lt){for(var At=!0,$t=0;$t<wt;$t++)if(!this.chars[$t].equals(Lt.chars[$t])){At=!1;break}return At},It.copy=function(Lt){for(var At=0;At<wt;At++)this.chars[At].copy(Lt.chars[At])},It.isEmpty=function(){for(var Lt=!0,At=0;At<wt;At++)if(!this.chars[At].isEmpty()){Lt=!1;break}return Lt},It.setCursor=function(Lt){this.pos!==Lt&&(this.pos=Lt),this.pos<0?(this.logger.log(yt.DEBUG,"Negative cursor position "+this.pos),this.pos=0):this.pos>wt&&(this.logger.log(yt.DEBUG,"Too large cursor position "+this.pos),this.pos=wt)},It.moveCursor=function(Lt){var At=this.pos+Lt;if(Lt>1)for(var $t=this.pos+1;$t<At+1;$t++)this.chars[$t].setPenState(this.currPenState);this.setCursor(At)},It.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},It.insertChar=function(Lt){Lt>=144&&this.backSpace();var At=gt(Lt);if(this.pos>=wt){this.logger.log(yt.ERROR,"Cannot insert "+Lt.toString(16)+" ("+At+") at position "+this.pos+". Skipping it!");return}this.chars[this.pos].setChar(At,this.currPenState),this.moveCursor(1)},It.clearFromPos=function(Lt){var At;for(At=Lt;At<wt;At++)this.chars[At].reset()},It.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},It.clearToEndOfRow=function(){this.clearFromPos(this.pos)},It.getTextString=function(){for(var Lt=[],At=!0,$t=0;$t<wt;$t++){var jt=this.chars[$t].uchar;jt!==" "&&(At=!1),Lt.push(jt)}return At?"":Lt.join("")},It.setPenStyles=function(Lt){this.currPenState.setStyles(Lt);var At=this.chars[this.pos];At.setPenState(this.currPenState)},Dt}(),St=function(){function Dt(kt){this.rows=void 0,this.currRow=void 0,this.nrRollUpRows=void 0,this.lastOutputScreen=void 0,this.logger=void 0,this.rows=[];for(var Lt=0;Lt<ct;Lt++)this.rows.push(new vt(kt));this.logger=kt,this.currRow=ct-1,this.nrRollUpRows=null,this.lastOutputScreen=null,this.reset()}var It=Dt.prototype;return It.reset=function(){for(var Lt=0;Lt<ct;Lt++)this.rows[Lt].clear();this.currRow=ct-1},It.equals=function(Lt){for(var At=!0,$t=0;$t<ct;$t++)if(!this.rows[$t].equals(Lt.rows[$t])){At=!1;break}return At},It.copy=function(Lt){for(var At=0;At<ct;At++)this.rows[At].copy(Lt.rows[At])},It.isEmpty=function(){for(var Lt=!0,At=0;At<ct;At++)if(!this.rows[At].isEmpty()){Lt=!1;break}return Lt},It.backSpace=function(){var Lt=this.rows[this.currRow];Lt.backSpace()},It.clearToEndOfRow=function(){var Lt=this.rows[this.currRow];Lt.clearToEndOfRow()},It.insertChar=function(Lt){var At=this.rows[this.currRow];At.insertChar(Lt)},It.setPen=function(Lt){var At=this.rows[this.currRow];At.setPenStyles(Lt)},It.moveCursor=function(Lt){var At=this.rows[this.currRow];At.moveCursor(Lt)},It.setCursor=function(Lt){this.logger.log(yt.INFO,"setCursor: "+Lt);var At=this.rows[this.currRow];At.setCursor(Lt)},It.setPAC=function(Lt){this.logger.log(yt.INFO,"pacData = "+JSON.stringify(Lt));var At=Lt.row-1;if(this.nrRollUpRows&&At<this.nrRollUpRows-1&&(At=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==At){for(var $t=0;$t<ct;$t++)this.rows[$t].clear();var jt=this.currRow+1-this.nrRollUpRows,Nt=this.lastOutputScreen;if(Nt){var Ft=Nt.rows[jt].cueStartTime,Bt=this.logger.time;if(Ft&&Bt!==null&&Ft<Bt)for(var Ut=0;Ut<this.nrRollUpRows;Ut++)this.rows[At-this.nrRollUpRows+Ut+1].copy(Nt.rows[jt+Ut])}}this.currRow=At;var Ht=this.rows[this.currRow];if(Lt.indent!==null){var Kt=Lt.indent,Gt=Math.max(Kt-1,0);Ht.setCursor(Lt.indent),Lt.color=Ht.chars[Gt].penState.foreground}var Wt={foreground:Lt.color,underline:Lt.underline,italics:Lt.italics,background:"black",flash:!1};this.setPen(Wt)},It.setBkgData=function(Lt){this.logger.log(yt.INFO,"bkgData = "+JSON.stringify(Lt)),this.backSpace(),this.setPen(Lt),this.insertChar(32)},It.setRollUpRows=function(Lt){this.nrRollUpRows=Lt},It.rollUp=function(){if(this.nrRollUpRows===null){this.logger.log(yt.DEBUG,"roll_up but nrRollUpRows not set yet");return}this.logger.log(yt.TEXT,this.getDisplayText());var Lt=this.currRow+1-this.nrRollUpRows,At=this.rows.splice(Lt,1)[0];At.clear(),this.rows.splice(this.currRow,0,At),this.logger.log(yt.INFO,"Rolling up")},It.getDisplayText=function(Lt){Lt=Lt||!1;for(var At=[],$t="",jt=-1,Nt=0;Nt<ct;Nt++){var Ft=this.rows[Nt].getTextString();Ft&&(jt=Nt+1,Lt?At.push("Row "+jt+": '"+Ft+"'"):At.push(Ft.trim()))}return At.length>0&&(Lt?$t="["+At.join(" | ")+"]":$t=At.join(`
`)),$t},It.getTextAndFormat=function(){return this.rows},Dt}(),Et=function(){function Dt(kt,Lt,At){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=kt,this.outputFilter=Lt,this.mode=null,this.verbose=0,this.displayedMemory=new St(At),this.nonDisplayedMemory=new St(At),this.lastOutputScreen=new St(At),this.currRollUpRow=this.displayedMemory.rows[ct-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=At}var It=Dt.prototype;return It.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[ct-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null},It.getHandler=function(){return this.outputFilter},It.setHandler=function(Lt){this.outputFilter=Lt},It.setPAC=function(Lt){this.writeScreen.setPAC(Lt)},It.setBkgData=function(Lt){this.writeScreen.setBkgData(Lt)},It.setMode=function(Lt){Lt!==this.mode&&(this.mode=Lt,this.logger.log(yt.INFO,"MODE="+Lt),this.mode==="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=Lt)},It.insertChars=function(Lt){for(var At=0;At<Lt.length;At++)this.writeScreen.insertChar(Lt[At]);var $t=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(yt.INFO,$t+": "+this.writeScreen.getDisplayText(!0)),(this.mode==="MODE_PAINT-ON"||this.mode==="MODE_ROLL-UP")&&(this.logger.log(yt.TEXT,"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},It.ccRCL=function(){this.logger.log(yt.INFO,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},It.ccBS=function(){this.logger.log(yt.INFO,"BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},It.ccAOF=function(){},It.ccAON=function(){},It.ccDER=function(){this.logger.log(yt.INFO,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},It.ccRU=function(Lt){this.logger.log(yt.INFO,"RU("+Lt+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(Lt)},It.ccFON=function(){this.logger.log(yt.INFO,"FON - Flash On"),this.writeScreen.setPen({flash:!0})},It.ccRDC=function(){this.logger.log(yt.INFO,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},It.ccTR=function(){this.logger.log(yt.INFO,"TR"),this.setMode("MODE_TEXT")},It.ccRTD=function(){this.logger.log(yt.INFO,"RTD"),this.setMode("MODE_TEXT")},It.ccEDM=function(){this.logger.log(yt.INFO,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},It.ccCR=function(){this.logger.log(yt.INFO,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},It.ccENM=function(){this.logger.log(yt.INFO,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},It.ccEOC=function(){if(this.logger.log(yt.INFO,"EOC - End Of Caption"),this.mode==="MODE_POP-ON"){var Lt=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=Lt,this.writeScreen=this.nonDisplayedMemory,this.logger.log(yt.TEXT,"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)},It.ccTO=function(Lt){this.logger.log(yt.INFO,"TO("+Lt+") - Tab Offset"),this.writeScreen.moveCursor(Lt)},It.ccMIDROW=function(Lt){var At={flash:!1};if(At.underline=Lt%2===1,At.italics=Lt>=46,At.italics)At.foreground="white";else{var $t=Math.floor(Lt/2)-16,jt=["white","green","blue","cyan","red","yellow","magenta"];At.foreground=jt[$t]}this.logger.log(yt.INFO,"MIDROW: "+JSON.stringify(At)),this.writeScreen.setPen(At)},It.outputDataUpdate=function(Lt){Lt===void 0&&(Lt=!1);var At=this.logger.time;At!==null&&this.outputFilter&&(this.cueStartTime===null&&!this.displayedMemory.isEmpty()?this.cueStartTime=At:this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,At,this.lastOutputScreen),Lt&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:At),this.lastOutputScreen.copy(this.displayedMemory))},It.cueSplitAtTime=function(Lt){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,Lt,this.displayedMemory),this.cueStartTime=Lt))},Dt}(),mt=function(){function Dt(kt,Lt,At){this.channels=void 0,this.currentChannel=0,this.cmdHistory=void 0,this.logger=void 0;var $t=new xt;this.channels=[null,new Et(kt,Lt,$t),new Et(kt+1,At,$t)],this.cmdHistory=Ot(),this.logger=$t}var It=Dt.prototype;return It.getHandler=function(Lt){return this.channels[Lt].getHandler()},It.setHandler=function(Lt,At){this.channels[Lt].setHandler(At)},It.addData=function(Lt,At){var $t,jt,Nt,Ft=!1;this.logger.time=Lt;for(var Bt=0;Bt<At.length;Bt+=2)if(jt=At[Bt]&127,Nt=At[Bt+1]&127,!(jt===0&&Nt===0)){if(this.logger.log(yt.DATA,"["+Ct([At[Bt],At[Bt+1]])+"] -> ("+Ct([jt,Nt])+")"),$t=this.parseCmd(jt,Nt),$t||($t=this.parseMidrow(jt,Nt)),$t||($t=this.parsePAC(jt,Nt)),$t||($t=this.parseBackgroundAttributes(jt,Nt)),!$t&&(Ft=this.parseChars(jt,Nt),Ft)){var Ut=this.currentChannel;if(Ut&&Ut>0){var Ht=this.channels[Ut];Ht.insertChars(Ft)}else this.logger.log(yt.WARNING,"No channel found yet. TEXT-MODE?")}!$t&&!Ft&&this.logger.log(yt.WARNING,"Couldn't parse cleaned data "+Ct([jt,Nt])+" orig: "+Ct([At[Bt],At[Bt+1]]))}},It.parseCmd=function(Lt,At){var $t=this.cmdHistory,jt=(Lt===20||Lt===28||Lt===21||Lt===29)&&At>=32&&At<=47,Nt=(Lt===23||Lt===31)&&At>=33&&At<=35;if(!(jt||Nt))return!1;if(bt(Lt,At,$t))return _t(null,null,$t),this.logger.log(yt.DEBUG,"Repeated command ("+Ct([Lt,At])+") is dropped"),!0;var Ft=Lt===20||Lt===21||Lt===23?1:2,Bt=this.channels[Ft];return Lt===20||Lt===21||Lt===28||Lt===29?At===32?Bt.ccRCL():At===33?Bt.ccBS():At===34?Bt.ccAOF():At===35?Bt.ccAON():At===36?Bt.ccDER():At===37?Bt.ccRU(2):At===38?Bt.ccRU(3):At===39?Bt.ccRU(4):At===40?Bt.ccFON():At===41?Bt.ccRDC():At===42?Bt.ccTR():At===43?Bt.ccRTD():At===44?Bt.ccEDM():At===45?Bt.ccCR():At===46?Bt.ccENM():At===47&&Bt.ccEOC():Bt.ccTO(At-32),_t(Lt,At,$t),this.currentChannel=Ft,!0},It.parseMidrow=function(Lt,At){var $t=0;if((Lt===17||Lt===25)&&At>=32&&At<=47){if(Lt===17?$t=1:$t=2,$t!==this.currentChannel)return this.logger.log(yt.ERROR,"Mismatch channel in midrow parsing"),!1;var jt=this.channels[$t];return jt?(jt.ccMIDROW(At),this.logger.log(yt.DEBUG,"MIDROW ("+Ct([Lt,At])+")"),!0):!1}return!1},It.parsePAC=function(Lt,At){var $t,jt=this.cmdHistory,Nt=(Lt>=17&&Lt<=23||Lt>=25&&Lt<=31)&&At>=64&&At<=127,Ft=(Lt===16||Lt===24)&&At>=64&&At<=95;if(!(Nt||Ft))return!1;if(bt(Lt,At,jt))return _t(null,null,jt),!0;var Bt=Lt<=23?1:2;At>=64&&At<=95?$t=Bt===1?Tt[Lt]:ht[Lt]:$t=Bt===1?Rt[Lt]:ut[Lt];var Ut=this.channels[Bt];return Ut?(Ut.setPAC(this.interpretPAC($t,At)),_t(Lt,At,jt),this.currentChannel=Bt,!0):!1},It.interpretPAC=function(Lt,At){var $t,jt={color:null,italics:!1,indent:null,underline:!1,row:Lt};return At>95?$t=At-96:$t=At-64,jt.underline=($t&1)===1,$t<=13?jt.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor($t/2)]:$t<=15?(jt.italics=!0,jt.color="white"):jt.indent=Math.floor(($t-16)/2)*4,jt},It.parseChars=function(Lt,At){var $t,jt=null,Nt=null;if(Lt>=25?($t=2,Nt=Lt-8):($t=1,Nt=Lt),Nt>=17&&Nt<=19){var Ft;Nt===17?Ft=At+80:Nt===18?Ft=At+112:Ft=At+144,this.logger.log(yt.INFO,"Special char '"+gt(Ft)+"' in channel "+$t),jt=[Ft]}else Lt>=32&&Lt<=127&&(jt=At===0?[Lt]:[Lt,At]);if(jt){var Bt=Ct(jt);this.logger.log(yt.DEBUG,"Char codes =  "+Bt.join(",")),_t(Lt,At,this.cmdHistory)}return jt},It.parseBackgroundAttributes=function(Lt,At){var $t=(Lt===16||Lt===24)&&At>=32&&At<=47,jt=(Lt===23||Lt===31)&&At>=45&&At<=47;if(!($t||jt))return!1;var Nt,Ft={};Lt===16||Lt===24?(Nt=Math.floor((At-32)/2),Ft.background=ft[Nt],At%2===1&&(Ft.background=Ft.background+"_semi")):At===45?Ft.background="transparent":(Ft.foreground="black",At===47&&(Ft.underline=!0));var Bt=Lt<=23?1:2,Ut=this.channels[Bt];return Ut.setBkgData(Ft),_t(Lt,At,this.cmdHistory),!0},It.reset=function(){for(var Lt=0;Lt<Object.keys(this.channels).length;Lt++){var At=this.channels[Lt];At&&At.reset()}this.cmdHistory=Ot()},It.cueSplitAtTime=function(Lt){for(var At=0;At<this.channels.length;At++){var $t=this.channels[At];$t&&$t.cueSplitAtTime(Lt)}},Dt}();function _t(Dt,It,kt){kt.a=Dt,kt.b=It}function bt(Dt,It,kt){return kt.a===Dt&&kt.b===It}function Ot(){return{a:null,b:null}}const Pt=mt},"./src/utils/codecs.ts":(at,it,ot)=>{ot.r(it),ot.d(it,{isCodecSupportedInMp4:()=>gt,isCodecType:()=>lt});var st={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,av01:!0,drac:!0,dva1:!0,dvav:!0,dvh1:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0},text:{stpp:!0,wvtt:!0}};function lt(ct,wt){var Tt=st[wt];return!!Tt&&Tt[ct.slice(0,4)]===!0}function gt(ct,wt){return MediaSource.isTypeSupported((wt||"video")+'/mp4;codecs="'+ct+'"')}},"./src/utils/cues.ts":(at,it,ot)=>{ot.r(it),ot.d(it,{default:()=>Tt});var st=ot("./src/utils/vttparser.ts"),lt=ot("./src/utils/webvtt-parser.ts"),gt=ot("./src/utils/texttrack-utils.ts"),ct=/\s/,wt={newCue:function(ht,ut,ft,yt){for(var xt=[],Ct,pt,dt,vt,St,Et=self.VTTCue||self.TextTrackCue,mt=0;mt<yt.rows.length;mt++)if(Ct=yt.rows[mt],dt=!0,vt=0,St="",!Ct.isEmpty()){for(var _t=0;_t<Ct.chars.length;_t++)ct.test(Ct.chars[_t].uchar)&&dt?vt++:(St+=Ct.chars[_t].uchar,dt=!1);Ct.cueStartTime=ut,ut===ft&&(ft+=1e-4),vt>=16?vt--:vt++;var bt=(0,st.fixLineBreaks)(St.trim()),Ot=(0,lt.generateCueId)(ut,ft,bt);(!ht||!ht.cues||!ht.cues.getCueById(Ot))&&(pt=new Et(ut,ft,bt),pt.id=Ot,pt.line=mt+1,pt.align="left",pt.position=10+Math.min(80,Math.floor(vt*8/32)*10),xt.push(pt))}return ht&&xt.length&&(xt.sort(function(Pt,Dt){return Pt.line==="auto"||Dt.line==="auto"?0:Pt.line>8&&Dt.line>8?Dt.line-Pt.line:Pt.line-Dt.line}),xt.forEach(function(Pt){return(0,gt.addCueToTrack)(ht,Pt)})),xt}};const Tt=wt},"./src/utils/discontinuities.ts":(at,it,ot)=>{ot.r(it),ot.d(it,{adjustSlidingStart:()=>ht,alignMediaPlaylistByPDT:()=>xt,alignPDT:()=>yt,alignStream:()=>ut,findDiscontinuousReferenceFrag:()=>Tt,findFirstFragWithCC:()=>ct,shouldAlignOnDiscontinuities:()=>wt});var st=ot("./src/polyfills/number.ts"),lt=ot("./src/utils/logger.ts"),gt=ot("./src/controller/level-helper.ts");function ct(Ct,pt){for(var dt=null,vt=0,St=Ct.length;vt<St;vt++){var Et=Ct[vt];if(Et&&Et.cc===pt){dt=Et;break}}return dt}function wt(Ct,pt,dt){return!!(pt.details&&(dt.endCC>dt.startCC||Ct&&Ct.cc<dt.startCC))}function Tt(Ct,pt,dt){var vt=Ct.fragments,St=pt.fragments;if(!St.length||!vt.length){lt.logger.log("No fragments to align");return}var Et=ct(vt,St[0].cc);if(!Et||Et&&!Et.startPTS){lt.logger.log("No frag in previous level to align on");return}return Et}function Rt(Ct,pt){if(Ct){var dt=Ct.start+pt;Ct.start=Ct.startPTS=dt,Ct.endPTS=dt+Ct.duration}}function ht(Ct,pt){for(var dt=pt.fragments,vt=0,St=dt.length;vt<St;vt++)Rt(dt[vt],Ct);pt.fragmentHint&&Rt(pt.fragmentHint,Ct),pt.alignedSliding=!0}function ut(Ct,pt,dt){!pt||(ft(Ct,dt,pt),!dt.alignedSliding&&pt.details&&yt(dt,pt.details),!dt.alignedSliding&&pt.details&&!dt.skippedSegments&&(0,gt.adjustSliding)(pt.details,dt))}function ft(Ct,pt,dt){if(wt(Ct,dt,pt)){var vt=Tt(dt.details,pt);vt&&(0,st.isFiniteNumber)(vt.start)&&(lt.logger.log("Adjusting PTS using last level due to CC increase within current level "+pt.url),ht(vt.start,pt))}}function yt(Ct,pt){if(!(!pt.fragments.length||!Ct.hasProgramDateTime||!pt.hasProgramDateTime)){var dt=pt.fragments[0].programDateTime,vt=Ct.fragments[0].programDateTime,St=(vt-dt)/1e3+pt.fragments[0].start;St&&(0,st.isFiniteNumber)(St)&&(lt.logger.log("Adjusting PTS using programDateTime delta "+(vt-dt)+"ms, sliding:"+St.toFixed(3)+" "+Ct.url+" "),ht(St,Ct))}}function xt(Ct,pt){if(!(!Ct.hasProgramDateTime||!pt.hasProgramDateTime)){var dt=Ct.fragments,vt=pt.fragments;if(!(!dt.length||!vt.length)){var St=Math.round(vt.length/2)-1,Et=vt[St],mt=ct(dt,Et.cc)||dt[Math.round(dt.length/2)-1],_t=Et.programDateTime,bt=mt.programDateTime;if(!(_t===null||bt===null)){var Ot=(bt-_t)/1e3-(mt.start-Et.start);ht(Ot,Ct)}}}}},"./src/utils/ewma-bandwidth-estimator.ts":(at,it,ot)=>{ot.r(it),ot.d(it,{default:()=>gt});var st=ot("./src/utils/ewma.ts"),lt=function(){function ct(Tt,Rt,ht){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultEstimate_=ht,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new st.default(Tt),this.fast_=new st.default(Rt)}var wt=ct.prototype;return wt.update=function(Rt,ht){var ut=this.slow_,ft=this.fast_;this.slow_.halfLife!==Rt&&(this.slow_=new st.default(Rt,ut.getEstimate(),ut.getTotalWeight())),this.fast_.halfLife!==ht&&(this.fast_=new st.default(ht,ft.getEstimate(),ft.getTotalWeight()))},wt.sample=function(Rt,ht){Rt=Math.max(Rt,this.minDelayMs_);var ut=8*ht,ft=Rt/1e3,yt=ut/ft;this.fast_.sample(ft,yt),this.slow_.sample(ft,yt)},wt.canEstimate=function(){var Rt=this.fast_;return Rt&&Rt.getTotalWeight()>=this.minWeight_},wt.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},wt.destroy=function(){},ct}();const gt=lt},"./src/utils/ewma.ts":(at,it,ot)=>{ot.r(it),ot.d(it,{default:()=>lt});var st=function(){function gt(wt,Tt,Rt){Tt===void 0&&(Tt=0),Rt===void 0&&(Rt=0),this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=wt,this.alpha_=wt?Math.exp(Math.log(.5)/wt):0,this.estimate_=Tt,this.totalWeight_=Rt}var ct=gt.prototype;return ct.sample=function(Tt,Rt){var ht=Math.pow(this.alpha_,Tt);this.estimate_=Rt*(1-ht)+ht*this.estimate_,this.totalWeight_+=Tt},ct.getTotalWeight=function(){return this.totalWeight_},ct.getEstimate=function(){if(this.alpha_){var Tt=1-Math.pow(this.alpha_,this.totalWeight_);if(Tt)return this.estimate_/Tt}return this.estimate_},gt}();const lt=st},"./src/utils/fetch-loader.ts":(at,it,ot)=>{ot.r(it),ot.d(it,{default:()=>St,fetchSupported:()=>xt});var st=ot("./src/polyfills/number.ts"),lt=ot("./src/loader/load-stats.ts"),gt=ot("./src/demux/chunk-cache.ts");function ct(Et,mt){Et.prototype=Object.create(mt.prototype),Et.prototype.constructor=Et,ut(Et,mt)}function wt(Et){var mt=typeof Map=="function"?new Map:void 0;return wt=function(bt){if(bt===null||!ht(bt))return bt;if(typeof bt!="function")throw new TypeError("Super expression must either be null or a function");if(typeof mt<"u"){if(mt.has(bt))return mt.get(bt);mt.set(bt,Ot)}function Ot(){return Tt(bt,arguments,ft(this).constructor)}return Ot.prototype=Object.create(bt.prototype,{constructor:{value:Ot,enumerable:!1,writable:!0,configurable:!0}}),ut(Ot,bt)},wt(Et)}function Tt(Et,mt,_t){return Rt()?Tt=Reflect.construct.bind():Tt=function(Ot,Pt,Dt){var It=[null];It.push.apply(It,Pt);var kt=Function.bind.apply(Ot,It),Lt=new kt;return Dt&&ut(Lt,Dt.prototype),Lt},Tt.apply(null,arguments)}function Rt(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ht(Et){return Function.toString.call(Et).indexOf("[native code]")!==-1}function ut(Et,mt){return ut=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(bt,Ot){return bt.__proto__=Ot,bt},ut(Et,mt)}function ft(Et){return ft=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(_t){return _t.__proto__||Object.getPrototypeOf(_t)},ft(Et)}function yt(){return yt=Object.assign?Object.assign.bind():function(Et){for(var mt=1;mt<arguments.length;mt++){var _t=arguments[mt];for(var bt in _t)Object.prototype.hasOwnProperty.call(_t,bt)&&(Et[bt]=_t[bt])}return Et},yt.apply(this,arguments)}function xt(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch{}return!1}var Ct=function(){function Et(_t){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=void 0,this.response=void 0,this.controller=void 0,this.context=void 0,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=_t.fetchSetup||dt,this.controller=new self.AbortController,this.stats=new lt.LoadStats}var mt=Et.prototype;return mt.destroy=function(){this.loader=this.callbacks=null,this.abortInternal()},mt.abortInternal=function(){var bt=this.response;(!bt||!bt.ok)&&(this.stats.aborted=!0,this.controller.abort())},mt.abort=function(){var bt;this.abortInternal(),(bt=this.callbacks)!==null&&bt!==void 0&&bt.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)},mt.load=function(bt,Ot,Pt){var Dt=this,It=this.stats;if(It.loading.start)throw new Error("Loader can only be used once.");It.loading.start=self.performance.now();var kt=pt(bt,this.controller.signal),Lt=Pt.onProgress,At=bt.responseType==="arraybuffer",$t=At?"byteLength":"length";this.context=bt,this.config=Ot,this.callbacks=Pt,this.request=this.fetchSetup(bt,kt),self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(function(){Dt.abortInternal(),Pt.onTimeout(It,bt,Dt.response)},Ot.timeout),self.fetch(this.request).then(function(jt){if(Dt.response=Dt.loader=jt,!jt.ok){var Nt=jt.status,Ft=jt.statusText;throw new vt(Ft||"fetch, bad network response",Nt,jt)}return It.loading.first=Math.max(self.performance.now(),It.loading.start),It.total=parseInt(jt.headers.get("Content-Length")||"0"),Lt&&(0,st.isFiniteNumber)(Ot.highWaterMark)?Dt.loadProgressively(jt,It,bt,Ot.highWaterMark,Lt):At?jt.arrayBuffer():jt.text()}).then(function(jt){var Nt=Dt.response;self.clearTimeout(Dt.requestTimeout),It.loading.end=Math.max(self.performance.now(),It.loading.first);var Ft=jt[$t];Ft&&(It.loaded=It.total=Ft);var Bt={url:Nt.url,data:jt};Lt&&!(0,st.isFiniteNumber)(Ot.highWaterMark)&&Lt(It,bt,jt,Nt),Pt.onSuccess(Bt,It,bt,Nt)}).catch(function(jt){if(self.clearTimeout(Dt.requestTimeout),!It.aborted){var Nt=jt&&jt.code||0,Ft=jt?jt.message:null;Pt.onError({code:Nt,text:Ft},bt,jt?jt.details:null)}})},mt.getCacheAge=function(){var bt=null;if(this.response){var Ot=this.response.headers.get("age");bt=Ot?parseFloat(Ot):null}return bt},mt.loadProgressively=function(bt,Ot,Pt,Dt,It){Dt===void 0&&(Dt=0);var kt=new gt.default,Lt=bt.body.getReader(),At=function $t(){return Lt.read().then(function(jt){if(jt.done)return kt.dataLength&&It(Ot,Pt,kt.flush(),bt),Promise.resolve(new ArrayBuffer(0));var Nt=jt.value,Ft=Nt.length;return Ot.loaded+=Ft,Ft<Dt||kt.dataLength?(kt.push(Nt),kt.dataLength>=Dt&&It(Ot,Pt,kt.flush(),bt)):It(Ot,Pt,Nt,bt),$t()}).catch(function(){return Promise.reject()})};return At()},Et}();function pt(Et,mt){var _t={method:"GET",mode:"cors",credentials:"same-origin",signal:mt,headers:new self.Headers(yt({},Et.headers))};return Et.rangeEnd&&_t.headers.set("Range","bytes="+Et.rangeStart+"-"+String(Et.rangeEnd-1)),_t}function dt(Et,mt){return new self.Request(Et.url,mt)}var vt=function(Et){ct(mt,Et);function mt(_t,bt,Ot){var Pt;return Pt=Et.call(this,_t)||this,Pt.code=void 0,Pt.details=void 0,Pt.code=bt,Pt.details=Ot,Pt}return mt}(wt(Error));const St=Ct},"./src/utils/imsc1-ttml-parser.ts":(at,it,ot)=>{ot.r(it),ot.d(it,{IMSC1_CODEC:()=>ht,parseIMSC1:()=>xt});var st=ot("./src/utils/mp4-tools.ts"),lt=ot("./src/utils/vttparser.ts"),gt=ot("./src/utils/vttcue.ts"),ct=ot("./src/demux/id3.ts"),wt=ot("./src/utils/timescale-conversion.ts"),Tt=ot("./src/utils/webvtt-parser.ts");function Rt(){return Rt=Object.assign?Object.assign.bind():function(Pt){for(var Dt=1;Dt<arguments.length;Dt++){var It=arguments[Dt];for(var kt in It)Object.prototype.hasOwnProperty.call(It,kt)&&(Pt[kt]=It[kt])}return Pt},Rt.apply(this,arguments)}var ht="stpp.ttml.im1t",ut=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,ft=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,yt={left:"start",center:"center",right:"end",start:"start",end:"end"};function xt(Pt,Dt,It,kt,Lt){var At=(0,st.findBox)(new Uint8Array(Pt),["mdat"]);if(At.length===0){Lt(new Error("Could not parse IMSC1 mdat"));return}var $t=At.map(function(Nt){return(0,ct.utf8ArrayToStr)(Nt)}),jt=(0,wt.toTimescaleFromScale)(Dt,1,It);try{$t.forEach(function(Nt){return kt(Ct(Nt,jt))})}catch(Nt){Lt(Nt)}}function Ct(Pt,Dt){var It=new DOMParser,kt=It.parseFromString(Pt,"text/xml"),Lt=kt.getElementsByTagName("tt")[0];if(!Lt)throw new Error("Invalid ttml");var At={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},$t=Object.keys(At).reduce(function(Ut,Ht){return Ut[Ht]=Lt.getAttribute("ttp:"+Ht)||At[Ht],Ut},{}),jt=Lt.getAttribute("xml:space")!=="preserve",Nt=dt(pt(Lt,"styling","style")),Ft=dt(pt(Lt,"layout","region")),Bt=pt(Lt,"body","[begin]");return[].map.call(Bt,function(Ut){var Ht=vt(Ut,jt);if(!Ht||!Ut.hasAttribute("begin"))return null;var Kt=_t(Ut.getAttribute("begin"),$t),Gt=_t(Ut.getAttribute("dur"),$t),Wt=_t(Ut.getAttribute("end"),$t);if(Kt===null)throw mt(Ut);if(Wt===null){if(Gt===null)throw mt(Ut);Wt=Kt+Gt}var Vt=new gt.default(Kt-Dt,Wt-Dt,Ht);Vt.id=(0,Tt.generateCueId)(Vt.startTime,Vt.endTime,Vt.text);var zt=Ft[Ut.getAttribute("region")],Yt=Nt[Ut.getAttribute("style")];Vt.position=10,Vt.size=80;var Xt=St(zt,Yt,Nt),Qt=Xt.textAlign;if(Qt){var qt=yt[Qt];qt&&(Vt.lineAlign=qt),Vt.align=Qt}return Rt(Vt,Xt),Vt}).filter(function(Ut){return Ut!==null})}function pt(Pt,Dt,It){var kt=Pt.getElementsByTagName(Dt)[0];return kt?[].slice.call(kt.querySelectorAll(It)):[]}function dt(Pt){return Pt.reduce(function(Dt,It){var kt=It.getAttribute("xml:id");return kt&&(Dt[kt]=It),Dt},{})}function vt(Pt,Dt){return[].slice.call(Pt.childNodes).reduce(function(It,kt,Lt){var At;return kt.nodeName==="br"&&Lt?It+`
`:(At=kt.childNodes)!==null&&At!==void 0&&At.length?vt(kt,Dt):Dt?It+kt.textContent.trim().replace(/\s+/g," "):It+kt.textContent},"")}function St(Pt,Dt,It){var kt="http://www.w3.org/ns/ttml#styling",Lt=null,At=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"],$t=Pt!=null&&Pt.hasAttribute("style")?Pt.getAttribute("style"):null;return $t&&It.hasOwnProperty($t)&&(Lt=It[$t]),At.reduce(function(jt,Nt){var Ft=Et(Dt,kt,Nt)||Et(Pt,kt,Nt)||Et(Lt,kt,Nt);return Ft&&(jt[Nt]=Ft),jt},{})}function Et(Pt,Dt,It){return Pt&&Pt.hasAttributeNS(Dt,It)?Pt.getAttributeNS(Dt,It):null}function mt(Pt){return new Error("Could not parse ttml timestamp "+Pt)}function _t(Pt,Dt){if(!Pt)return null;var It=(0,lt.parseTimeStamp)(Pt);return It===null&&(ut.test(Pt)?It=bt(Pt,Dt):ft.test(Pt)&&(It=Ot(Pt,Dt))),It}function bt(Pt,Dt){var It=ut.exec(Pt),kt=(It[4]|0)+(It[5]|0)/Dt.subFrameRate;return(It[1]|0)*3600+(It[2]|0)*60+(It[3]|0)+kt/Dt.frameRate}function Ot(Pt,Dt){var It=ft.exec(Pt),kt=Number(It[1]),Lt=It[2];switch(Lt){case"h":return kt*3600;case"m":return kt*60;case"ms":return kt*1e3;case"f":return kt/Dt.frameRate;case"t":return kt/Dt.tickRate}return kt}},"./src/utils/logger.ts":(at,it,ot)=>{ot.r(it),ot.d(it,{enableLogs:()=>Tt,logger:()=>Rt});var st=function(){},lt={trace:st,debug:st,log:st,warn:st,info:st,error:st},gt=lt;function ct(ht){var ut=self.console[ht];return ut?ut.bind(self.console,"["+ht+"] >"):st}function wt(ht){for(var ut=arguments.length,ft=new Array(ut>1?ut-1:0),yt=1;yt<ut;yt++)ft[yt-1]=arguments[yt];ft.forEach(function(xt){gt[xt]=ht[xt]?ht[xt].bind(ht):ct(xt)})}function Tt(ht,ut){if(self.console&&ht===!0||typeof ht=="object"){wt(ht,"debug","log","info","warn","error");try{gt.log('Debug logs enabled for "'+ut+'"')}catch{gt=lt}}else gt=lt}var Rt=gt},"./src/utils/mediakeys-helper.ts":(at,it,ot)=>{ot.r(it),ot.d(it,{KeySystems:()=>st,requestMediaKeySystemAccess:()=>lt});var st;(function(gt){gt.WIDEVINE="com.widevine.alpha",gt.PLAYREADY="com.microsoft.playready"})(st||(st={}));var lt=function(){return typeof self<"u"&&self.navigator&&self.navigator.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null}()},"./src/utils/mediasource-helper.ts":(at,it,ot)=>{ot.r(it),ot.d(it,{getMediaSource:()=>st});function st(){return self.MediaSource||self.WebKitMediaSource}},"./src/utils/mp4-tools.ts":(at,it,ot)=>{ot.r(it),ot.d(it,{RemuxerTrackIdConfig:()=>Tt,appendUint8Array:()=>_t,bin2str:()=>Rt,computeRawDurationFromSamples:()=>St,discardEPB:()=>It,findBox:()=>xt,getDuration:()=>vt,getStartDTS:()=>dt,offsetStartDTS:()=>Et,parseEmsg:()=>kt,parseInitSegment:()=>pt,parseSEIMessageFromNALu:()=>Dt,parseSamples:()=>bt,parseSegmentIndex:()=>Ct,readSint32:()=>ft,readUint16:()=>ht,readUint32:()=>ut,segmentValidRange:()=>mt,writeUint32:()=>yt});var st=ot("./src/utils/typed-array.ts"),lt=ot("./src/loader/fragment.ts"),gt=ot("./src/demux/id3.ts"),ct=Math.pow(2,32)-1,wt=[].push,Tt={video:1,audio:2,id3:3,text:4};function Rt(Lt){return String.fromCharCode.apply(null,Lt)}function ht(Lt,At){var $t=Lt[At]<<8|Lt[At+1];return $t<0?65536+$t:$t}function ut(Lt,At){var $t=ft(Lt,At);return $t<0?4294967296+$t:$t}function ft(Lt,At){return Lt[At]<<24|Lt[At+1]<<16|Lt[At+2]<<8|Lt[At+3]}function yt(Lt,At,$t){Lt[At]=$t>>24,Lt[At+1]=$t>>16&255,Lt[At+2]=$t>>8&255,Lt[At+3]=$t&255}function xt(Lt,At){var $t=[];if(!At.length)return $t;for(var jt=Lt.byteLength,Nt=0;Nt<jt;){var Ft=ut(Lt,Nt),Bt=Rt(Lt.subarray(Nt+4,Nt+8)),Ut=Ft>1?Nt+Ft:jt;if(Bt===At[0])if(At.length===1)$t.push(Lt.subarray(Nt+8,Ut));else{var Ht=xt(Lt.subarray(Nt+8,Ut),At.slice(1));Ht.length&&wt.apply($t,Ht)}Nt=Ut}return $t}function Ct(Lt){var At=[],$t=Lt[0],jt=8,Nt=ut(Lt,jt);jt+=4;var Ft=0,Bt=0;$t===0?jt+=8:jt+=16,jt+=2;var Ut=Lt.length+Bt,Ht=ht(Lt,jt);jt+=2;for(var Kt=0;Kt<Ht;Kt++){var Gt=jt,Wt=ut(Lt,Gt);Gt+=4;var Vt=Wt&2147483647,zt=(Wt&2147483648)>>>31;if(zt===1)return console.warn("SIDX has hierarchical references (not supported)"),null;var Yt=ut(Lt,Gt);Gt+=4,At.push({referenceSize:Vt,subsegmentDuration:Yt,info:{duration:Yt/Nt,start:Ut,end:Ut+Vt-1}}),Ut+=Vt,Gt+=4,jt=Gt}return{earliestPresentationTime:Ft,timescale:Nt,version:$t,referencesCount:Ht,references:At}}function pt(Lt){for(var At=[],$t=xt(Lt,["moov","trak"]),jt=0;jt<$t.length;jt++){var Nt=$t[jt],Ft=xt(Nt,["tkhd"])[0];if(Ft){var Bt=Ft[0],Ut=Bt===0?12:20,Ht=ut(Ft,Ut),Kt=xt(Nt,["mdia","mdhd"])[0];if(Kt){Bt=Kt[0],Ut=Bt===0?12:20;var Gt=ut(Kt,Ut),Wt=xt(Nt,["mdia","hdlr"])[0];if(Wt){var Vt=Rt(Wt.subarray(8,12)),zt={soun:lt.ElementaryStreamTypes.AUDIO,vide:lt.ElementaryStreamTypes.VIDEO}[Vt];if(zt){var Yt=xt(Nt,["mdia","minf","stbl","stsd"])[0],Xt=void 0;Yt&&(Xt=Rt(Yt.subarray(12,16))),At[Ht]={timescale:Gt,type:zt},At[zt]={timescale:Gt,id:Ht,codec:Xt}}}}}}var Qt=xt(Lt,["moov","mvex","trex"]);return Qt.forEach(function(qt){var er=ut(qt,4),tr=At[er];tr&&(tr.default={duration:ut(qt,12),flags:ut(qt,20)})}),At}function dt(Lt,At){return xt(At,["moof","traf"]).reduce(function($t,jt){var Nt=xt(jt,["tfdt"])[0],Ft=Nt[0],Bt=xt(jt,["tfhd"]).reduce(function(Ut,Ht){var Kt=ut(Ht,4),Gt=Lt[Kt];if(Gt){var Wt=ut(Nt,4);Ft===1&&(Wt*=Math.pow(2,32),Wt+=ut(Nt,8));var Vt=Gt.timescale||9e4,zt=Wt/Vt;if(isFinite(zt)&&(Ut===null||zt<Ut))return zt}return Ut},null);return Bt!==null&&isFinite(Bt)&&($t===null||Bt<$t)?Bt:$t},null)||0}function vt(Lt,At){for(var $t=0,jt=0,Nt=0,Ft=xt(Lt,["moof","traf"]),Bt=0;Bt<Ft.length;Bt++){var Ut=Ft[Bt],Ht=xt(Ut,["tfhd"])[0],Kt=ut(Ht,4),Gt=At[Kt];if(!!Gt){var Wt=Gt.default,Vt=ut(Ht,0)|(Wt==null?void 0:Wt.flags),zt=Wt==null?void 0:Wt.duration;Vt&8&&(Vt&2?zt=ut(Ht,12):zt=ut(Ht,8));for(var Yt=Gt.timescale||9e4,Xt=xt(Ut,["trun"]),Qt=0;Qt<Xt.length;Qt++){if($t=St(Xt[Qt]),!$t&&zt){var qt=ut(Xt[Qt],4);$t=zt*qt}Gt.type===lt.ElementaryStreamTypes.VIDEO?jt+=$t/Yt:Gt.type===lt.ElementaryStreamTypes.AUDIO&&(Nt+=$t/Yt)}}}if(jt===0&&Nt===0){for(var er=0,tr=xt(Lt,["sidx"]),Zt=0;Zt<tr.length;Zt++){var Jt=Ct(tr[Zt]);Jt!=null&&Jt.references&&(er+=Jt.references.reduce(function(nr,rr){return nr+rr.info.duration||0},0))}return er}return jt||Nt}function St(Lt){var At=ut(Lt,0),$t=8;At&1&&($t+=4),At&4&&($t+=4);for(var jt=0,Nt=ut(Lt,4),Ft=0;Ft<Nt;Ft++){if(At&256){var Bt=ut(Lt,$t);jt+=Bt,$t+=4}At&512&&($t+=4),At&1024&&($t+=4),At&2048&&($t+=4)}return jt}function Et(Lt,At,$t){xt(At,["moof","traf"]).forEach(function(jt){xt(jt,["tfhd"]).forEach(function(Nt){var Ft=ut(Nt,4),Bt=Lt[Ft];if(!!Bt){var Ut=Bt.timescale||9e4;xt(jt,["tfdt"]).forEach(function(Ht){var Kt=Ht[0],Gt=ut(Ht,4);if(Kt===0)Gt-=$t*Ut,Gt=Math.max(Gt,0),yt(Ht,4,Gt);else{Gt*=Math.pow(2,32),Gt+=ut(Ht,8),Gt-=$t*Ut,Gt=Math.max(Gt,0);var Wt=Math.floor(Gt/(ct+1)),Vt=Math.floor(Gt%(ct+1));yt(Ht,4,Wt),yt(Ht,8,Vt)}})}})})}function mt(Lt){var At={valid:null,remainder:null},$t=xt(Lt,["moof"]);if($t){if($t.length<2)return At.remainder=Lt,At}else return At;var jt=$t[$t.length-1];return At.valid=(0,st.sliceUint8)(Lt,0,jt.byteOffset-8),At.remainder=(0,st.sliceUint8)(Lt,jt.byteOffset-8),At}function _t(Lt,At){var $t=new Uint8Array(Lt.length+At.length);return $t.set(Lt),$t.set(At,Lt.length),$t}function bt(Lt,At){var $t=[],jt=At.samples,Nt=At.timescale,Ft=At.id,Bt=!1,Ut=xt(jt,["moof"]);return Ut.map(function(Ht){var Kt=Ht.byteOffset-8,Gt=xt(Ht,["traf"]);Gt.map(function(Wt){var Vt=xt(Wt,["tfdt"]).map(function(zt){var Yt=zt[0],Xt=ut(zt,4);return Yt===1&&(Xt*=Math.pow(2,32),Xt+=ut(zt,8)),Xt/Nt})[0];return Vt!==void 0&&(Lt=Vt),xt(Wt,["tfhd"]).map(function(zt){var Yt=ut(zt,4),Xt=ut(zt,0)&16777215,Qt=(Xt&1)!==0,qt=(Xt&2)!==0,er=(Xt&8)!==0,tr=0,Zt=(Xt&16)!==0,Jt=0,nr=(Xt&32)!==0,rr=8;Yt===Ft&&(Qt&&(rr+=8),qt&&(rr+=4),er&&(tr=ut(zt,rr),rr+=4),Zt&&(Jt=ut(zt,rr),rr+=4),nr&&(rr+=4),At.type==="video"&&(Bt=Ot(At.codec)),xt(Wt,["trun"]).map(function(ir){var lr=ir[0],ar=ut(ir,0)&16777215,ur=(ar&1)!==0,sr=0,fr=(ar&4)!==0,hr=(ar&256)!==0,yr=0,pr=(ar&512)!==0,vr=0,xr=(ar&1024)!==0,Sr=(ar&2048)!==0,_r=0,Pr=ut(ir,4),cr=8;ur&&(sr=ut(ir,cr),cr+=4),fr&&(cr+=4);for(var dr=sr+Kt,Tr=0;Tr<Pr;Tr++){if(hr?(yr=ut(ir,cr),cr+=4):yr=tr,pr?(vr=ut(ir,cr),cr+=4):vr=Jt,xr&&(cr+=4),Sr&&(lr===0?_r=ut(ir,cr):_r=ft(ir,cr),cr+=4),At.type===lt.ElementaryStreamTypes.VIDEO)for(var or=0;or<vr;){var gr=ut(jt,dr);if(dr+=4,Pt(Bt,jt[dr])){var Er=jt.subarray(dr,dr+gr);Dt(Er,Bt?2:1,Lt+_r/Nt,$t)}dr+=gr,or+=gr+4}Lt+=yr/Nt}}))})})}),$t}function Ot(Lt){if(!Lt)return!1;var At=Lt.indexOf("."),$t=At<0?Lt:Lt.substring(0,At);return $t==="hvc1"||$t==="hev1"||$t==="dvh1"||$t==="dvhe"}function Pt(Lt,At){if(Lt){var $t=At>>1&63;return $t===39||$t===40}else{var jt=At&31;return jt===6}}function Dt(Lt,At,$t,jt){var Nt=It(Lt),Ft=0;Ft+=At;for(var Bt=0,Ut=0,Ht=!1,Kt=0;Ft<Nt.length;){Bt=0;do{if(Ft>=Nt.length)break;Kt=Nt[Ft++],Bt+=Kt}while(Kt===255);Ut=0;do{if(Ft>=Nt.length)break;Kt=Nt[Ft++],Ut+=Kt}while(Kt===255);var Gt=Nt.length-Ft;if(!Ht&&Bt===4&&Ft<Nt.length){Ht=!0;var Wt=Nt[Ft++];if(Wt===181){var Vt=ht(Nt,Ft);if(Ft+=2,Vt===49){var zt=ut(Nt,Ft);if(Ft+=4,zt===1195456820){var Yt=Nt[Ft++];if(Yt===3){var Xt=Nt[Ft++],Qt=31&Xt,qt=64&Xt,er=qt?2+Qt*3:0,tr=new Uint8Array(er);if(qt){tr[0]=Xt;for(var Zt=1;Zt<er;Zt++)tr[Zt]=Nt[Ft++]}jt.push({type:Yt,payloadType:Bt,pts:$t,bytes:tr})}}}}}else if(Bt===5&&Ut<Gt){if(Ht=!0,Ut>16){for(var Jt=[],nr=0;nr<16;nr++){var rr=Nt[Ft++].toString(16);Jt.push(rr.length==1?"0"+rr:rr),(nr===3||nr===5||nr===7||nr===9)&&Jt.push("-")}for(var ir=Ut-16,lr=new Uint8Array(ir),ar=0;ar<ir;ar++)lr[ar]=Nt[Ft++];jt.push({payloadType:Bt,pts:$t,uuid:Jt.join(""),userData:(0,gt.utf8ArrayToStr)(lr),userDataBytes:lr})}}else if(Ut<Gt)Ft+=Ut;else if(Ut>Gt)break}}function It(Lt){for(var At=Lt.byteLength,$t=[],jt=1;jt<At-2;)Lt[jt]===0&&Lt[jt+1]===0&&Lt[jt+2]===3?($t.push(jt+2),jt+=2):jt++;if($t.length===0)return Lt;var Nt=At-$t.length,Ft=new Uint8Array(Nt),Bt=0;for(jt=0;jt<Nt;Bt++,jt++)Bt===$t[0]&&(Bt++,$t.shift()),Ft[jt]=Lt[Bt];return Ft}function kt(Lt){var At=Lt[0],$t="",jt="",Nt=0,Ft=0,Bt=0,Ut=0,Ht=0,Kt=0;if(At===0){for(;Rt(Lt.subarray(Kt,Kt+1))!=="\0";)$t+=Rt(Lt.subarray(Kt,Kt+1)),Kt+=1;for($t+=Rt(Lt.subarray(Kt,Kt+1)),Kt+=1;Rt(Lt.subarray(Kt,Kt+1))!=="\0";)jt+=Rt(Lt.subarray(Kt,Kt+1)),Kt+=1;jt+=Rt(Lt.subarray(Kt,Kt+1)),Kt+=1,Nt=ut(Lt,12),Ft=ut(Lt,16),Ut=ut(Lt,20),Ht=ut(Lt,24),Kt=28}else if(At===1){Kt+=4,Nt=ut(Lt,Kt),Kt+=4;var Gt=ut(Lt,Kt);Kt+=4;var Wt=ut(Lt,Kt);for(Kt+=4,Bt=Math.pow(2,32)*Gt+Wt,Number.isSafeInteger(Bt)||(Bt=Number.MAX_SAFE_INTEGER,console.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),Ut=ut(Lt,Kt),Kt+=4,Ht=ut(Lt,Kt),Kt+=4;Rt(Lt.subarray(Kt,Kt+1))!=="\0";)$t+=Rt(Lt.subarray(Kt,Kt+1)),Kt+=1;for($t+=Rt(Lt.subarray(Kt,Kt+1)),Kt+=1;Rt(Lt.subarray(Kt,Kt+1))!=="\0";)jt+=Rt(Lt.subarray(Kt,Kt+1)),Kt+=1;jt+=Rt(Lt.subarray(Kt,Kt+1)),Kt+=1}var Vt=Lt.subarray(Kt,Lt.byteLength);return{schemeIdUri:$t,value:jt,timeScale:Nt,presentationTime:Bt,presentationTimeDelta:Ft,eventDuration:Ut,id:Ht,payload:Vt}}},"./src/utils/output-filter.ts":(at,it,ot)=>{ot.r(it),ot.d(it,{default:()=>st});var st=function(){function lt(ct,wt){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=ct,this.trackName=wt}var gt=lt.prototype;return gt.dispatchCue=function(){this.startTime!==null&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)},gt.newCue=function(wt,Tt,Rt){(this.startTime===null||this.startTime>wt)&&(this.startTime=wt),this.endTime=Tt,this.screen=Rt,this.timelineController.createCaptionsTrack(this.trackName)},gt.reset=function(){this.cueRanges=[],this.startTime=null},lt}()},"./src/utils/texttrack-utils.ts":(at,it,ot)=>{ot.r(it),ot.d(it,{addCueToTrack:()=>gt,clearCurrentCues:()=>ct,getCuesInRange:()=>Rt,removeCuesInRange:()=>wt,sendAddTrackEvent:()=>lt});var st=ot("./src/utils/logger.ts");function lt(ht,ut){var ft;try{ft=new Event("addtrack")}catch{ft=document.createEvent("Event"),ft.initEvent("addtrack",!1,!1)}ft.track=ht,ut.dispatchEvent(ft)}function gt(ht,ut){var ft=ht.mode;if(ft==="disabled"&&(ht.mode="hidden"),ht.cues&&!ht.cues.getCueById(ut.id))try{if(ht.addCue(ut),!ht.cues.getCueById(ut.id))throw new Error("addCue is failed for: "+ut)}catch(xt){st.logger.debug("[texttrack-utils]: "+xt);var yt=new self.TextTrackCue(ut.startTime,ut.endTime,ut.text);yt.id=ut.id,ht.addCue(yt)}ft==="disabled"&&(ht.mode=ft)}function ct(ht){var ut=ht.mode;if(ut==="disabled"&&(ht.mode="hidden"),ht.cues)for(var ft=ht.cues.length;ft--;)ht.removeCue(ht.cues[ft]);ut==="disabled"&&(ht.mode=ut)}function wt(ht,ut,ft,yt){var xt=ht.mode;if(xt==="disabled"&&(ht.mode="hidden"),ht.cues&&ht.cues.length>0)for(var Ct=Rt(ht.cues,ut,ft),pt=0;pt<Ct.length;pt++)(!yt||yt(Ct[pt]))&&ht.removeCue(Ct[pt]);xt==="disabled"&&(ht.mode=xt)}function Tt(ht,ut){if(ut<ht[0].startTime)return 0;var ft=ht.length-1;if(ut>ht[ft].endTime)return-1;for(var yt=0,xt=ft;yt<=xt;){var Ct=Math.floor((xt+yt)/2);if(ut<ht[Ct].startTime)xt=Ct-1;else if(ut>ht[Ct].startTime&&yt<ft)yt=Ct+1;else return Ct}return ht[yt].startTime-ut<ut-ht[xt].startTime?yt:xt}function Rt(ht,ut,ft){var yt=[],xt=Tt(ht,ut);if(xt>-1)for(var Ct=xt,pt=ht.length;Ct<pt;Ct++){var dt=ht[Ct];if(dt.startTime>=ut&&dt.endTime<=ft)yt.push(dt);else if(dt.startTime>ft)return yt}return yt}},"./src/utils/time-ranges.ts":(at,it,ot)=>{ot.r(it),ot.d(it,{default:()=>lt});var st={toString:function(ct){for(var wt="",Tt=ct.length,Rt=0;Rt<Tt;Rt++)wt+="["+ct.start(Rt).toFixed(3)+","+ct.end(Rt).toFixed(3)+"]";return wt}};const lt=st},"./src/utils/timescale-conversion.ts":(at,it,ot)=>{ot.r(it),ot.d(it,{toMpegTsClockFromTimescale:()=>wt,toMsFromMpegTsClock:()=>ct,toTimescaleFromBase:()=>lt,toTimescaleFromScale:()=>gt});var st=9e4;function lt(Tt,Rt,ht,ut){ht===void 0&&(ht=1),ut===void 0&&(ut=!1);var ft=Tt*Rt*ht;return ut?Math.round(ft):ft}function gt(Tt,Rt,ht,ut){return ht===void 0&&(ht=1),ut===void 0&&(ut=!1),lt(Tt,Rt,1/ht,ut)}function ct(Tt,Rt){return Rt===void 0&&(Rt=!1),lt(Tt,1e3,1/st,Rt)}function wt(Tt,Rt){return Rt===void 0&&(Rt=1),lt(Tt,st,1/Rt)}},"./src/utils/typed-array.ts":(at,it,ot)=>{ot.r(it),ot.d(it,{sliceUint8:()=>st});function st(lt,gt,ct){return Uint8Array.prototype.slice?lt.slice(gt,ct):new Uint8Array(Array.prototype.slice.call(lt,gt,ct))}},"./src/utils/vttcue.ts":(at,it,ot)=>{ot.r(it),ot.d(it,{default:()=>st});const st=function(){if(typeof self<"u"&&self.VTTCue)return self.VTTCue;var lt=["","lr","rl"],gt=["start","middle","end","left","right"];function ct(ut,ft){if(typeof ft!="string"||!Array.isArray(ut))return!1;var yt=ft.toLowerCase();return~ut.indexOf(yt)?yt:!1}function wt(ut){return ct(lt,ut)}function Tt(ut){return ct(gt,ut)}function Rt(ut){for(var ft=arguments.length,yt=new Array(ft>1?ft-1:0),xt=1;xt<ft;xt++)yt[xt-1]=arguments[xt];for(var Ct=1;Ct<arguments.length;Ct++){var pt=arguments[Ct];for(var dt in pt)ut[dt]=pt[dt]}return ut}function ht(ut,ft,yt){var xt=this,Ct={enumerable:!0};xt.hasBeenReset=!1;var pt="",dt=!1,vt=ut,St=ft,Et=yt,mt=null,_t="",bt=!0,Ot="auto",Pt="start",Dt=50,It="middle",kt=50,Lt="middle";Object.defineProperty(xt,"id",Rt({},Ct,{get:function(){return pt},set:function($t){pt=""+$t}})),Object.defineProperty(xt,"pauseOnExit",Rt({},Ct,{get:function(){return dt},set:function($t){dt=!!$t}})),Object.defineProperty(xt,"startTime",Rt({},Ct,{get:function(){return vt},set:function($t){if(typeof $t!="number")throw new TypeError("Start time must be set to a number.");vt=$t,this.hasBeenReset=!0}})),Object.defineProperty(xt,"endTime",Rt({},Ct,{get:function(){return St},set:function($t){if(typeof $t!="number")throw new TypeError("End time must be set to a number.");St=$t,this.hasBeenReset=!0}})),Object.defineProperty(xt,"text",Rt({},Ct,{get:function(){return Et},set:function($t){Et=""+$t,this.hasBeenReset=!0}})),Object.defineProperty(xt,"region",Rt({},Ct,{get:function(){return mt},set:function($t){mt=$t,this.hasBeenReset=!0}})),Object.defineProperty(xt,"vertical",Rt({},Ct,{get:function(){return _t},set:function($t){var jt=wt($t);if(jt===!1)throw new SyntaxError("An invalid or illegal string was specified.");_t=jt,this.hasBeenReset=!0}})),Object.defineProperty(xt,"snapToLines",Rt({},Ct,{get:function(){return bt},set:function($t){bt=!!$t,this.hasBeenReset=!0}})),Object.defineProperty(xt,"line",Rt({},Ct,{get:function(){return Ot},set:function($t){if(typeof $t!="number"&&$t!=="auto")throw new SyntaxError("An invalid number or illegal string was specified.");Ot=$t,this.hasBeenReset=!0}})),Object.defineProperty(xt,"lineAlign",Rt({},Ct,{get:function(){return Pt},set:function($t){var jt=Tt($t);if(!jt)throw new SyntaxError("An invalid or illegal string was specified.");Pt=jt,this.hasBeenReset=!0}})),Object.defineProperty(xt,"position",Rt({},Ct,{get:function(){return Dt},set:function($t){if($t<0||$t>100)throw new Error("Position must be between 0 and 100.");Dt=$t,this.hasBeenReset=!0}})),Object.defineProperty(xt,"positionAlign",Rt({},Ct,{get:function(){return It},set:function($t){var jt=Tt($t);if(!jt)throw new SyntaxError("An invalid or illegal string was specified.");It=jt,this.hasBeenReset=!0}})),Object.defineProperty(xt,"size",Rt({},Ct,{get:function(){return kt},set:function($t){if($t<0||$t>100)throw new Error("Size must be between 0 and 100.");kt=$t,this.hasBeenReset=!0}})),Object.defineProperty(xt,"align",Rt({},Ct,{get:function(){return Lt},set:function($t){var jt=Tt($t);if(!jt)throw new SyntaxError("An invalid or illegal string was specified.");Lt=jt,this.hasBeenReset=!0}})),xt.displayState=void 0}return ht.prototype.getCueAsHTML=function(){var ut=self.WebVTT;return ut.convertCueToDOMTree(self,this.text)},ht}()},"./src/utils/vttparser.ts":(at,it,ot)=>{ot.r(it),ot.d(it,{VTTParser:()=>ft,fixLineBreaks:()=>ut,parseTimeStamp:()=>gt});var st=ot("./src/utils/vttcue.ts"),lt=function(){function yt(){}var xt=yt.prototype;return xt.decode=function(pt,dt){if(!pt)return"";if(typeof pt!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(pt))},yt}();function gt(yt){function xt(pt,dt,vt,St){return(pt|0)*3600+(dt|0)*60+(vt|0)+parseFloat(St||0)}var Ct=yt.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return Ct?parseFloat(Ct[2])>59?xt(Ct[2],Ct[3],0,Ct[4]):xt(Ct[1],Ct[2],Ct[3],Ct[4]):null}var ct=function(){function yt(){this.values=Object.create(null)}var xt=yt.prototype;return xt.set=function(pt,dt){!this.get(pt)&&dt!==""&&(this.values[pt]=dt)},xt.get=function(pt,dt,vt){return vt?this.has(pt)?this.values[pt]:dt[vt]:this.has(pt)?this.values[pt]:dt},xt.has=function(pt){return pt in this.values},xt.alt=function(pt,dt,vt){for(var St=0;St<vt.length;++St)if(dt===vt[St]){this.set(pt,dt);break}},xt.integer=function(pt,dt){/^-?\d+$/.test(dt)&&this.set(pt,parseInt(dt,10))},xt.percent=function(pt,dt){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(dt)){var vt=parseFloat(dt);if(vt>=0&&vt<=100)return this.set(pt,vt),!0}return!1},yt}();function wt(yt,xt,Ct,pt){var dt=pt?yt.split(pt):[yt];for(var vt in dt)if(typeof dt[vt]=="string"){var St=dt[vt].split(Ct);if(St.length===2){var Et=St[0],mt=St[1];xt(Et,mt)}}}var Tt=new st.default(0,0,""),Rt=Tt.align==="middle"?"middle":"center";function ht(yt,xt,Ct){var pt=yt;function dt(){var Et=gt(yt);if(Et===null)throw new Error("Malformed timestamp: "+pt);return yt=yt.replace(/^[^\sa-zA-Z-]+/,""),Et}function vt(Et,mt){var _t=new ct;wt(Et,function(Pt,Dt){var It;switch(Pt){case"region":for(var kt=Ct.length-1;kt>=0;kt--)if(Ct[kt].id===Dt){_t.set(Pt,Ct[kt].region);break}break;case"vertical":_t.alt(Pt,Dt,["rl","lr"]);break;case"line":It=Dt.split(","),_t.integer(Pt,It[0]),_t.percent(Pt,It[0])&&_t.set("snapToLines",!1),_t.alt(Pt,It[0],["auto"]),It.length===2&&_t.alt("lineAlign",It[1],["start",Rt,"end"]);break;case"position":It=Dt.split(","),_t.percent(Pt,It[0]),It.length===2&&_t.alt("positionAlign",It[1],["start",Rt,"end","line-left","line-right","auto"]);break;case"size":_t.percent(Pt,Dt);break;case"align":_t.alt(Pt,Dt,["start",Rt,"end","left","right"]);break}},/:/,/\s/),mt.region=_t.get("region",null),mt.vertical=_t.get("vertical","");var bt=_t.get("line","auto");bt==="auto"&&Tt.line===-1&&(bt=-1),mt.line=bt,mt.lineAlign=_t.get("lineAlign","start"),mt.snapToLines=_t.get("snapToLines",!0),mt.size=_t.get("size",100),mt.align=_t.get("align",Rt);var Ot=_t.get("position","auto");Ot==="auto"&&Tt.position===50&&(Ot=mt.align==="start"||mt.align==="left"?0:mt.align==="end"||mt.align==="right"?100:50),mt.position=Ot}function St(){yt=yt.replace(/^\s+/,"")}if(St(),xt.startTime=dt(),St(),yt.slice(0,3)!=="-->")throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+pt);yt=yt.slice(3),St(),xt.endTime=dt(),St(),vt(yt,xt)}function ut(yt){return yt.replace(/<br(?: \/)?>/gi,`
`)}var ft=function(){function yt(){this.state="INITIAL",this.buffer="",this.decoder=new lt,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}var xt=yt.prototype;return xt.parse=function(pt){var dt=this;pt&&(dt.buffer+=dt.decoder.decode(pt,{stream:!0}));function vt(){var Ot=dt.buffer,Pt=0;for(Ot=ut(Ot);Pt<Ot.length&&Ot[Pt]!=="\r"&&Ot[Pt]!==`
`;)++Pt;var Dt=Ot.slice(0,Pt);return Ot[Pt]==="\r"&&++Pt,Ot[Pt]===`
`&&++Pt,dt.buffer=Ot.slice(Pt),Dt}function St(Ot){wt(Ot,function(Pt,Dt){},/:/)}try{var Et="";if(dt.state==="INITIAL"){if(!/\r\n|\n/.test(dt.buffer))return this;Et=vt();var mt=Et.match(/^(ï»¿)?WEBVTT([ \t].*)?$/);if(!mt||!mt[0])throw new Error("Malformed WebVTT signature.");dt.state="HEADER"}for(var _t=!1;dt.buffer;){if(!/\r\n|\n/.test(dt.buffer))return this;switch(_t?_t=!1:Et=vt(),dt.state){case"HEADER":/:/.test(Et)?St(Et):Et||(dt.state="ID");continue;case"NOTE":Et||(dt.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(Et)){dt.state="NOTE";break}if(!Et)continue;if(dt.cue=new st.default(0,0,""),dt.state="CUE",Et.indexOf("-->")===-1){dt.cue.id=Et;continue}case"CUE":if(!dt.cue){dt.state="BADCUE";continue}try{ht(Et,dt.cue,dt.regionList)}catch{dt.cue=null,dt.state="BADCUE";continue}dt.state="CUETEXT";continue;case"CUETEXT":{var bt=Et.indexOf("-->")!==-1;if(!Et||bt&&(_t=!0)){dt.oncue&&dt.cue&&dt.oncue(dt.cue),dt.cue=null,dt.state="ID";continue}if(dt.cue===null)continue;dt.cue.text&&(dt.cue.text+=`
`),dt.cue.text+=Et}continue;case"BADCUE":Et||(dt.state="ID")}}}catch{dt.state==="CUETEXT"&&dt.cue&&dt.oncue&&dt.oncue(dt.cue),dt.cue=null,dt.state=dt.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this},xt.flush=function(){var pt=this;try{if((pt.cue||pt.state==="HEADER")&&(pt.buffer+=`

`,pt.parse()),pt.state==="INITIAL"||pt.state==="BADWEBVTT")throw new Error("Malformed WebVTT signature.")}catch(dt){pt.onparsingerror&&pt.onparsingerror(dt)}return pt.onflush&&pt.onflush(),this},yt}()},"./src/utils/webvtt-parser.ts":(at,it,ot)=>{ot.r(it),ot.d(it,{generateCueId:()=>ft,parseWebVTT:()=>xt});var st=ot("./src/polyfills/number.ts"),lt=ot("./src/utils/vttparser.ts"),gt=ot("./src/demux/id3.ts"),ct=ot("./src/utils/timescale-conversion.ts"),wt=ot("./src/remux/mp4-remuxer.ts"),Tt=/\r\n|\n\r|\n|\r/g,Rt=function(pt,dt,vt){return vt===void 0&&(vt=0),pt.slice(vt,vt+dt.length)===dt},ht=function(pt){var dt=parseInt(pt.slice(-3)),vt=parseInt(pt.slice(-6,-4)),St=parseInt(pt.slice(-9,-7)),Et=pt.length>9?parseInt(pt.substring(0,pt.indexOf(":"))):0;if(!(0,st.isFiniteNumber)(dt)||!(0,st.isFiniteNumber)(vt)||!(0,st.isFiniteNumber)(St)||!(0,st.isFiniteNumber)(Et))throw Error("Malformed X-TIMESTAMP-MAP: Local:"+pt);return dt+=1e3*vt,dt+=60*1e3*St,dt+=60*60*1e3*Et,dt},ut=function(pt){for(var dt=5381,vt=pt.length;vt;)dt=dt*33^pt.charCodeAt(--vt);return(dt>>>0).toString()};function ft(Ct,pt,dt){return ut(Ct.toString())+ut(pt.toString())+ut(dt)}var yt=function(pt,dt,vt){var St=pt[dt],Et=pt[St.prevCC];if(!Et||!Et.new&&St.new){pt.ccOffset=pt.presentationOffset=St.start,St.new=!1;return}for(;(mt=Et)!==null&&mt!==void 0&&mt.new;){var mt;pt.ccOffset+=St.start-Et.start,St.new=!1,St=Et,Et=pt[St.prevCC]}pt.presentationOffset=vt};function xt(Ct,pt,dt,vt,St,Et,mt,_t){var bt=new lt.VTTParser,Ot=(0,gt.utf8ArrayToStr)(new Uint8Array(Ct)).trim().replace(Tt,`
`).split(`
`),Pt=[],Dt=(0,ct.toMpegTsClockFromTimescale)(pt,dt),It="00:00.000",kt=0,Lt=0,At,$t=!0;bt.oncue=function(jt){var Nt=vt[St],Ft=vt.ccOffset,Bt=(kt-Dt)/9e4;Nt!=null&&Nt.new&&(Lt!==void 0?Ft=vt.ccOffset=Nt.start:yt(vt,St,Bt)),Bt&&(Ft=Bt-vt.presentationOffset);var Ut=jt.endTime-jt.startTime,Ht=(0,wt.normalizePts)((jt.startTime+Ft-Lt)*9e4,Et*9e4)/9e4;jt.startTime=Math.max(Ht,0),jt.endTime=Math.max(Ht+Ut,0);var Kt=jt.text.trim();jt.text=decodeURIComponent(encodeURIComponent(Kt)),jt.id||(jt.id=ft(jt.startTime,jt.endTime,Kt)),jt.endTime>0&&Pt.push(jt)},bt.onparsingerror=function(jt){At=jt},bt.onflush=function(){if(At){_t(At);return}mt(Pt)},Ot.forEach(function(jt){if($t)if(Rt(jt,"X-TIMESTAMP-MAP=")){$t=!1,jt.slice(16).split(",").forEach(function(Nt){Rt(Nt,"LOCAL:")?It=Nt.slice(6):Rt(Nt,"MPEGTS:")&&(kt=parseInt(Nt.slice(7)))});try{Lt=ht(It)/1e3}catch(Nt){At=Nt}return}else jt===""&&($t=!1);bt.parse(jt+`
`)}),bt.flush()}},"./src/utils/xhr-loader.ts":(at,it,ot)=>{ot.r(it),ot.d(it,{default:()=>wt});var st=ot("./src/utils/logger.ts"),lt=ot("./src/loader/load-stats.ts"),gt=/^age:\s*[\d.]+\s*$/m,ct=function(){function Tt(ht){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=void 0,this.loader=null,this.stats=void 0,this.xhrSetup=ht?ht.xhrSetup:null,this.stats=new lt.LoadStats,this.retryDelay=0}var Rt=Tt.prototype;return Rt.destroy=function(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null},Rt.abortInternal=function(){var ut=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),ut&&(ut.onreadystatechange=null,ut.onprogress=null,ut.readyState!==4&&(this.stats.aborted=!0,ut.abort()))},Rt.abort=function(){var ut;this.abortInternal(),(ut=this.callbacks)!==null&&ut!==void 0&&ut.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)},Rt.load=function(ut,ft,yt){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=ut,this.config=ft,this.callbacks=yt,this.retryDelay=ft.retryDelay,this.loadInternal()},Rt.loadInternal=function(){var ut=this.config,ft=this.context;if(!!ut){var yt=this.loader=new self.XMLHttpRequest,xt=this.stats;xt.loading.first=0,xt.loaded=0;var Ct=this.xhrSetup;try{if(Ct)try{Ct(yt,ft.url)}catch{yt.open("GET",ft.url,!0),Ct(yt,ft.url)}yt.readyState||yt.open("GET",ft.url,!0);var pt=this.context.headers;if(pt)for(var dt in pt)yt.setRequestHeader(dt,pt[dt])}catch(vt){this.callbacks.onError({code:yt.status,text:vt.message},ft,yt);return}ft.rangeEnd&&yt.setRequestHeader("Range","bytes="+ft.rangeStart+"-"+(ft.rangeEnd-1)),yt.onreadystatechange=this.readystatechange.bind(this),yt.onprogress=this.loadprogress.bind(this),yt.responseType=ft.responseType,self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),ut.timeout),yt.send()}},Rt.readystatechange=function(){var ut=this.context,ft=this.loader,yt=this.stats;if(!(!ut||!ft)){var xt=ft.readyState,Ct=this.config;if(!yt.aborted&&xt>=2)if(self.clearTimeout(this.requestTimeout),yt.loading.first===0&&(yt.loading.first=Math.max(self.performance.now(),yt.loading.start)),xt===4){ft.onreadystatechange=null,ft.onprogress=null;var pt=ft.status,dt=ft.responseType==="arraybuffer";if(pt>=200&&pt<300&&(dt&&ft.response||ft.responseText!==null)){yt.loading.end=Math.max(self.performance.now(),yt.loading.first);var vt,St;if(dt?(vt=ft.response,St=vt.byteLength):(vt=ft.responseText,St=vt.length),yt.loaded=yt.total=St,!this.callbacks)return;var Et=this.callbacks.onProgress;if(Et&&Et(yt,ut,vt,ft),!this.callbacks)return;var mt={url:ft.responseURL,data:vt};this.callbacks.onSuccess(mt,yt,ut,ft)}else yt.retry>=Ct.maxRetry||pt>=400&&pt<499?(st.logger.error(pt+" while loading "+ut.url),this.callbacks.onError({code:pt,text:ft.statusText},ut,ft)):(st.logger.warn(pt+" while loading "+ut.url+", retrying in "+this.retryDelay+"..."),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,Ct.maxRetryDelay),yt.retry++)}else self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),Ct.timeout)}},Rt.loadtimeout=function(){st.logger.warn("timeout while loading "+this.context.url);var ut=this.callbacks;ut&&(this.abortInternal(),ut.onTimeout(this.stats,this.context,this.loader))},Rt.loadprogress=function(ut){var ft=this.stats;ft.loaded=ut.loaded,ut.lengthComputable&&(ft.total=ut.total)},Rt.getCacheAge=function(){var ut=null;if(this.loader&&gt.test(this.loader.getAllResponseHeaders())){var ft=this.loader.getResponseHeader("age");ut=ft?parseFloat(ft):null}return ut},Tt}();const wt=ct},"./node_modules/eventemitter3/index.js":at=>{var it=Object.prototype.hasOwnProperty,ot="~";function st(){}Object.create&&(st.prototype=Object.create(null),new st().__proto__||(ot=!1));function lt(Tt,Rt,ht){this.fn=Tt,this.context=Rt,this.once=ht||!1}function gt(Tt,Rt,ht,ut,ft){if(typeof ht!="function")throw new TypeError("The listener must be a function");var yt=new lt(ht,ut||Tt,ft),xt=ot?ot+Rt:Rt;return Tt._events[xt]?Tt._events[xt].fn?Tt._events[xt]=[Tt._events[xt],yt]:Tt._events[xt].push(yt):(Tt._events[xt]=yt,Tt._eventsCount++),Tt}function ct(Tt,Rt){--Tt._eventsCount===0?Tt._events=new st:delete Tt._events[Rt]}function wt(){this._events=new st,this._eventsCount=0}wt.prototype.eventNames=function(){var Rt=[],ht,ut;if(this._eventsCount===0)return Rt;for(ut in ht=this._events)it.call(ht,ut)&&Rt.push(ot?ut.slice(1):ut);return Object.getOwnPropertySymbols?Rt.concat(Object.getOwnPropertySymbols(ht)):Rt},wt.prototype.listeners=function(Rt){var ht=ot?ot+Rt:Rt,ut=this._events[ht];if(!ut)return[];if(ut.fn)return[ut.fn];for(var ft=0,yt=ut.length,xt=new Array(yt);ft<yt;ft++)xt[ft]=ut[ft].fn;return xt},wt.prototype.listenerCount=function(Rt){var ht=ot?ot+Rt:Rt,ut=this._events[ht];return ut?ut.fn?1:ut.length:0},wt.prototype.emit=function(Rt,ht,ut,ft,yt,xt){var Ct=ot?ot+Rt:Rt;if(!this._events[Ct])return!1;var pt=this._events[Ct],dt=arguments.length,vt,St;if(pt.fn){switch(pt.once&&this.removeListener(Rt,pt.fn,void 0,!0),dt){case 1:return pt.fn.call(pt.context),!0;case 2:return pt.fn.call(pt.context,ht),!0;case 3:return pt.fn.call(pt.context,ht,ut),!0;case 4:return pt.fn.call(pt.context,ht,ut,ft),!0;case 5:return pt.fn.call(pt.context,ht,ut,ft,yt),!0;case 6:return pt.fn.call(pt.context,ht,ut,ft,yt,xt),!0}for(St=1,vt=new Array(dt-1);St<dt;St++)vt[St-1]=arguments[St];pt.fn.apply(pt.context,vt)}else{var Et=pt.length,mt;for(St=0;St<Et;St++)switch(pt[St].once&&this.removeListener(Rt,pt[St].fn,void 0,!0),dt){case 1:pt[St].fn.call(pt[St].context);break;case 2:pt[St].fn.call(pt[St].context,ht);break;case 3:pt[St].fn.call(pt[St].context,ht,ut);break;case 4:pt[St].fn.call(pt[St].context,ht,ut,ft);break;default:if(!vt)for(mt=1,vt=new Array(dt-1);mt<dt;mt++)vt[mt-1]=arguments[mt];pt[St].fn.apply(pt[St].context,vt)}}return!0},wt.prototype.on=function(Rt,ht,ut){return gt(this,Rt,ht,ut,!1)},wt.prototype.once=function(Rt,ht,ut){return gt(this,Rt,ht,ut,!0)},wt.prototype.removeListener=function(Rt,ht,ut,ft){var yt=ot?ot+Rt:Rt;if(!this._events[yt])return this;if(!ht)return ct(this,yt),this;var xt=this._events[yt];if(xt.fn)xt.fn===ht&&(!ft||xt.once)&&(!ut||xt.context===ut)&&ct(this,yt);else{for(var Ct=0,pt=[],dt=xt.length;Ct<dt;Ct++)(xt[Ct].fn!==ht||ft&&!xt[Ct].once||ut&&xt[Ct].context!==ut)&&pt.push(xt[Ct]);pt.length?this._events[yt]=pt.length===1?pt[0]:pt:ct(this,yt)}return this},wt.prototype.removeAllListeners=function(Rt){var ht;return Rt?(ht=ot?ot+Rt:Rt,this._events[ht]&&ct(this,ht)):(this._events=new st,this._eventsCount=0),this},wt.prototype.off=wt.prototype.removeListener,wt.prototype.addListener=wt.prototype.on,wt.prefixed=ot,wt.EventEmitter=wt,at.exports=wt},"./node_modules/url-toolkit/src/url-toolkit.js":function(at){(function(it){var ot=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,st=/^(?=([^\/?#]*))\1([^]*)$/,lt=/(?:\/|^)\.(?=\/)/g,gt=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,ct={buildAbsoluteURL:function(wt,Tt,Rt){if(Rt=Rt||{},wt=wt.trim(),Tt=Tt.trim(),!Tt){if(!Rt.alwaysNormalize)return wt;var ht=ct.parseURL(wt);if(!ht)throw new Error("Error trying to parse base URL.");return ht.path=ct.normalizePath(ht.path),ct.buildURLFromParts(ht)}var ut=ct.parseURL(Tt);if(!ut)throw new Error("Error trying to parse relative URL.");if(ut.scheme)return Rt.alwaysNormalize?(ut.path=ct.normalizePath(ut.path),ct.buildURLFromParts(ut)):Tt;var ft=ct.parseURL(wt);if(!ft)throw new Error("Error trying to parse base URL.");if(!ft.netLoc&&ft.path&&ft.path[0]!=="/"){var yt=st.exec(ft.path);ft.netLoc=yt[1],ft.path=yt[2]}ft.netLoc&&!ft.path&&(ft.path="/");var xt={scheme:ft.scheme,netLoc:ut.netLoc,path:null,params:ut.params,query:ut.query,fragment:ut.fragment};if(!ut.netLoc&&(xt.netLoc=ft.netLoc,ut.path[0]!=="/"))if(!ut.path)xt.path=ft.path,ut.params||(xt.params=ft.params,ut.query||(xt.query=ft.query));else{var Ct=ft.path,pt=Ct.substring(0,Ct.lastIndexOf("/")+1)+ut.path;xt.path=ct.normalizePath(pt)}return xt.path===null&&(xt.path=Rt.alwaysNormalize?ct.normalizePath(ut.path):ut.path),ct.buildURLFromParts(xt)},parseURL:function(wt){var Tt=ot.exec(wt);return Tt?{scheme:Tt[1]||"",netLoc:Tt[2]||"",path:Tt[3]||"",params:Tt[4]||"",query:Tt[5]||"",fragment:Tt[6]||""}:null},normalizePath:function(wt){for(wt=wt.split("").reverse().join("").replace(lt,"");wt.length!==(wt=wt.replace(gt,"")).length;);return wt.split("").reverse().join("")},buildURLFromParts:function(wt){return wt.scheme+wt.netLoc+wt.path+wt.params+wt.query+wt.fragment}};at.exports=ct})()}},tt={};function rt(at){var it=tt[at];if(it!==void 0)return it.exports;var ot=tt[at]={exports:{}};return et[at].call(ot.exports,ot,ot.exports,rt),ot.exports}rt.m=et,rt.n=at=>{var it=at&&at.__esModule?()=>at.default:()=>at;return rt.d(it,{a:it}),it},rt.d=(at,it)=>{for(var ot in it)rt.o(it,ot)&&!rt.o(at,ot)&&Object.defineProperty(at,ot,{enumerable:!0,get:it[ot]})},rt.o=(at,it)=>Object.prototype.hasOwnProperty.call(at,it),rt.r=at=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(at,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(at,"__esModule",{value:!0})};var nt=rt("./src/hls.ts");return nt=nt.default,nt})())})(hls);const Hls=getDefaultExportFromCjs(hls.exports);var MWStreamType=(_=>(_.MP4="mp4",_.HLS="hls",_))(MWStreamType||{}),MWCaptionType=(_=>(_.VTT="vtt",_.SRT="srt",_))(MWCaptionType||{}),MWStreamQuality=(_=>(_.Q360P="360p",_.Q480P="480p",_.Q720P="720p",_.Q1080P="1080p",_.QUNKNOWN="unknown",_))(MWStreamQuality||{});function errorMessage(_){switch(_.code){case MediaError.MEDIA_ERR_ABORTED:return{code:"ABORTED",description:"Video was aborted"};case MediaError.MEDIA_ERR_NETWORK:return{code:"NETWORK_ERROR",description:"A network error occured, the video failed to stream"};case MediaError.MEDIA_ERR_DECODE:return{code:"DECODE_ERROR",description:"Video stream could not be decoded"};case MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED:return{code:"SRC_NOT_SUPPORTED",description:"The video type is not supported by your browser"};default:return{code:"UNKNOWN_ERROR",description:"Unknown media error occured"}}}function createVideoStateProvider(_,_e){const et=_e,tt=getPlayerState(_);return{getId(){return"video"},play(){et.play()},pause(){et.pause()},exitFullscreen(){!fscreen$1.fullscreenElement||fscreen$1.exitFullscreen()},enterFullscreen(){if(!(!canFullscreen()||fscreen$1.fullscreenElement)){if(canFullscreenAnyElement()){tt.wrapperElement&&fscreen$1.requestFullscreen(tt.wrapperElement);return}canWebkitFullscreen()&&et.webkitEnterFullscreen()}},startAirplay(){const rt=et;rt.webkitShowPlaybackTargetPicker&&rt.webkitShowPlaybackTargetPicker()},setTime(rt){let nt=Math.min(rt,et.duration);nt=Math.max(0,nt),!Number.isNaN(nt)&&(et.currentTime=nt,tt.progress.time=nt,updateProgress(_,tt))},setSeeking(rt){if(tt.mediaPlaying.isSeeking=rt,tt.mediaPlaying.isDragSeeking=rt,updateMediaPlaying(_,tt),!rt){tt.pausedWhenSeeking||this.play();return}tt.pausedWhenSeeking=tt.mediaPlaying.isPaused,this.pause()},async setVolume(rt){let nt=Math.min(rt,1);nt=Math.max(0,nt),await canChangeVolume()&&(et.volume=nt),tt.mediaPlaying.volume=nt,updateMediaPlaying(_,tt),setStoredVolume(nt)},setSource(rt){if(!rt){resetStateForSource(_,tt),et.removeAttribute("src"),et.load(),tt.source=null,updateSource(_,tt);return}if(resetStateForSource(_,tt),(rt==null?void 0:rt.type)===MWStreamType.HLS)if(et.canPlayType("application/vnd.apple.mpegurl"))et.src=rt.source;else{if(!Hls.isSupported()){tt.error={name:"Not supported",description:"Your browser does not support HLS video"},updateError(_,tt);return}const nt=new Hls({enableWorker:!1});tt.hlsInstance=nt,nt.on(Hls.Events.ERROR,(at,it)=>{var ot;it.fatal&&(tt.error={name:`error ${it.details}`,description:((ot=it.error)==null?void 0:ot.message)??"Something went wrong"},updateError(_,tt)),console.error("HLS error",it)}),nt.attachMedia(et),nt.loadSource(rt.source)}else rt.type===MWStreamType.MP4&&(et.src=rt.source);tt.source={quality:rt.quality,type:rt.type,url:rt.source,caption:null},updateSource(_,tt)},setCaption(rt,nt){tt.source&&(tt.source.caption={id:rt,url:nt},updateSource(_,tt))},clearCaption(){tt.source&&(tt.source.caption=null,updateSource(_,tt))},providerStart(){var ft,yt,xt;this.setVolume(getStoredVolume());const rt=()=>{tt.mediaPlaying.isPaused=!0,tt.mediaPlaying.isPlaying=!1,updateMediaPlaying(_,tt)},nt=()=>{tt.mediaPlaying.isPaused=!1,tt.mediaPlaying.isPlaying=!0,tt.mediaPlaying.isLoading=!1,tt.mediaPlaying.hasPlayedOnce=!0,updateMediaPlaying(_,tt)},at=()=>{tt.mediaPlaying.isLoading=!0,updateMediaPlaying(_,tt)},it=()=>{tt.mediaPlaying.isSeeking=!0,updateMediaPlaying(_,tt)},ot=()=>{tt.mediaPlaying.isSeeking=!1,updateMediaPlaying(_,tt)},st=()=>{tt.progress.duration=et.duration,updateProgress(_,tt)},lt=()=>{tt.progress.duration=et.duration,tt.progress.time=et.currentTime,updateProgress(_,tt)},gt=()=>{tt.progress.buffered=handleBuffered(et.currentTime,et.buffered),updateProgress(_,tt)},ct=()=>{tt.mediaPlaying.isFirstLoading=!1,tt.mediaPlaying.isLoading=!1,updateMediaPlaying(_,tt)},wt=()=>{tt.interface.isFullscreen=!!document.fullscreenElement,updateInterface(_,tt)},Tt=async()=>{await canChangeVolume()&&(tt.mediaPlaying.volume=et.volume,updateMediaPlaying(_,tt))},Rt=Ct=>{tt.interface.isFocused=Ct.type!=="mouseleave",updateInterface(_,tt)},ht=Ct=>{Ct.availability==="available"&&(tt.canAirplay=!0,updateMisc(_,tt))},ut=()=>{if(et.error){const Ct=errorMessage(et.error);console.error("Native video player threw error",et.error),tt.error={description:Ct.description,name:`Error ${Ct.code}`},this.pause()}else tt.error=null;updateError(_,tt)};return(ft=tt.wrapperElement)==null||ft.addEventListener("click",Rt),(yt=tt.wrapperElement)==null||yt.addEventListener("mouseenter",Rt),(xt=tt.wrapperElement)==null||xt.addEventListener("mouseleave",Rt),et.addEventListener("volumechange",Tt),et.addEventListener("pause",rt),et.addEventListener("playing",nt),et.addEventListener("seeking",it),et.addEventListener("seeked",ot),et.addEventListener("progress",gt),et.addEventListener("waiting",at),et.addEventListener("timeupdate",lt),et.addEventListener("loadedmetadata",st),et.addEventListener("canplay",ct),fscreen$1.addEventListener("fullscreenchange",wt),et.addEventListener("error",ut),et.addEventListener("webkitplaybacktargetavailabilitychanged",ht),tt.source&&this.setSource({quality:tt.source.quality,source:tt.source.url,type:tt.source.type}),{destroy:()=>{var Ct,pt,dt;et.removeEventListener("pause",rt),et.removeEventListener("playing",nt),et.removeEventListener("seeking",it),et.removeEventListener("volumechange",Tt),et.removeEventListener("seeked",ot),et.removeEventListener("timeupdate",lt),et.removeEventListener("loadedmetadata",st),et.removeEventListener("progress",gt),et.removeEventListener("waiting",at),et.removeEventListener("error",ut),et.removeEventListener("canplay",ct),fscreen$1.removeEventListener("fullscreenchange",wt),(Ct=tt.wrapperElement)==null||Ct.removeEventListener("click",Rt),(pt=tt.wrapperElement)==null||pt.removeEventListener("mouseenter",Rt),(dt=tt.wrapperElement)==null||dt.removeEventListener("mouseleave",Rt),et.removeEventListener("webkitplaybacktargetavailabilitychanged",ht)}}}}}function VideoElement(_){var ot;const _e=useVideoPlayerDescriptor(),et=useMediaPlaying(_e),tt=useSource(_e),rt=useMisc(_e),nt=react.exports.useRef(null),at=react.exports.useMemo(()=>!!rt.wrapperInitialized,[rt]),it=react.exports.useMemo(()=>rt.stateProviderId,[rt]);return react.exports.useEffect(()=>{if(!at||!nt.current)return;const st=createVideoStateProvider(_e,nt.current);setProvider(_e,st);const{destroy:lt}=st.providerStart();return()=>{try{unsetStateProvider(_e,st.getId())}catch{}lt()}},[_e,at,it]),jsxRuntime.exports.jsx("video",{ref:nt,autoPlay:_.autoPlay,muted:et.volume===0,playsInline:!0,className:"h-full w-full",children:(ot=tt.source)!=null&&ot.caption?jsxRuntime.exports.jsx("track",{default:!0,kind:"captions",src:tt.source.caption.url}):null})}function VideoElementInternal(_){const _e=useVideoPlayerDescriptor();return useMisc(_e).stateProviderId!=="video"?null:jsxRuntime.exports.jsx(VideoElement,{..._})}function VideoPlayerBaseWithState(_){const _e=react.exports.useRef(null),et=useVideoPlayerDescriptor(),tt=useInterface(et),rt=useMeta(et),nt=typeof _.children=="function"?_.children({isFullscreen:tt.isFullscreen}):_.children;return jsxRuntime.exports.jsx(VideoErrorBoundary,{onGoBack:_.onGoBack,media:rt==null?void 0:rt.meta.meta,children:jsxRuntime.exports.jsxs("div",{ref:_e,className:["is-video-player relative h-full w-full select-none overflow-hidden bg-black",_.includeSafeArea||tt.isFullscreen?"[border-left:env(safe-area-inset-left)_solid_transparent] [border-right:env(safe-area-inset-right)_solid_transparent]":""].join(" "),children:[jsxRuntime.exports.jsx(VideoElementInternal,{autoPlay:_.autoPlay}),jsxRuntime.exports.jsx(CastingInternal,{}),jsxRuntime.exports.jsx(WrapperRegisterInternal,{wrapper:_e.current}),jsxRuntime.exports.jsx("div",{className:"absolute inset-0",children:nt})]})})}function VideoPlayerBase(_){return jsxRuntime.exports.jsx(VideoPlayerContextProvider,{children:jsxRuntime.exports.jsx(VideoPlayerBaseWithState,{..._})})}function syncRouteToPopout(_,_e){const tt=new URLSearchParams(_.search).get("modal");tt?_e.openPopout(tt):_e.closePopout()}function useSyncPopouts(_){const _e=useHistory(),et=useInterface(_),tt=useControls(_),rt=useLocation(),nt=react.exports.useRef(null),at=react.exports.useRef(tt);react.exports.useEffect(()=>{at.current=tt},[tt]),react.exports.useEffect(()=>{const ot=et.popout;if(nt.current!==ot)if(nt.current=ot,ot){const st=new URLSearchParams([["modal",ot]]).toString();_e.push({search:st,state:"popout"})}else{if(!new URLSearchParams(_e.location.search).has("modal"))return;_e.length>0?_e.goBack():_e.replace({search:"",state:"popout"})}},[et,_e]),react.exports.useEffect(()=>{rt.state!=="popout"&&syncRouteToPopout(rt,at.current)},[rt]);const it=react.exports.useRef(!1);react.exports.useEffect(()=>{it.current||(syncRouteToPopout(rt,at.current),it.current=!0)},[rt])}function ProgressRing(_){const _e=_.radius??40;return jsxRuntime.exports.jsxs("svg",{className:`${_.className??""} -rotate-90`,viewBox:"0 0 100 100",children:[jsxRuntime.exports.jsx("circle",{className:`fill-transparent stroke-denim-700 stroke-[15] opacity-25 ${_.backingRingClassname??""}`,r:_e,cx:"50",cy:"50"}),jsxRuntime.exports.jsx("circle",{className:"fill-transparent stroke-current stroke-[15] transition-[stroke-dashoffset] duration-150",r:_e,cx:"50",cy:"50",style:{strokeDasharray:`${2*Math.PI*_e} ${2*Math.PI*_e}`,strokeDashoffset:`${2*Math.PI*_e-_.percentage/100*(2*Math.PI*_e)}`}})]})}function ScrollToActive(_){const _e=react.exports.createRef(),et=react.exports.useRef(!1);return react.exports.useEffect(()=>{if(et.current||!_e.current)return;const tt=_e.current,rt=tt.classList.contains("overflow-y-auto")?tt:tt.closest(".overflow-y-auto"),nt=rt==null?void 0:rt.querySelector(".active");if(rt&&nt){let at=0;const it=()=>{at=nt.getBoundingClientRect().top-rt.getBoundingClientRect().top+nt.offsetHeight/2};it(),at>=rt.offsetHeight/2&&rt.scrollTo({top:at-rt.offsetHeight/2}),it(),at>rt.offsetHeight/2&&rt.scrollTo({top:rt.scrollHeight})}et.current=!0},[_e]),jsxRuntime.exports.jsx("div",{className:_.className,ref:_e,children:_.children})}function PopoutSection(_){return jsxRuntime.exports.jsx(ScrollToActive,{className:["p-5",_.className||""].join(" "),children:_.children})}function PopoutListEntry(_){const _e=_.isOnDarkBackground?"bg-ash-200":"bg-ash-400",et=_.isOnDarkBackground?"hover:bg-ash-200":"hover:bg-ash-400";return jsxRuntime.exports.jsxs("div",{className:["group -mx-2 flex cursor-pointer items-center justify-between space-x-1 rounded p-2 font-semibold transition-[background-color,color] duration-150",et,_.active?`${_e} active text-white outline-denim-700`:"text-denim-700 hover:text-white"].join(" "),onClick:_.onClick,children:[_.active&&jsxRuntime.exports.jsx("div",{className:"absolute left-0 h-8 w-0.5 bg-bink-500"}),jsxRuntime.exports.jsx("span",{className:"truncate",children:_.children}),jsxRuntime.exports.jsxs("div",{className:"relative h-4 w-4 min-w-[1rem]",children:[_.errored&&jsxRuntime.exports.jsx(Icon,{icon:Icons.WARNING,className:"absolute inset-0 text-rose-400"}),_.loading&&!_.errored&&jsxRuntime.exports.jsx(Spinner,{className:"absolute inset-0 text-base [--color:#9C93B5]"}),!_.loading&&!_.errored&&jsxRuntime.exports.jsx(Icon,{className:"absolute inset-0 translate-x-2 text-white opacity-0 transition-[opacity,transform] duration-100 group-hover:translate-x-0 group-hover:opacity-100",icon:Icons.CHEVRON_RIGHT}),_.percentageCompleted&&!_.loading&&!_.errored?jsxRuntime.exports.jsx(ProgressRing,{className:"absolute inset-0 text-bink-600 opacity-100 transition-[opacity] group-hover:opacity-0",backingRingClassname:"stroke-ash-500",percentage:_.percentageCompleted>90?100:_.percentageCompleted}):""]})]})}function EpisodeSelectionPopout(){var Ct,pt,dt,vt;const _=useParams(),{t:_e}=useTranslation(),et=useVideoPlayerDescriptor(),tt=useMeta(et),rt=useControls(et),[nt,at]=react.exports.useState(!1),[it,ot]=react.exports.useState(null),[st,lt,gt]=useLoading((St,Et)=>getMetaFromId(MWMediaType.SERIES,St,Et)),ct=react.exports.useCallback(St=>{var Et;ot({seasonId:St,season:void 0}),at(!1),st((Et=decodeJWId(_.media))==null?void 0:Et.id,St).then(mt=>{(mt==null?void 0:mt.meta.type)===MWMediaType.SERIES&&ot({seasonId:St,season:mt==null?void 0:mt.meta.seasonData})})},[st,_.media]),wt=(it==null?void 0:it.seasonId)??((Ct=tt==null?void 0:tt.episode)==null?void 0:Ct.seasonId),Tt=react.exports.useCallback((St,Et)=>{rt.closePopout(),setTimeout(()=>{rt.setCurrentEpisode(St,Et)},100)},[rt]),Rt=react.exports.useMemo(()=>{var St;return(St=tt==null?void 0:tt.seasons)==null?void 0:St.find(Et=>Et.id===wt)},[tt,wt]),ht=react.exports.useMemo(()=>{var St,Et,mt,_t;return it!=null&&it.season?(St=it==null?void 0:it.season)==null?void 0:St.episodes:(_t=(mt=(Et=tt==null?void 0:tt.seasons)==null?void 0:Et.find)==null?void 0:mt.call(Et,bt=>bt&&bt.id===wt))==null?void 0:_t.episodes},[tt,wt,it]),ut=()=>{at(!nt)},ft=St=>{ct(St),ot({seasonId:St})},{watched:yt}=useWatchedContext(),xt=react.exports.useMemo(()=>["absolute w-full transition-[left,opacity] duration-200",nt?"left-0":"left-10"].join(" "),[nt]);return jsxRuntime.exports.jsxs(jsxRuntime.exports.Fragment,{children:[jsxRuntime.exports.jsx(PopoutSection,{className:"bg-ash-100 font-bold text-white",children:jsxRuntime.exports.jsxs("div",{className:"relative flex items-center",children:[jsxRuntime.exports.jsx("button",{className:["-m-1.5 rounded-lg p-1.5 transition-opacity duration-100 hover:bg-ash-200",nt?"pointer-events-none opacity-0":"opacity-1"].join(" "),onClick:ut,type:"button",children:jsxRuntime.exports.jsx(Icon,{icon:Icons.CHEVRON_LEFT})}),jsxRuntime.exports.jsx("span",{className:[xt,nt?"opacity-0":"opacity-1"].join(" "),children:(Rt==null?void 0:Rt.title)||""}),jsxRuntime.exports.jsx("span",{className:[xt,nt?"opacity-1":"opacity-0"].join(" "),children:_e("videoPlayer.popouts.seasons")})]})}),jsxRuntime.exports.jsxs("div",{className:"relative grid h-full grid-rows-[minmax(1px,1fr)]",children:[jsxRuntime.exports.jsx(PopoutSection,{className:["absolute inset-0 z-30 overflow-y-auto border-ash-400 bg-ash-100 transition-[max-height,padding] duration-200",nt?"max-h-full border-t":"max-h-0 overflow-hidden py-0"].join(" "),children:Rt?(dt=(pt=tt==null?void 0:tt.seasons)==null?void 0:pt.map)==null?void 0:dt.call(pt,St=>{var Et;return jsxRuntime.exports.jsx(PopoutListEntry,{active:((Et=tt==null?void 0:tt.episode)==null?void 0:Et.seasonId)===St.id,onClick:()=>ft(St.id),isOnDarkBackground:!0,children:St.title},St.id)}):"No season"}),jsxRuntime.exports.jsx(PopoutSection,{className:"relative h-full overflow-y-auto",children:lt?jsxRuntime.exports.jsx("div",{className:"flex h-full w-full items-center justify-center",children:jsxRuntime.exports.jsx(Loading,{})}):gt?jsxRuntime.exports.jsx("div",{className:"flex h-full w-full items-center justify-center",children:jsxRuntime.exports.jsxs("div",{className:"flex flex-col flex-wrap items-center text-slate-400",children:[jsxRuntime.exports.jsx(IconPatch,{icon:Icons.EYE_SLASH,className:"text-xl text-bink-600"}),jsxRuntime.exports.jsx("p",{className:"mt-6 w-full text-center",children:_e("videoPLayer.popouts.errors.loadingWentWrong",{seasonTitle:(vt=Rt==null?void 0:Rt.title)==null?void 0:vt.toLowerCase()})})]})}):jsxRuntime.exports.jsx("div",{children:ht&&Rt?ht.map(St=>{var Et,mt;return jsxRuntime.exports.jsx(PopoutListEntry,{active:St.id===((Et=tt==null?void 0:tt.episode)==null?void 0:Et.episodeId),onClick:()=>{var _t;St.id===((_t=tt==null?void 0:tt.episode)==null?void 0:_t.episodeId)?rt.closePopout():Tt(Rt.id,St.id)},percentageCompleted:(mt=yt.items.find(_t=>{var bt,Ot,Pt,Dt;return((Ot=(bt=_t.item)==null?void 0:bt.series)==null?void 0:Ot.seasonId)===Rt.id&&((Dt=(Pt=_t.item)==null?void 0:Pt.series)==null?void 0:Dt.episodeId)===St.id}))==null?void 0:mt.percentage,children:_e("videoPlayer.popouts.episode",{index:St.number,title:St.title})},St.id)}):"No episodes"})})]})]})}function EmbedEntry(_){const[_e,et,tt]=useLoading(async()=>{const rt=getEmbedScraperByType(_.type);if(!rt)throw new Error("Embed scraper not found");const nt=await runEmbedScraper(rt,{progress:()=>{},url:_.url});_.onSelect(nt)});return jsxRuntime.exports.jsx(PopoutListEntry,{isOnDarkBackground:!0,loading:et,errored:!!tt,onClick:()=>{_e()},children:_.name})}function SourceSelectionPopout(){const{t:_}=useTranslation(),_e=useVideoPlayerDescriptor(),et=useControls(_e),tt=useMeta(_e),rt=react.exports.useMemo(()=>tt?getProviders().filter(yt=>yt.type.includes(tt.meta.meta.type)):[],[tt]),[nt,at]=react.exports.useState(null),[it,ot]=react.exports.useState(null),st=!!nt,lt=react.exports.useMemo(()=>rt.find(yt=>yt.id===nt)??null,[rt,nt]),[gt,ct,wt]=useLoading(async yt=>{var Ct,pt;const xt=rt.find(dt=>dt.id===yt);if(!xt)throw new Error("Invalid provider");if(!tt)throw new Error("need meta");return runProvider(xt,{media:tt.meta,progress:()=>{},type:tt.meta.meta.type,episode:(Ct=tt.episode)==null?void 0:Ct.episodeId,season:(pt=tt.episode)==null?void 0:pt.seasonId})});function Tt(yt){et.setSource({quality:yt.quality,source:yt.streamUrl,type:yt.type}),tt&&et.setMeta({...tt,captions:yt.captions}),et.closePopout()}const Rt=react.exports.useRef(null),ht=yt=>{if(!yt){Rt.current=null,at(null);return}gt(yt).then(async xt=>{if(!!Rt.current){if(xt&&xt.embeds.length+(xt.stream?1:0)===1){const pt=xt.stream;if(!pt){const dt=xt==null?void 0:xt.embeds[0];if(!dt)throw new Error("Embed scraper not found");const vt=getEmbedScraperByType(dt.type);if(!vt)throw new Error("Embed scraper not found");const St=await runEmbedScraper(vt,{progress:()=>{},url:dt.url});Tt(St);return}Tt(pt);return}ot(xt??null)}}),Rt.current=yt,at(yt)},ut=react.exports.useMemo(()=>["absolute w-full transition-[left,opacity] duration-200",st?"left-10":"left-0"].join(" "),[st]),ft=react.exports.useMemo(()=>{const yt=(it==null?void 0:it.embeds)||[],xt={};for(const pt of yt)!pt.type||(xt[pt.type]||(xt[pt.type]=[]),xt[pt.type].push({...pt,displayName:pt.type}));return Object.entries(xt).flatMap(([pt,dt])=>dt.length>1?dt.map((vt,St)=>({...vt,displayName:`${vt.type} ${St+1}`})):dt)},[it==null?void 0:it.embeds]);return jsxRuntime.exports.jsxs(jsxRuntime.exports.Fragment,{children:[jsxRuntime.exports.jsx(PopoutSection,{className:"bg-ash-100 font-bold text-white",children:jsxRuntime.exports.jsxs("div",{className:"relative flex items-center",children:[jsxRuntime.exports.jsx("button",{className:["-m-1.5 rounded-lg p-1.5 transition-opacity duration-100 hover:bg-ash-200",st?"opacity-1":"pointer-events-none opacity-0"].join(" "),onClick:()=>ht(),type:"button",children:jsxRuntime.exports.jsx(Icon,{icon:Icons.CHEVRON_LEFT})}),jsxRuntime.exports.jsx("span",{className:[ut,st?"opacity-1":"opacity-0"].join(" "),children:(lt==null?void 0:lt.displayName)??""}),jsxRuntime.exports.jsx("span",{className:[ut,st?"opacity-0":"opacity-1"].join(" "),children:_("videoPlayer.popouts.sources")})]})}),jsxRuntime.exports.jsxs("div",{className:"relative grid h-full grid-rows-[minmax(1px,1fr)]",children:[jsxRuntime.exports.jsx(PopoutSection,{className:["absolute inset-0 z-30 overflow-y-auto border-ash-400 bg-ash-100 transition-[max-height,padding] duration-200",st?"max-h-full border-t":"max-h-0 overflow-hidden py-0"].join(" "),children:ct?jsxRuntime.exports.jsx("div",{className:"flex h-full w-full items-center justify-center",children:jsxRuntime.exports.jsx(Loading,{})}):wt?jsxRuntime.exports.jsx("div",{className:"flex h-full w-full items-center justify-center",children:jsxRuntime.exports.jsxs("div",{className:"flex flex-col flex-wrap items-center text-slate-400",children:[jsxRuntime.exports.jsx(IconPatch,{icon:Icons.EYE_SLASH,className:"text-xl text-bink-600"}),jsxRuntime.exports.jsx("p",{className:"mt-6 w-full text-center",children:_("videoPlayer.popouts.errors.embedsError")})]})}):jsxRuntime.exports.jsxs(jsxRuntime.exports.Fragment,{children:[it!=null&&it.stream?jsxRuntime.exports.jsx(PopoutListEntry,{isOnDarkBackground:!0,onClick:()=>{it.stream&&Tt(it.stream)},children:"Native source"}):null,((ft==null?void 0:ft.length)||0)>0?ft==null?void 0:ft.map(yt=>jsxRuntime.exports.jsx(EmbedEntry,{type:yt.type,name:yt.displayName??"",url:yt.url,onSelect:xt=>{Tt(xt)}},yt.url)):jsxRuntime.exports.jsx("div",{className:"flex h-full w-full items-center justify-center",children:jsxRuntime.exports.jsxs("div",{className:"flex flex-col flex-wrap items-center text-slate-400",children:[jsxRuntime.exports.jsx(IconPatch,{icon:Icons.EYE_SLASH,className:"text-xl text-bink-600"}),jsxRuntime.exports.jsx("p",{className:"mt-6 w-full text-center",children:_("videoPlayer.popouts.noEmbeds")})]})})]})}),jsxRuntime.exports.jsx(PopoutSection,{className:"relative h-full overflow-y-auto",children:jsxRuntime.exports.jsx("div",{children:rt.map(yt=>jsxRuntime.exports.jsx(PopoutListEntry,{onClick:()=>{ht(yt.id)},children:yt.displayName},yt.id))})})]})]})}var lib={};(function(_){var _e=commonjsGlobal$1&&commonjsGlobal$1.__awaiter||function(it,ot,st,lt){function gt(ct){return ct instanceof st?ct:new st(function(wt){wt(ct)})}return new(st||(st=Promise))(function(ct,wt){function Tt(ut){try{ht(lt.next(ut))}catch(ft){wt(ft)}}function Rt(ut){try{ht(lt.throw(ut))}catch(ft){wt(ft)}}function ht(ut){ut.done?ct(ut.value):gt(ut.value).then(Tt,Rt)}ht((lt=lt.apply(it,ot||[])).next())})},et=commonjsGlobal$1&&commonjsGlobal$1.__generator||function(it,ot){var st={label:0,sent:function(){if(ct[0]&1)throw ct[1];return ct[1]},trys:[],ops:[]},lt,gt,ct,wt;return wt={next:Tt(0),throw:Tt(1),return:Tt(2)},typeof Symbol=="function"&&(wt[Symbol.iterator]=function(){return this}),wt;function Tt(ht){return function(ut){return Rt([ht,ut])}}function Rt(ht){if(lt)throw new TypeError("Generator is already executing.");for(;st;)try{if(lt=1,gt&&(ct=ht[0]&2?gt.return:ht[0]?gt.throw||((ct=gt.return)&&ct.call(gt),0):gt.next)&&!(ct=ct.call(gt,ht[1])).done)return ct;switch(gt=0,ct&&(ht=[ht[0]&2,ct.value]),ht[0]){case 0:case 1:ct=ht;break;case 4:return st.label++,{value:ht[1],done:!1};case 5:st.label++,gt=ht[1],ht=[0];continue;case 7:ht=st.ops.pop(),st.trys.pop();continue;default:if(ct=st.trys,!(ct=ct.length>0&&ct[ct.length-1])&&(ht[0]===6||ht[0]===2)){st=0;continue}if(ht[0]===3&&(!ct||ht[1]>ct[0]&&ht[1]<ct[3])){st.label=ht[1];break}if(ht[0]===6&&st.label<ct[1]){st.label=ct[1],ct=ht;break}if(ct&&st.label<ct[2]){st.label=ct[2],st.ops.push(ht);break}ct[2]&&st.ops.pop(),st.trys.pop();continue}ht=ot.call(it,st)}catch(ut){ht=[6,ut],gt=0}finally{lt=ct=0}if(ht[0]&5)throw ht[1];return{value:ht[0]?ht[1]:void 0,done:!0}}};Object.defineProperty(_,"__esModule",{value:!0}),_.moduleName=void 0,_.moduleName="toWebVTT";var tt=function(it,ot){return new Promise(function(st,lt){var gt=new FileReader,ct=function(Tt){var Rt=Tt.target.result;gt.removeEventListener("loadend",ct),st(ot!=="string"?new Uint8Array(Rt):Rt)},wt=function(){gt.removeEventListener("error",wt),lt(new Error(_.moduleName+": Error while reading the Blob object"))};gt.addEventListener("loadend",ct),gt.addEventListener("error",wt),ot!=="string"?gt.readAsArrayBuffer(it):gt.readAsText(it)})},rt=function(it){return URL.createObjectURL(new Blob([it],{type:"text/vtt"}))},nt=function(it){return it.replace(/\{\\([ibu])\}/g,"</$1>").replace(/\{\\([ibu])1\}/g,"<$1>").replace(/\{([ibu])\}/g,"<$1>").replace(/\{\/([ibu])\}/g,"</$1>").replace(/(\d\d:\d\d:\d\d),(\d\d\d)/g,"$1.$2").concat(`\r
\r
`)},at=function(it){return _e(void 0,void 0,void 0,function(){var ot,st,lt,lt,gt;return et(this,function(ct){switch(ct.label){case 0:if(!FileReader)throw new Error(_.moduleName+": No FileReader constructor found");if(!TextDecoder)throw new Error(_.moduleName+": No TextDecoder constructor found");if(!(it instanceof Blob))throw new Error(_.moduleName+": Expecting resource to be a Blob but something else found.");st=`WEBVTT FILE\r
\r
`,ct.label=1;case 1:return ct.trys.push([1,3,,5]),[4,tt(it,"string")];case 2:return lt=ct.sent(),ot=st.concat(nt(lt)),[3,5];case 3:return ct.sent(),[4,tt(it,"buffer")];case 4:return lt=ct.sent(),gt=new TextDecoder("utf-8").decode(lt),ot=st.concat(nt(gt)),[3,5];case 5:return[2,Promise.resolve(rt(ot))]}})})};_.default=at})(lib);const toWebVTT=getDefaultExportFromCjs(lib);async function getCaptionUrl(_){if(_.type===MWCaptionType.SRT){let _e;return _.needsProxy?_e=await proxiedFetch(_.url,{responseType:"blob"}):_e=await mwFetch(_.url,{responseType:"blob"}),toWebVTT(_e)}if(_.type===MWCaptionType.VTT){if(_.needsProxy){const _e=await proxiedFetch(_.url,{responseType:"blob"});return URL.createObjectURL(_e)}return _.url}throw new Error("invalid type")}function makeCaptionId(_,_e){return _e?`linked-${_.langIso}`:`external-${_.langIso}`}function CaptionSelectionPopout(){var gt,ct;const{t:_}=useTranslation(),_e=useVideoPlayerDescriptor(),et=useMeta(_e),tt=useSource(_e),rt=useControls(_e),nt=react.exports.useMemo(()=>(et==null?void 0:et.captions.map(wt=>({...wt,id:makeCaptionId(wt,!0)})))??[],[et]),at=react.exports.useRef(""),[it,ot,st]=useLoading(async(wt,Tt)=>{const Rt=makeCaptionId(wt,Tt);at.current=Rt,rt.setCaption(Rt,await getCaptionUrl(wt)),rt.closePopout()}),lt=(ct=(gt=tt.source)==null?void 0:gt.caption)==null?void 0:ct.id;return jsxRuntime.exports.jsxs(jsxRuntime.exports.Fragment,{children:[jsxRuntime.exports.jsx(PopoutSection,{className:"bg-ash-100 font-bold text-white",children:jsxRuntime.exports.jsx("div",{children:_("videoPlayer.popouts.captions")})}),jsxRuntime.exports.jsxs("div",{className:"relative overflow-y-auto",children:[jsxRuntime.exports.jsx(PopoutSection,{children:jsxRuntime.exports.jsx(PopoutListEntry,{active:!lt,onClick:()=>{rt.clearCaption(),rt.closePopout()},children:_("videoPlayer.popouts.noCaptions")})}),jsxRuntime.exports.jsxs("p",{className:"sticky top-0 z-10 flex items-center space-x-1 bg-ash-200 px-5 py-3 text-sm font-bold uppercase",children:[jsxRuntime.exports.jsx(Icon,{className:"text-base",icon:Icons.LINK}),jsxRuntime.exports.jsx("span",{children:_("videoPlayer.popouts.linkedCaptions")})]}),jsxRuntime.exports.jsx(PopoutSection,{className:"pt-0",children:jsxRuntime.exports.jsx("div",{children:nt.map(wt=>jsxRuntime.exports.jsx(PopoutListEntry,{active:wt.id===lt,loading:ot&&wt.id===at.current,errored:st&&wt.id===at.current,onClick:()=>{at.current=wt.id,it(wt,!0)},children:wt.langIso},wt.langIso))})})]})]})}const Popouts="";function ShowPopout(_){const[_e,et]=react.exports.useState(_.popoutId);return react.exports.useEffect(()=>{!_.popoutId||et(_.popoutId)},[_]),_e==="episodes"?jsxRuntime.exports.jsx(EpisodeSelectionPopout,{}):_e==="source"?jsxRuntime.exports.jsx(SourceSelectionPopout,{}):_e==="captions"?jsxRuntime.exports.jsx(CaptionSelectionPopout,{}):jsxRuntime.exports.jsx("div",{className:"flex w-full items-center justify-center p-10",children:"Unknown popout"})}function PopoutContainer(_){const _e=react.exports.useRef(null),[et,tt]=react.exports.useState(0),[rt,nt]=react.exports.useState(0),[at,it]=react.exports.useState(0),{isMobile:ot}=useIsMobile(!0),st=react.exports.useCallback((lt,gt)=>{const ct=lt.left+lt.width/2;nt(lt?lt.height+30:30),tt(Math.max(window.innerWidth-ct-gt/2,30))},[]);return react.exports.useEffect(()=>{!_.videoInterface.popoutBounds||st(_.videoInterface.popoutBounds,at)},[_.videoInterface.popoutBounds,st,at]),react.exports.useEffect(()=>{var gt;const lt=(gt=_e.current)==null?void 0:gt.getBoundingClientRect();it((lt==null?void 0:lt.width)??0)},[]),jsxRuntime.exports.jsx("div",{ref:_e,className:["absolute z-10 grid w-80 grid-rows-[auto,minmax(0,1fr)] overflow-hidden rounded-lg bg-ash-200",ot?"h-[230px]":" h-[500px]"].join(" "),style:{right:`${et}px`,bottom:`${rt}px`},children:jsxRuntime.exports.jsx(ShowPopout,{popoutId:_.videoInterface.popout})})}function PopoutProviderAction(){const _=useVideoPlayerDescriptor(),_e=useInterface(_),et=useControls(_);useSyncPopouts(_);const tt=react.exports.useCallback(()=>{et.closePopout()},[et]);return jsxRuntime.exports.jsx(Transition,{show:!!_e.popout,animation:"slide-up",className:"h-full",children:jsxRuntime.exports.jsxs("div",{className:"popout-wrapper pointer-events-auto absolute inset-0",children:[jsxRuntime.exports.jsx("div",{onClick:tt,className:"absolute inset-0"}),jsxRuntime.exports.jsx(PopoutContainer,{videoInterface:_e})]})})}function CastingTextAction(){const{t:_}=useTranslation(),_e=useVideoPlayerDescriptor();return useMisc(_e).isCasting?jsxRuntime.exports.jsxs("div",{className:"flex flex-col items-center justify-center gap-4",children:[jsxRuntime.exports.jsx("div",{className:"rounded-full bg-denim-200 p-3 brightness-100 grayscale",children:jsxRuntime.exports.jsx(Icon,{icon:Icons.CASTING})}),jsxRuntime.exports.jsx("p",{className:"text-center text-gray-300",children:_("casting.casting")})]}):null}function DownloadAction(_){var ot,st;const _e=useVideoPlayerDescriptor(),et=useSource(_e),{isMobile:tt}=useIsMobile(),{t:rt}=useTranslation(),nt=useMeta(_e),at=((ot=et.source)==null?void 0:ot.type)===MWStreamType.HLS,it=nt==null?void 0:nt.meta.meta.title;return jsxRuntime.exports.jsx("a",{href:at||(st=et.source)==null?void 0:st.url,rel:"noreferrer",target:"_blank",download:it?normalizeTitle(it):void 0,children:jsxRuntime.exports.jsx(VideoPlayerIconButton,{className:_.className,icon:Icons.DOWNLOAD,disabled:at,text:tt?rt("videoPlayer.buttons.download"):""})})}function CenterPosition(_){return jsxRuntime.exports.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:_.children})}function LeftSideControls(){const _=useVideoPlayerDescriptor(),_e=useControls(_),et=react.exports.useCallback(()=>{_e.setLeftControlsHover(!0)},[_e]),tt=react.exports.useCallback(()=>{_e.setLeftControlsHover(!1)},[_e]);return jsxRuntime.exports.jsxs(jsxRuntime.exports.Fragment,{children:[jsxRuntime.exports.jsxs("div",{className:"flex items-center px-2",onMouseLeave:tt,onMouseEnter:et,children:[jsxRuntime.exports.jsx(PauseAction,{}),jsxRuntime.exports.jsx(SkipTimeAction,{}),jsxRuntime.exports.jsx(VolumeAction,{className:"mr-2"}),jsxRuntime.exports.jsx(TimeAction,{})]}),jsxRuntime.exports.jsx(ShowTitleAction,{})]})}function VideoPlayer(_){const[_e,et]=react.exports.useState(!1),{isMobile:tt}=useIsMobile(),rt=react.exports.useCallback(nt=>{et(nt)},[et]);return jsxRuntime.exports.jsx(VideoPlayerBase,{autoPlay:_.autoPlay,includeSafeArea:_.includeSafeArea,onGoBack:_.onGoBack,children:({isFullscreen:nt})=>jsxRuntime.exports.jsxs(jsxRuntime.exports.Fragment,{children:[jsxRuntime.exports.jsx(KeyboardShortcutsAction,{}),jsxRuntime.exports.jsx(PageTitleAction,{}),jsxRuntime.exports.jsxs(VideoPlayerError,{onGoBack:_.onGoBack,children:[jsxRuntime.exports.jsxs(BackdropAction,{onBackdropChange:rt,children:[jsxRuntime.exports.jsx(CenterPosition,{children:jsxRuntime.exports.jsx(LoadingAction,{})}),jsxRuntime.exports.jsx(CenterPosition,{children:jsxRuntime.exports.jsx(CastingTextAction,{})}),jsxRuntime.exports.jsx(CenterPosition,{children:jsxRuntime.exports.jsx(MiddlePauseAction,{})}),tt?jsxRuntime.exports.jsx(Transition,{animation:"fade",show:_e,className:"absolute inset-0 flex items-center justify-center",children:jsxRuntime.exports.jsx(MobileCenterAction,{})}):"",jsxRuntime.exports.jsx(Transition,{animation:"slide-down",show:_e,className:"pointer-events-auto absolute inset-x-0 top-0 flex flex-col py-6 px-8 pb-2",children:jsxRuntime.exports.jsx(HeaderAction,{showControls:tt,onClick:_.onGoBack,isFullScreen:!0})}),jsxRuntime.exports.jsxs(Transition,{animation:"slide-up",show:_e,className:["pointer-events-auto absolute inset-x-0 bottom-0 flex flex-col px-4 pb-2",_.includeSafeArea||nt?"[margin-bottom:env(safe-area-inset-bottom)]":""].join(" "),children:[jsxRuntime.exports.jsxs("div",{className:"flex w-full items-center space-x-3",children:[tt&&jsxRuntime.exports.jsx(TimeAction,{noDuration:!0}),jsxRuntime.exports.jsx(ProgressAction,{})]}),jsxRuntime.exports.jsx("div",{className:"flex items-center",children:tt?jsxRuntime.exports.jsxs("div",{className:"grid w-full grid-cols-[56px,1fr,56px] items-center",children:[jsxRuntime.exports.jsx("div",{}),jsxRuntime.exports.jsxs("div",{className:"flex items-center justify-center",children:[jsxRuntime.exports.jsx(DownloadAction,{}),jsxRuntime.exports.jsx(CaptionsSelectionAction,{}),jsxRuntime.exports.jsx(SeriesSelectionAction,{}),jsxRuntime.exports.jsx(SourceSelectionAction,{})]}),jsxRuntime.exports.jsx(FullscreenAction,{})]}):jsxRuntime.exports.jsxs(jsxRuntime.exports.Fragment,{children:[jsxRuntime.exports.jsx(LeftSideControls,{}),jsxRuntime.exports.jsx("div",{className:"flex-1"}),jsxRuntime.exports.jsx(QualityDisplayAction,{}),jsxRuntime.exports.jsx(SeriesSelectionAction,{}),jsxRuntime.exports.jsx(SourceSelectionAction,{}),jsxRuntime.exports.jsx("div",{className:"mx-2 h-6 w-px bg-white opacity-50"}),jsxRuntime.exports.jsx(ChromecastAction,{}),jsxRuntime.exports.jsx(AirplayAction,{}),jsxRuntime.exports.jsx(DownloadAction,{}),jsxRuntime.exports.jsx(CaptionsSelectionAction,{}),jsxRuntime.exports.jsx(FullscreenAction,{})]})})]}),_e?jsxRuntime.exports.jsx(PopoutProviderAction,{}):null]}),_.children]})]})})}function formatMetadata(_){var et,tt;const _e=(tt=(et=_.data)==null?void 0:et.seasons)==null?void 0:tt.map(rt=>{var nt;return rt.id===((nt=_.seasonData)==null?void 0:nt.id)?{...rt,episodes:_.seasonData.episodes}:rt});if(!!_.data)return{meta:_.data.meta,episode:_.data.episode,seasons:_e,captions:_.linkedCaptions??[]}}function MetaController(_){const _e=useVideoPlayerDescriptor(),et=useControls(_e);return react.exports.useEffect(()=>{et.setMeta(formatMetadata(_))},[_,et]),null}function useInitialized(_){const _e=useMisc(_);return{initialized:react.exports.useMemo(()=>!!_e.initalized,[_e])}}function SourceController(_){const _e=useVideoPlayerDescriptor(),et=useControls(_e),{initialized:tt}=useInitialized(_e),rt=react.exports.useRef(!1);return react.exports.useEffect(()=>{rt.current||!tt||(et.setSource(_),rt.current=!0)},[_,et,tt]),null}var FUNC_ERROR_TEXT$2="Expected a function",NAN$1=0/0,symbolTag$3="[object Symbol]",reTrim=/^\s+|\s+$/g,reIsBadHex$1=/^[-+]0x[0-9a-f]+$/i,reIsBinary$1=/^0b[01]+$/i,reIsOctal$1=/^0o[0-7]+$/i,freeParseInt$1=parseInt,freeGlobal$2=typeof commonjsGlobal$1=="object"&&commonjsGlobal$1&&commonjsGlobal$1.Object===Object&&commonjsGlobal$1,freeSelf$1=typeof self=="object"&&self&&self.Object===Object&&self,root$c=freeGlobal$2||freeSelf$1||Function("return this")(),objectProto$e=Object.prototype,objectToString$3=objectProto$e.toString,nativeMax$2=Math.max,nativeMin$1=Math.min,now$3=function(){return root$c.Date.now()};function debounce$2(_,_e,et){var tt,rt,nt,at,it,ot,st=0,lt=!1,gt=!1,ct=!0;if(typeof _!="function")throw new TypeError(FUNC_ERROR_TEXT$2);_e=toNumber$2(_e)||0,isObject$l(et)&&(lt=!!et.leading,gt="maxWait"in et,nt=gt?nativeMax$2(toNumber$2(et.maxWait)||0,_e):nt,ct="trailing"in et?!!et.trailing:ct);function wt(pt){var dt=tt,vt=rt;return tt=rt=void 0,st=pt,at=_.apply(vt,dt),at}function Tt(pt){return st=pt,it=setTimeout(ut,_e),lt?wt(pt):at}function Rt(pt){var dt=pt-ot,vt=pt-st,St=_e-dt;return gt?nativeMin$1(St,nt-vt):St}function ht(pt){var dt=pt-ot,vt=pt-st;return ot===void 0||dt>=_e||dt<0||gt&&vt>=nt}function ut(){var pt=now$3();if(ht(pt))return ft(pt);it=setTimeout(ut,Rt(pt))}function ft(pt){return it=void 0,ct&&tt?wt(pt):(tt=rt=void 0,at)}function yt(){it!==void 0&&clearTimeout(it),st=0,tt=ot=rt=it=void 0}function xt(){return it===void 0?at:ft(now$3())}function Ct(){var pt=now$3(),dt=ht(pt);if(tt=arguments,rt=this,ot=pt,dt){if(it===void 0)return Tt(ot);if(gt)return it=setTimeout(ut,_e),wt(ot)}return it===void 0&&(it=setTimeout(ut,_e)),at}return Ct.cancel=yt,Ct.flush=xt,Ct}function throttle$1(_,_e,et){var tt=!0,rt=!0;if(typeof _!="function")throw new TypeError(FUNC_ERROR_TEXT$2);return isObject$l(et)&&(tt="leading"in et?!!et.leading:tt,rt="trailing"in et?!!et.trailing:rt),debounce$2(_,_e,{leading:tt,maxWait:_e,trailing:rt})}function isObject$l(_){var _e=typeof _;return!!_&&(_e=="object"||_e=="function")}function isObjectLike$7(_){return!!_&&typeof _=="object"}function isSymbol$7(_){return typeof _=="symbol"||isObjectLike$7(_)&&objectToString$3.call(_)==symbolTag$3}function toNumber$2(_){if(typeof _=="number")return _;if(isSymbol$7(_))return NAN$1;if(isObject$l(_)){var _e=typeof _.valueOf=="function"?_.valueOf():_;_=isObject$l(_e)?_e+"":_e}if(typeof _!="string")return _===0?_:+_;_=_.replace(reTrim,"");var et=reIsBinary$1.test(_);return et||reIsOctal$1.test(_)?freeParseInt$1(_.slice(2),et?2:8):reIsBadHex$1.test(_)?NAN$1:+_}var lodash_throttle=throttle$1;function ProgressListenerController(_){const _e=useVideoPlayerDescriptor(),et=useMediaPlaying(_e),tt=useProgress(_e),rt=useControls(_e),nt=useMisc(_e),at=react.exports.useRef(null),it=react.exports.useRef(_.startAt??0),ot=react.exports.useMemo(()=>lodash_throttle((gt,ct)=>{var wt;it.current=gt,(wt=_.onProgress)==null||wt.call(_,gt,ct)},1e3),[_]);react.exports.useEffect(()=>{!et.isPlaying||tt.duration===0||tt.time===0||ot(tt.time,tt.duration)},[tt,et,ot]),react.exports.useEffect(()=>()=>{ot.cancel()},[ot]),react.exports.useEffect(()=>{at.current||et.isFirstLoading||Number.isNaN(tt.duration)||(rt.setTime(it.current),at.current=!0)},[at,_,tt,et,rt]);const st=react.exports.useRef(null),lt=react.exports.useMemo(()=>nt.stateProviderId,[nt]);return react.exports.useEffect(()=>{st.current!==lt&&(et.isFirstLoading||(st.current=lt,rt.setTime(it.current)))},[rt,et,lt]),react.exports.useEffect(()=>{at.current&&et.isFirstLoading&&(at.current=null)},[et]),null}function SeriesController(_){const _e=useVideoPlayerDescriptor(),et=useMeta(_e),tt=useHistory(),rt=react.exports.useRef(null);return react.exports.useEffect(()=>{var at,it,ot,st,lt;const nt={episodeId:(at=et==null?void 0:et.episode)==null?void 0:at.episodeId,seasonId:(it=et==null?void 0:et.episode)==null?void 0:it.seasonId};if(rt.current===null){if(!et)return;rt.current=nt;return}(nt.episodeId!==((ot=rt.current)==null?void 0:ot.episodeId)||nt.seasonId!==((st=rt.current)==null?void 0:st.seasonId))&&(rt.current=nt,(lt=_.onSelect)==null||lt.call(_,nt))},[et,_,tt]),null}function MediaFetchErrorView(){const{t:_}=useTranslation(),_e=useGoBack();return jsxRuntime.exports.jsxs("div",{className:"flex-1",children:[jsxRuntime.exports.jsx(HelmetExport,{children:jsxRuntime.exports.jsx("title",{children:_("media.errors.failedMeta")})}),jsxRuntime.exports.jsx("div",{className:"fixed inset-x-0 top-0 py-6 px-8",children:jsxRuntime.exports.jsx(VideoPlayerHeader,{onClick:_e})}),jsxRuntime.exports.jsx(ErrorMessage,{children:jsxRuntime.exports.jsx("p",{className:"my-6 max-w-lg",children:_("media.errors.mediaFailed")})})]})}function MediaScrapePillSkeleton(){return jsxRuntime.exports.jsx("div",{className:"h-9 w-[220px] rounded-full bg-slate-800 opacity-50"})}function MediaScrapePill({event:_}){return jsxRuntime.exports.jsxs("div",{className:"flex h-9 w-[220px] items-center rounded-full bg-slate-800 p-3 text-denim-700",children:[jsxRuntime.exports.jsx("div",{className:"mr-2 flex w-[18px] items-center justify-center",children:_.errored?jsxRuntime.exports.jsx(Icon,{icon:Icons.X,className:"text-[0.85em] text-rose-400"}):jsxRuntime.exports.jsx(ProgressRing,{className:"h-[18px] w-[18px] text-bink-700",percentage:_.percentage,radius:40})}),jsxRuntime.exports.jsx("div",{className:"flex-1 overflow-hidden",children:jsxRuntime.exports.jsx("p",{className:`overflow-hidden text-ellipsis whitespace-nowrap ${_.errored?"text-rose-400":""}`,children:_.id})})]})}function MediaScrapeLog(_){return jsxRuntime.exports.jsxs("div",{className:"relative h-16 w-[400px] overflow-hidden",children:[jsxRuntime.exports.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:jsxRuntime.exports.jsx("div",{className:"relative flex h-full w-[220px] items-center",children:jsxRuntime.exports.jsxs("div",{className:"absolute inset-y-0 left-0 flex items-center gap-[16px] transition-transform duration-200",style:{transform:`translateX(${-1*(220+16)*_.events.length}px)`},children:[jsxRuntime.exports.jsx(MediaScrapePillSkeleton,{}),_.events.map(_e=>jsxRuntime.exports.jsx(MediaScrapePill,{event:_e},_e.eventId)),jsxRuntime.exports.jsx(MediaScrapePillSkeleton,{})]})})}),jsxRuntime.exports.jsx("div",{className:"absolute inset-y-0 left-0 w-40 bg-gradient-to-r from-denim-100 to-transparent"}),jsxRuntime.exports.jsx("div",{className:"absolute inset-y-0 right-0 w-40 bg-gradient-to-l from-denim-100 to-transparent"})]})}function MediaViewLoading(_){const{t:_e}=useTranslation();return jsxRuntime.exports.jsxs("div",{className:"relative flex flex-1 items-center justify-center",children:[jsxRuntime.exports.jsx(HelmetExport,{children:jsxRuntime.exports.jsx("title",{children:_e("videoPlayer.loading")})}),jsxRuntime.exports.jsx("div",{className:"absolute inset-x-0 top-0 py-6 px-8",children:jsxRuntime.exports.jsx(VideoPlayerHeader,{onClick:_.onGoBack})}),jsxRuntime.exports.jsxs("div",{className:"flex flex-col items-center",children:[jsxRuntime.exports.jsx(Loading,{className:"mb-4"}),jsxRuntime.exports.jsx("p",{className:"mb-8 text-denim-700",children:_e("videoPlayer.findingBestVideo")})]})]})}function MediaViewScraping(_){const{eventLog:_e,stream:et,pending:tt}=useScrape(_.meta,_.selected),{t:rt}=useTranslation();return react.exports.useEffect(()=>{et&&_.onStream(et)},[et,_]),jsxRuntime.exports.jsxs("div",{className:"relative flex flex-1 items-center justify-center",children:[jsxRuntime.exports.jsx(HelmetExport,{children:jsxRuntime.exports.jsx("title",{children:_.meta.meta.title})}),jsxRuntime.exports.jsx("div",{className:"absolute inset-x-0 top-0 py-6 px-8",children:jsxRuntime.exports.jsx(VideoPlayerHeader,{onClick:_.onGoBack,media:_.meta.meta})}),jsxRuntime.exports.jsxs("div",{className:"flex flex-col items-center transition-opacity duration-200",children:[tt?jsxRuntime.exports.jsxs(jsxRuntime.exports.Fragment,{children:[jsxRuntime.exports.jsx(Loading,{}),jsxRuntime.exports.jsx("p",{className:"mb-8 text-denim-700",children:rt("videoPlayer.findingBestVideo")})]}):jsxRuntime.exports.jsxs(jsxRuntime.exports.Fragment,{children:[jsxRuntime.exports.jsx(IconPatch,{icon:Icons.EYE_SLASH,className:"mb-8 text-bink-700"}),jsxRuntime.exports.jsx("p",{className:"mb-8 text-denim-700",children:rt("videoPlayer.noVideos")})]}),jsxRuntime.exports.jsx("div",{className:`flex flex-col items-center transition-opacity duration-200 ${tt?"opacity-100":"opacity-0"}`,children:jsxRuntime.exports.jsx(MediaScrapeLog,{events:_e})})]})]})}function MediaViewPlayer(_){const _e=useGoBack(),{updateProgress:et,watchedItem:tt}=useWatchedItem(_.meta,_.selected.episode),rt=react.exports.useRef(tt==null?void 0:tt.progress);react.exports.useEffect(()=>{rt.current=tt==null?void 0:tt.progress},[_.stream]);const nt={meta:_.meta,captions:[]};let at;return _.selected.type===MWMediaType.SERIES&&_.meta.meta.type===MWMediaType.SERIES&&(nt.episode={seasonId:_.selected.season,episodeId:_.selected.episode},nt.seasons=_.meta.meta.seasons,at=_.meta.meta.seasonData),jsxRuntime.exports.jsxs("div",{className:"fixed top-0 left-0 h-[100dvh] w-screen",children:[jsxRuntime.exports.jsx(HelmetExport,{children:jsxRuntime.exports.jsx("html",{"data-full":"true"})}),jsxRuntime.exports.jsxs(VideoPlayer,{includeSafeArea:!0,autoPlay:!0,onGoBack:_e,children:[jsxRuntime.exports.jsx(MetaController,{data:nt,seasonData:at,linkedCaptions:_.stream.captions}),jsxRuntime.exports.jsx(SourceController,{source:_.stream.streamUrl,type:_.stream.type,quality:_.stream.quality}),jsxRuntime.exports.jsx(ProgressListenerController,{startAt:rt.current,onProgress:et}),jsxRuntime.exports.jsx(SeriesController,{onSelect:it=>{var ot;return it.seasonId&&it.episodeId&&((ot=_.onChangeStream)==null?void 0:ot.call(_,it.seasonId,it.episodeId))}})]})]})}function MediaView(){const _=useParams(),_e=useGoBack(),et=useHistory(),[tt,rt]=react.exports.useState(null),[nt,at]=react.exports.useState(null),[it,ot,st]=useLoading(async(wt,Tt)=>{const Rt=decodeJWId(wt);return Rt?getMetaFromId(Rt.type,Rt.id,Tt):null}),[lt,gt]=react.exports.useState(null),ct=react.exports.useRef(null);return react.exports.useEffect(()=>{const wt=[_.media,_.season,_.episode],Tt=ct.current,Rt=(Tt==null?void 0:Tt[0])===wt[0]&&((Tt==null?void 0:Tt[1])===wt[1]||!(Tt!=null&&Tt[1]))&&((Tt==null?void 0:Tt[2])===wt[2]||!(Tt!=null&&Tt[2]));ct.current=wt,!(Rt&&Tt!==null)&&(rt(null),gt(null),at(null),it(_.media,_.season).then(ht=>{if(rt(ht??null),gt(null),ht)if(ht.meta.type!==MWMediaType.SERIES)at({type:ht.meta.type,season:void 0,episode:void 0});else{const ut=_.season??ht.meta.seasonData.id,ft=_.episode??ht.meta.seasonData.episodes[0].id;at({type:MWMediaType.SERIES,season:ut,episode:ft}),(ut!==_.season||ft!==_.episode)&&et.replace(`/media/${encodeURIComponent(_.media)}/${encodeURIComponent(ut)}/${encodeURIComponent(ft)}`)}else at(null)}))},[it,et,_]),ot?jsxRuntime.exports.jsx(MediaViewLoading,{onGoBack:_e}):st?jsxRuntime.exports.jsx(MediaFetchErrorView,{}):!tt||!nt?jsxRuntime.exports.jsx(NotFoundWrapper,{video:!0,children:jsxRuntime.exports.jsx(NotFoundMedia,{})}):lt?jsxRuntime.exports.jsx(MediaViewPlayer,{meta:tt,stream:lt,selected:nt,onChangeStream:(wt,Tt)=>{et.replace(`/media/${encodeURIComponent(_.media)}/${encodeURIComponent(wt)}/${encodeURIComponent(Tt)}`)}}):jsxRuntime.exports.jsx(MediaViewScraping,{meta:tt,selected:nt,onGoBack:_e,onStream:gt})}var check=function(_){return _&&_.Math==Math&&_},global$f=check(typeof globalThis=="object"&&globalThis)||check(typeof window=="object"&&window)||check(typeof self=="object"&&self)||check(typeof commonjsGlobal$1=="object"&&commonjsGlobal$1)||function(){return this}()||Function("return this")(),objectGetOwnPropertyDescriptor={},fails$g=function(_){try{return!!_()}catch{return!0}},fails$f=fails$g,descriptors=!fails$f(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7}),fails$e=fails$g,functionBindNative=!fails$e(function(){var _=function(){}.bind();return typeof _!="function"||_.hasOwnProperty("prototype")}),NATIVE_BIND$4=functionBindNative,call$9=Function.prototype.call,functionCall=NATIVE_BIND$4?call$9.bind(call$9):function(){return call$9.apply(call$9,arguments)},objectPropertyIsEnumerable={},$propertyIsEnumerable$1={}.propertyIsEnumerable,getOwnPropertyDescriptor$1=Object.getOwnPropertyDescriptor,NASHORN_BUG=getOwnPropertyDescriptor$1&&!$propertyIsEnumerable$1.call({1:2},1);objectPropertyIsEnumerable.f=NASHORN_BUG?function(_e){var et=getOwnPropertyDescriptor$1(this,_e);return!!et&&et.enumerable}:$propertyIsEnumerable$1;var createPropertyDescriptor$5=function(_,_e){return{enumerable:!(_&1),configurable:!(_&2),writable:!(_&4),value:_e}},NATIVE_BIND$3=functionBindNative,FunctionPrototype$2=Function.prototype,call$8=FunctionPrototype$2.call,uncurryThisWithBind=NATIVE_BIND$3&&FunctionPrototype$2.bind.bind(call$8,call$8),functionUncurryThis=NATIVE_BIND$3?uncurryThisWithBind:function(_){return function(){return call$8.apply(_,arguments)}},uncurryThis$i=functionUncurryThis,toString$9=uncurryThis$i({}.toString),stringSlice$2=uncurryThis$i("".slice),classofRaw$2=function(_){return stringSlice$2(toString$9(_),8,-1)},uncurryThis$h=functionUncurryThis,fails$d=fails$g,classof$6=classofRaw$2,$Object$4=Object,split=uncurryThis$h("".split),indexedObject=fails$d(function(){return!$Object$4("z").propertyIsEnumerable(0)})?function(_){return classof$6(_)=="String"?split(_,""):$Object$4(_)}:$Object$4,isNullOrUndefined$2=function(_){return _==null},isNullOrUndefined$1=isNullOrUndefined$2,$TypeError$7=TypeError,requireObjectCoercible$3=function(_){if(isNullOrUndefined$1(_))throw $TypeError$7("Can't call method on "+_);return _},IndexedObject$1=indexedObject,requireObjectCoercible$2=requireObjectCoercible$3,toIndexedObject$7=function(_){return IndexedObject$1(requireObjectCoercible$2(_))},documentAll$2=typeof document=="object"&&document.all,IS_HTMLDDA=typeof documentAll$2>"u"&&documentAll$2!==void 0,documentAll_1={all:documentAll$2,IS_HTMLDDA},$documentAll$1=documentAll_1,documentAll$1=$documentAll$1.all,isCallable$i=$documentAll$1.IS_HTMLDDA?function(_){return typeof _=="function"||_===documentAll$1}:function(_){return typeof _=="function"},isCallable$h=isCallable$i,$documentAll=documentAll_1,documentAll=$documentAll.all,isObject$k=$documentAll.IS_HTMLDDA?function(_){return typeof _=="object"?_!==null:isCallable$h(_)||_===documentAll}:function(_){return typeof _=="object"?_!==null:isCallable$h(_)},global$e=global$f,isCallable$g=isCallable$i,aFunction=function(_){return isCallable$g(_)?_:void 0},getBuiltIn$9=function(_,_e){return arguments.length<2?aFunction(global$e[_]):global$e[_]&&global$e[_][_e]},uncurryThis$g=functionUncurryThis,objectIsPrototypeOf=uncurryThis$g({}.isPrototypeOf),getBuiltIn$8=getBuiltIn$9,engineUserAgent=getBuiltIn$8("navigator","userAgent")||"",global$d=global$f,userAgent=engineUserAgent,process$1=global$d.process,Deno=global$d.Deno,versions=process$1&&process$1.versions||Deno&&Deno.version,v8=versions&&versions.v8,match,version;v8&&(match=v8.split("."),version=match[0]>0&&match[0]<4?1:+(match[0]+match[1]));!version&&userAgent&&(match=userAgent.match(/Edge\/(\d+)/),(!match||match[1]>=74)&&(match=userAgent.match(/Chrome\/(\d+)/),match&&(version=+match[1])));var engineV8Version=version,V8_VERSION=engineV8Version,fails$c=fails$g,symbolConstructorDetection=!!Object.getOwnPropertySymbols&&!fails$c(function(){var _=Symbol();return!String(_)||!(Object(_)instanceof Symbol)||!Symbol.sham&&V8_VERSION&&V8_VERSION<41}),NATIVE_SYMBOL$6=symbolConstructorDetection,useSymbolAsUid=NATIVE_SYMBOL$6&&!Symbol.sham&&typeof Symbol.iterator=="symbol",getBuiltIn$7=getBuiltIn$9,isCallable$f=isCallable$i,isPrototypeOf$2=objectIsPrototypeOf,USE_SYMBOL_AS_UID$1=useSymbolAsUid,$Object$3=Object,isSymbol$6=USE_SYMBOL_AS_UID$1?function(_){return typeof _=="symbol"}:function(_){var _e=getBuiltIn$7("Symbol");return isCallable$f(_e)&&isPrototypeOf$2(_e.prototype,$Object$3(_))},$String$3=String,tryToString$3=function(_){try{return $String$3(_)}catch{return"Object"}},isCallable$e=isCallable$i,tryToString$2=tryToString$3,$TypeError$6=TypeError,aCallable$3=function(_){if(isCallable$e(_))return _;throw $TypeError$6(tryToString$2(_)+" is not a function")},aCallable$2=aCallable$3,isNullOrUndefined=isNullOrUndefined$2,getMethod$1=function(_,_e){var et=_[_e];return isNullOrUndefined(et)?void 0:aCallable$2(et)},call$7=functionCall,isCallable$d=isCallable$i,isObject$j=isObject$k,$TypeError$5=TypeError,ordinaryToPrimitive$1=function(_,_e){var et,tt;if(_e==="string"&&isCallable$d(et=_.toString)&&!isObject$j(tt=call$7(et,_))||isCallable$d(et=_.valueOf)&&!isObject$j(tt=call$7(et,_))||_e!=="string"&&isCallable$d(et=_.toString)&&!isObject$j(tt=call$7(et,_)))return tt;throw $TypeError$5("Can't convert object to primitive value")},shared$6={exports:{}},global$c=global$f,defineProperty$a=Object.defineProperty,defineGlobalProperty$3=function(_,_e){try{defineProperty$a(global$c,_,{value:_e,configurable:!0,writable:!0})}catch{global$c[_]=_e}return _e},global$b=global$f,defineGlobalProperty$2=defineGlobalProperty$3,SHARED="__core-js_shared__",store$3=global$b[SHARED]||defineGlobalProperty$2(SHARED,{}),sharedStore=store$3,store$2=sharedStore;(shared$6.exports=function(_,_e){return store$2[_]||(store$2[_]=_e!==void 0?_e:{})})("versions",[]).push({version:"3.27.1",mode:"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.27.1/LICENSE",source:"https://github.com/zloirock/core-js"});var requireObjectCoercible$1=requireObjectCoercible$3,$Object$2=Object,toObject$5=function(_){return $Object$2(requireObjectCoercible$1(_))},uncurryThis$f=functionUncurryThis,toObject$4=toObject$5,hasOwnProperty$b=uncurryThis$f({}.hasOwnProperty),hasOwnProperty_1=Object.hasOwn||function(_e,et){return hasOwnProperty$b(toObject$4(_e),et)},uncurryThis$e=functionUncurryThis,id$1=0,postfix=Math.random(),toString$8=uncurryThis$e(1 .toString),uid$3=function(_){return"Symbol("+(_===void 0?"":_)+")_"+toString$8(++id$1+postfix,36)},global$a=global$f,shared$5=shared$6.exports,hasOwn$e=hasOwnProperty_1,uid$2=uid$3,NATIVE_SYMBOL$5=symbolConstructorDetection,USE_SYMBOL_AS_UID=useSymbolAsUid,WellKnownSymbolsStore$1=shared$5("wks"),Symbol$5=global$a.Symbol,symbolFor=Symbol$5&&Symbol$5.for,createWellKnownSymbol=USE_SYMBOL_AS_UID?Symbol$5:Symbol$5&&Symbol$5.withoutSetter||uid$2,wellKnownSymbol$c=function(_){if(!hasOwn$e(WellKnownSymbolsStore$1,_)||!(NATIVE_SYMBOL$5||typeof WellKnownSymbolsStore$1[_]=="string")){var _e="Symbol."+_;NATIVE_SYMBOL$5&&hasOwn$e(Symbol$5,_)?WellKnownSymbolsStore$1[_]=Symbol$5[_]:USE_SYMBOL_AS_UID&&symbolFor?WellKnownSymbolsStore$1[_]=symbolFor(_e):WellKnownSymbolsStore$1[_]=createWellKnownSymbol(_e)}return WellKnownSymbolsStore$1[_]},call$6=functionCall,isObject$i=isObject$k,isSymbol$5=isSymbol$6,getMethod=getMethod$1,ordinaryToPrimitive=ordinaryToPrimitive$1,wellKnownSymbol$b=wellKnownSymbol$c,$TypeError$4=TypeError,TO_PRIMITIVE=wellKnownSymbol$b("toPrimitive"),toPrimitive$1=function(_,_e){if(!isObject$i(_)||isSymbol$5(_))return _;var et=getMethod(_,TO_PRIMITIVE),tt;if(et){if(_e===void 0&&(_e="default"),tt=call$6(et,_,_e),!isObject$i(tt)||isSymbol$5(tt))return tt;throw $TypeError$4("Can't convert object to primitive value")}return _e===void 0&&(_e="number"),ordinaryToPrimitive(_,_e)},toPrimitive=toPrimitive$1,isSymbol$4=isSymbol$6,toPropertyKey$4=function(_){var _e=toPrimitive(_,"string");return isSymbol$4(_e)?_e:_e+""},global$9=global$f,isObject$h=isObject$k,document$1=global$9.document,EXISTS$1=isObject$h(document$1)&&isObject$h(document$1.createElement),documentCreateElement$2=function(_){return EXISTS$1?document$1.createElement(_):{}},DESCRIPTORS$b=descriptors,fails$b=fails$g,createElement=documentCreateElement$2,ie8DomDefine=!DESCRIPTORS$b&&!fails$b(function(){return Object.defineProperty(createElement("div"),"a",{get:function(){return 7}}).a!=7}),DESCRIPTORS$a=descriptors,call$5=functionCall,propertyIsEnumerableModule$1=objectPropertyIsEnumerable,createPropertyDescriptor$4=createPropertyDescriptor$5,toIndexedObject$6=toIndexedObject$7,toPropertyKey$3=toPropertyKey$4,hasOwn$d=hasOwnProperty_1,IE8_DOM_DEFINE$1=ie8DomDefine,$getOwnPropertyDescriptor$2=Object.getOwnPropertyDescriptor;objectGetOwnPropertyDescriptor.f=DESCRIPTORS$a?$getOwnPropertyDescriptor$2:function(_e,et){if(_e=toIndexedObject$6(_e),et=toPropertyKey$3(et),IE8_DOM_DEFINE$1)try{return $getOwnPropertyDescriptor$2(_e,et)}catch{}if(hasOwn$d(_e,et))return createPropertyDescriptor$4(!call$5(propertyIsEnumerableModule$1.f,_e,et),_e[et])};var objectDefineProperty={},DESCRIPTORS$9=descriptors,fails$a=fails$g,v8PrototypeDefineBug=DESCRIPTORS$9&&fails$a(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42}),isObject$g=isObject$k,$String$2=String,$TypeError$3=TypeError,anObject$7=function(_){if(isObject$g(_))return _;throw $TypeError$3($String$2(_)+" is not an object")},DESCRIPTORS$8=descriptors,IE8_DOM_DEFINE=ie8DomDefine,V8_PROTOTYPE_DEFINE_BUG$1=v8PrototypeDefineBug,anObject$6=anObject$7,toPropertyKey$2=toPropertyKey$4,$TypeError$2=TypeError,$defineProperty$1=Object.defineProperty,$getOwnPropertyDescriptor$1=Object.getOwnPropertyDescriptor,ENUMERABLE="enumerable",CONFIGURABLE$1="configurable",WRITABLE="writable";objectDefineProperty.f=DESCRIPTORS$8?V8_PROTOTYPE_DEFINE_BUG$1?function(_e,et,tt){if(anObject$6(_e),et=toPropertyKey$2(et),anObject$6(tt),typeof _e=="function"&&et==="prototype"&&"value"in tt&&WRITABLE in tt&&!tt[WRITABLE]){var rt=$getOwnPropertyDescriptor$1(_e,et);rt&&rt[WRITABLE]&&(_e[et]=tt.value,tt={configurable:CONFIGURABLE$1 in tt?tt[CONFIGURABLE$1]:rt[CONFIGURABLE$1],enumerable:ENUMERABLE in tt?tt[ENUMERABLE]:rt[ENUMERABLE],writable:!1})}return $defineProperty$1(_e,et,tt)}:$defineProperty$1:function(_e,et,tt){if(anObject$6(_e),et=toPropertyKey$2(et),anObject$6(tt),IE8_DOM_DEFINE)try{return $defineProperty$1(_e,et,tt)}catch{}if("get"in tt||"set"in tt)throw $TypeError$2("Accessors not supported");return"value"in tt&&(_e[et]=tt.value),_e};var DESCRIPTORS$7=descriptors,definePropertyModule$5=objectDefineProperty,createPropertyDescriptor$3=createPropertyDescriptor$5,createNonEnumerableProperty$4=DESCRIPTORS$7?function(_,_e,et){return definePropertyModule$5.f(_,_e,createPropertyDescriptor$3(1,et))}:function(_,_e,et){return _[_e]=et,_},makeBuiltIn$2={exports:{}},DESCRIPTORS$6=descriptors,hasOwn$c=hasOwnProperty_1,FunctionPrototype$1=Function.prototype,getDescriptor=DESCRIPTORS$6&&Object.getOwnPropertyDescriptor,EXISTS=hasOwn$c(FunctionPrototype$1,"name"),PROPER=EXISTS&&function(){}.name==="something",CONFIGURABLE=EXISTS&&(!DESCRIPTORS$6||DESCRIPTORS$6&&getDescriptor(FunctionPrototype$1,"name").configurable),functionName={EXISTS,PROPER,CONFIGURABLE},uncurryThis$d=functionUncurryThis,isCallable$c=isCallable$i,store$1=sharedStore,functionToString=uncurryThis$d(Function.toString);isCallable$c(store$1.inspectSource)||(store$1.inspectSource=function(_){return functionToString(_)});var inspectSource$2=store$1.inspectSource,global$8=global$f,isCallable$b=isCallable$i,WeakMap$4=global$8.WeakMap,weakMapBasicDetection=isCallable$b(WeakMap$4)&&/native code/.test(String(WeakMap$4)),shared$4=shared$6.exports,uid$1=uid$3,keys$5=shared$4("keys"),sharedKey$4=function(_){return keys$5[_]||(keys$5[_]=uid$1(_))},hiddenKeys$5={},NATIVE_WEAK_MAP=weakMapBasicDetection,global$7=global$f,isObject$f=isObject$k,createNonEnumerableProperty$3=createNonEnumerableProperty$4,hasOwn$b=hasOwnProperty_1,shared$3=sharedStore,sharedKey$3=sharedKey$4,hiddenKeys$4=hiddenKeys$5,OBJECT_ALREADY_INITIALIZED="Object already initialized",TypeError$2=global$7.TypeError,WeakMap$3=global$7.WeakMap,set,get$2,has,enforce=function(_){return has(_)?get$2(_):set(_,{})},getterFor=function(_){return function(_e){var et;if(!isObject$f(_e)||(et=get$2(_e)).type!==_)throw TypeError$2("Incompatible receiver, "+_+" required");return et}};if(NATIVE_WEAK_MAP||shared$3.state){var store=shared$3.state||(shared$3.state=new WeakMap$3);store.get=store.get,store.has=store.has,store.set=store.set,set=function(_,_e){if(store.has(_))throw TypeError$2(OBJECT_ALREADY_INITIALIZED);return _e.facade=_,store.set(_,_e),_e},get$2=function(_){return store.get(_)||{}},has=function(_){return store.has(_)}}else{var STATE=sharedKey$3("state");hiddenKeys$4[STATE]=!0,set=function(_,_e){if(hasOwn$b(_,STATE))throw TypeError$2(OBJECT_ALREADY_INITIALIZED);return _e.facade=_,createNonEnumerableProperty$3(_,STATE,_e),_e},get$2=function(_){return hasOwn$b(_,STATE)?_[STATE]:{}},has=function(_){return hasOwn$b(_,STATE)}}var internalState={set,get:get$2,has,enforce,getterFor},fails$9=fails$g,isCallable$a=isCallable$i,hasOwn$a=hasOwnProperty_1,DESCRIPTORS$5=descriptors,CONFIGURABLE_FUNCTION_NAME$1=functionName.CONFIGURABLE,inspectSource$1=inspectSource$2,InternalStateModule$3=internalState,enforceInternalState=InternalStateModule$3.enforce,getInternalState$3=InternalStateModule$3.get,defineProperty$9=Object.defineProperty,CONFIGURABLE_LENGTH=DESCRIPTORS$5&&!fails$9(function(){return defineProperty$9(function(){},"length",{value:8}).length!==8}),TEMPLATE=String(String).split("String"),makeBuiltIn$1=makeBuiltIn$2.exports=function(_,_e,et){String(_e).slice(0,7)==="Symbol("&&(_e="["+String(_e).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),et&&et.getter&&(_e="get "+_e),et&&et.setter&&(_e="set "+_e),(!hasOwn$a(_,"name")||CONFIGURABLE_FUNCTION_NAME$1&&_.name!==_e)&&(DESCRIPTORS$5?defineProperty$9(_,"name",{value:_e,configurable:!0}):_.name=_e),CONFIGURABLE_LENGTH&&et&&hasOwn$a(et,"arity")&&_.length!==et.arity&&defineProperty$9(_,"length",{value:et.arity});try{et&&hasOwn$a(et,"constructor")&&et.constructor?DESCRIPTORS$5&&defineProperty$9(_,"prototype",{writable:!1}):_.prototype&&(_.prototype=void 0)}catch{}var tt=enforceInternalState(_);return hasOwn$a(tt,"source")||(tt.source=TEMPLATE.join(typeof _e=="string"?_e:"")),_};Function.prototype.toString=makeBuiltIn$1(function(){return isCallable$a(this)&&getInternalState$3(this).source||inspectSource$1(this)},"toString");var isCallable$9=isCallable$i,definePropertyModule$4=objectDefineProperty,makeBuiltIn=makeBuiltIn$2.exports,defineGlobalProperty$1=defineGlobalProperty$3,defineBuiltIn$6=function(_,_e,et,tt){tt||(tt={});var rt=tt.enumerable,nt=tt.name!==void 0?tt.name:_e;if(isCallable$9(et)&&makeBuiltIn(et,nt,tt),tt.global)rt?_[_e]=et:defineGlobalProperty$1(_e,et);else{try{tt.unsafe?_[_e]&&(rt=!0):delete _[_e]}catch{}rt?_[_e]=et:definePropertyModule$4.f(_,_e,{value:et,enumerable:!1,configurable:!tt.nonConfigurable,writable:!tt.nonWritable})}return _},objectGetOwnPropertyNames={},ceil=Math.ceil,floor=Math.floor,mathTrunc=Math.trunc||function(_e){var et=+_e;return(et>0?floor:ceil)(et)},trunc=mathTrunc,toIntegerOrInfinity$3=function(_){var _e=+_;return _e!==_e||_e===0?0:trunc(_e)},toIntegerOrInfinity$2=toIntegerOrInfinity$3,max$1=Math.max,min$1=Math.min,toAbsoluteIndex$2=function(_,_e){var et=toIntegerOrInfinity$2(_);return et<0?max$1(et+_e,0):min$1(et,_e)},toIntegerOrInfinity$1=toIntegerOrInfinity$3,min=Math.min,toLength$1=function(_){return _>0?min(toIntegerOrInfinity$1(_),9007199254740991):0},toLength=toLength$1,lengthOfArrayLike$3=function(_){return toLength(_.length)},toIndexedObject$5=toIndexedObject$7,toAbsoluteIndex$1=toAbsoluteIndex$2,lengthOfArrayLike$2=lengthOfArrayLike$3,createMethod$2=function(_){return function(_e,et,tt){var rt=toIndexedObject$5(_e),nt=lengthOfArrayLike$2(rt),at=toAbsoluteIndex$1(tt,nt),it;if(_&&et!=et){for(;nt>at;)if(it=rt[at++],it!=it)return!0}else for(;nt>at;at++)if((_||at in rt)&&rt[at]===et)return _||at||0;return!_&&-1}},arrayIncludes={includes:createMethod$2(!0),indexOf:createMethod$2(!1)},uncurryThis$c=functionUncurryThis,hasOwn$9=hasOwnProperty_1,toIndexedObject$4=toIndexedObject$7,indexOf=arrayIncludes.indexOf,hiddenKeys$3=hiddenKeys$5,push$3=uncurryThis$c([].push),objectKeysInternal=function(_,_e){var et=toIndexedObject$4(_),tt=0,rt=[],nt;for(nt in et)!hasOwn$9(hiddenKeys$3,nt)&&hasOwn$9(et,nt)&&push$3(rt,nt);for(;_e.length>tt;)hasOwn$9(et,nt=_e[tt++])&&(~indexOf(rt,nt)||push$3(rt,nt));return rt},enumBugKeys$3=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],internalObjectKeys$1=objectKeysInternal,enumBugKeys$2=enumBugKeys$3,hiddenKeys$2=enumBugKeys$2.concat("length","prototype");objectGetOwnPropertyNames.f=Object.getOwnPropertyNames||function(_e){return internalObjectKeys$1(_e,hiddenKeys$2)};var objectGetOwnPropertySymbols={};objectGetOwnPropertySymbols.f=Object.getOwnPropertySymbols;var getBuiltIn$6=getBuiltIn$9,uncurryThis$b=functionUncurryThis,getOwnPropertyNamesModule$1=objectGetOwnPropertyNames,getOwnPropertySymbolsModule$2=objectGetOwnPropertySymbols,anObject$5=anObject$7,concat$1=uncurryThis$b([].concat),ownKeys$8=getBuiltIn$6("Reflect","ownKeys")||function(_e){var et=getOwnPropertyNamesModule$1.f(anObject$5(_e)),tt=getOwnPropertySymbolsModule$2.f;return tt?concat$1(et,tt(_e)):et},hasOwn$8=hasOwnProperty_1,ownKeys$7=ownKeys$8,getOwnPropertyDescriptorModule$1=objectGetOwnPropertyDescriptor,definePropertyModule$3=objectDefineProperty,copyConstructorProperties$2=function(_,_e,et){for(var tt=ownKeys$7(_e),rt=definePropertyModule$3.f,nt=getOwnPropertyDescriptorModule$1.f,at=0;at<tt.length;at++){var it=tt[at];!hasOwn$8(_,it)&&!(et&&hasOwn$8(et,it))&&rt(_,it,nt(_e,it))}},fails$8=fails$g,isCallable$8=isCallable$i,replacement=/#|\.prototype\./,isForced$1=function(_,_e){var et=data[normalize(_)];return et==POLYFILL?!0:et==NATIVE?!1:isCallable$8(_e)?fails$8(_e):!!_e},normalize=isForced$1.normalize=function(_){return String(_).replace(replacement,".").toLowerCase()},data=isForced$1.data={},NATIVE=isForced$1.NATIVE="N",POLYFILL=isForced$1.POLYFILL="P",isForced_1=isForced$1,global$6=global$f,getOwnPropertyDescriptor=objectGetOwnPropertyDescriptor.f,createNonEnumerableProperty$2=createNonEnumerableProperty$4,defineBuiltIn$5=defineBuiltIn$6,defineGlobalProperty=defineGlobalProperty$3,copyConstructorProperties$1=copyConstructorProperties$2,isForced=isForced_1,_export=function(_,_e){var et=_.target,tt=_.global,rt=_.stat,nt,at,it,ot,st,lt;if(tt?at=global$6:rt?at=global$6[et]||defineGlobalProperty(et,{}):at=(global$6[et]||{}).prototype,at)for(it in _e){if(st=_e[it],_.dontCallGetSet?(lt=getOwnPropertyDescriptor(at,it),ot=lt&&lt.value):ot=at[it],nt=isForced(tt?it:et+(rt?".":"#")+it,_.forced),!nt&&ot!==void 0){if(typeof st==typeof ot)continue;copyConstructorProperties$1(st,ot)}(_.sham||ot&&ot.sham)&&createNonEnumerableProperty$2(st,"sham",!0),defineBuiltIn$5(at,it,st,_)}},isCallable$7=isCallable$i,$String$1=String,$TypeError$1=TypeError,aPossiblePrototype$1=function(_){if(typeof _=="object"||isCallable$7(_))return _;throw $TypeError$1("Can't set "+$String$1(_)+" as a prototype")},uncurryThis$a=functionUncurryThis,anObject$4=anObject$7,aPossiblePrototype=aPossiblePrototype$1,objectSetPrototypeOf=Object.setPrototypeOf||("__proto__"in{}?function(){var _=!1,_e={},et;try{et=uncurryThis$a(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set),et(_e,[]),_=_e instanceof Array}catch{}return function(rt,nt){return anObject$4(rt),aPossiblePrototype(nt),_?et(rt,nt):rt.__proto__=nt,rt}}():void 0),$$a=_export,setPrototypeOf$1=objectSetPrototypeOf;$$a({target:"Object",stat:!0},{setPrototypeOf:setPrototypeOf$1});var fails$7=fails$g,correctPrototypeGetter=!fails$7(function(){function _(){}return _.prototype.constructor=null,Object.getPrototypeOf(new _)!==_.prototype}),hasOwn$7=hasOwnProperty_1,isCallable$6=isCallable$i,toObject$3=toObject$5,sharedKey$2=sharedKey$4,CORRECT_PROTOTYPE_GETTER$1=correctPrototypeGetter,IE_PROTO$1=sharedKey$2("IE_PROTO"),$Object$1=Object,ObjectPrototype$2=$Object$1.prototype,objectGetPrototypeOf=CORRECT_PROTOTYPE_GETTER$1?$Object$1.getPrototypeOf:function(_){var _e=toObject$3(_);if(hasOwn$7(_e,IE_PROTO$1))return _e[IE_PROTO$1];var et=_e.constructor;return isCallable$6(et)&&_e instanceof et?et.prototype:_e instanceof $Object$1?ObjectPrototype$2:null},$$9=_export,fails$6=fails$g,toObject$2=toObject$5,nativeGetPrototypeOf=objectGetPrototypeOf,CORRECT_PROTOTYPE_GETTER=correctPrototypeGetter,FAILS_ON_PRIMITIVES=fails$6(function(){nativeGetPrototypeOf(1)});$$9({target:"Object",stat:!0,forced:FAILS_ON_PRIMITIVES,sham:!CORRECT_PROTOTYPE_GETTER},{getPrototypeOf:function(_e){return nativeGetPrototypeOf(toObject$2(_e))}});var wellKnownSymbol$a=wellKnownSymbol$c,TO_STRING_TAG$3=wellKnownSymbol$a("toStringTag"),test={};test[TO_STRING_TAG$3]="z";var toStringTagSupport=String(test)==="[object z]",TO_STRING_TAG_SUPPORT$2=toStringTagSupport,isCallable$5=isCallable$i,classofRaw$1=classofRaw$2,wellKnownSymbol$9=wellKnownSymbol$c,TO_STRING_TAG$2=wellKnownSymbol$9("toStringTag"),$Object=Object,CORRECT_ARGUMENTS=classofRaw$1(function(){return arguments}())=="Arguments",tryGet=function(_,_e){try{return _[_e]}catch{}},classof$5=TO_STRING_TAG_SUPPORT$2?classofRaw$1:function(_){var _e,et,tt;return _===void 0?"Undefined":_===null?"Null":typeof(et=tryGet(_e=$Object(_),TO_STRING_TAG$2))=="string"?et:CORRECT_ARGUMENTS?classofRaw$1(_e):(tt=classofRaw$1(_e))=="Object"&&isCallable$5(_e.callee)?"Arguments":tt},TO_STRING_TAG_SUPPORT$1=toStringTagSupport,classof$4=classof$5,objectToString$2=TO_STRING_TAG_SUPPORT$1?{}.toString:function(){return"[object "+classof$4(this)+"]"},TO_STRING_TAG_SUPPORT=toStringTagSupport,defineBuiltIn$4=defineBuiltIn$6,toString$7=objectToString$2;TO_STRING_TAG_SUPPORT||defineBuiltIn$4(Object.prototype,"toString",toString$7,{unsafe:!0});var NATIVE_BIND$2=functionBindNative,FunctionPrototype=Function.prototype,apply$4=FunctionPrototype.apply,call$4=FunctionPrototype.call,functionApply=typeof Reflect=="object"&&Reflect.apply||(NATIVE_BIND$2?call$4.bind(apply$4):function(){return call$4.apply(apply$4,arguments)}),uncurryThis$9=functionUncurryThis,arraySlice$3=uncurryThis$9([].slice),uncurryThis$8=functionUncurryThis,aCallable$1=aCallable$3,isObject$e=isObject$k,hasOwn$6=hasOwnProperty_1,arraySlice$2=arraySlice$3,NATIVE_BIND$1=functionBindNative,$Function=Function,concat=uncurryThis$8([].concat),join=uncurryThis$8([].join),factories={},construct$1=function(_,_e,et){if(!hasOwn$6(factories,_e)){for(var tt=[],rt=0;rt<_e;rt++)tt[rt]="a["+rt+"]";factories[_e]=$Function("C,a","return new C("+join(tt,",")+")")}return factories[_e](_,et)},functionBind=NATIVE_BIND$1?$Function.bind:function(_e){var et=aCallable$1(this),tt=et.prototype,rt=arraySlice$2(arguments,1),nt=function(){var it=concat(rt,arraySlice$2(arguments));return this instanceof nt?construct$1(et,it.length,it):et.apply(_e,it)};return isObject$e(tt)&&(nt.prototype=tt),nt},uncurryThis$7=functionUncurryThis,fails$5=fails$g,isCallable$4=isCallable$i,classof$3=classof$5,getBuiltIn$5=getBuiltIn$9,inspectSource=inspectSource$2,noop$2=function(){},empty=[],construct=getBuiltIn$5("Reflect","construct"),constructorRegExp=/^\s*(?:class|function)\b/,exec$1=uncurryThis$7(constructorRegExp.exec),INCORRECT_TO_STRING=!constructorRegExp.exec(noop$2),isConstructorModern=function(_e){if(!isCallable$4(_e))return!1;try{return construct(noop$2,empty,_e),!0}catch{return!1}},isConstructorLegacy=function(_e){if(!isCallable$4(_e))return!1;switch(classof$3(_e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return INCORRECT_TO_STRING||!!exec$1(constructorRegExp,inspectSource(_e))}catch{return!0}};isConstructorLegacy.sham=!0;var isConstructor$2=!construct||fails$5(function(){var _;return isConstructorModern(isConstructorModern.call)||!isConstructorModern(Object)||!isConstructorModern(function(){_=!0})||_})?isConstructorLegacy:isConstructorModern,isConstructor$1=isConstructor$2,tryToString$1=tryToString$3,$TypeError=TypeError,aConstructor$1=function(_){if(isConstructor$1(_))return _;throw $TypeError(tryToString$1(_)+" is not a constructor")},objectDefineProperties={},internalObjectKeys=objectKeysInternal,enumBugKeys$1=enumBugKeys$3,objectKeys$2=Object.keys||function(_e){return internalObjectKeys(_e,enumBugKeys$1)},DESCRIPTORS$4=descriptors,V8_PROTOTYPE_DEFINE_BUG=v8PrototypeDefineBug,definePropertyModule$2=objectDefineProperty,anObject$3=anObject$7,toIndexedObject$3=toIndexedObject$7,objectKeys$1=objectKeys$2;objectDefineProperties.f=DESCRIPTORS$4&&!V8_PROTOTYPE_DEFINE_BUG?Object.defineProperties:function(_e,et){anObject$3(_e);for(var tt=toIndexedObject$3(et),rt=objectKeys$1(et),nt=rt.length,at=0,it;nt>at;)definePropertyModule$2.f(_e,it=rt[at++],tt[it]);return _e};var getBuiltIn$4=getBuiltIn$9,html$1=getBuiltIn$4("document","documentElement"),anObject$2=anObject$7,definePropertiesModule$1=objectDefineProperties,enumBugKeys=enumBugKeys$3,hiddenKeys$1=hiddenKeys$5,html=html$1,documentCreateElement$1=documentCreateElement$2,sharedKey$1=sharedKey$4,GT=">",LT="<",PROTOTYPE$1="prototype",SCRIPT="script",IE_PROTO=sharedKey$1("IE_PROTO"),EmptyConstructor=function(){},scriptTag=function(_){return LT+SCRIPT+GT+_+LT+"/"+SCRIPT+GT},NullProtoObjectViaActiveX=function(_){_.write(scriptTag("")),_.close();var _e=_.parentWindow.Object;return _=null,_e},NullProtoObjectViaIFrame=function(){var _=documentCreateElement$1("iframe"),_e="java"+SCRIPT+":",et;return _.style.display="none",html.appendChild(_),_.src=String(_e),et=_.contentWindow.document,et.open(),et.write(scriptTag("document.F=Object")),et.close(),et.F},activeXDocument,NullProtoObject=function(){try{activeXDocument=new ActiveXObject("htmlfile")}catch{}NullProtoObject=typeof document<"u"?document.domain&&activeXDocument?NullProtoObjectViaActiveX(activeXDocument):NullProtoObjectViaIFrame():NullProtoObjectViaActiveX(activeXDocument);for(var _=enumBugKeys.length;_--;)delete NullProtoObject[PROTOTYPE$1][enumBugKeys[_]];return NullProtoObject()};hiddenKeys$1[IE_PROTO]=!0;var objectCreate$1=Object.create||function(_e,et){var tt;return _e!==null?(EmptyConstructor[PROTOTYPE$1]=anObject$2(_e),tt=new EmptyConstructor,EmptyConstructor[PROTOTYPE$1]=null,tt[IE_PROTO]=_e):tt=NullProtoObject(),et===void 0?tt:definePropertiesModule$1.f(tt,et)},$$8=_export,getBuiltIn$3=getBuiltIn$9,apply$3=functionApply,bind$2=functionBind,aConstructor=aConstructor$1,anObject$1=anObject$7,isObject$d=isObject$k,create$2=objectCreate$1,fails$4=fails$g,nativeConstruct=getBuiltIn$3("Reflect","construct"),ObjectPrototype$1=Object.prototype,push$2=[].push,NEW_TARGET_BUG=fails$4(function(){function _(){}return!(nativeConstruct(function(){},[],_)instanceof _)}),ARGS_BUG=!fails$4(function(){nativeConstruct(function(){})}),FORCED$1=NEW_TARGET_BUG||ARGS_BUG;$$8({target:"Reflect",stat:!0,forced:FORCED$1,sham:FORCED$1},{construct:function(_e,et){aConstructor(_e),anObject$1(et);var tt=arguments.length<3?_e:aConstructor(arguments[2]);if(ARGS_BUG&&!NEW_TARGET_BUG)return nativeConstruct(_e,et,tt);if(_e==tt){switch(et.length){case 0:return new _e;case 1:return new _e(et[0]);case 2:return new _e(et[0],et[1]);case 3:return new _e(et[0],et[1],et[2]);case 4:return new _e(et[0],et[1],et[2],et[3])}var rt=[null];return apply$3(push$2,rt,et),new(apply$3(bind$2,_e,rt))}var nt=tt.prototype,at=create$2(isObject$d(nt)?nt:ObjectPrototype$1),it=apply$3(_e,at,et);return isObject$d(it)?it:at}});var $$7=_export,DESCRIPTORS$3=descriptors,defineProperty$8=objectDefineProperty.f;$$7({target:"Object",stat:!0,forced:Object.defineProperty!==defineProperty$8,sham:!DESCRIPTORS$3},{defineProperty:defineProperty$8});var classof$2=classof$5,$String=String,toString$6=function(_){if(classof$2(_)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return $String(_)},objectGetOwnPropertyNamesExternal={},toPropertyKey$1=toPropertyKey$4,definePropertyModule$1=objectDefineProperty,createPropertyDescriptor$2=createPropertyDescriptor$5,createProperty$1=function(_,_e,et){var tt=toPropertyKey$1(_e);tt in _?definePropertyModule$1.f(_,tt,createPropertyDescriptor$2(0,et)):_[tt]=et},toAbsoluteIndex=toAbsoluteIndex$2,lengthOfArrayLike$1=lengthOfArrayLike$3,createProperty=createProperty$1,$Array$1=Array,max=Math.max,arraySliceSimple=function(_,_e,et){for(var tt=lengthOfArrayLike$1(_),rt=toAbsoluteIndex(_e,tt),nt=toAbsoluteIndex(et===void 0?tt:et,tt),at=$Array$1(max(nt-rt,0)),it=0;rt<nt;rt++,it++)createProperty(at,it,_[rt]);return at.length=it,at},classof$1=classofRaw$2,toIndexedObject$2=toIndexedObject$7,$getOwnPropertyNames$1=objectGetOwnPropertyNames.f,arraySlice$1=arraySliceSimple,windowNames=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],getWindowNames=function(_){try{return $getOwnPropertyNames$1(_)}catch{return arraySlice$1(windowNames)}};objectGetOwnPropertyNamesExternal.f=function(_e){return windowNames&&classof$1(_e)=="Window"?getWindowNames(_e):$getOwnPropertyNames$1(toIndexedObject$2(_e))};var wellKnownSymbolWrapped={},wellKnownSymbol$8=wellKnownSymbol$c;wellKnownSymbolWrapped.f=wellKnownSymbol$8;var global$5=global$f,path$2=global$5,path$1=path$2,hasOwn$5=hasOwnProperty_1,wrappedWellKnownSymbolModule$1=wellKnownSymbolWrapped,defineProperty$7=objectDefineProperty.f,wellKnownSymbolDefine=function(_){var _e=path$1.Symbol||(path$1.Symbol={});hasOwn$5(_e,_)||defineProperty$7(_e,_,{value:wrappedWellKnownSymbolModule$1.f(_)})},call$3=functionCall,getBuiltIn$2=getBuiltIn$9,wellKnownSymbol$7=wellKnownSymbol$c,defineBuiltIn$3=defineBuiltIn$6,symbolDefineToPrimitive=function(){var _=getBuiltIn$2("Symbol"),_e=_&&_.prototype,et=_e&&_e.valueOf,tt=wellKnownSymbol$7("toPrimitive");_e&&!_e[tt]&&defineBuiltIn$3(_e,tt,function(rt){return call$3(et,this)},{arity:1})},defineProperty$6=objectDefineProperty.f,hasOwn$4=hasOwnProperty_1,wellKnownSymbol$6=wellKnownSymbol$c,TO_STRING_TAG$1=wellKnownSymbol$6("toStringTag"),setToStringTag$3=function(_,_e,et){_&&!et&&(_=_.prototype),_&&!hasOwn$4(_,TO_STRING_TAG$1)&&defineProperty$6(_,TO_STRING_TAG$1,{configurable:!0,value:_e})},classofRaw=classofRaw$2,uncurryThis$6=functionUncurryThis,functionUncurryThisClause=function(_){if(classofRaw(_)==="Function")return uncurryThis$6(_)},uncurryThis$5=functionUncurryThisClause,aCallable=aCallable$3,NATIVE_BIND=functionBindNative,bind$1=uncurryThis$5(uncurryThis$5.bind),functionBindContext=function(_,_e){return aCallable(_),_e===void 0?_:NATIVE_BIND?bind$1(_,_e):function(){return _.apply(_e,arguments)}},classof=classofRaw$2,isArray$6=Array.isArray||function(_e){return classof(_e)=="Array"},isArray$5=isArray$6,isConstructor=isConstructor$2,isObject$c=isObject$k,wellKnownSymbol$5=wellKnownSymbol$c,SPECIES=wellKnownSymbol$5("species"),$Array=Array,arraySpeciesConstructor$1=function(_){var _e;return isArray$5(_)&&(_e=_.constructor,isConstructor(_e)&&(_e===$Array||isArray$5(_e.prototype))?_e=void 0:isObject$c(_e)&&(_e=_e[SPECIES],_e===null&&(_e=void 0))),_e===void 0?$Array:_e},arraySpeciesConstructor=arraySpeciesConstructor$1,arraySpeciesCreate$1=function(_,_e){return new(arraySpeciesConstructor(_))(_e===0?0:_e)},bind=functionBindContext,uncurryThis$4=functionUncurryThis,IndexedObject=indexedObject,toObject$1=toObject$5,lengthOfArrayLike=lengthOfArrayLike$3,arraySpeciesCreate=arraySpeciesCreate$1,push$1=uncurryThis$4([].push),createMethod$1=function(_){var _e=_==1,et=_==2,tt=_==3,rt=_==4,nt=_==6,at=_==7,it=_==5||nt;return function(ot,st,lt,gt){for(var ct=toObject$1(ot),wt=IndexedObject(ct),Tt=bind(st,lt),Rt=lengthOfArrayLike(wt),ht=0,ut=gt||arraySpeciesCreate,ft=_e?ut(ot,Rt):et||at?ut(ot,0):void 0,yt,xt;Rt>ht;ht++)if((it||ht in wt)&&(yt=wt[ht],xt=Tt(yt,ht,ct),_))if(_e)ft[ht]=xt;else if(xt)switch(_){case 3:return!0;case 5:return yt;case 6:return ht;case 2:push$1(ft,yt)}else switch(_){case 4:return!1;case 7:push$1(ft,yt)}return nt?-1:tt||rt?rt:ft}},arrayIteration={forEach:createMethod$1(0),map:createMethod$1(1),filter:createMethod$1(2),some:createMethod$1(3),every:createMethod$1(4),find:createMethod$1(5),findIndex:createMethod$1(6),filterReject:createMethod$1(7)},$$6=_export,global$4=global$f,call$2=functionCall,uncurryThis$3=functionUncurryThis,DESCRIPTORS$2=descriptors,NATIVE_SYMBOL$4=symbolConstructorDetection,fails$3=fails$g,hasOwn$3=hasOwnProperty_1,isPrototypeOf$1=objectIsPrototypeOf,anObject=anObject$7,toIndexedObject$1=toIndexedObject$7,toPropertyKey=toPropertyKey$4,$toString=toString$6,createPropertyDescriptor$1=createPropertyDescriptor$5,nativeObjectCreate=objectCreate$1,objectKeys=objectKeys$2,getOwnPropertyNamesModule=objectGetOwnPropertyNames,getOwnPropertyNamesExternal=objectGetOwnPropertyNamesExternal,getOwnPropertySymbolsModule$1=objectGetOwnPropertySymbols,getOwnPropertyDescriptorModule=objectGetOwnPropertyDescriptor,definePropertyModule=objectDefineProperty,definePropertiesModule=objectDefineProperties,propertyIsEnumerableModule=objectPropertyIsEnumerable,defineBuiltIn$2=defineBuiltIn$6,shared$2=shared$6.exports,sharedKey=sharedKey$4,hiddenKeys=hiddenKeys$5,uid=uid$3,wellKnownSymbol$4=wellKnownSymbol$c,wrappedWellKnownSymbolModule=wellKnownSymbolWrapped,defineWellKnownSymbol$1=wellKnownSymbolDefine,defineSymbolToPrimitive=symbolDefineToPrimitive,setToStringTag$2=setToStringTag$3,InternalStateModule$2=internalState,$forEach=arrayIteration.forEach,HIDDEN=sharedKey("hidden"),SYMBOL="Symbol",PROTOTYPE="prototype",setInternalState$2=InternalStateModule$2.set,getInternalState$2=InternalStateModule$2.getterFor(SYMBOL),ObjectPrototype=Object[PROTOTYPE],$Symbol=global$4.Symbol,SymbolPrototype$1=$Symbol&&$Symbol[PROTOTYPE],TypeError$1=global$4.TypeError,QObject=global$4.QObject,nativeGetOwnPropertyDescriptor=getOwnPropertyDescriptorModule.f,nativeDefineProperty=definePropertyModule.f,nativeGetOwnPropertyNames=getOwnPropertyNamesExternal.f,nativePropertyIsEnumerable=propertyIsEnumerableModule.f,push=uncurryThis$3([].push),AllSymbols=shared$2("symbols"),ObjectPrototypeSymbols=shared$2("op-symbols"),WellKnownSymbolsStore=shared$2("wks"),USE_SETTER=!QObject||!QObject[PROTOTYPE]||!QObject[PROTOTYPE].findChild,setSymbolDescriptor=DESCRIPTORS$2&&fails$3(function(){return nativeObjectCreate(nativeDefineProperty({},"a",{get:function(){return nativeDefineProperty(this,"a",{value:7}).a}})).a!=7})?function(_,_e,et){var tt=nativeGetOwnPropertyDescriptor(ObjectPrototype,_e);tt&&delete ObjectPrototype[_e],nativeDefineProperty(_,_e,et),tt&&_!==ObjectPrototype&&nativeDefineProperty(ObjectPrototype,_e,tt)}:nativeDefineProperty,wrap=function(_,_e){var et=AllSymbols[_]=nativeObjectCreate(SymbolPrototype$1);return setInternalState$2(et,{type:SYMBOL,tag:_,description:_e}),DESCRIPTORS$2||(et.description=_e),et},$defineProperty=function(_e,et,tt){_e===ObjectPrototype&&$defineProperty(ObjectPrototypeSymbols,et,tt),anObject(_e);var rt=toPropertyKey(et);return anObject(tt),hasOwn$3(AllSymbols,rt)?(tt.enumerable?(hasOwn$3(_e,HIDDEN)&&_e[HIDDEN][rt]&&(_e[HIDDEN][rt]=!1),tt=nativeObjectCreate(tt,{enumerable:createPropertyDescriptor$1(0,!1)})):(hasOwn$3(_e,HIDDEN)||nativeDefineProperty(_e,HIDDEN,createPropertyDescriptor$1(1,{})),_e[HIDDEN][rt]=!0),setSymbolDescriptor(_e,rt,tt)):nativeDefineProperty(_e,rt,tt)},$defineProperties=function(_e,et){anObject(_e);var tt=toIndexedObject$1(et),rt=objectKeys(tt).concat($getOwnPropertySymbols(tt));return $forEach(rt,function(nt){(!DESCRIPTORS$2||call$2($propertyIsEnumerable,tt,nt))&&$defineProperty(_e,nt,tt[nt])}),_e},$create=function(_e,et){return et===void 0?nativeObjectCreate(_e):$defineProperties(nativeObjectCreate(_e),et)},$propertyIsEnumerable=function(_e){var et=toPropertyKey(_e),tt=call$2(nativePropertyIsEnumerable,this,et);return this===ObjectPrototype&&hasOwn$3(AllSymbols,et)&&!hasOwn$3(ObjectPrototypeSymbols,et)?!1:tt||!hasOwn$3(this,et)||!hasOwn$3(AllSymbols,et)||hasOwn$3(this,HIDDEN)&&this[HIDDEN][et]?tt:!0},$getOwnPropertyDescriptor=function(_e,et){var tt=toIndexedObject$1(_e),rt=toPropertyKey(et);if(!(tt===ObjectPrototype&&hasOwn$3(AllSymbols,rt)&&!hasOwn$3(ObjectPrototypeSymbols,rt))){var nt=nativeGetOwnPropertyDescriptor(tt,rt);return nt&&hasOwn$3(AllSymbols,rt)&&!(hasOwn$3(tt,HIDDEN)&&tt[HIDDEN][rt])&&(nt.enumerable=!0),nt}},$getOwnPropertyNames=function(_e){var et=nativeGetOwnPropertyNames(toIndexedObject$1(_e)),tt=[];return $forEach(et,function(rt){!hasOwn$3(AllSymbols,rt)&&!hasOwn$3(hiddenKeys,rt)&&push(tt,rt)}),tt},$getOwnPropertySymbols=function(_){var _e=_===ObjectPrototype,et=nativeGetOwnPropertyNames(_e?ObjectPrototypeSymbols:toIndexedObject$1(_)),tt=[];return $forEach(et,function(rt){hasOwn$3(AllSymbols,rt)&&(!_e||hasOwn$3(ObjectPrototype,rt))&&push(tt,AllSymbols[rt])}),tt};NATIVE_SYMBOL$4||($Symbol=function(){if(isPrototypeOf$1(SymbolPrototype$1,this))throw TypeError$1("Symbol is not a constructor");var _e=!arguments.length||arguments[0]===void 0?void 0:$toString(arguments[0]),et=uid(_e),tt=function(rt){this===ObjectPrototype&&call$2(tt,ObjectPrototypeSymbols,rt),hasOwn$3(this,HIDDEN)&&hasOwn$3(this[HIDDEN],et)&&(this[HIDDEN][et]=!1),setSymbolDescriptor(this,et,createPropertyDescriptor$1(1,rt))};return DESCRIPTORS$2&&USE_SETTER&&setSymbolDescriptor(ObjectPrototype,et,{configurable:!0,set:tt}),wrap(et,_e)},SymbolPrototype$1=$Symbol[PROTOTYPE],defineBuiltIn$2(SymbolPrototype$1,"toString",function(){return getInternalState$2(this).tag}),defineBuiltIn$2($Symbol,"withoutSetter",function(_){return wrap(uid(_),_)}),propertyIsEnumerableModule.f=$propertyIsEnumerable,definePropertyModule.f=$defineProperty,definePropertiesModule.f=$defineProperties,getOwnPropertyDescriptorModule.f=$getOwnPropertyDescriptor,getOwnPropertyNamesModule.f=getOwnPropertyNamesExternal.f=$getOwnPropertyNames,getOwnPropertySymbolsModule$1.f=$getOwnPropertySymbols,wrappedWellKnownSymbolModule.f=function(_){return wrap(wellKnownSymbol$4(_),_)},DESCRIPTORS$2&&(nativeDefineProperty(SymbolPrototype$1,"description",{configurable:!0,get:function(){return getInternalState$2(this).description}}),defineBuiltIn$2(ObjectPrototype,"propertyIsEnumerable",$propertyIsEnumerable,{unsafe:!0})));$$6({global:!0,constructor:!0,wrap:!0,forced:!NATIVE_SYMBOL$4,sham:!NATIVE_SYMBOL$4},{Symbol:$Symbol});$forEach(objectKeys(WellKnownSymbolsStore),function(_){defineWellKnownSymbol$1(_)});$$6({target:SYMBOL,stat:!0,forced:!NATIVE_SYMBOL$4},{useSetter:function(){USE_SETTER=!0},useSimple:function(){USE_SETTER=!1}});$$6({target:"Object",stat:!0,forced:!NATIVE_SYMBOL$4,sham:!DESCRIPTORS$2},{create:$create,defineProperty:$defineProperty,defineProperties:$defineProperties,getOwnPropertyDescriptor:$getOwnPropertyDescriptor});$$6({target:"Object",stat:!0,forced:!NATIVE_SYMBOL$4},{getOwnPropertyNames:$getOwnPropertyNames});defineSymbolToPrimitive();setToStringTag$2($Symbol,SYMBOL);hiddenKeys[HIDDEN]=!0;var NATIVE_SYMBOL$3=symbolConstructorDetection,symbolRegistryDetection=NATIVE_SYMBOL$3&&!!Symbol.for&&!!Symbol.keyFor,$$5=_export,getBuiltIn$1=getBuiltIn$9,hasOwn$2=hasOwnProperty_1,toString$5=toString$6,shared$1=shared$6.exports,NATIVE_SYMBOL_REGISTRY$1=symbolRegistryDetection,StringToSymbolRegistry=shared$1("string-to-symbol-registry"),SymbolToStringRegistry$1=shared$1("symbol-to-string-registry");$$5({target:"Symbol",stat:!0,forced:!NATIVE_SYMBOL_REGISTRY$1},{for:function(_){var _e=toString$5(_);if(hasOwn$2(StringToSymbolRegistry,_e))return StringToSymbolRegistry[_e];var et=getBuiltIn$1("Symbol")(_e);return StringToSymbolRegistry[_e]=et,SymbolToStringRegistry$1[et]=_e,et}});var $$4=_export,hasOwn$1=hasOwnProperty_1,isSymbol$3=isSymbol$6,tryToString=tryToString$3,shared=shared$6.exports,NATIVE_SYMBOL_REGISTRY=symbolRegistryDetection,SymbolToStringRegistry=shared("symbol-to-string-registry");$$4({target:"Symbol",stat:!0,forced:!NATIVE_SYMBOL_REGISTRY},{keyFor:function(_e){if(!isSymbol$3(_e))throw TypeError(tryToString(_e)+" is not a symbol");if(hasOwn$1(SymbolToStringRegistry,_e))return SymbolToStringRegistry[_e]}});var $$3=_export,getBuiltIn=getBuiltIn$9,apply$2=functionApply,call$1=functionCall,uncurryThis$2=functionUncurryThis,fails$2=fails$g,isArray$4=isArray$6,isCallable$3=isCallable$i,isObject$b=isObject$k,isSymbol$2=isSymbol$6,arraySlice=arraySlice$3,NATIVE_SYMBOL$2=symbolConstructorDetection,$stringify=getBuiltIn("JSON","stringify"),exec=uncurryThis$2(/./.exec),charAt$2=uncurryThis$2("".charAt),charCodeAt$1=uncurryThis$2("".charCodeAt),replace$1=uncurryThis$2("".replace),numberToString=uncurryThis$2(1 .toString),tester=/[\uD800-\uDFFF]/g,low=/^[\uD800-\uDBFF]$/,hi=/^[\uDC00-\uDFFF]$/,WRONG_SYMBOLS_CONVERSION=!NATIVE_SYMBOL$2||fails$2(function(){var _=getBuiltIn("Symbol")();return $stringify([_])!="[null]"||$stringify({a:_})!="{}"||$stringify(Object(_))!="{}"}),ILL_FORMED_UNICODE=fails$2(function(){return $stringify("\uDF06\uD834")!=='"\\udf06\\ud834"'||$stringify("\uDEAD")!=='"\\udead"'}),stringifyWithSymbolsFix=function(_,_e){var et=arraySlice(arguments),tt=_e;if(!(!isObject$b(_e)&&_===void 0||isSymbol$2(_)))return isArray$4(_e)||(_e=function(rt,nt){if(isCallable$3(tt)&&(nt=call$1(tt,this,rt,nt)),!isSymbol$2(nt))return nt}),et[1]=_e,apply$2($stringify,null,et)},fixIllFormed=function(_,_e,et){var tt=charAt$2(et,_e-1),rt=charAt$2(et,_e+1);return exec(low,_)&&!exec(hi,rt)||exec(hi,_)&&!exec(low,tt)?"\\u"+numberToString(charCodeAt$1(_,0),16):_};$stringify&&$$3({target:"JSON",stat:!0,arity:3,forced:WRONG_SYMBOLS_CONVERSION||ILL_FORMED_UNICODE},{stringify:function(_e,et,tt){var rt=arraySlice(arguments),nt=apply$2(WRONG_SYMBOLS_CONVERSION?stringifyWithSymbolsFix:$stringify,null,rt);return ILL_FORMED_UNICODE&&typeof nt=="string"?replace$1(nt,tester,fixIllFormed):nt}});var $$2=_export,NATIVE_SYMBOL$1=symbolConstructorDetection,fails$1=fails$g,getOwnPropertySymbolsModule=objectGetOwnPropertySymbols,toObject=toObject$5,FORCED=!NATIVE_SYMBOL$1||fails$1(function(){getOwnPropertySymbolsModule.f(1)});$$2({target:"Object",stat:!0,forced:FORCED},{getOwnPropertySymbols:function(_e){var et=getOwnPropertySymbolsModule.f;return et?et(toObject(_e)):[]}});var $$1=_export,DESCRIPTORS$1=descriptors,global$3=global$f,uncurryThis$1=functionUncurryThis,hasOwn=hasOwnProperty_1,isCallable$2=isCallable$i,isPrototypeOf=objectIsPrototypeOf,toString$4=toString$6,defineProperty$5=objectDefineProperty.f,copyConstructorProperties=copyConstructorProperties$2,NativeSymbol=global$3.Symbol,SymbolPrototype=NativeSymbol&&NativeSymbol.prototype;if(DESCRIPTORS$1&&isCallable$2(NativeSymbol)&&(!("description"in SymbolPrototype)||NativeSymbol().description!==void 0)){var EmptyStringDescriptionStore={},SymbolWrapper=function(){var _e=arguments.length<1||arguments[0]===void 0?void 0:toString$4(arguments[0]),et=isPrototypeOf(SymbolPrototype,this)?new NativeSymbol(_e):_e===void 0?NativeSymbol():NativeSymbol(_e);return _e===""&&(EmptyStringDescriptionStore[et]=!0),et};copyConstructorProperties(SymbolWrapper,NativeSymbol),SymbolWrapper.prototype=SymbolPrototype,SymbolPrototype.constructor=SymbolWrapper;var NATIVE_SYMBOL=String(NativeSymbol("test"))=="Symbol(test)",thisSymbolValue=uncurryThis$1(SymbolPrototype.valueOf),symbolDescriptiveString=uncurryThis$1(SymbolPrototype.toString),regexp=/^Symbol\((.*)\)[^)]+$/,replace=uncurryThis$1("".replace),stringSlice$1=uncurryThis$1("".slice);defineProperty$5(SymbolPrototype,"description",{configurable:!0,get:function(){var _e=thisSymbolValue(this);if(hasOwn(EmptyStringDescriptionStore,_e))return"";var et=symbolDescriptiveString(_e),tt=NATIVE_SYMBOL?stringSlice$1(et,7,-1):replace(et,regexp,"$1");return tt===""?void 0:tt}}),$$1({global:!0,constructor:!0,forced:!0},{Symbol:SymbolWrapper})}var defineWellKnownSymbol=wellKnownSymbolDefine;defineWellKnownSymbol("iterator");var wellKnownSymbol$3=wellKnownSymbol$c,create$1=objectCreate$1,defineProperty$4=objectDefineProperty.f,UNSCOPABLES=wellKnownSymbol$3("unscopables"),ArrayPrototype=Array.prototype;ArrayPrototype[UNSCOPABLES]==null&&defineProperty$4(ArrayPrototype,UNSCOPABLES,{configurable:!0,value:create$1(null)});var addToUnscopables$1=function(_){ArrayPrototype[UNSCOPABLES][_]=!0},iterators={},fails=fails$g,isCallable$1=isCallable$i,isObject$a=isObject$k,getPrototypeOf$1=objectGetPrototypeOf,defineBuiltIn$1=defineBuiltIn$6,wellKnownSymbol$2=wellKnownSymbol$c,ITERATOR$2=wellKnownSymbol$2("iterator"),BUGGY_SAFARI_ITERATORS$1=!1,IteratorPrototype$2,PrototypeOfArrayIteratorPrototype,arrayIterator;[].keys&&(arrayIterator=[].keys(),"next"in arrayIterator?(PrototypeOfArrayIteratorPrototype=getPrototypeOf$1(getPrototypeOf$1(arrayIterator)),PrototypeOfArrayIteratorPrototype!==Object.prototype&&(IteratorPrototype$2=PrototypeOfArrayIteratorPrototype)):BUGGY_SAFARI_ITERATORS$1=!0);var NEW_ITERATOR_PROTOTYPE=!isObject$a(IteratorPrototype$2)||fails(function(){var _={};return IteratorPrototype$2[ITERATOR$2].call(_)!==_});NEW_ITERATOR_PROTOTYPE&&(IteratorPrototype$2={});isCallable$1(IteratorPrototype$2[ITERATOR$2])||defineBuiltIn$1(IteratorPrototype$2,ITERATOR$2,function(){return this});var iteratorsCore={IteratorPrototype:IteratorPrototype$2,BUGGY_SAFARI_ITERATORS:BUGGY_SAFARI_ITERATORS$1},IteratorPrototype$1=iteratorsCore.IteratorPrototype,create=objectCreate$1,createPropertyDescriptor=createPropertyDescriptor$5,setToStringTag$1=setToStringTag$3,Iterators$2=iterators,returnThis$1=function(){return this},iteratorCreateConstructor=function(_,_e,et,tt){var rt=_e+" Iterator";return _.prototype=create(IteratorPrototype$1,{next:createPropertyDescriptor(+!tt,et)}),setToStringTag$1(_,rt,!1),Iterators$2[rt]=returnThis$1,_},$=_export,call=functionCall,FunctionName=functionName,isCallable=isCallable$i,createIteratorConstructor=iteratorCreateConstructor,getPrototypeOf=objectGetPrototypeOf,setPrototypeOf=objectSetPrototypeOf,setToStringTag=setToStringTag$3,createNonEnumerableProperty$1=createNonEnumerableProperty$4,defineBuiltIn=defineBuiltIn$6,wellKnownSymbol$1=wellKnownSymbol$c,Iterators$1=iterators,IteratorsCore=iteratorsCore,PROPER_FUNCTION_NAME=FunctionName.PROPER,CONFIGURABLE_FUNCTION_NAME=FunctionName.CONFIGURABLE,IteratorPrototype=IteratorsCore.IteratorPrototype,BUGGY_SAFARI_ITERATORS=IteratorsCore.BUGGY_SAFARI_ITERATORS,ITERATOR$1=wellKnownSymbol$1("iterator"),KEYS="keys",VALUES="values",ENTRIES="entries",returnThis=function(){return this},iteratorDefine=function(_,_e,et,tt,rt,nt,at){createIteratorConstructor(et,_e,tt);var it=function(ut){if(ut===rt&&ct)return ct;if(!BUGGY_SAFARI_ITERATORS&&ut in lt)return lt[ut];switch(ut){case KEYS:return function(){return new et(this,ut)};case VALUES:return function(){return new et(this,ut)};case ENTRIES:return function(){return new et(this,ut)}}return function(){return new et(this)}},ot=_e+" Iterator",st=!1,lt=_.prototype,gt=lt[ITERATOR$1]||lt["@@iterator"]||rt&&lt[rt],ct=!BUGGY_SAFARI_ITERATORS&&gt||it(rt),wt=_e=="Array"&&lt.entries||gt,Tt,Rt,ht;if(wt&&(Tt=getPrototypeOf(wt.call(new _)),Tt!==Object.prototype&&Tt.next&&(getPrototypeOf(Tt)!==IteratorPrototype&&(setPrototypeOf?setPrototypeOf(Tt,IteratorPrototype):isCallable(Tt[ITERATOR$1])||defineBuiltIn(Tt,ITERATOR$1,returnThis)),setToStringTag(Tt,ot,!0))),PROPER_FUNCTION_NAME&&rt==VALUES&&gt&&gt.name!==VALUES&&(CONFIGURABLE_FUNCTION_NAME?createNonEnumerableProperty$1(lt,"name",VALUES):(st=!0,ct=function(){return call(gt,this)})),rt)if(Rt={values:it(VALUES),keys:nt?ct:it(KEYS),entries:it(ENTRIES)},at)for(ht in Rt)(BUGGY_SAFARI_ITERATORS||st||!(ht in lt))&&defineBuiltIn(lt,ht,Rt[ht]);else $({target:_e,proto:!0,forced:BUGGY_SAFARI_ITERATORS||st},Rt);return lt[ITERATOR$1]!==ct&&defineBuiltIn(lt,ITERATOR$1,ct,{name:rt}),Iterators$1[_e]=ct,Rt},createIterResultObject$2=function(_,_e){return{value:_,done:_e}},toIndexedObject=toIndexedObject$7,addToUnscopables=addToUnscopables$1,Iterators=iterators,InternalStateModule$1=internalState,defineProperty$3=objectDefineProperty.f,defineIterator$1=iteratorDefine,createIterResultObject$1=createIterResultObject$2,DESCRIPTORS=descriptors,ARRAY_ITERATOR="Array Iterator",setInternalState$1=InternalStateModule$1.set,getInternalState$1=InternalStateModule$1.getterFor(ARRAY_ITERATOR),es_array_iterator=defineIterator$1(Array,"Array",function(_,_e){setInternalState$1(this,{type:ARRAY_ITERATOR,target:toIndexedObject(_),index:0,kind:_e})},function(){var _=getInternalState$1(this),_e=_.target,et=_.kind,tt=_.index++;return!_e||tt>=_e.length?(_.target=void 0,createIterResultObject$1(void 0,!0)):et=="keys"?createIterResultObject$1(tt,!1):et=="values"?createIterResultObject$1(_e[tt],!1):createIterResultObject$1([tt,_e[tt]],!1)},"values"),values=Iterators.Arguments=Iterators.Array;addToUnscopables("keys");addToUnscopables("values");addToUnscopables("entries");if(DESCRIPTORS&&values.name!=="values")try{defineProperty$3(values,"name",{value:"values"})}catch{}var uncurryThis=functionUncurryThis,toIntegerOrInfinity=toIntegerOrInfinity$3,toString$3=toString$6,requireObjectCoercible=requireObjectCoercible$3,charAt$1=uncurryThis("".charAt),charCodeAt=uncurryThis("".charCodeAt),stringSlice=uncurryThis("".slice),createMethod=function(_){return function(_e,et){var tt=toString$3(requireObjectCoercible(_e)),rt=toIntegerOrInfinity(et),nt=tt.length,at,it;return rt<0||rt>=nt?_?"":void 0:(at=charCodeAt(tt,rt),at<55296||at>56319||rt+1===nt||(it=charCodeAt(tt,rt+1))<56320||it>57343?_?charAt$1(tt,rt):at:_?stringSlice(tt,rt,rt+2):(at-55296<<10)+(it-56320)+65536)}},stringMultibyte={codeAt:createMethod(!1),charAt:createMethod(!0)},charAt=stringMultibyte.charAt,toString$2=toString$6,InternalStateModule=internalState,defineIterator=iteratorDefine,createIterResultObject=createIterResultObject$2,STRING_ITERATOR="String Iterator",setInternalState=InternalStateModule.set,getInternalState=InternalStateModule.getterFor(STRING_ITERATOR);defineIterator(String,"String",function(_){setInternalState(this,{type:STRING_ITERATOR,string:toString$2(_),index:0})},function(){var _e=getInternalState(this),et=_e.string,tt=_e.index,rt;return tt>=et.length?createIterResultObject(void 0,!0):(rt=charAt(et,tt),_e.index+=rt.length,createIterResultObject(rt,!1))});var domIterables={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},documentCreateElement=documentCreateElement$2,classList=documentCreateElement("span").classList,DOMTokenListPrototype$1=classList&&classList.constructor&&classList.constructor.prototype,domTokenListPrototype=DOMTokenListPrototype$1===Object.prototype?void 0:DOMTokenListPrototype$1,global$2=global$f,DOMIterables=domIterables,DOMTokenListPrototype=domTokenListPrototype,ArrayIteratorMethods=es_array_iterator,createNonEnumerableProperty=createNonEnumerableProperty$4,wellKnownSymbol=wellKnownSymbol$c,ITERATOR=wellKnownSymbol("iterator"),TO_STRING_TAG=wellKnownSymbol("toStringTag"),ArrayValues=ArrayIteratorMethods.values,handlePrototype=function(_,_e){if(_){if(_[ITERATOR]!==ArrayValues)try{createNonEnumerableProperty(_,ITERATOR,ArrayValues)}catch{_[ITERATOR]=ArrayValues}if(_[TO_STRING_TAG]||createNonEnumerableProperty(_,TO_STRING_TAG,_e),DOMIterables[_e]){for(var et in ArrayIteratorMethods)if(_[et]!==ArrayIteratorMethods[et])try{createNonEnumerableProperty(_,et,ArrayIteratorMethods[et])}catch{_[et]=ArrayIteratorMethods[et]}}}};for(var COLLECTION_NAME in DOMIterables)handlePrototype(global$2[COLLECTION_NAME]&&global$2[COLLECTION_NAME].prototype,COLLECTION_NAME);handlePrototype(DOMTokenListPrototype,"DOMTokenList");var freeGlobal$1=typeof commonjsGlobal$1=="object"&&commonjsGlobal$1&&commonjsGlobal$1.Object===Object&&commonjsGlobal$1,_freeGlobal=freeGlobal$1,freeGlobal=_freeGlobal,freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root$b=freeGlobal||freeSelf||Function("return this")(),_root=root$b,root$a=_root,Symbol$4=root$a.Symbol,_Symbol=Symbol$4,Symbol$3=_Symbol,objectProto$d=Object.prototype,hasOwnProperty$a=objectProto$d.hasOwnProperty,nativeObjectToString$1=objectProto$d.toString,symToStringTag$1=Symbol$3?Symbol$3.toStringTag:void 0;function getRawTag$1(_){var _e=hasOwnProperty$a.call(_,symToStringTag$1),et=_[symToStringTag$1];try{_[symToStringTag$1]=void 0;var tt=!0}catch{}var rt=nativeObjectToString$1.call(_);return tt&&(_e?_[symToStringTag$1]=et:delete _[symToStringTag$1]),rt}var _getRawTag=getRawTag$1,objectProto$c=Object.prototype,nativeObjectToString=objectProto$c.toString;function objectToString$1(_){return nativeObjectToString.call(_)}var _objectToString=objectToString$1,Symbol$2=_Symbol,getRawTag=_getRawTag,objectToString=_objectToString,nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol$2?Symbol$2.toStringTag:void 0;function baseGetTag$5(_){return _==null?_===void 0?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(_)?getRawTag(_):objectToString(_)}var _baseGetTag=baseGetTag$5;function isObject$9(_){var _e=typeof _;return _!=null&&(_e=="object"||_e=="function")}var isObject_1=isObject$9,baseGetTag$4=_baseGetTag,isObject$8=isObject_1,asyncTag="[object AsyncFunction]",funcTag$2="[object Function]",genTag$1="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction$2(_){if(!isObject$8(_))return!1;var _e=baseGetTag$4(_);return _e==funcTag$2||_e==genTag$1||_e==asyncTag||_e==proxyTag}var isFunction_1=isFunction$2,root$9=_root,coreJsData$1=root$9["__core-js_shared__"],_coreJsData=coreJsData$1,coreJsData=_coreJsData,maskSrcKey=function(){var _=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return _?"Symbol(src)_1."+_:""}();function isMasked$1(_){return!!maskSrcKey&&maskSrcKey in _}var _isMasked=isMasked$1,funcProto$1=Function.prototype,funcToString$1=funcProto$1.toString;function toSource$2(_){if(_!=null){try{return funcToString$1.call(_)}catch{}try{return _+""}catch{}}return""}var _toSource=toSource$2,isFunction$1=isFunction_1,isMasked=_isMasked,isObject$7=isObject_1,toSource$1=_toSource,reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto=Function.prototype,objectProto$b=Object.prototype,funcToString=funcProto.toString,hasOwnProperty$9=objectProto$b.hasOwnProperty,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty$9).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative$1(_){if(!isObject$7(_)||isMasked(_))return!1;var _e=isFunction$1(_)?reIsNative:reIsHostCtor;return _e.test(toSource$1(_))}var _baseIsNative=baseIsNative$1;function getValue$1(_,_e){return _==null?void 0:_[_e]}var _getValue=getValue$1,baseIsNative=_baseIsNative,getValue=_getValue;function getNative$7(_,_e){var et=getValue(_,_e);return baseIsNative(et)?et:void 0}var _getNative=getNative$7,getNative$6=_getNative,defineProperty$2=function(){try{var _=getNative$6(Object,"defineProperty");return _({},"",{}),_}catch{}}(),_defineProperty$1=defineProperty$2,defineProperty$1=_defineProperty$1;function baseAssignValue$2(_,_e,et){_e=="__proto__"&&defineProperty$1?defineProperty$1(_,_e,{configurable:!0,enumerable:!0,value:et,writable:!0}):_[_e]=et}var _baseAssignValue=baseAssignValue$2;function eq$3(_,_e){return _===_e||_!==_&&_e!==_e}var eq_1=eq$3,baseAssignValue$1=_baseAssignValue,eq$2=eq_1,objectProto$a=Object.prototype,hasOwnProperty$8=objectProto$a.hasOwnProperty;function assignValue$3(_,_e,et){var tt=_[_e];(!(hasOwnProperty$8.call(_,_e)&&eq$2(tt,et))||et===void 0&&!(_e in _))&&baseAssignValue$1(_,_e,et)}var _assignValue=assignValue$3,assignValue$2=_assignValue,baseAssignValue=_baseAssignValue;function copyObject$5(_,_e,et,tt){var rt=!et;et||(et={});for(var nt=-1,at=_e.length;++nt<at;){var it=_e[nt],ot=tt?tt(et[it],_[it],it,et,_):void 0;ot===void 0&&(ot=_[it]),rt?baseAssignValue(et,it,ot):assignValue$2(et,it,ot)}return et}var _copyObject=copyObject$5;function identity$2(_){return _}var identity_1=identity$2;function apply$1(_,_e,et){switch(et.length){case 0:return _.call(_e);case 1:return _.call(_e,et[0]);case 2:return _.call(_e,et[0],et[1]);case 3:return _.call(_e,et[0],et[1],et[2])}return _.apply(_e,et)}var _apply=apply$1,apply=_apply,nativeMax$1=Math.max;function overRest$1(_,_e,et){return _e=nativeMax$1(_e===void 0?_.length-1:_e,0),function(){for(var tt=arguments,rt=-1,nt=nativeMax$1(tt.length-_e,0),at=Array(nt);++rt<nt;)at[rt]=tt[_e+rt];rt=-1;for(var it=Array(_e+1);++rt<_e;)it[rt]=tt[rt];return it[_e]=et(at),apply(_,this,it)}}var _overRest=overRest$1;function constant$1(_){return function(){return _}}var constant_1=constant$1,constant=constant_1,defineProperty=_defineProperty$1,identity$1=identity_1,baseSetToString$1=defineProperty?function(_,_e){return defineProperty(_,"toString",{configurable:!0,enumerable:!1,value:constant(_e),writable:!0})}:identity$1,_baseSetToString=baseSetToString$1,HOT_COUNT=800,HOT_SPAN=16,nativeNow=Date.now;function shortOut$1(_){var _e=0,et=0;return function(){var tt=nativeNow(),rt=HOT_SPAN-(tt-et);if(et=tt,rt>0){if(++_e>=HOT_COUNT)return arguments[0]}else _e=0;return _.apply(void 0,arguments)}}var _shortOut=shortOut$1,baseSetToString=_baseSetToString,shortOut=_shortOut,setToString$1=shortOut(baseSetToString),_setToString=setToString$1,identity=identity_1,overRest=_overRest,setToString=_setToString;function baseRest$1(_,_e){return setToString(overRest(_,_e,identity),_+"")}var _baseRest=baseRest$1,MAX_SAFE_INTEGER$1=9007199254740991;function isLength$2(_){return typeof _=="number"&&_>-1&&_%1==0&&_<=MAX_SAFE_INTEGER$1}var isLength_1=isLength$2,isFunction=isFunction_1,isLength$1=isLength_1;function isArrayLike$4(_){return _!=null&&isLength$1(_.length)&&!isFunction(_)}var isArrayLike_1=isArrayLike$4,MAX_SAFE_INTEGER=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex$2(_,_e){var et=typeof _;return _e=_e??MAX_SAFE_INTEGER,!!_e&&(et=="number"||et!="symbol"&&reIsUint.test(_))&&_>-1&&_%1==0&&_<_e}var _isIndex=isIndex$2,eq$1=eq_1,isArrayLike$3=isArrayLike_1,isIndex$1=_isIndex,isObject$6=isObject_1;function isIterateeCall$1(_,_e,et){if(!isObject$6(et))return!1;var tt=typeof _e;return(tt=="number"?isArrayLike$3(et)&&isIndex$1(_e,et.length):tt=="string"&&_e in et)?eq$1(et[_e],_):!1}var _isIterateeCall=isIterateeCall$1,baseRest=_baseRest,isIterateeCall=_isIterateeCall;function createAssigner$1(_){return baseRest(function(_e,et){var tt=-1,rt=et.length,nt=rt>1?et[rt-1]:void 0,at=rt>2?et[2]:void 0;for(nt=_.length>3&&typeof nt=="function"?(rt--,nt):void 0,at&&isIterateeCall(et[0],et[1],at)&&(nt=rt<3?void 0:nt,rt=1),_e=Object(_e);++tt<rt;){var it=et[tt];it&&_(_e,it,tt,nt)}return _e})}var _createAssigner=createAssigner$1,objectProto$9=Object.prototype;function isPrototype$4(_){var _e=_&&_.constructor,et=typeof _e=="function"&&_e.prototype||objectProto$9;return _===et}var _isPrototype=isPrototype$4;function baseTimes$1(_,_e){for(var et=-1,tt=Array(_);++et<_;)tt[et]=_e(et);return tt}var _baseTimes=baseTimes$1;function isObjectLike$6(_){return _!=null&&typeof _=="object"}var isObjectLike_1=isObjectLike$6,baseGetTag$3=_baseGetTag,isObjectLike$5=isObjectLike_1,argsTag$2="[object Arguments]";function baseIsArguments$1(_){return isObjectLike$5(_)&&baseGetTag$3(_)==argsTag$2}var _baseIsArguments=baseIsArguments$1,baseIsArguments=_baseIsArguments,isObjectLike$4=isObjectLike_1,objectProto$8=Object.prototype,hasOwnProperty$7=objectProto$8.hasOwnProperty,propertyIsEnumerable$1=objectProto$8.propertyIsEnumerable,isArguments$1=baseIsArguments(function(){return arguments}())?baseIsArguments:function(_){return isObjectLike$4(_)&&hasOwnProperty$7.call(_,"callee")&&!propertyIsEnumerable$1.call(_,"callee")},isArguments_1=isArguments$1,isArray$3=Array.isArray,isArray_1=isArray$3,isBuffer$2={exports:{}};function stubFalse(){return!1}var stubFalse_1=stubFalse;(function(_,_e){var et=_root,tt=stubFalse_1,rt=_e&&!_e.nodeType&&_e,nt=rt&&!0&&_&&!_.nodeType&&_,at=nt&&nt.exports===rt,it=at?et.Buffer:void 0,ot=it?it.isBuffer:void 0,st=ot||tt;_.exports=st})(isBuffer$2,isBuffer$2.exports);var baseGetTag$2=_baseGetTag,isLength=isLength_1,isObjectLike$3=isObjectLike_1,argsTag$1="[object Arguments]",arrayTag$1="[object Array]",boolTag$2="[object Boolean]",dateTag$2="[object Date]",errorTag$1="[object Error]",funcTag$1="[object Function]",mapTag$4="[object Map]",numberTag$2="[object Number]",objectTag$2="[object Object]",regexpTag$2="[object RegExp]",setTag$4="[object Set]",stringTag$2="[object String]",weakMapTag$2="[object WeakMap]",arrayBufferTag$2="[object ArrayBuffer]",dataViewTag$3="[object DataView]",float32Tag$2="[object Float32Array]",float64Tag$2="[object Float64Array]",int8Tag$2="[object Int8Array]",int16Tag$2="[object Int16Array]",int32Tag$2="[object Int32Array]",uint8Tag$2="[object Uint8Array]",uint8ClampedTag$2="[object Uint8ClampedArray]",uint16Tag$2="[object Uint16Array]",uint32Tag$2="[object Uint32Array]",typedArrayTags={};typedArrayTags[float32Tag$2]=typedArrayTags[float64Tag$2]=typedArrayTags[int8Tag$2]=typedArrayTags[int16Tag$2]=typedArrayTags[int32Tag$2]=typedArrayTags[uint8Tag$2]=typedArrayTags[uint8ClampedTag$2]=typedArrayTags[uint16Tag$2]=typedArrayTags[uint32Tag$2]=!0;typedArrayTags[argsTag$1]=typedArrayTags[arrayTag$1]=typedArrayTags[arrayBufferTag$2]=typedArrayTags[boolTag$2]=typedArrayTags[dataViewTag$3]=typedArrayTags[dateTag$2]=typedArrayTags[errorTag$1]=typedArrayTags[funcTag$1]=typedArrayTags[mapTag$4]=typedArrayTags[numberTag$2]=typedArrayTags[objectTag$2]=typedArrayTags[regexpTag$2]=typedArrayTags[setTag$4]=typedArrayTags[stringTag$2]=typedArrayTags[weakMapTag$2]=!1;function baseIsTypedArray$1(_){return isObjectLike$3(_)&&isLength(_.length)&&!!typedArrayTags[baseGetTag$2(_)]}var _baseIsTypedArray=baseIsTypedArray$1;function baseUnary$3(_){return function(_e){return _(_e)}}var _baseUnary=baseUnary$3,_nodeUtil={exports:{}};(function(_,_e){var et=_freeGlobal,tt=_e&&!_e.nodeType&&_e,rt=tt&&!0&&_&&!_.nodeType&&_,nt=rt&&rt.exports===tt,at=nt&&et.process,it=function(){try{var ot=rt&&rt.require&&rt.require("util").types;return ot||at&&at.binding&&at.binding("util")}catch{}}();_.exports=it})(_nodeUtil,_nodeUtil.exports);var baseIsTypedArray=_baseIsTypedArray,baseUnary$2=_baseUnary,nodeUtil$2=_nodeUtil.exports,nodeIsTypedArray=nodeUtil$2&&nodeUtil$2.isTypedArray,isTypedArray$1=nodeIsTypedArray?baseUnary$2(nodeIsTypedArray):baseIsTypedArray,isTypedArray_1=isTypedArray$1,baseTimes=_baseTimes,isArguments=isArguments_1,isArray$2=isArray_1,isBuffer$1=isBuffer$2.exports,isIndex=_isIndex,isTypedArray=isTypedArray_1,objectProto$7=Object.prototype,hasOwnProperty$6=objectProto$7.hasOwnProperty;function arrayLikeKeys$2(_,_e){var et=isArray$2(_),tt=!et&&isArguments(_),rt=!et&&!tt&&isBuffer$1(_),nt=!et&&!tt&&!rt&&isTypedArray(_),at=et||tt||rt||nt,it=at?baseTimes(_.length,String):[],ot=it.length;for(var st in _)(_e||hasOwnProperty$6.call(_,st))&&!(at&&(st=="length"||rt&&(st=="offset"||st=="parent")||nt&&(st=="buffer"||st=="byteLength"||st=="byteOffset")||isIndex(st,ot)))&&it.push(st);return it}var _arrayLikeKeys=arrayLikeKeys$2;function overArg$2(_,_e){return function(et){return _(_e(et))}}var _overArg=overArg$2,overArg$1=_overArg,nativeKeys$1=overArg$1(Object.keys,Object),_nativeKeys=nativeKeys$1,isPrototype$3=_isPrototype,nativeKeys=_nativeKeys,objectProto$6=Object.prototype,hasOwnProperty$5=objectProto$6.hasOwnProperty;function baseKeys$1(_){if(!isPrototype$3(_))return nativeKeys(_);var _e=[];for(var et in Object(_))hasOwnProperty$5.call(_,et)&&et!="constructor"&&_e.push(et);return _e}var _baseKeys=baseKeys$1,arrayLikeKeys$1=_arrayLikeKeys,baseKeys=_baseKeys,isArrayLike$2=isArrayLike_1;function keys$4(_){return isArrayLike$2(_)?arrayLikeKeys$1(_):baseKeys(_)}var keys_1=keys$4,assignValue$1=_assignValue,copyObject$4=_copyObject,createAssigner=_createAssigner,isArrayLike$1=isArrayLike_1,isPrototype$2=_isPrototype,keys$3=keys_1,objectProto$5=Object.prototype,hasOwnProperty$4=objectProto$5.hasOwnProperty,assign$1=createAssigner(function(_,_e){if(isPrototype$2(_e)||isArrayLike$1(_e)){copyObject$4(_e,keys$3(_e),_);return}for(var et in _e)hasOwnProperty$4.call(_e,et)&&assignValue$1(_,et,_e[et])}),assign_1=assign$1,eventemitter3={exports:{}};(function(_){var _e=Object.prototype.hasOwnProperty,et="~";function tt(){}Object.create&&(tt.prototype=Object.create(null),new tt().__proto__||(et=!1));function rt(ot,st,lt){this.fn=ot,this.context=st,this.once=lt||!1}function nt(ot,st,lt,gt,ct){if(typeof lt!="function")throw new TypeError("The listener must be a function");var wt=new rt(lt,gt||ot,ct),Tt=et?et+st:st;return ot._events[Tt]?ot._events[Tt].fn?ot._events[Tt]=[ot._events[Tt],wt]:ot._events[Tt].push(wt):(ot._events[Tt]=wt,ot._eventsCount++),ot}function at(ot,st){--ot._eventsCount===0?ot._events=new tt:delete ot._events[st]}function it(){this._events=new tt,this._eventsCount=0}it.prototype.eventNames=function(){var st=[],lt,gt;if(this._eventsCount===0)return st;for(gt in lt=this._events)_e.call(lt,gt)&&st.push(et?gt.slice(1):gt);return Object.getOwnPropertySymbols?st.concat(Object.getOwnPropertySymbols(lt)):st},it.prototype.listeners=function(st){var lt=et?et+st:st,gt=this._events[lt];if(!gt)return[];if(gt.fn)return[gt.fn];for(var ct=0,wt=gt.length,Tt=new Array(wt);ct<wt;ct++)Tt[ct]=gt[ct].fn;return Tt},it.prototype.listenerCount=function(st){var lt=et?et+st:st,gt=this._events[lt];return gt?gt.fn?1:gt.length:0},it.prototype.emit=function(st,lt,gt,ct,wt,Tt){var Rt=et?et+st:st;if(!this._events[Rt])return!1;var ht=this._events[Rt],ut=arguments.length,ft,yt;if(ht.fn){switch(ht.once&&this.removeListener(st,ht.fn,void 0,!0),ut){case 1:return ht.fn.call(ht.context),!0;case 2:return ht.fn.call(ht.context,lt),!0;case 3:return ht.fn.call(ht.context,lt,gt),!0;case 4:return ht.fn.call(ht.context,lt,gt,ct),!0;case 5:return ht.fn.call(ht.context,lt,gt,ct,wt),!0;case 6:return ht.fn.call(ht.context,lt,gt,ct,wt,Tt),!0}for(yt=1,ft=new Array(ut-1);yt<ut;yt++)ft[yt-1]=arguments[yt];ht.fn.apply(ht.context,ft)}else{var xt=ht.length,Ct;for(yt=0;yt<xt;yt++)switch(ht[yt].once&&this.removeListener(st,ht[yt].fn,void 0,!0),ut){case 1:ht[yt].fn.call(ht[yt].context);break;case 2:ht[yt].fn.call(ht[yt].context,lt);break;case 3:ht[yt].fn.call(ht[yt].context,lt,gt);break;case 4:ht[yt].fn.call(ht[yt].context,lt,gt,ct);break;default:if(!ft)for(Ct=1,ft=new Array(ut-1);Ct<ut;Ct++)ft[Ct-1]=arguments[Ct];ht[yt].fn.apply(ht[yt].context,ft)}}return!0},it.prototype.on=function(st,lt,gt){return nt(this,st,lt,gt,!1)},it.prototype.once=function(st,lt,gt){return nt(this,st,lt,gt,!0)},it.prototype.removeListener=function(st,lt,gt,ct){var wt=et?et+st:st;if(!this._events[wt])return this;if(!lt)return at(this,wt),this;var Tt=this._events[wt];if(Tt.fn)Tt.fn===lt&&(!ct||Tt.once)&&(!gt||Tt.context===gt)&&at(this,wt);else{for(var Rt=0,ht=[],ut=Tt.length;Rt<ut;Rt++)(Tt[Rt].fn!==lt||ct&&!Tt[Rt].once||gt&&Tt[Rt].context!==gt)&&ht.push(Tt[Rt]);ht.length?this._events[wt]=ht.length===1?ht[0]:ht:at(this,wt)}return this},it.prototype.removeAllListeners=function(st){var lt;return st?(lt=et?et+st:st,this._events[lt]&&at(this,lt)):(this._events=new tt,this._eventsCount=0),this},it.prototype.off=it.prototype.removeListener,it.prototype.addListener=it.prototype.on,it.prefixed=et,it.EventEmitter=it,_.exports=it})(eventemitter3);const EventEmitter$1=eventemitter3.exports;var passiveSupported=!1;if(typeof window<"u")try{var options$1=Object.defineProperty({},"passive",{get:function(){passiveSupported=!0}});window.addEventListener("test",null,options$1),window.removeEventListener("test",null,options$1)}catch{}const supportPassiveEvent$1=passiveSupported,globalVars={connections:{},EE:new EventEmitter$1,enableResizeInfo:!1,enableScrollInfo:!1,listeners:{},removers:[],supportPassiveEvent:supportPassiveEvent$1};var supportPassiveEvent=globalVars.supportPassiveEvent,defaultEventOption={capture:!1,passive:!1};function listen(_,_e,et,tt){var rt="addEventListener",nt="removeEventListener",at=_e,it=supportPassiveEvent?assign_1({},defaultEventOption,tt):!1;return!_.addEventListener&&_.attachEvent&&(rt="attachEvent",nt="detachEvent",at="on"+_e),_[rt](at,et,it),{remove:function(){_[nt](_e,et)}}}var leIE8=!1;if(typeof navigator<"u"){var matches=navigator.userAgent.match(/MSIE (\d+\.\d+)/);matches&&(leIE8=parseFloat(matches[1],10)<9)}const leIE8$1=leIE8;function listCacheClear$1(){this.__data__=[],this.size=0}var _listCacheClear=listCacheClear$1,eq=eq_1;function assocIndexOf$4(_,_e){for(var et=_.length;et--;)if(eq(_[et][0],_e))return et;return-1}var _assocIndexOf=assocIndexOf$4,assocIndexOf$3=_assocIndexOf,arrayProto=Array.prototype,splice=arrayProto.splice;function listCacheDelete$1(_){var _e=this.__data__,et=assocIndexOf$3(_e,_);if(et<0)return!1;var tt=_e.length-1;return et==tt?_e.pop():splice.call(_e,et,1),--this.size,!0}var _listCacheDelete=listCacheDelete$1,assocIndexOf$2=_assocIndexOf;function listCacheGet$1(_){var _e=this.__data__,et=assocIndexOf$2(_e,_);return et<0?void 0:_e[et][1]}var _listCacheGet=listCacheGet$1,assocIndexOf$1=_assocIndexOf;function listCacheHas$1(_){return assocIndexOf$1(this.__data__,_)>-1}var _listCacheHas=listCacheHas$1,assocIndexOf=_assocIndexOf;function listCacheSet$1(_,_e){var et=this.__data__,tt=assocIndexOf(et,_);return tt<0?(++this.size,et.push([_,_e])):et[tt][1]=_e,this}var _listCacheSet=listCacheSet$1,listCacheClear=_listCacheClear,listCacheDelete=_listCacheDelete,listCacheGet=_listCacheGet,listCacheHas=_listCacheHas,listCacheSet=_listCacheSet;function ListCache$4(_){var _e=-1,et=_==null?0:_.length;for(this.clear();++_e<et;){var tt=_[_e];this.set(tt[0],tt[1])}}ListCache$4.prototype.clear=listCacheClear;ListCache$4.prototype.delete=listCacheDelete;ListCache$4.prototype.get=listCacheGet;ListCache$4.prototype.has=listCacheHas;ListCache$4.prototype.set=listCacheSet;var _ListCache=ListCache$4,ListCache$3=_ListCache;function stackClear$1(){this.__data__=new ListCache$3,this.size=0}var _stackClear=stackClear$1;function stackDelete$1(_){var _e=this.__data__,et=_e.delete(_);return this.size=_e.size,et}var _stackDelete=stackDelete$1;function stackGet$1(_){return this.__data__.get(_)}var _stackGet=stackGet$1;function stackHas$1(_){return this.__data__.has(_)}var _stackHas=stackHas$1,getNative$5=_getNative,root$8=_root,Map$4=getNative$5(root$8,"Map"),_Map=Map$4,getNative$4=_getNative,nativeCreate$4=getNative$4(Object,"create"),_nativeCreate=nativeCreate$4,nativeCreate$3=_nativeCreate;function hashClear$1(){this.__data__=nativeCreate$3?nativeCreate$3(null):{},this.size=0}var _hashClear=hashClear$1;function hashDelete$1(_){var _e=this.has(_)&&delete this.__data__[_];return this.size-=_e?1:0,_e}var _hashDelete=hashDelete$1,nativeCreate$2=_nativeCreate,HASH_UNDEFINED$1="__lodash_hash_undefined__",objectProto$4=Object.prototype,hasOwnProperty$3=objectProto$4.hasOwnProperty;function hashGet$1(_){var _e=this.__data__;if(nativeCreate$2){var et=_e[_];return et===HASH_UNDEFINED$1?void 0:et}return hasOwnProperty$3.call(_e,_)?_e[_]:void 0}var _hashGet=hashGet$1,nativeCreate$1=_nativeCreate,objectProto$3=Object.prototype,hasOwnProperty$2=objectProto$3.hasOwnProperty;function hashHas$1(_){var _e=this.__data__;return nativeCreate$1?_e[_]!==void 0:hasOwnProperty$2.call(_e,_)}var _hashHas=hashHas$1,nativeCreate=_nativeCreate,HASH_UNDEFINED="__lodash_hash_undefined__";function hashSet$1(_,_e){var et=this.__data__;return this.size+=this.has(_)?0:1,et[_]=nativeCreate&&_e===void 0?HASH_UNDEFINED:_e,this}var _hashSet=hashSet$1,hashClear=_hashClear,hashDelete=_hashDelete,hashGet=_hashGet,hashHas=_hashHas,hashSet=_hashSet;function Hash$1(_){var _e=-1,et=_==null?0:_.length;for(this.clear();++_e<et;){var tt=_[_e];this.set(tt[0],tt[1])}}Hash$1.prototype.clear=hashClear;Hash$1.prototype.delete=hashDelete;Hash$1.prototype.get=hashGet;Hash$1.prototype.has=hashHas;Hash$1.prototype.set=hashSet;var _Hash=Hash$1,Hash=_Hash,ListCache$2=_ListCache,Map$3=_Map;function mapCacheClear$1(){this.size=0,this.__data__={hash:new Hash,map:new(Map$3||ListCache$2),string:new Hash}}var _mapCacheClear=mapCacheClear$1;function isKeyable$1(_){var _e=typeof _;return _e=="string"||_e=="number"||_e=="symbol"||_e=="boolean"?_!=="__proto__":_===null}var _isKeyable=isKeyable$1,isKeyable=_isKeyable;function getMapData$4(_,_e){var et=_.__data__;return isKeyable(_e)?et[typeof _e=="string"?"string":"hash"]:et.map}var _getMapData=getMapData$4,getMapData$3=_getMapData;function mapCacheDelete$1(_){var _e=getMapData$3(this,_).delete(_);return this.size-=_e?1:0,_e}var _mapCacheDelete=mapCacheDelete$1,getMapData$2=_getMapData;function mapCacheGet$1(_){return getMapData$2(this,_).get(_)}var _mapCacheGet=mapCacheGet$1,getMapData$1=_getMapData;function mapCacheHas$1(_){return getMapData$1(this,_).has(_)}var _mapCacheHas=mapCacheHas$1,getMapData=_getMapData;function mapCacheSet$1(_,_e){var et=getMapData(this,_),tt=et.size;return et.set(_,_e),this.size+=et.size==tt?0:1,this}var _mapCacheSet=mapCacheSet$1,mapCacheClear=_mapCacheClear,mapCacheDelete=_mapCacheDelete,mapCacheGet=_mapCacheGet,mapCacheHas=_mapCacheHas,mapCacheSet=_mapCacheSet;function MapCache$1(_){var _e=-1,et=_==null?0:_.length;for(this.clear();++_e<et;){var tt=_[_e];this.set(tt[0],tt[1])}}MapCache$1.prototype.clear=mapCacheClear;MapCache$1.prototype.delete=mapCacheDelete;MapCache$1.prototype.get=mapCacheGet;MapCache$1.prototype.has=mapCacheHas;MapCache$1.prototype.set=mapCacheSet;var _MapCache=MapCache$1,ListCache$1=_ListCache,Map$2=_Map,MapCache=_MapCache,LARGE_ARRAY_SIZE=200;function stackSet$1(_,_e){var et=this.__data__;if(et instanceof ListCache$1){var tt=et.__data__;if(!Map$2||tt.length<LARGE_ARRAY_SIZE-1)return tt.push([_,_e]),this.size=++et.size,this;et=this.__data__=new MapCache(tt)}return et.set(_,_e),this.size=et.size,this}var _stackSet=stackSet$1,ListCache=_ListCache,stackClear=_stackClear,stackDelete=_stackDelete,stackGet=_stackGet,stackHas=_stackHas,stackSet=_stackSet;function Stack$1(_){var _e=this.__data__=new ListCache(_);this.size=_e.size}Stack$1.prototype.clear=stackClear;Stack$1.prototype.delete=stackDelete;Stack$1.prototype.get=stackGet;Stack$1.prototype.has=stackHas;Stack$1.prototype.set=stackSet;var _Stack=Stack$1;function arrayEach$1(_,_e){for(var et=-1,tt=_==null?0:_.length;++et<tt&&_e(_[et],et,_)!==!1;);return _}var _arrayEach=arrayEach$1,copyObject$3=_copyObject,keys$2=keys_1;function baseAssign$1(_,_e){return _&&copyObject$3(_e,keys$2(_e),_)}var _baseAssign=baseAssign$1;function nativeKeysIn$1(_){var _e=[];if(_!=null)for(var et in Object(_))_e.push(et);return _e}var _nativeKeysIn=nativeKeysIn$1,isObject$5=isObject_1,isPrototype$1=_isPrototype,nativeKeysIn=_nativeKeysIn,objectProto$2=Object.prototype,hasOwnProperty$1=objectProto$2.hasOwnProperty;function baseKeysIn$1(_){if(!isObject$5(_))return nativeKeysIn(_);var _e=isPrototype$1(_),et=[];for(var tt in _)tt=="constructor"&&(_e||!hasOwnProperty$1.call(_,tt))||et.push(tt);return et}var _baseKeysIn=baseKeysIn$1,arrayLikeKeys=_arrayLikeKeys,baseKeysIn=_baseKeysIn,isArrayLike=isArrayLike_1;function keysIn$3(_){return isArrayLike(_)?arrayLikeKeys(_,!0):baseKeysIn(_)}var keysIn_1=keysIn$3,copyObject$2=_copyObject,keysIn$2=keysIn_1;function baseAssignIn$1(_,_e){return _&&copyObject$2(_e,keysIn$2(_e),_)}var _baseAssignIn=baseAssignIn$1,_cloneBuffer={exports:{}};(function(_,_e){var et=_root,tt=_e&&!_e.nodeType&&_e,rt=tt&&!0&&_&&!_.nodeType&&_,nt=rt&&rt.exports===tt,at=nt?et.Buffer:void 0,it=at?at.allocUnsafe:void 0;function ot(st,lt){if(lt)return st.slice();var gt=st.length,ct=it?it(gt):new st.constructor(gt);return st.copy(ct),ct}_.exports=ot})(_cloneBuffer,_cloneBuffer.exports);function copyArray$1(_,_e){var et=-1,tt=_.length;for(_e||(_e=Array(tt));++et<tt;)_e[et]=_[et];return _e}var _copyArray=copyArray$1;function arrayFilter$1(_,_e){for(var et=-1,tt=_==null?0:_.length,rt=0,nt=[];++et<tt;){var at=_[et];_e(at,et,_)&&(nt[rt++]=at)}return nt}var _arrayFilter=arrayFilter$1;function stubArray$2(){return[]}var stubArray_1=stubArray$2,arrayFilter=_arrayFilter,stubArray$1=stubArray_1,objectProto$1=Object.prototype,propertyIsEnumerable=objectProto$1.propertyIsEnumerable,nativeGetSymbols$1=Object.getOwnPropertySymbols,getSymbols$3=nativeGetSymbols$1?function(_){return _==null?[]:(_=Object(_),arrayFilter(nativeGetSymbols$1(_),function(_e){return propertyIsEnumerable.call(_,_e)}))}:stubArray$1,_getSymbols=getSymbols$3,copyObject$1=_copyObject,getSymbols$2=_getSymbols;function copySymbols$1(_,_e){return copyObject$1(_,getSymbols$2(_),_e)}var _copySymbols=copySymbols$1;function arrayPush$2(_,_e){for(var et=-1,tt=_e.length,rt=_.length;++et<tt;)_[rt+et]=_e[et];return _}var _arrayPush=arrayPush$2,overArg=_overArg,getPrototype$2=overArg(Object.getPrototypeOf,Object),_getPrototype=getPrototype$2,arrayPush$1=_arrayPush,getPrototype$1=_getPrototype,getSymbols$1=_getSymbols,stubArray=stubArray_1,nativeGetSymbols=Object.getOwnPropertySymbols,getSymbolsIn$2=nativeGetSymbols?function(_){for(var _e=[];_;)arrayPush$1(_e,getSymbols$1(_)),_=getPrototype$1(_);return _e}:stubArray,_getSymbolsIn=getSymbolsIn$2,copyObject=_copyObject,getSymbolsIn$1=_getSymbolsIn;function copySymbolsIn$1(_,_e){return copyObject(_,getSymbolsIn$1(_),_e)}var _copySymbolsIn=copySymbolsIn$1,arrayPush=_arrayPush,isArray$1=isArray_1;function baseGetAllKeys$2(_,_e,et){var tt=_e(_);return isArray$1(_)?tt:arrayPush(tt,et(_))}var _baseGetAllKeys=baseGetAllKeys$2,baseGetAllKeys$1=_baseGetAllKeys,getSymbols=_getSymbols,keys$1=keys_1;function getAllKeys$1(_){return baseGetAllKeys$1(_,keys$1,getSymbols)}var _getAllKeys=getAllKeys$1,baseGetAllKeys=_baseGetAllKeys,getSymbolsIn=_getSymbolsIn,keysIn$1=keysIn_1;function getAllKeysIn$1(_){return baseGetAllKeys(_,keysIn$1,getSymbolsIn)}var _getAllKeysIn=getAllKeysIn$1,getNative$3=_getNative,root$7=_root,DataView$2=getNative$3(root$7,"DataView"),_DataView=DataView$2,getNative$2=_getNative,root$6=_root,Promise$2=getNative$2(root$6,"Promise"),_Promise=Promise$2,getNative$1=_getNative,root$5=_root,Set$2=getNative$1(root$5,"Set"),_Set=Set$2,getNative=_getNative,root$4=_root,WeakMap$2=getNative(root$4,"WeakMap"),_WeakMap=WeakMap$2,DataView$1=_DataView,Map$1=_Map,Promise$1=_Promise,Set$1=_Set,WeakMap$1=_WeakMap,baseGetTag$1=_baseGetTag,toSource=_toSource,mapTag$3="[object Map]",objectTag$1="[object Object]",promiseTag="[object Promise]",setTag$3="[object Set]",weakMapTag$1="[object WeakMap]",dataViewTag$2="[object DataView]",dataViewCtorString=toSource(DataView$1),mapCtorString=toSource(Map$1),promiseCtorString=toSource(Promise$1),setCtorString=toSource(Set$1),weakMapCtorString=toSource(WeakMap$1),getTag$3=baseGetTag$1;(DataView$1&&getTag$3(new DataView$1(new ArrayBuffer(1)))!=dataViewTag$2||Map$1&&getTag$3(new Map$1)!=mapTag$3||Promise$1&&getTag$3(Promise$1.resolve())!=promiseTag||Set$1&&getTag$3(new Set$1)!=setTag$3||WeakMap$1&&getTag$3(new WeakMap$1)!=weakMapTag$1)&&(getTag$3=function(_){var _e=baseGetTag$1(_),et=_e==objectTag$1?_.constructor:void 0,tt=et?toSource(et):"";if(tt)switch(tt){case dataViewCtorString:return dataViewTag$2;case mapCtorString:return mapTag$3;case promiseCtorString:return promiseTag;case setCtorString:return setTag$3;case weakMapCtorString:return weakMapTag$1}return _e});var _getTag=getTag$3,objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty;function initCloneArray$1(_){var _e=_.length,et=new _.constructor(_e);return _e&&typeof _[0]=="string"&&hasOwnProperty.call(_,"index")&&(et.index=_.index,et.input=_.input),et}var _initCloneArray=initCloneArray$1,root$3=_root,Uint8Array$2=root$3.Uint8Array,_Uint8Array=Uint8Array$2,Uint8Array$1=_Uint8Array;function cloneArrayBuffer$3(_){var _e=new _.constructor(_.byteLength);return new Uint8Array$1(_e).set(new Uint8Array$1(_)),_e}var _cloneArrayBuffer=cloneArrayBuffer$3,cloneArrayBuffer$2=_cloneArrayBuffer;function cloneDataView$1(_,_e){var et=_e?cloneArrayBuffer$2(_.buffer):_.buffer;return new _.constructor(et,_.byteOffset,_.byteLength)}var _cloneDataView=cloneDataView$1,reFlags=/\w*$/;function cloneRegExp$1(_){var _e=new _.constructor(_.source,reFlags.exec(_));return _e.lastIndex=_.lastIndex,_e}var _cloneRegExp=cloneRegExp$1,Symbol$1=_Symbol,symbolProto=Symbol$1?Symbol$1.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;function cloneSymbol$1(_){return symbolValueOf?Object(symbolValueOf.call(_)):{}}var _cloneSymbol=cloneSymbol$1,cloneArrayBuffer$1=_cloneArrayBuffer;function cloneTypedArray$1(_,_e){var et=_e?cloneArrayBuffer$1(_.buffer):_.buffer;return new _.constructor(et,_.byteOffset,_.length)}var _cloneTypedArray=cloneTypedArray$1,cloneArrayBuffer=_cloneArrayBuffer,cloneDataView=_cloneDataView,cloneRegExp=_cloneRegExp,cloneSymbol=_cloneSymbol,cloneTypedArray=_cloneTypedArray,boolTag$1="[object Boolean]",dateTag$1="[object Date]",mapTag$2="[object Map]",numberTag$1="[object Number]",regexpTag$1="[object RegExp]",setTag$2="[object Set]",stringTag$1="[object String]",symbolTag$2="[object Symbol]",arrayBufferTag$1="[object ArrayBuffer]",dataViewTag$1="[object DataView]",float32Tag$1="[object Float32Array]",float64Tag$1="[object Float64Array]",int8Tag$1="[object Int8Array]",int16Tag$1="[object Int16Array]",int32Tag$1="[object Int32Array]",uint8Tag$1="[object Uint8Array]",uint8ClampedTag$1="[object Uint8ClampedArray]",uint16Tag$1="[object Uint16Array]",uint32Tag$1="[object Uint32Array]";function initCloneByTag$1(_,_e,et){var tt=_.constructor;switch(_e){case arrayBufferTag$1:return cloneArrayBuffer(_);case boolTag$1:case dateTag$1:return new tt(+_);case dataViewTag$1:return cloneDataView(_,et);case float32Tag$1:case float64Tag$1:case int8Tag$1:case int16Tag$1:case int32Tag$1:case uint8Tag$1:case uint8ClampedTag$1:case uint16Tag$1:case uint32Tag$1:return cloneTypedArray(_,et);case mapTag$2:return new tt;case numberTag$1:case stringTag$1:return new tt(_);case regexpTag$1:return cloneRegExp(_);case setTag$2:return new tt;case symbolTag$2:return cloneSymbol(_)}}var _initCloneByTag=initCloneByTag$1,isObject$4=isObject_1,objectCreate=Object.create,baseCreate$1=function(){function _(){}return function(_e){if(!isObject$4(_e))return{};if(objectCreate)return objectCreate(_e);_.prototype=_e;var et=new _;return _.prototype=void 0,et}}(),_baseCreate=baseCreate$1,baseCreate=_baseCreate,getPrototype=_getPrototype,isPrototype=_isPrototype;function initCloneObject$1(_){return typeof _.constructor=="function"&&!isPrototype(_)?baseCreate(getPrototype(_)):{}}var _initCloneObject=initCloneObject$1,getTag$2=_getTag,isObjectLike$2=isObjectLike_1,mapTag$1="[object Map]";function baseIsMap$1(_){return isObjectLike$2(_)&&getTag$2(_)==mapTag$1}var _baseIsMap=baseIsMap$1,baseIsMap=_baseIsMap,baseUnary$1=_baseUnary,nodeUtil$1=_nodeUtil.exports,nodeIsMap=nodeUtil$1&&nodeUtil$1.isMap,isMap$1=nodeIsMap?baseUnary$1(nodeIsMap):baseIsMap,isMap_1=isMap$1,getTag$1=_getTag,isObjectLike$1=isObjectLike_1,setTag$1="[object Set]";function baseIsSet$1(_){return isObjectLike$1(_)&&getTag$1(_)==setTag$1}var _baseIsSet=baseIsSet$1,baseIsSet=_baseIsSet,baseUnary=_baseUnary,nodeUtil=_nodeUtil.exports,nodeIsSet=nodeUtil&&nodeUtil.isSet,isSet$1=nodeIsSet?baseUnary(nodeIsSet):baseIsSet,isSet_1=isSet$1,Stack=_Stack,arrayEach=_arrayEach,assignValue=_assignValue,baseAssign=_baseAssign,baseAssignIn=_baseAssignIn,cloneBuffer=_cloneBuffer.exports,copyArray=_copyArray,copySymbols=_copySymbols,copySymbolsIn=_copySymbolsIn,getAllKeys=_getAllKeys,getAllKeysIn=_getAllKeysIn,getTag=_getTag,initCloneArray=_initCloneArray,initCloneByTag=_initCloneByTag,initCloneObject=_initCloneObject,isArray=isArray_1,isBuffer=isBuffer$2.exports,isMap=isMap_1,isObject$3=isObject_1,isSet=isSet_1,keys=keys_1,keysIn=keysIn_1,CLONE_DEEP_FLAG=1,CLONE_FLAT_FLAG=2,CLONE_SYMBOLS_FLAG$1=4,argsTag="[object Arguments]",arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",genTag="[object GeneratorFunction]",mapTag="[object Map]",numberTag="[object Number]",objectTag="[object Object]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag$1="[object Symbol]",weakMapTag="[object WeakMap]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",cloneableTags={};cloneableTags[argsTag]=cloneableTags[arrayTag]=cloneableTags[arrayBufferTag]=cloneableTags[dataViewTag]=cloneableTags[boolTag]=cloneableTags[dateTag]=cloneableTags[float32Tag]=cloneableTags[float64Tag]=cloneableTags[int8Tag]=cloneableTags[int16Tag]=cloneableTags[int32Tag]=cloneableTags[mapTag]=cloneableTags[numberTag]=cloneableTags[objectTag]=cloneableTags[regexpTag]=cloneableTags[setTag]=cloneableTags[stringTag]=cloneableTags[symbolTag$1]=cloneableTags[uint8Tag]=cloneableTags[uint8ClampedTag]=cloneableTags[uint16Tag]=cloneableTags[uint32Tag]=!0;cloneableTags[errorTag]=cloneableTags[funcTag]=cloneableTags[weakMapTag]=!1;function baseClone$1(_,_e,et,tt,rt,nt){var at,it=_e&CLONE_DEEP_FLAG,ot=_e&CLONE_FLAT_FLAG,st=_e&CLONE_SYMBOLS_FLAG$1;if(et&&(at=rt?et(_,tt,rt,nt):et(_)),at!==void 0)return at;if(!isObject$3(_))return _;var lt=isArray(_);if(lt){if(at=initCloneArray(_),!it)return copyArray(_,at)}else{var gt=getTag(_),ct=gt==funcTag||gt==genTag;if(isBuffer(_))return cloneBuffer(_,it);if(gt==objectTag||gt==argsTag||ct&&!rt){if(at=ot||ct?{}:initCloneObject(_),!it)return ot?copySymbolsIn(_,baseAssignIn(at,_)):copySymbols(_,baseAssign(at,_))}else{if(!cloneableTags[gt])return rt?_:{};at=initCloneByTag(_,gt,it)}}nt||(nt=new Stack);var wt=nt.get(_);if(wt)return wt;nt.set(_,at),isSet(_)?_.forEach(function(ht){at.add(baseClone$1(ht,_e,et,ht,_,nt))}):isMap(_)&&_.forEach(function(ht,ut){at.set(ut,baseClone$1(ht,_e,et,ut,_,nt))});var Tt=st?ot?getAllKeysIn:getAllKeys:ot?keysIn:keys,Rt=lt?void 0:Tt(_);return arrayEach(Rt||_,function(ht,ut){Rt&&(ut=ht,ht=_[ut]),assignValue(at,ut,baseClone$1(ht,_e,et,ut,_,nt))}),at}var _baseClone=baseClone$1,baseClone=_baseClone,CLONE_SYMBOLS_FLAG=4;function clone(_){return baseClone(_,CLONE_SYMBOLS_FLAG)}var clone_1=clone,root$2=_root,now$2=function(){return root$2.Date.now()},now_1=now$2,reWhitespace=/\s/;function trimmedEndIndex$1(_){for(var _e=_.length;_e--&&reWhitespace.test(_.charAt(_e)););return _e}var _trimmedEndIndex=trimmedEndIndex$1,trimmedEndIndex=_trimmedEndIndex,reTrimStart=/^\s+/;function baseTrim$1(_){return _&&_.slice(0,trimmedEndIndex(_)+1).replace(reTrimStart,"")}var _baseTrim=baseTrim$1,baseGetTag=_baseGetTag,isObjectLike=isObjectLike_1,symbolTag="[object Symbol]";function isSymbol$1(_){return typeof _=="symbol"||isObjectLike(_)&&baseGetTag(_)==symbolTag}var isSymbol_1=isSymbol$1,baseTrim=_baseTrim,isObject$2=isObject_1,isSymbol=isSymbol_1,NAN=0/0,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt;function toNumber$1(_){if(typeof _=="number")return _;if(isSymbol(_))return NAN;if(isObject$2(_)){var _e=typeof _.valueOf=="function"?_.valueOf():_;_=isObject$2(_e)?_e+"":_e}if(typeof _!="string")return _===0?_:+_;_=baseTrim(_);var et=reIsBinary.test(_);return et||reIsOctal.test(_)?freeParseInt(_.slice(2),et?2:8):reIsBadHex.test(_)?NAN:+_}var toNumber_1=toNumber$1,isObject$1=isObject_1,now$1=now_1,toNumber=toNumber_1,FUNC_ERROR_TEXT$1="Expected a function",nativeMax=Math.max,nativeMin=Math.min;function debounce$1(_,_e,et){var tt,rt,nt,at,it,ot,st=0,lt=!1,gt=!1,ct=!0;if(typeof _!="function")throw new TypeError(FUNC_ERROR_TEXT$1);_e=toNumber(_e)||0,isObject$1(et)&&(lt=!!et.leading,gt="maxWait"in et,nt=gt?nativeMax(toNumber(et.maxWait)||0,_e):nt,ct="trailing"in et?!!et.trailing:ct);function wt(pt){var dt=tt,vt=rt;return tt=rt=void 0,st=pt,at=_.apply(vt,dt),at}function Tt(pt){return st=pt,it=setTimeout(ut,_e),lt?wt(pt):at}function Rt(pt){var dt=pt-ot,vt=pt-st,St=_e-dt;return gt?nativeMin(St,nt-vt):St}function ht(pt){var dt=pt-ot,vt=pt-st;return ot===void 0||dt>=_e||dt<0||gt&&vt>=nt}function ut(){var pt=now$1();if(ht(pt))return ft(pt);it=setTimeout(ut,Rt(pt))}function ft(pt){return it=void 0,ct&&tt?wt(pt):(tt=rt=void 0,at)}function yt(){it!==void 0&&clearTimeout(it),st=0,tt=ot=rt=it=void 0}function xt(){return it===void 0?at:ft(now$1())}function Ct(){var pt=now$1(),dt=ht(pt);if(tt=arguments,rt=this,ot=pt,dt){if(it===void 0)return Tt(ot);if(gt)return clearTimeout(it),it=setTimeout(ut,_e),wt(ot)}return it===void 0&&(it=setTimeout(ut,_e)),at}return Ct.cancel=yt,Ct.flush=xt,Ct}var debounce_1=debounce$1,debounce=debounce_1,isObject=isObject_1,FUNC_ERROR_TEXT="Expected a function";function throttle(_,_e,et){var tt=!0,rt=!0;if(typeof _!="function")throw new TypeError(FUNC_ERROR_TEXT);return isObject(et)&&(tt="leading"in et?!!et.leading:tt,rt="trailing"in et?!!et.trailing:rt),debounce(_,_e,{leading:tt,maxWait:_e,trailing:rt})}var throttle_1=throttle;function noop$1(){}var noop_1=noop$1,_createClass$1=function(){function _(_e,et){for(var tt=0;tt<et.length;tt++){var rt=et[tt];rt.enumerable=rt.enumerable||!1,rt.configurable=!0,"value"in rt&&(rt.writable=!0),Object.defineProperty(_e,rt.key,rt)}}return function(_e,et,tt){return et&&_(_e.prototype,et),tt&&_(_e,tt),_e}}();function _classCallCheck$1(_,_e){if(!(_ instanceof _e))throw new TypeError("Cannot call a class as a function")}var resize$1={width:0,height:0},scroll={delta:0,top:0},touch={axisIntention:"",startX:0,startY:0,deltaX:0,deltaY:0},INTENTION_THRESHOLD=5,getXY=function(_e){var et={x:0,y:0},tt=document.body,rt=document.documentElement;return _e.pageX||_e.pageY?(et.x=_e.pageX,et.y=_e.pageY):(et.x=_e.clientX+tt.scrollLeft+rt.scrollLeft,et.y=_e.clientY+tt.scrollTop+rt.scrollTop),et},AugmentedEvent=function(){function _(){var _e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};_classCallCheck$1(this,_);var et=(_e.mainType||"").toLowerCase(),tt=(_e.subType||"").toLowerCase();this.mainType=et,this.subType=tt,this.type=et+tt.charAt(0).toUpperCase()+tt.slice(1)||"",this.scroll=scroll,this.resize=resize$1,this.touch=touch}return _createClass$1(_,[{key:"update",value:function(et){var tt=this.mainType,rt=this.subType,nt=document.documentElement;if(globalVars.enableScrollInfo&&(tt==="scroll"||tt==="touchmove")){var at=nt.scrollTop+document.body.scrollTop;at!==this.scroll.top&&(this.scroll.delta=at-this.scroll.top,this.scroll.top=at)}if(globalVars.enableResizeInfo&&tt==="resize"&&(this.resize.width=window.innerWidth||nt.clientWidth,this.resize.height=window.innerHeight||nt.clientHeight),globalVars.enableTouchInfo&&et.touches&&(tt==="touchstart"||tt==="touchmove"||tt==="touchend")){var it=void 0,ot=void 0,st=void 0;tt==="touchstart"||rt==="start"?(it=getXY(et.touches[0]),this.touch.axisIntention="",this.touch.startX=it.x,this.touch.startY=it.y,this.touch.deltaX=0,this.touch.deltaY=0):tt==="touchmove"&&(it=getXY(et.touches[0]),this.touch.deltaX=it.x-this.touch.startX,this.touch.deltaY=it.y-this.touch.startY,this.touch.axisIntention===""&&(ot=Math.abs(this.touch.deltaX),st=Math.abs(this.touch.deltaY),ot>INTENTION_THRESHOLD&&ot>=st?this.touch.axisIntention="x":st>INTENTION_THRESHOLD&&st>ot&&(this.touch.axisIntention="y")))}}}]),_}(),raf$1={exports:{}},performanceNow={exports:{}};(function(){var _,_e,et,tt,rt,nt;typeof performance<"u"&&performance!==null&&performance.now?performanceNow.exports=function(){return performance.now()}:typeof process<"u"&&process!==null&&process.hrtime?(performanceNow.exports=function(){return(_()-rt)/1e6},_e=process.hrtime,_=function(){var at;return at=_e(),at[0]*1e9+at[1]},tt=_(),nt=process.uptime()*1e9,rt=tt-nt):Date.now?(performanceNow.exports=function(){return Date.now()-et},et=Date.now()):(performanceNow.exports=function(){return new Date().getTime()-et},et=new Date().getTime())}).call(commonjsGlobal$1);var now=performanceNow.exports,root$1=typeof window>"u"?commonjsGlobal$1:window,vendors=["moz","webkit"],suffix="AnimationFrame",raf=root$1["request"+suffix],caf=root$1["cancel"+suffix]||root$1["cancelRequest"+suffix];for(var i=0;!raf&&i<vendors.length;i++)raf=root$1[vendors[i]+"Request"+suffix],caf=root$1[vendors[i]+"Cancel"+suffix]||root$1[vendors[i]+"CancelRequest"+suffix];if(!raf||!caf){var last=0,id=0,queue=[],frameDuration=1e3/60;raf=function(_){if(queue.length===0){var _e=now(),et=Math.max(0,frameDuration-(_e-last));last=et+_e,setTimeout(function(){var tt=queue.slice(0);queue.length=0;for(var rt=0;rt<tt.length;rt++)if(!tt[rt].cancelled)try{tt[rt].callback(last)}catch(nt){setTimeout(function(){throw nt},0)}},Math.round(et))}return queue.push({handle:++id,callback:_,cancelled:!1}),id},caf=function(_){for(var _e=0;_e<queue.length;_e++)queue[_e].handle===_&&(queue[_e].cancelled=!0)}}raf$1.exports=function(_){return raf.call(root$1,_)};raf$1.exports.cancel=function(){caf.apply(root$1,arguments)};raf$1.exports.polyfill=function(_){_||(_=root$1),_.requestAnimationFrame=raf,_.cancelAnimationFrame=caf};var getTime=Date.now||function(){return new Date().getTime()};function rAFThrottle(_){var _e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:15,et=void 0,tt=void 0,rt=0,nt=0,at=function it(){var ot=getTime(),st=_e-(ot-rt);st<=0?(rt=ot,nt=0,_.apply(et,tt)):nt=raf$1.exports(it)};return function(){et=this,tt=arguments,nt||(nt=raf$1.exports(at))}}var EVENT_END_DELAY=100,DEFAULT_THROTTLE_RATE=50,connections=globalVars.connections,EE=globalVars.EE,listeners=globalVars.listeners,removers=globalVars.removers,doc$1=void 0,win$1=void 0,body=void 0,hashId=0;typeof window<"u"&&(win$1=window,doc$1=win$1.document||document,body=doc$1.body);function getHash(_){return _.id||"target-id-"+hashId++}function connectThrottle(_,_e,et,tt){return EE.on(_,_e||noop_1,et),tt=tt||_,connections[tt]=(connections[tt]||0)+1,{_type:_,_cb:_e,_ctx:et,unsubscribe:function(){if(!!this._type){EE.removeListener(_,_e,et),connections[tt]--,connections[tt]===0&&(listeners[tt].remove(),listeners[tt]=void 0),this._type=void 0,this._cb=void 0,this._ctx=void 0;for(var nt=removers.length-1;nt>=0;nt--){var at=removers[nt];if(at===this){removers.splice(nt,1);break}}}}}}function connectContinuousEvent(_,_e,et){return function(rt,nt,at,it){var ot=at.context,st=at.target,lt=st&&getHash(st),gt=lt?":"+lt:"",ct=_e+"Start:"+rt+gt,wt=_e+"End:"+rt+gt,Tt=_e+":"+rt+gt,Rt=et+":"+rt+gt,ht=connectThrottle(Rt,nt,ot,Tt);if(removers.push(ht),listeners[Tt])return ht;var ut={start:new AugmentedEvent({mainType:_e,subType:"start"}),main:new AugmentedEvent({mainType:_e}),end:new AugmentedEvent({mainType:_e,subType:"end"})};rt==="raf"?(rt=16,xt=rAFThrottle(xt)):rt>0&&(xt=throttle_1(xt,rt));var ft=void 0;function yt(Ct){ut.end.update(Ct),EE.emit(wt,Ct,ut.end),ft=null}function xt(Ct){ft||(ut.start.update(Ct),EE.emit(ct,Ct,ut.start)),clearTimeout(ft),ut.main.update(Ct),EE.emit(Tt,Ct,ut.main),leIE8$1?ft=setTimeout(function(){yt(clone_1(Ct))},rt+EVENT_END_DELAY):ft=setTimeout(yt.bind(null,Ct),rt+EVENT_END_DELAY)}return listeners[Tt]=listen(st||_,_e,xt,it),ht}}function connectDiscreteEvent(_,_e){return function(tt,rt,nt,at){var it=nt.context,ot=nt.target,st=ot&&getHash(ot),lt=_e+":0"+(st?":"+st:""),gt=connectThrottle(lt,rt,it);if(removers.push(gt),listeners[lt])return gt;var ct=new AugmentedEvent({mainType:_e});function wt(Tt){ct.update(Tt),EE.emit(lt,Tt,ct)}return listeners[lt]=listen(ot||_,_e,wt,at),gt}}const mainEventConnectors={scrollStart:connectContinuousEvent(win$1,"scroll","scrollStart"),scrollEnd:connectContinuousEvent(win$1,"scroll","scrollEnd"),scroll:connectContinuousEvent(win$1,"scroll","scroll"),resizeStart:connectContinuousEvent(win$1,"resize","resizeStart"),resizeEnd:connectContinuousEvent(win$1,"resize","resizeEnd"),resize:connectContinuousEvent(win$1,"resize","resize"),visibilitychange:connectDiscreteEvent(doc$1,"visibilitychange"),touchmoveStart:connectContinuousEvent(body,"touchmove","touchmoveStart"),touchmoveEnd:connectContinuousEvent(body,"touchmove","touchmoveEnd"),touchmove:connectContinuousEvent(body,"touchmove","touchmove"),touchstart:connectDiscreteEvent(body,"touchstart"),touchend:connectDiscreteEvent(body,"touchend")};function subscribe$1(_,_e){var et=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},tt=et.useRAF||!1,rt=parseInt(et.throttleRate,10),nt=et.eventOptions;return isNaN(rt)&&(rt=DEFAULT_THROTTLE_RATE),tt&&(rt="raf"),leIE8$1&&(rt=0),globalVars.enableScrollInfo=globalVars.enableScrollInfo||et.enableScrollInfo||!1,globalVars.enableResizeInfo=globalVars.enableResizeInfo||et.enableResizeInfo||!1,globalVars.enableTouchInfo=globalVars.enableTouchInfo||et.enableTouchInfo||!1,mainEventConnectors[_](rt,_e,et,nt)}var IS_CLIENT=typeof window<"u";function warn(){}var subscribe=IS_CLIENT?subscribe$1:warn,classnames={exports:{}};(function(_){(function(){var _e={}.hasOwnProperty;function et(){for(var tt=[],rt=0;rt<arguments.length;rt++){var nt=arguments[rt];if(!!nt){var at=typeof nt;if(at==="string"||at==="number")tt.push(nt);else if(Array.isArray(nt)){if(nt.length){var it=et.apply(null,nt);it&&tt.push(it)}}else if(at==="object"){if(nt.toString!==Object.prototype.toString&&!nt.toString.toString().includes("[native code]")){tt.push(nt.toString());continue}for(var ot in nt)_e.call(nt,ot)&&nt[ot]&&tt.push(ot)}}}return tt.join(" ")}_.exports?(et.default=et,_.exports=et):window.classNames=et})()})(classnames);const classNames=classnames.exports;var shallowequal=function(_e,et,tt,rt){var nt=tt?tt.call(rt,_e,et):void 0;if(nt!==void 0)return!!nt;if(_e===et)return!0;if(typeof _e!="object"||!_e||typeof et!="object"||!et)return!1;var at=Object.keys(_e),it=Object.keys(et);if(at.length!==it.length)return!1;for(var ot=Object.prototype.hasOwnProperty.bind(et),st=0;st<at.length;st++){var lt=at[st];if(!ot(lt))return!1;var gt=_e[lt],ct=et[lt];if(nt=tt?tt.call(rt,gt,ct,lt):void 0,nt===!1||nt===void 0&&gt!==ct)return!1}return!0};function _defineProperty(_,_e,et){return _e in _?Object.defineProperty(_,_e,{value:et,enumerable:!0,configurable:!0,writable:!0}):_[_e]=et,_}function _typeof(_){return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_e){return typeof _e}:function(_e){return _e&&typeof Symbol=="function"&&_e.constructor===Symbol&&_e!==Symbol.prototype?"symbol":typeof _e},_typeof(_)}function _classCallCheck(_,_e){if(!(_ instanceof _e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(_,_e){for(var et=0;et<_e.length;et++){var tt=_e[et];tt.enumerable=tt.enumerable||!1,tt.configurable=!0,"value"in tt&&(tt.writable=!0),Object.defineProperty(_,tt.key,tt)}}function _createClass(_,_e,et){return _e&&_defineProperties(_.prototype,_e),et&&_defineProperties(_,et),Object.defineProperty(_,"prototype",{writable:!1}),_}function _inherits$1(_,_e){if(typeof _e!="function"&&_e!==null)throw new TypeError("Super expression must either be null or a function");_.prototype=Object.create(_e&&_e.prototype,{constructor:{value:_,writable:!0,configurable:!0}}),Object.defineProperty(_,"prototype",{writable:!1}),_e&&_setPrototypeOf(_,_e)}function _setPrototypeOf(_,_e){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(tt,rt){return tt.__proto__=rt,tt},_setPrototypeOf(_,_e)}function _createSuper$4(_){var _e=_isNativeReflectConstruct$4();return function(){var tt=_getPrototypeOf$1(_),rt;if(_e){var nt=_getPrototypeOf$1(this).constructor;rt=Reflect.construct(tt,arguments,nt)}else rt=tt.apply(this,arguments);return _possibleConstructorReturn$1(this,rt)}}function _possibleConstructorReturn$1(_,_e){if(_e&&(_typeof(_e)==="object"||typeof _e=="function"))return _e;if(_e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$1(_)}function _assertThisInitialized$1(_){if(_===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _}function _isNativeReflectConstruct$4(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$1(_){return _getPrototypeOf$1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(et){return et.__proto__||Object.getPrototypeOf(et)},_getPrototypeOf$1(_)}var STATUS_ORIGINAL=0,STATUS_RELEASED=1,STATUS_FIXED=2,TRANSFORM_PROP="transform",doc,docBody,docEl,canEnableTransforms=!0,M,scrollDelta=0,win,winHeight=-1,Sticky=function(_){_inherits$1(et,_);var _e=_createSuper$4(et);function et(tt,rt){var nt;return _classCallCheck(this,et),nt=_e.call(this,tt,rt),nt.handleResize=nt.handleResize.bind(_assertThisInitialized$1(nt)),nt.handleScroll=nt.handleScroll.bind(_assertThisInitialized$1(nt)),nt.handleScrollStart=nt.handleScrollStart.bind(_assertThisInitialized$1(nt)),nt.delta=0,nt.stickyTop=0,nt.stickyBottom=0,nt.frozen=!1,nt.skipNextScrollEvent=!1,nt.scrollTop=-1,nt.bottomBoundaryTarget,nt.topTarget,nt.subscribers,nt.state={top:0,bottom:0,width:0,height:0,x:0,y:0,topBoundary:0,bottomBoundary:1/0,status:STATUS_ORIGINAL,pos:0,activated:!1},nt}return _createClass(et,[{key:"getTargetHeight",value:function(rt){return rt&&rt.offsetHeight||0}},{key:"getTopPosition",value:function(rt){return rt=rt||this.props.top||0,typeof rt=="string"&&(this.topTarget||(this.topTarget=doc.querySelector(rt)),rt=this.getTargetHeight(this.topTarget)),rt}},{key:"getTargetBottom",value:function(rt){if(!rt)return-1;var nt=rt.getBoundingClientRect();return this.scrollTop+nt.bottom}},{key:"getBottomBoundary",value:function(rt){var nt=rt||this.props.bottomBoundary;return _typeof(nt)==="object"&&(nt=nt.value||nt.target||0),typeof nt=="string"&&(this.bottomBoundaryTarget||(this.bottomBoundaryTarget=doc.querySelector(nt)),nt=this.getTargetBottom(this.bottomBoundaryTarget)),nt&&nt>0?nt:1/0}},{key:"reset",value:function(){this.setState({status:STATUS_ORIGINAL,pos:0})}},{key:"release",value:function(rt){this.setState({status:STATUS_RELEASED,pos:rt-this.state.y})}},{key:"fix",value:function(rt){this.setState({status:STATUS_FIXED,pos:rt})}},{key:"updateInitialDimension",value:function(rt){if(rt=rt||{},!(!this.outerElement||!this.innerElement)){var nt=this.outerElement.getBoundingClientRect(),at=this.innerElement.getBoundingClientRect(),it=nt.width||nt.right-nt.left,ot=at.height||at.bottom-at.top,st=nt.top+this.scrollTop;this.setState({top:this.getTopPosition(rt.top),bottom:Math.min(this.state.top+ot,winHeight),width:it,height:ot,x:nt.left,y:st,bottomBoundary:this.getBottomBoundary(rt.bottomBoundary),topBoundary:st})}}},{key:"handleResize",value:function(rt,nt){this.props.shouldFreeze()||(winHeight=nt.resize.height,this.updateInitialDimension(),this.update())}},{key:"handleScrollStart",value:function(rt,nt){this.frozen=this.props.shouldFreeze(),!this.frozen&&(this.scrollTop===nt.scroll.top?this.skipNextScrollEvent=!0:(this.scrollTop=nt.scroll.top,this.updateInitialDimension()))}},{key:"handleScroll",value:function(rt,nt){if(this.skipNextScrollEvent){this.skipNextScrollEvent=!1;return}scrollDelta=nt.scroll.delta,this.scrollTop=nt.scroll.top,this.update()}},{key:"update",value:function(){var rt=!this.props.enabled||this.state.bottomBoundary-this.state.topBoundary<=this.state.height||this.state.width===0&&this.state.height===0;if(rt){this.state.status!==STATUS_ORIGINAL&&this.reset();return}var nt=scrollDelta,at=this.scrollTop+this.state.top,it=this.scrollTop+this.state.bottom;if(at<=this.state.topBoundary)this.reset();else if(it>=this.state.bottomBoundary)this.stickyBottom=this.state.bottomBoundary,this.stickyTop=this.stickyBottom-this.state.height,this.release(this.stickyTop);else if(this.state.height>winHeight-this.state.top)switch(this.state.status){case STATUS_ORIGINAL:this.release(this.state.y),this.stickyTop=this.state.y,this.stickyBottom=this.stickyTop+this.state.height;case STATUS_RELEASED:this.stickyBottom=this.stickyTop+this.state.height,nt>0&&it>this.stickyBottom?this.fix(this.state.bottom-this.state.height):nt<0&&at<this.stickyTop&&this.fix(this.state.top);break;case STATUS_FIXED:var ot=!0,st=this.state.pos,lt=this.state.height;if(nt>0&&st===this.state.top)this.stickyTop=at-nt,this.stickyBottom=this.stickyTop+lt;else if(nt<0&&st===this.state.bottom-lt)this.stickyBottom=it-nt,this.stickyTop=this.stickyBottom-lt;else if(st!==this.state.bottom-lt&&st!==this.state.top){var gt=st+lt-this.state.bottom;this.stickyBottom=it-nt+gt,this.stickyTop=this.stickyBottom-lt}else ot=!1;ot&&this.release(this.stickyTop);break}else this.fix(this.state.top);this.delta=nt}},{key:"componentDidUpdate",value:function(rt,nt){var at=this;nt.status!==this.state.status&&this.props.onStateChange&&this.props.onStateChange({status:this.state.status}),this.props.top!==nt.top&&(this.updateInitialDimension(),this.update());var it=!shallowequal(this.props,rt);it&&(rt.enabled!==this.props.enabled?this.props.enabled?this.setState({activated:!0},function(){at.updateInitialDimension(),at.update()}):this.setState({activated:!1},function(){at.reset()}):(rt.top!==this.props.top||rt.bottomBoundary!==this.props.bottomBoundary)&&(this.updateInitialDimension(),this.update()))}},{key:"componentWillUnmount",value:function(){for(var rt=this.subscribers||[],nt=rt.length-1;nt>=0;nt--)this.subscribers[nt].unsubscribe()}},{key:"componentDidMount",value:function(){win||(win=window,doc=document,docEl=doc.documentElement,docBody=doc.body,winHeight=win.innerHeight||docEl.clientHeight,M=window.Modernizr,M&&M.prefixed&&(canEnableTransforms=M.csstransforms3d,TRANSFORM_PROP=M.prefixed("transform"))),this.scrollTop=docBody.scrollTop+docEl.scrollTop,this.props.enabled&&(this.setState({activated:!0}),this.updateInitialDimension(),this.update()),this.subscribers=[subscribe("scrollStart",this.handleScrollStart.bind(this),{useRAF:!0}),subscribe("scroll",this.handleScroll.bind(this),{useRAF:!0,enableScrollInfo:!0}),subscribe("resize",this.handleResize.bind(this),{enableResizeInfo:!0})]}},{key:"translate",value:function(rt,nt){var at=canEnableTransforms&&this.props.enableTransforms;at&&this.state.activated?rt[TRANSFORM_PROP]="translate3d(0,"+Math.round(nt)+"px,0)":rt.top=nt+"px"}},{key:"shouldComponentUpdate",value:function(rt,nt){return!this.props.shouldFreeze()&&!(shallowequal(this.props,rt)&&shallowequal(this.state,nt))}},{key:"render",value:function(){var rt,nt=this,at={position:this.state.status===STATUS_FIXED?"fixed":"relative",top:this.state.status===STATUS_FIXED?"0px":"",zIndex:this.props.innerZ},it={};this.translate(at,this.state.pos),this.state.status!==STATUS_ORIGINAL&&(at.width=this.state.width+"px",it.height=this.state.height+"px");var ot=classNames("sticky-outer-wrapper",this.props.className,(rt={},_defineProperty(rt,this.props.activeClass,this.state.status===STATUS_FIXED),_defineProperty(rt,this.props.releasedClass,this.state.status===STATUS_RELEASED),rt)),st=classNames("sticky-inner-wrapper",this.props.innerClass,_defineProperty({},this.props.innerActiveClass,this.state.status===STATUS_FIXED)),lt=this.props.children;return React$1.createElement("div",{ref:function(ct){nt.outerElement=ct},className:ot,style:it},React$1.createElement("div",{ref:function(ct){nt.innerElement=ct},className:st,style:at},typeof lt=="function"?lt({status:this.state.status}):lt))}}]),et}(react.exports.Component);Sticky.displayName="Sticky";Sticky.defaultProps={shouldFreeze:function(){return!1},enabled:!0,top:0,bottomBoundary:0,enableTransforms:!0,activeClass:"active",releasedClass:"released",onStateChange:null,innerClass:"",innerActiveClass:""};Sticky.propTypes={enabled:propTypes.exports.bool,top:propTypes.exports.oneOfType([propTypes.exports.string,propTypes.exports.number]),bottomBoundary:propTypes.exports.oneOfType([propTypes.exports.object,propTypes.exports.string,propTypes.exports.number]),enableTransforms:propTypes.exports.bool,activeClass:propTypes.exports.string,releasedClass:propTypes.exports.string,innerClass:propTypes.exports.string,innerActiveClass:propTypes.exports.string,className:propTypes.exports.string,onStateChange:propTypes.exports.func,shouldFreeze:propTypes.exports.func,innerZ:propTypes.exports.oneOfType([propTypes.exports.string,propTypes.exports.number])};Sticky.STATUS_ORIGINAL=STATUS_ORIGINAL;Sticky.STATUS_RELEASED=STATUS_RELEASED;Sticky.STATUS_FIXED=STATUS_FIXED;function ThinContainer(_){return jsxRuntime.exports.jsx("div",{className:`mx-auto w-[600px] max-w-full px-2 sm:px-0 ${_.classNames||""}`,children:_.children})}const useFade$1="",useFade=(_=!1)=>{const[_e,et]=react.exports.useState(_),[tt,rt]=react.exports.useState(_e);return react.exports.useEffect(()=>{_e&&rt(!0)},[_e]),[tt,et,{style:{animation:`${_e?"fadeIn":"fadeOut"} .3s`},onAnimationEnd:()=>{_e||rt(!1)}}]};function useBackdrop(){const[_,_e]=react.exports.useState(!1),[et,tt]=react.exports.useState(!1);return[it=>{_e(it),it&&tt(!0)},{active:_,onBackdropHide(){tt(!1)}},{style:et?{zIndex:"1000",position:"relative"}:{}}]}function Backdrop(_){const _e=_.onClick||(()=>{}),et=_.onBackdropHide||(()=>{}),[tt,rt,nt]=useFade();return react.exports.useEffect(()=>{rt(!!_.active)},[_.active,rt]),react.exports.useEffect(()=>{tt||et()},[tt]),tt?jsxRuntime.exports.jsx("div",{className:`pointer-events-auto fixed left-0 right-0 top-0 h-screen w-screen bg-black bg-opacity-50 opacity-100 transition-opacity ${tt?"":"opacity-0"}`,...nt,onClick:at=>_e(at.nativeEvent)}):null}function BackdropContainer(_){const _e=react.exports.createRef(),et=react.exports.createRef();return react.exports.useEffect(()=>{let tt=-1;function rt(){if(_e.current&&et.current){const nt=_e.current.getBoundingClientRect();et.current.style.top=`${nt.top}px`,et.current.style.left=`${nt.left}px`,et.current.style.width=`${nt.width}px`,et.current.style.height=`${nt.height}px`}tt=window.requestAnimationFrame(rt)}return rt(),()=>{window.cancelAnimationFrame(tt)}},[_e,et]),jsxRuntime.exports.jsxs("div",{ref:_e,children:[reactDom.exports.createPortal(jsxRuntime.exports.jsxs("div",{className:"pointer-events-none fixed top-0 left-0 z-[999]",children:[jsxRuntime.exports.jsx(Backdrop,{active:_.active,..._}),jsxRuntime.exports.jsx("div",{ref:et,className:"pointer-events-auto absolute",children:_.children})]}),document.body),jsxRuntime.exports.jsx("div",{className:"invisible",children:_.children})]})}function ButtonControl({onClick:_,children:_e,className:et}){return jsxRuntime.exports.jsx("button",{onClick:_,className:et,type:"button",children:_e})}function Option({option:_,onClick:_e,tabIndex:et}){return jsxRuntime.exports.jsxs("div",{className:"flex h-10 cursor-pointer items-center space-x-2 px-4 py-2 text-left text-denim-700 transition-colors hover:text-white",onClick:_e,tabIndex:et,children:[jsxRuntime.exports.jsx(Icon,{icon:_.icon}),jsxRuntime.exports.jsx("input",{type:"radio",className:"hidden",id:_.id}),jsxRuntime.exports.jsx("label",{htmlFor:_.id,className:"cursor-pointer ",children:jsxRuntime.exports.jsx("div",{className:"item",children:_.name})})]})}const DropdownButton=React$1.forwardRef((_,_e)=>{const[et,tt,rt]=useBackdrop(),[nt,at]=react.exports.useState(_.selectedItem);react.exports.useEffect(()=>{let st;return _.open?at(_.selectedItem):st=setTimeout(()=>{at(_.selectedItem)},200),()=>{st&&clearTimeout(st)}},[_.open]);const it=_.options.find(st=>st.id===_.selectedItem)||{id:"movie",name:"movie",icon:Icons.ARROW_LEFT};react.exports.useEffect(()=>{et(_.open)},[_.open]);const ot=(st,lt)=>{st.stopPropagation(),_.setSelectedItem(lt.id),_.setOpen(!1)};return jsxRuntime.exports.jsx("div",{className:"w-full min-w-[140px] sm:w-auto",children:jsxRuntime.exports.jsx("div",{ref:_e,className:"relative w-full sm:w-auto",...rt,children:jsxRuntime.exports.jsxs(BackdropContainer,{onClick:()=>_.setOpen(!1),...tt,children:[jsxRuntime.exports.jsxs(ButtonControl,{..._,className:"sm:justify-left relative z-20 flex h-10 w-full items-center justify-center space-x-2 rounded-[20px] bg-bink-400 px-4 py-2 text-white hover:bg-bink-300",children:[jsxRuntime.exports.jsx(Icon,{icon:it.icon}),jsxRuntime.exports.jsx("span",{className:"flex-1",children:it.name}),jsxRuntime.exports.jsx(Icon,{icon:Icons.CHEVRON_DOWN,className:`transition-transform ${_.open?"rotate-180":""}`})]}),jsxRuntime.exports.jsx("div",{className:`absolute top-0 z-10 w-full rounded-[20px] bg-denim-300 pt-[40px] transition-all duration-200 ${_.open?"block max-h-60 opacity-100":"invisible max-h-0 opacity-0"}`,children:_.options.filter(st=>st.id!==nt).map(st=>jsxRuntime.exports.jsx(Option,{option:st,onClick:lt=>ot(lt,st),tabIndex:_.open?0:void 0},st.id))})]})})})});function TextInputControl({onChange:_,onUnFocus:_e,value:et,label:tt,className:rt,placeholder:nt}){const at=jsxRuntime.exports.jsx("input",{type:"text",className:rt,placeholder:nt,onChange:it=>_&&_(it.target.value),value:et,onBlur:()=>_e&&_e()});return tt?jsxRuntime.exports.jsxs("label",{children:[jsxRuntime.exports.jsx("span",{children:tt}),at]}):at}function SearchBarInput(_){const{t:_e}=useTranslation(),[et,tt]=react.exports.useState(!1);function rt(at){_.onChange({..._.value,searchQuery:at},!1)}function nt(at){_.onChange({..._.value,type:at},!0)}return jsxRuntime.exports.jsxs("div",{className:"relative flex flex-col rounded-[28px] bg-denim-400 transition-colors focus-within:bg-denim-400 hover:bg-denim-500 sm:flex-row sm:items-center",children:[jsxRuntime.exports.jsx("div",{className:"pointer-events-none absolute left-5 top-0 bottom-0 flex max-h-14 items-center",children:jsxRuntime.exports.jsx(Icon,{icon:Icons.SEARCH})}),jsxRuntime.exports.jsx(TextInputControl,{onUnFocus:_.onUnFocus,onChange:at=>rt(at),value:_.value.searchQuery,className:"w-full flex-1 bg-transparent px-4 py-4 pl-12 text-white  placeholder-denim-700 focus:outline-none sm:py-4 sm:pr-2",placeholder:_.placeholder}),jsxRuntime.exports.jsx("div",{className:"px-4 py-4 pt-0 sm:py-2 sm:px-2",children:jsxRuntime.exports.jsx(DropdownButton,{icon:Icons.SEARCH,open:et,setOpen:at=>tt(at),selectedItem:_.value.type,setSelectedItem:at=>nt(at),options:[{id:MWMediaType.MOVIE,name:_e("searchBar.movie"),icon:Icons.FILM},{id:MWMediaType.SERIES,name:_e("searchBar.series"),icon:Icons.CLAPPER_BOARD}],onClick:()=>tt(at=>!at),children:_.buttonText||_e("searchBar.search")})})]})}function getInitialValue(_){const _e=Object.values(MWMediaType).find(tt=>_.type===tt)||MWMediaType.MOVIE,et=_.query||"";return{type:_e,searchQuery:et}}function useSearchQuery(){const _=useHistory(),{path:_e,params:et}=useRouteMatch(),[tt,rt]=react.exports.useState(getInitialValue(et));return[tt,(it,ot)=>{const st={...tt};Object.assign(st,it),rt(st),ot&&_.replace(generatePath(_e,{query:st.searchQuery.length===0?void 0:it.searchQuery,type:st.type}))},()=>{_.replace(generatePath(_e,{query:tt.searchQuery.length===0?void 0:tt.searchQuery,type:tt.type}))}]}function WideContainer(_){return jsxRuntime.exports.jsx("div",{className:`mx-auto w-[700px] max-w-full px-8 sm:px-4 ${_.classNames||""}`,children:_.children})}function useDebounce(_,_e){const[et,tt]=react.exports.useState(_);return react.exports.useEffect(()=>{const rt=setTimeout(()=>{tt(_)},_e);return()=>{clearTimeout(rt)}},[_,_e]),et}function SectionHeading(_){return jsxRuntime.exports.jsx("div",{className:_.className,children:jsxRuntime.exports.jsxs("div",{className:"mb-5 flex items-center",children:[jsxRuntime.exports.jsxs("p",{className:"flex flex-1 items-center font-bold uppercase text-denim-700",children:[_.icon?jsxRuntime.exports.jsx("span",{className:"mr-2 text-xl",children:jsxRuntime.exports.jsx(Icon,{icon:_.icon})}):null,_.title]}),_.children]})})}const MediaGrid=react.exports.forwardRef((_,_e)=>jsxRuntime.exports.jsx("div",{className:"grid grid-cols-2 gap-6 sm:grid-cols-3",ref:_e,children:_.children}));function DotList(_){return jsxRuntime.exports.jsx("p",{className:`font-semibold text-denim-700 ${_.className||""}`,children:_.content.map((_e,et)=>jsxRuntime.exports.jsxs("span",{children:[et!==0?jsxRuntime.exports.jsx("span",{className:"mx-[0.6em] text-[1em]",children:"●"}):null,_e]},_e))})}function MediaCardContent({media:_,linkable:_e,series:et,percentage:tt,closable:rt,onClose:nt}){const{t:at}=useTranslation(),it=`${Math.round(tt??0).toFixed(0)}%`,ot=_e&&!rt;return jsxRuntime.exports.jsx("div",{className:`group -m-3 mb-2 rounded-xl bg-denim-300 bg-opacity-0 transition-colors duration-100 ${ot?"hover:bg-opacity-100":""}`,children:jsxRuntime.exports.jsxs("article",{className:`pointer-events-auto relative mb-2 p-3 transition-transform duration-100 ${ot?"group-hover:scale-95":""}`,children:[jsxRuntime.exports.jsxs("div",{className:["relative mb-4 aspect-[2/3] w-full overflow-hidden rounded-xl bg-denim-500 bg-cover bg-center transition-[border-radius] duration-100",rt?"":"group-hover:rounded-lg"].join(" "),style:{backgroundImage:_.poster?`url(${_.poster})`:void 0},children:[et?jsxRuntime.exports.jsx("div",{className:["absolute right-2 top-2 rounded-md bg-denim-200 py-1 px-2 transition-colors",rt?"":"group-hover:bg-denim-500"].join(" "),children:jsxRuntime.exports.jsx("p",{className:["text-center text-xs font-bold text-slate-400 transition-colors",rt?"":"group-hover:text-white"].join(" "),children:at("seasons.seasonAndEpisode",{season:et.season,episode:et.episode})})}):null,tt!==void 0?jsxRuntime.exports.jsxs(jsxRuntime.exports.Fragment,{children:[jsxRuntime.exports.jsx("div",{className:`absolute inset-x-0 bottom-0 h-12 bg-gradient-to-t from-denim-300 to-transparent transition-colors ${ot?"group-hover:from-denim-100":""}`}),jsxRuntime.exports.jsx("div",{className:`absolute inset-x-0 bottom-0 h-12 bg-gradient-to-t from-denim-300 to-transparent transition-colors ${ot?"group-hover:from-denim-100":""}`}),jsxRuntime.exports.jsx("div",{className:"absolute inset-x-0 bottom-0 p-3",children:jsxRuntime.exports.jsx("div",{className:"relative h-1 overflow-hidden rounded-full bg-denim-600",children:jsxRuntime.exports.jsx("div",{className:"absolute inset-y-0 left-0 rounded-full bg-bink-700",style:{width:it}})})})]}):null,jsxRuntime.exports.jsx("div",{className:`absolute inset-0 flex items-center justify-center bg-denim-200 bg-opacity-80 transition-opacity duration-200 ${rt?"opacity-100":"pointer-events-none opacity-0"}`,children:jsxRuntime.exports.jsx(IconPatch,{clickable:!0,className:"text-2xl text-slate-400",onClick:()=>rt&&(nt==null?void 0:nt()),icon:Icons.X})})]}),jsxRuntime.exports.jsx("h1",{className:"mb-1 max-h-[4.5rem] text-ellipsis break-words font-bold text-white line-clamp-3",children:jsxRuntime.exports.jsx("span",{children:_.title})}),jsxRuntime.exports.jsx(DotList,{className:"text-xs",content:[at(`media.${_.type}`),_.year]})]})})}function MediaCard(_){const _e=jsxRuntime.exports.jsx(MediaCardContent,{..._}),et=_.linkable&&!_.closable;let tt=et?`/media/${encodeURIComponent(JWMediaToId(_.media))}`:"#";return et&&_.series&&(tt+=`/${encodeURIComponent(_.series.seasonId)}/${encodeURIComponent(_.series.episodeId)}`),_.linkable?jsxRuntime.exports.jsx(Link$1,{to:tt,className:_.closable?"hover:cursor-default":"",children:_e}):jsxRuntime.exports.jsx("span",{children:_e})}function formatSeries(_){if(!!_)return{season:_.season,episode:_.episode,episodeId:_.episodeId,seasonId:_.seasonId}}function WatchedMediaCard(_){var tt;const{watched:_e}=useWatchedContext(),et=react.exports.useMemo(()=>_e.items.sort((rt,nt)=>nt.watchedAt-rt.watchedAt).find(rt=>rt.item.meta.id===_.media.id),[_e,_.media]);return jsxRuntime.exports.jsx(MediaCard,{media:_.media,series:formatSeries((tt=et==null?void 0:et.item)==null?void 0:tt.series),linkable:!0,percentage:et==null?void 0:et.percentage,onClose:_.onClose,closable:_.closable})}const parents=new Set,coords=new WeakMap,siblings=new WeakMap,animations=new WeakMap,intersections=new WeakMap,intervals=new WeakMap,options=new WeakMap,debounces=new WeakMap,enabled=new WeakSet;let root;const TGT="__aa_tgt",DEL="__aa_del",handleMutations=_=>{const _e=getElements(_);_e&&_e.forEach(et=>animate(et))},handleResizes=_=>{_.forEach(_e=>{_e.target===root&&updateAllPos(),coords.has(_e.target)&&updatePos(_e.target)})};function observePosition(_){const _e=intersections.get(_);_e==null||_e.disconnect();let et=coords.get(_),tt=0;const rt=5;et||(et=getCoords(_),coords.set(_,et));const{offsetWidth:nt,offsetHeight:at}=root,ot=[et.top-rt,nt-(et.left+rt+et.width),at-(et.top+rt+et.height),et.left-rt].map(lt=>`${-1*Math.floor(lt)}px`).join(" "),st=new IntersectionObserver(()=>{++tt>1&&updatePos(_)},{root,threshold:1,rootMargin:ot});st.observe(_),intersections.set(_,st)}function updatePos(_){clearTimeout(debounces.get(_));const _e=getOptions(_),et=typeof _e=="function"?500:_e.duration;debounces.set(_,setTimeout(async()=>{const tt=animations.get(_);(!tt||await tt.finished)&&(coords.set(_,getCoords(_)),observePosition(_))},et))}function updateAllPos(){clearTimeout(debounces.get(root)),debounces.set(root,setTimeout(()=>{parents.forEach(_=>forEach(_,_e=>lowPriority(()=>updatePos(_e))))},100))}function poll(_){setTimeout(()=>{intervals.set(_,setInterval(()=>lowPriority(updatePos.bind(null,_)),2e3))},Math.round(2e3*Math.random()))}function lowPriority(_){typeof requestIdleCallback=="function"?requestIdleCallback(()=>_()):requestAnimationFrame(()=>_())}let mutations,resize;typeof window<"u"&&(root=document.documentElement,mutations=new MutationObserver(handleMutations),resize=new ResizeObserver(handleResizes),resize.observe(root));function getElements(_){return _.reduce((tt,rt)=>[...tt,...Array.from(rt.addedNodes),...Array.from(rt.removedNodes)],[]).every(tt=>tt.nodeName==="#comment")?!1:_.reduce((tt,rt)=>{if(tt===!1)return!1;if(rt.target instanceof Element){if(target(rt.target),!tt.has(rt.target)){tt.add(rt.target);for(let nt=0;nt<rt.target.children.length;nt++){const at=rt.target.children.item(nt);if(!!at){if(DEL in at)return!1;target(rt.target,at),tt.add(at)}}}if(rt.removedNodes.length)for(let nt=0;nt<rt.removedNodes.length;nt++){const at=rt.removedNodes[nt];if(DEL in at)return!1;at instanceof Element&&(tt.add(at),target(rt.target,at),siblings.set(at,[rt.previousSibling,rt.nextSibling]))}}return tt},new Set)}function target(_,_e){!_e&&!(TGT in _)?Object.defineProperty(_,TGT,{value:_}):_e&&!(TGT in _e)&&Object.defineProperty(_e,TGT,{value:_})}function animate(_){var _e;const et=root.contains(_),tt=coords.has(_);et&&siblings.has(_)&&siblings.delete(_),animations.has(_)&&((_e=animations.get(_))===null||_e===void 0||_e.cancel()),tt&&et?remain(_):tt&&!et?remove(_):add(_)}function raw(_){return Number(_.replace(/[^0-9.\-]/g,""))}function getCoords(_){const _e=_.getBoundingClientRect();return{top:_e.top+window.scrollY,left:_e.left+window.scrollX,width:_e.width,height:_e.height}}function getTransitionSizes(_,_e,et){let tt=_e.width,rt=_e.height,nt=et.width,at=et.height;const it=getComputedStyle(_);if(it.getPropertyValue("box-sizing")==="content-box"){const st=raw(it.paddingTop)+raw(it.paddingBottom)+raw(it.borderTopWidth)+raw(it.borderBottomWidth),lt=raw(it.paddingLeft)+raw(it.paddingRight)+raw(it.borderRightWidth)+raw(it.borderLeftWidth);tt-=lt,nt-=lt,rt-=st,at-=st}return[tt,nt,rt,at].map(Math.round)}function getOptions(_){return TGT in _&&options.has(_[TGT])?options.get(_[TGT]):{duration:250,easing:"ease-in-out"}}function getTarget(_){if(TGT in _)return _[TGT]}function isEnabled(_){const _e=getTarget(_);return _e?enabled.has(_e):!1}function forEach(_,..._e){_e.forEach(et=>et(_,options.has(_)));for(let et=0;et<_.children.length;et++){const tt=_.children.item(et);tt&&_e.forEach(rt=>rt(tt,options.has(tt)))}}function remain(_){const _e=coords.get(_),et=getCoords(_);if(!isEnabled(_))return coords.set(_,et);let tt;if(!_e)return;const rt=getOptions(_);if(typeof rt!="function"){const nt=_e.left-et.left,at=_e.top-et.top,[it,ot,st,lt]=getTransitionSizes(_,_e,et),gt={transform:`translate(${nt}px, ${at}px)`},ct={transform:"translate(0, 0)"};it!==ot&&(gt.width=`${it}px`,ct.width=`${ot}px`),st!==lt&&(gt.height=`${st}px`,ct.height=`${lt}px`),tt=_.animate([gt,ct],{duration:rt.duration,easing:rt.easing})}else tt=new Animation(rt(_,"remain",_e,et)),tt.play();animations.set(_,tt),coords.set(_,et),tt.addEventListener("finish",updatePos.bind(null,_))}function add(_){const _e=getCoords(_);coords.set(_,_e);const et=getOptions(_);if(!isEnabled(_))return;let tt;typeof et!="function"?tt=_.animate([{transform:"scale(.98)",opacity:0},{transform:"scale(0.98)",opacity:0,offset:.5},{transform:"scale(1)",opacity:1}],{duration:et.duration*1.5,easing:"ease-in"}):(tt=new Animation(et(_,"add",_e)),tt.play()),animations.set(_,tt),tt.addEventListener("finish",updatePos.bind(null,_))}function remove(_){var _e;if(!siblings.has(_)||!coords.has(_))return;const[et,tt]=siblings.get(_);Object.defineProperty(_,DEL,{value:!0}),tt&&tt.parentNode&&tt.parentNode instanceof Element?tt.parentNode.insertBefore(_,tt):et&&et.parentNode?et.parentNode.appendChild(_):(_e=getTarget(_))===null||_e===void 0||_e.appendChild(_);function rt(){var ct;_.remove(),coords.delete(_),siblings.delete(_),animations.delete(_),(ct=intersections.get(_))===null||ct===void 0||ct.disconnect()}if(!isEnabled(_))return rt();const[nt,at,it,ot]=deletePosition(_),st=getOptions(_),lt=coords.get(_);let gt;Object.assign(_.style,{position:"absolute",top:`${nt}px`,left:`${at}px`,width:`${it}px`,height:`${ot}px`,margin:0,pointerEvents:"none",transformOrigin:"center",zIndex:100}),typeof st!="function"?gt=_.animate([{transform:"scale(1)",opacity:1},{transform:"scale(.98)",opacity:0}],{duration:st.duration,easing:"ease-out"}):(gt=new Animation(st(_,"remove",lt)),gt.play()),animations.set(_,gt),gt.addEventListener("finish",rt)}function deletePosition(_){const _e=coords.get(_),[et,,tt]=getTransitionSizes(_,_e,getCoords(_));let rt=_.parentElement;for(;rt&&(getComputedStyle(rt).position==="static"||rt instanceof HTMLBodyElement);)rt=rt.parentElement;rt||(rt=document.body);const nt=getComputedStyle(rt),at=coords.get(rt)||getCoords(rt),it=Math.round(_e.top-at.top)-raw(nt.borderTopWidth),ot=Math.round(_e.left-at.left)-raw(nt.borderLeftWidth);return[it,ot,et,tt]}function autoAnimate(_,_e={}){return mutations&&resize&&(window.matchMedia("(prefers-reduced-motion: reduce)").matches&&typeof _e!="function"&&!_e.disrespectUserMotionPreference||(enabled.add(_),getComputedStyle(_).position==="static"&&Object.assign(_.style,{position:"relative"}),forEach(_,updatePos,poll,rt=>resize==null?void 0:resize.observe(rt)),typeof _e=="function"?options.set(_,_e):options.set(_,{duration:250,easing:"ease-in-out",..._e}),mutations.observe(_,{childList:!0}),parents.add(_))),Object.freeze({parent:_,enable:()=>{enabled.add(_)},disable:()=>{enabled.delete(_)},isEnabled:()=>enabled.has(_)})}function useAutoAnimate(_){const _e=react.exports.useRef(null),[et,tt]=react.exports.useState(),rt=nt=>{et&&(nt?et.enable():et.disable())};return react.exports.useEffect(()=>{_e.current instanceof HTMLElement&&tt(autoAnimate(_e.current,_||{}))},[]),[_e,rt]}function EditButton(_){const{t:_e}=useTranslation(),[et]=useAutoAnimate(),tt=react.exports.useCallback(()=>{var rt;(rt=_.onEdit)==null||rt.call(_,!_.editing)},[_]);return jsxRuntime.exports.jsx(ButtonControl,{onClick:tt,className:"flex h-12 items-center overflow-hidden rounded-full bg-denim-400 px-4 py-2 text-white transition-[background-color,transform] hover:bg-denim-500 active:scale-105",children:jsxRuntime.exports.jsx("span",{ref:et,children:_.editing?jsxRuntime.exports.jsx("span",{className:"mx-4 whitespace-nowrap",children:_e("media.stopEditing")}):jsxRuntime.exports.jsx(Icon,{icon:Icons.EDIT})})})}function Overlay(_){return jsxRuntime.exports.jsxs(jsxRuntime.exports.Fragment,{children:[jsxRuntime.exports.jsx(HelmetExport,{children:jsxRuntime.exports.jsx("body",{"data-no-scroll":!0})}),jsxRuntime.exports.jsxs("div",{className:"fixed inset-0 z-[99999]",children:[jsxRuntime.exports.jsx(Transition,{animation:"fade",className:"absolute inset-0 bg-[rgba(8,6,18,0.85)]",isChild:!0}),_.children]})]})}function ModalFrame(_){return jsxRuntime.exports.jsx(Transition,{className:"fixed inset-0 z-[9999]",animation:"none",show:_.show,children:jsxRuntime.exports.jsx(Overlay,{children:jsxRuntime.exports.jsx(Transition,{isChild:!0,className:"flex h-full w-full items-center justify-center",animation:"slide-up",children:_.children})})})}function Modal(_){return reactDom.exports.createPortal(jsxRuntime.exports.jsx(ModalFrame,{show:_.show,children:_.children}),document.body)}function ModalCard(_){return jsxRuntime.exports.jsx("div",{className:"relative mx-2 max-w-[600px] overflow-hidden rounded-lg bg-denim-200 px-10 py-10",children:_.children})}function Button(_){return jsxRuntime.exports.jsxs("button",{type:"button",onClick:_.onClick,className:"inline-flex items-center justify-center rounded-lg bg-white px-8 py-3 font-bold text-black transition-[transform,background-color] duration-100 hover:bg-gray-200 active:scale-105 md:px-16",children:[_.icon?jsxRuntime.exports.jsx("span",{className:"mr-3 hidden md:inline-block",children:jsxRuntime.exports.jsx(Icon,{icon:_.icon})}):null,_.children]})}const Z_FIXED$1=4,Z_BINARY=0,Z_TEXT=1,Z_UNKNOWN$1=2;function zero$1(_){let _e=_.length;for(;--_e>=0;)_[_e]=0}const STORED_BLOCK=0,STATIC_TREES=1,DYN_TREES=2,MIN_MATCH$1=3,MAX_MATCH$1=258,LENGTH_CODES$1=29,LITERALS$1=256,L_CODES$1=LITERALS$1+1+LENGTH_CODES$1,D_CODES$1=30,BL_CODES$1=19,HEAP_SIZE$1=2*L_CODES$1+1,MAX_BITS$1=15,Buf_size=16,MAX_BL_BITS=7,END_BLOCK=256,REP_3_6=16,REPZ_3_10=17,REPZ_11_138=18,extra_lbits=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),extra_dbits=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),extra_blbits=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),bl_order=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),DIST_CODE_LEN=512,static_ltree=new Array((L_CODES$1+2)*2);zero$1(static_ltree);const static_dtree=new Array(D_CODES$1*2);zero$1(static_dtree);const _dist_code=new Array(DIST_CODE_LEN);zero$1(_dist_code);const _length_code=new Array(MAX_MATCH$1-MIN_MATCH$1+1);zero$1(_length_code);const base_length=new Array(LENGTH_CODES$1);zero$1(base_length);const base_dist=new Array(D_CODES$1);zero$1(base_dist);function StaticTreeDesc(_,_e,et,tt,rt){this.static_tree=_,this.extra_bits=_e,this.extra_base=et,this.elems=tt,this.max_length=rt,this.has_stree=_&&_.length}let static_l_desc,static_d_desc,static_bl_desc;function TreeDesc(_,_e){this.dyn_tree=_,this.max_code=0,this.stat_desc=_e}const d_code=_=>_<256?_dist_code[_]:_dist_code[256+(_>>>7)],put_short=(_,_e)=>{_.pending_buf[_.pending++]=_e&255,_.pending_buf[_.pending++]=_e>>>8&255},send_bits=(_,_e,et)=>{_.bi_valid>Buf_size-et?(_.bi_buf|=_e<<_.bi_valid&65535,put_short(_,_.bi_buf),_.bi_buf=_e>>Buf_size-_.bi_valid,_.bi_valid+=et-Buf_size):(_.bi_buf|=_e<<_.bi_valid&65535,_.bi_valid+=et)},send_code=(_,_e,et)=>{send_bits(_,et[_e*2],et[_e*2+1])},bi_reverse=(_,_e)=>{let et=0;do et|=_&1,_>>>=1,et<<=1;while(--_e>0);return et>>>1},bi_flush=_=>{_.bi_valid===16?(put_short(_,_.bi_buf),_.bi_buf=0,_.bi_valid=0):_.bi_valid>=8&&(_.pending_buf[_.pending++]=_.bi_buf&255,_.bi_buf>>=8,_.bi_valid-=8)},gen_bitlen=(_,_e)=>{const et=_e.dyn_tree,tt=_e.max_code,rt=_e.stat_desc.static_tree,nt=_e.stat_desc.has_stree,at=_e.stat_desc.extra_bits,it=_e.stat_desc.extra_base,ot=_e.stat_desc.max_length;let st,lt,gt,ct,wt,Tt,Rt=0;for(ct=0;ct<=MAX_BITS$1;ct++)_.bl_count[ct]=0;for(et[_.heap[_.heap_max]*2+1]=0,st=_.heap_max+1;st<HEAP_SIZE$1;st++)lt=_.heap[st],ct=et[et[lt*2+1]*2+1]+1,ct>ot&&(ct=ot,Rt++),et[lt*2+1]=ct,!(lt>tt)&&(_.bl_count[ct]++,wt=0,lt>=it&&(wt=at[lt-it]),Tt=et[lt*2],_.opt_len+=Tt*(ct+wt),nt&&(_.static_len+=Tt*(rt[lt*2+1]+wt)));if(Rt!==0){do{for(ct=ot-1;_.bl_count[ct]===0;)ct--;_.bl_count[ct]--,_.bl_count[ct+1]+=2,_.bl_count[ot]--,Rt-=2}while(Rt>0);for(ct=ot;ct!==0;ct--)for(lt=_.bl_count[ct];lt!==0;)gt=_.heap[--st],!(gt>tt)&&(et[gt*2+1]!==ct&&(_.opt_len+=(ct-et[gt*2+1])*et[gt*2],et[gt*2+1]=ct),lt--)}},gen_codes=(_,_e,et)=>{const tt=new Array(MAX_BITS$1+1);let rt=0,nt,at;for(nt=1;nt<=MAX_BITS$1;nt++)rt=rt+et[nt-1]<<1,tt[nt]=rt;for(at=0;at<=_e;at++){let it=_[at*2+1];it!==0&&(_[at*2]=bi_reverse(tt[it]++,it))}},tr_static_init=()=>{let _,_e,et,tt,rt;const nt=new Array(MAX_BITS$1+1);for(et=0,tt=0;tt<LENGTH_CODES$1-1;tt++)for(base_length[tt]=et,_=0;_<1<<extra_lbits[tt];_++)_length_code[et++]=tt;for(_length_code[et-1]=tt,rt=0,tt=0;tt<16;tt++)for(base_dist[tt]=rt,_=0;_<1<<extra_dbits[tt];_++)_dist_code[rt++]=tt;for(rt>>=7;tt<D_CODES$1;tt++)for(base_dist[tt]=rt<<7,_=0;_<1<<extra_dbits[tt]-7;_++)_dist_code[256+rt++]=tt;for(_e=0;_e<=MAX_BITS$1;_e++)nt[_e]=0;for(_=0;_<=143;)static_ltree[_*2+1]=8,_++,nt[8]++;for(;_<=255;)static_ltree[_*2+1]=9,_++,nt[9]++;for(;_<=279;)static_ltree[_*2+1]=7,_++,nt[7]++;for(;_<=287;)static_ltree[_*2+1]=8,_++,nt[8]++;for(gen_codes(static_ltree,L_CODES$1+1,nt),_=0;_<D_CODES$1;_++)static_dtree[_*2+1]=5,static_dtree[_*2]=bi_reverse(_,5);static_l_desc=new StaticTreeDesc(static_ltree,extra_lbits,LITERALS$1+1,L_CODES$1,MAX_BITS$1),static_d_desc=new StaticTreeDesc(static_dtree,extra_dbits,0,D_CODES$1,MAX_BITS$1),static_bl_desc=new StaticTreeDesc(new Array(0),extra_blbits,0,BL_CODES$1,MAX_BL_BITS)},init_block=_=>{let _e;for(_e=0;_e<L_CODES$1;_e++)_.dyn_ltree[_e*2]=0;for(_e=0;_e<D_CODES$1;_e++)_.dyn_dtree[_e*2]=0;for(_e=0;_e<BL_CODES$1;_e++)_.bl_tree[_e*2]=0;_.dyn_ltree[END_BLOCK*2]=1,_.opt_len=_.static_len=0,_.sym_next=_.matches=0},bi_windup=_=>{_.bi_valid>8?put_short(_,_.bi_buf):_.bi_valid>0&&(_.pending_buf[_.pending++]=_.bi_buf),_.bi_buf=0,_.bi_valid=0},smaller=(_,_e,et,tt)=>{const rt=_e*2,nt=et*2;return _[rt]<_[nt]||_[rt]===_[nt]&&tt[_e]<=tt[et]},pqdownheap=(_,_e,et)=>{const tt=_.heap[et];let rt=et<<1;for(;rt<=_.heap_len&&(rt<_.heap_len&&smaller(_e,_.heap[rt+1],_.heap[rt],_.depth)&&rt++,!smaller(_e,tt,_.heap[rt],_.depth));)_.heap[et]=_.heap[rt],et=rt,rt<<=1;_.heap[et]=tt},compress_block=(_,_e,et)=>{let tt,rt,nt=0,at,it;if(_.sym_next!==0)do tt=_.pending_buf[_.sym_buf+nt++]&255,tt+=(_.pending_buf[_.sym_buf+nt++]&255)<<8,rt=_.pending_buf[_.sym_buf+nt++],tt===0?send_code(_,rt,_e):(at=_length_code[rt],send_code(_,at+LITERALS$1+1,_e),it=extra_lbits[at],it!==0&&(rt-=base_length[at],send_bits(_,rt,it)),tt--,at=d_code(tt),send_code(_,at,et),it=extra_dbits[at],it!==0&&(tt-=base_dist[at],send_bits(_,tt,it)));while(nt<_.sym_next);send_code(_,END_BLOCK,_e)},build_tree=(_,_e)=>{const et=_e.dyn_tree,tt=_e.stat_desc.static_tree,rt=_e.stat_desc.has_stree,nt=_e.stat_desc.elems;let at,it,ot=-1,st;for(_.heap_len=0,_.heap_max=HEAP_SIZE$1,at=0;at<nt;at++)et[at*2]!==0?(_.heap[++_.heap_len]=ot=at,_.depth[at]=0):et[at*2+1]=0;for(;_.heap_len<2;)st=_.heap[++_.heap_len]=ot<2?++ot:0,et[st*2]=1,_.depth[st]=0,_.opt_len--,rt&&(_.static_len-=tt[st*2+1]);for(_e.max_code=ot,at=_.heap_len>>1;at>=1;at--)pqdownheap(_,et,at);st=nt;do at=_.heap[1],_.heap[1]=_.heap[_.heap_len--],pqdownheap(_,et,1),it=_.heap[1],_.heap[--_.heap_max]=at,_.heap[--_.heap_max]=it,et[st*2]=et[at*2]+et[it*2],_.depth[st]=(_.depth[at]>=_.depth[it]?_.depth[at]:_.depth[it])+1,et[at*2+1]=et[it*2+1]=st,_.heap[1]=st++,pqdownheap(_,et,1);while(_.heap_len>=2);_.heap[--_.heap_max]=_.heap[1],gen_bitlen(_,_e),gen_codes(et,ot,_.bl_count)},scan_tree=(_,_e,et)=>{let tt,rt=-1,nt,at=_e[0*2+1],it=0,ot=7,st=4;for(at===0&&(ot=138,st=3),_e[(et+1)*2+1]=65535,tt=0;tt<=et;tt++)nt=at,at=_e[(tt+1)*2+1],!(++it<ot&&nt===at)&&(it<st?_.bl_tree[nt*2]+=it:nt!==0?(nt!==rt&&_.bl_tree[nt*2]++,_.bl_tree[REP_3_6*2]++):it<=10?_.bl_tree[REPZ_3_10*2]++:_.bl_tree[REPZ_11_138*2]++,it=0,rt=nt,at===0?(ot=138,st=3):nt===at?(ot=6,st=3):(ot=7,st=4))},send_tree=(_,_e,et)=>{let tt,rt=-1,nt,at=_e[0*2+1],it=0,ot=7,st=4;for(at===0&&(ot=138,st=3),tt=0;tt<=et;tt++)if(nt=at,at=_e[(tt+1)*2+1],!(++it<ot&&nt===at)){if(it<st)do send_code(_,nt,_.bl_tree);while(--it!==0);else nt!==0?(nt!==rt&&(send_code(_,nt,_.bl_tree),it--),send_code(_,REP_3_6,_.bl_tree),send_bits(_,it-3,2)):it<=10?(send_code(_,REPZ_3_10,_.bl_tree),send_bits(_,it-3,3)):(send_code(_,REPZ_11_138,_.bl_tree),send_bits(_,it-11,7));it=0,rt=nt,at===0?(ot=138,st=3):nt===at?(ot=6,st=3):(ot=7,st=4)}},build_bl_tree=_=>{let _e;for(scan_tree(_,_.dyn_ltree,_.l_desc.max_code),scan_tree(_,_.dyn_dtree,_.d_desc.max_code),build_tree(_,_.bl_desc),_e=BL_CODES$1-1;_e>=3&&_.bl_tree[bl_order[_e]*2+1]===0;_e--);return _.opt_len+=3*(_e+1)+5+5+4,_e},send_all_trees=(_,_e,et,tt)=>{let rt;for(send_bits(_,_e-257,5),send_bits(_,et-1,5),send_bits(_,tt-4,4),rt=0;rt<tt;rt++)send_bits(_,_.bl_tree[bl_order[rt]*2+1],3);send_tree(_,_.dyn_ltree,_e-1),send_tree(_,_.dyn_dtree,et-1)},detect_data_type=_=>{let _e=4093624447,et;for(et=0;et<=31;et++,_e>>>=1)if(_e&1&&_.dyn_ltree[et*2]!==0)return Z_BINARY;if(_.dyn_ltree[9*2]!==0||_.dyn_ltree[10*2]!==0||_.dyn_ltree[13*2]!==0)return Z_TEXT;for(et=32;et<LITERALS$1;et++)if(_.dyn_ltree[et*2]!==0)return Z_TEXT;return Z_BINARY};let static_init_done=!1;const _tr_init$1=_=>{static_init_done||(tr_static_init(),static_init_done=!0),_.l_desc=new TreeDesc(_.dyn_ltree,static_l_desc),_.d_desc=new TreeDesc(_.dyn_dtree,static_d_desc),_.bl_desc=new TreeDesc(_.bl_tree,static_bl_desc),_.bi_buf=0,_.bi_valid=0,init_block(_)},_tr_stored_block$1=(_,_e,et,tt)=>{send_bits(_,(STORED_BLOCK<<1)+(tt?1:0),3),bi_windup(_),put_short(_,et),put_short(_,~et),et&&_.pending_buf.set(_.window.subarray(_e,_e+et),_.pending),_.pending+=et},_tr_align$1=_=>{send_bits(_,STATIC_TREES<<1,3),send_code(_,END_BLOCK,static_ltree),bi_flush(_)},_tr_flush_block$1=(_,_e,et,tt)=>{let rt,nt,at=0;_.level>0?(_.strm.data_type===Z_UNKNOWN$1&&(_.strm.data_type=detect_data_type(_)),build_tree(_,_.l_desc),build_tree(_,_.d_desc),at=build_bl_tree(_),rt=_.opt_len+3+7>>>3,nt=_.static_len+3+7>>>3,nt<=rt&&(rt=nt)):rt=nt=et+5,et+4<=rt&&_e!==-1?_tr_stored_block$1(_,_e,et,tt):_.strategy===Z_FIXED$1||nt===rt?(send_bits(_,(STATIC_TREES<<1)+(tt?1:0),3),compress_block(_,static_ltree,static_dtree)):(send_bits(_,(DYN_TREES<<1)+(tt?1:0),3),send_all_trees(_,_.l_desc.max_code+1,_.d_desc.max_code+1,at+1),compress_block(_,_.dyn_ltree,_.dyn_dtree)),init_block(_),tt&&bi_windup(_)},_tr_tally$1=(_,_e,et)=>(_.pending_buf[_.sym_buf+_.sym_next++]=_e,_.pending_buf[_.sym_buf+_.sym_next++]=_e>>8,_.pending_buf[_.sym_buf+_.sym_next++]=et,_e===0?_.dyn_ltree[et*2]++:(_.matches++,_e--,_.dyn_ltree[(_length_code[et]+LITERALS$1+1)*2]++,_.dyn_dtree[d_code(_e)*2]++),_.sym_next===_.sym_end);var _tr_init_1=_tr_init$1,_tr_stored_block_1=_tr_stored_block$1,_tr_flush_block_1=_tr_flush_block$1,_tr_tally_1=_tr_tally$1,_tr_align_1=_tr_align$1,trees={_tr_init:_tr_init_1,_tr_stored_block:_tr_stored_block_1,_tr_flush_block:_tr_flush_block_1,_tr_tally:_tr_tally_1,_tr_align:_tr_align_1};const adler32=(_,_e,et,tt)=>{let rt=_&65535|0,nt=_>>>16&65535|0,at=0;for(;et!==0;){at=et>2e3?2e3:et,et-=at;do rt=rt+_e[tt++]|0,nt=nt+rt|0;while(--at);rt%=65521,nt%=65521}return rt|nt<<16|0};var adler32_1=adler32;const makeTable=()=>{let _,_e=[];for(var et=0;et<256;et++){_=et;for(var tt=0;tt<8;tt++)_=_&1?3988292384^_>>>1:_>>>1;_e[et]=_}return _e},crcTable=new Uint32Array(makeTable()),crc32=(_,_e,et,tt)=>{const rt=crcTable,nt=tt+et;_^=-1;for(let at=tt;at<nt;at++)_=_>>>8^rt[(_^_e[at])&255];return _^-1};var crc32_1=crc32,messages={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},constants$2={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init,_tr_stored_block,_tr_flush_block,_tr_tally,_tr_align}=trees,{Z_NO_FLUSH:Z_NO_FLUSH$2,Z_PARTIAL_FLUSH,Z_FULL_FLUSH:Z_FULL_FLUSH$1,Z_FINISH:Z_FINISH$3,Z_BLOCK:Z_BLOCK$1,Z_OK:Z_OK$3,Z_STREAM_END:Z_STREAM_END$3,Z_STREAM_ERROR:Z_STREAM_ERROR$2,Z_DATA_ERROR:Z_DATA_ERROR$2,Z_BUF_ERROR:Z_BUF_ERROR$1,Z_DEFAULT_COMPRESSION:Z_DEFAULT_COMPRESSION$1,Z_FILTERED,Z_HUFFMAN_ONLY,Z_RLE,Z_FIXED,Z_DEFAULT_STRATEGY:Z_DEFAULT_STRATEGY$1,Z_UNKNOWN,Z_DEFLATED:Z_DEFLATED$2}=constants$2,MAX_MEM_LEVEL=9,MAX_WBITS$1=15,DEF_MEM_LEVEL=8,LENGTH_CODES=29,LITERALS=256,L_CODES=LITERALS+1+LENGTH_CODES,D_CODES=30,BL_CODES=19,HEAP_SIZE=2*L_CODES+1,MAX_BITS=15,MIN_MATCH=3,MAX_MATCH=258,MIN_LOOKAHEAD=MAX_MATCH+MIN_MATCH+1,PRESET_DICT=32,INIT_STATE=42,GZIP_STATE=57,EXTRA_STATE=69,NAME_STATE=73,COMMENT_STATE=91,HCRC_STATE=103,BUSY_STATE=113,FINISH_STATE=666,BS_NEED_MORE=1,BS_BLOCK_DONE=2,BS_FINISH_STARTED=3,BS_FINISH_DONE=4,OS_CODE=3,err=(_,_e)=>(_.msg=messages[_e],_e),rank=_=>_*2-(_>4?9:0),zero=_=>{let _e=_.length;for(;--_e>=0;)_[_e]=0},slide_hash=_=>{let _e,et,tt,rt=_.w_size;_e=_.hash_size,tt=_e;do et=_.head[--tt],_.head[tt]=et>=rt?et-rt:0;while(--_e);_e=rt,tt=_e;do et=_.prev[--tt],_.prev[tt]=et>=rt?et-rt:0;while(--_e)};let HASH_ZLIB=(_,_e,et)=>(_e<<_.hash_shift^et)&_.hash_mask,HASH=HASH_ZLIB;const flush_pending=_=>{const _e=_.state;let et=_e.pending;et>_.avail_out&&(et=_.avail_out),et!==0&&(_.output.set(_e.pending_buf.subarray(_e.pending_out,_e.pending_out+et),_.next_out),_.next_out+=et,_e.pending_out+=et,_.total_out+=et,_.avail_out-=et,_e.pending-=et,_e.pending===0&&(_e.pending_out=0))},flush_block_only=(_,_e)=>{_tr_flush_block(_,_.block_start>=0?_.block_start:-1,_.strstart-_.block_start,_e),_.block_start=_.strstart,flush_pending(_.strm)},put_byte=(_,_e)=>{_.pending_buf[_.pending++]=_e},putShortMSB=(_,_e)=>{_.pending_buf[_.pending++]=_e>>>8&255,_.pending_buf[_.pending++]=_e&255},read_buf=(_,_e,et,tt)=>{let rt=_.avail_in;return rt>tt&&(rt=tt),rt===0?0:(_.avail_in-=rt,_e.set(_.input.subarray(_.next_in,_.next_in+rt),et),_.state.wrap===1?_.adler=adler32_1(_.adler,_e,rt,et):_.state.wrap===2&&(_.adler=crc32_1(_.adler,_e,rt,et)),_.next_in+=rt,_.total_in+=rt,rt)},longest_match=(_,_e)=>{let et=_.max_chain_length,tt=_.strstart,rt,nt,at=_.prev_length,it=_.nice_match;const ot=_.strstart>_.w_size-MIN_LOOKAHEAD?_.strstart-(_.w_size-MIN_LOOKAHEAD):0,st=_.window,lt=_.w_mask,gt=_.prev,ct=_.strstart+MAX_MATCH;let wt=st[tt+at-1],Tt=st[tt+at];_.prev_length>=_.good_match&&(et>>=2),it>_.lookahead&&(it=_.lookahead);do if(rt=_e,!(st[rt+at]!==Tt||st[rt+at-1]!==wt||st[rt]!==st[tt]||st[++rt]!==st[tt+1])){tt+=2,rt++;do;while(st[++tt]===st[++rt]&&st[++tt]===st[++rt]&&st[++tt]===st[++rt]&&st[++tt]===st[++rt]&&st[++tt]===st[++rt]&&st[++tt]===st[++rt]&&st[++tt]===st[++rt]&&st[++tt]===st[++rt]&&tt<ct);if(nt=MAX_MATCH-(ct-tt),tt=ct-MAX_MATCH,nt>at){if(_.match_start=_e,at=nt,nt>=it)break;wt=st[tt+at-1],Tt=st[tt+at]}}while((_e=gt[_e&lt])>ot&&--et!==0);return at<=_.lookahead?at:_.lookahead},fill_window=_=>{const _e=_.w_size;let et,tt,rt;do{if(tt=_.window_size-_.lookahead-_.strstart,_.strstart>=_e+(_e-MIN_LOOKAHEAD)&&(_.window.set(_.window.subarray(_e,_e+_e-tt),0),_.match_start-=_e,_.strstart-=_e,_.block_start-=_e,_.insert>_.strstart&&(_.insert=_.strstart),slide_hash(_),tt+=_e),_.strm.avail_in===0)break;if(et=read_buf(_.strm,_.window,_.strstart+_.lookahead,tt),_.lookahead+=et,_.lookahead+_.insert>=MIN_MATCH)for(rt=_.strstart-_.insert,_.ins_h=_.window[rt],_.ins_h=HASH(_,_.ins_h,_.window[rt+1]);_.insert&&(_.ins_h=HASH(_,_.ins_h,_.window[rt+MIN_MATCH-1]),_.prev[rt&_.w_mask]=_.head[_.ins_h],_.head[_.ins_h]=rt,rt++,_.insert--,!(_.lookahead+_.insert<MIN_MATCH)););}while(_.lookahead<MIN_LOOKAHEAD&&_.strm.avail_in!==0)},deflate_stored=(_,_e)=>{let et=_.pending_buf_size-5>_.w_size?_.w_size:_.pending_buf_size-5,tt,rt,nt,at=0,it=_.strm.avail_in;do{if(tt=65535,nt=_.bi_valid+42>>3,_.strm.avail_out<nt||(nt=_.strm.avail_out-nt,rt=_.strstart-_.block_start,tt>rt+_.strm.avail_in&&(tt=rt+_.strm.avail_in),tt>nt&&(tt=nt),tt<et&&(tt===0&&_e!==Z_FINISH$3||_e===Z_NO_FLUSH$2||tt!==rt+_.strm.avail_in)))break;at=_e===Z_FINISH$3&&tt===rt+_.strm.avail_in?1:0,_tr_stored_block(_,0,0,at),_.pending_buf[_.pending-4]=tt,_.pending_buf[_.pending-3]=tt>>8,_.pending_buf[_.pending-2]=~tt,_.pending_buf[_.pending-1]=~tt>>8,flush_pending(_.strm),rt&&(rt>tt&&(rt=tt),_.strm.output.set(_.window.subarray(_.block_start,_.block_start+rt),_.strm.next_out),_.strm.next_out+=rt,_.strm.avail_out-=rt,_.strm.total_out+=rt,_.block_start+=rt,tt-=rt),tt&&(read_buf(_.strm,_.strm.output,_.strm.next_out,tt),_.strm.next_out+=tt,_.strm.avail_out-=tt,_.strm.total_out+=tt)}while(at===0);return it-=_.strm.avail_in,it&&(it>=_.w_size?(_.matches=2,_.window.set(_.strm.input.subarray(_.strm.next_in-_.w_size,_.strm.next_in),0),_.strstart=_.w_size,_.insert=_.strstart):(_.window_size-_.strstart<=it&&(_.strstart-=_.w_size,_.window.set(_.window.subarray(_.w_size,_.w_size+_.strstart),0),_.matches<2&&_.matches++,_.insert>_.strstart&&(_.insert=_.strstart)),_.window.set(_.strm.input.subarray(_.strm.next_in-it,_.strm.next_in),_.strstart),_.strstart+=it,_.insert+=it>_.w_size-_.insert?_.w_size-_.insert:it),_.block_start=_.strstart),_.high_water<_.strstart&&(_.high_water=_.strstart),at?BS_FINISH_DONE:_e!==Z_NO_FLUSH$2&&_e!==Z_FINISH$3&&_.strm.avail_in===0&&_.strstart===_.block_start?BS_BLOCK_DONE:(nt=_.window_size-_.strstart,_.strm.avail_in>nt&&_.block_start>=_.w_size&&(_.block_start-=_.w_size,_.strstart-=_.w_size,_.window.set(_.window.subarray(_.w_size,_.w_size+_.strstart),0),_.matches<2&&_.matches++,nt+=_.w_size,_.insert>_.strstart&&(_.insert=_.strstart)),nt>_.strm.avail_in&&(nt=_.strm.avail_in),nt&&(read_buf(_.strm,_.window,_.strstart,nt),_.strstart+=nt,_.insert+=nt>_.w_size-_.insert?_.w_size-_.insert:nt),_.high_water<_.strstart&&(_.high_water=_.strstart),nt=_.bi_valid+42>>3,nt=_.pending_buf_size-nt>65535?65535:_.pending_buf_size-nt,et=nt>_.w_size?_.w_size:nt,rt=_.strstart-_.block_start,(rt>=et||(rt||_e===Z_FINISH$3)&&_e!==Z_NO_FLUSH$2&&_.strm.avail_in===0&&rt<=nt)&&(tt=rt>nt?nt:rt,at=_e===Z_FINISH$3&&_.strm.avail_in===0&&tt===rt?1:0,_tr_stored_block(_,_.block_start,tt,at),_.block_start+=tt,flush_pending(_.strm)),at?BS_FINISH_STARTED:BS_NEED_MORE)},deflate_fast=(_,_e)=>{let et,tt;for(;;){if(_.lookahead<MIN_LOOKAHEAD){if(fill_window(_),_.lookahead<MIN_LOOKAHEAD&&_e===Z_NO_FLUSH$2)return BS_NEED_MORE;if(_.lookahead===0)break}if(et=0,_.lookahead>=MIN_MATCH&&(_.ins_h=HASH(_,_.ins_h,_.window[_.strstart+MIN_MATCH-1]),et=_.prev[_.strstart&_.w_mask]=_.head[_.ins_h],_.head[_.ins_h]=_.strstart),et!==0&&_.strstart-et<=_.w_size-MIN_LOOKAHEAD&&(_.match_length=longest_match(_,et)),_.match_length>=MIN_MATCH)if(tt=_tr_tally(_,_.strstart-_.match_start,_.match_length-MIN_MATCH),_.lookahead-=_.match_length,_.match_length<=_.max_lazy_match&&_.lookahead>=MIN_MATCH){_.match_length--;do _.strstart++,_.ins_h=HASH(_,_.ins_h,_.window[_.strstart+MIN_MATCH-1]),et=_.prev[_.strstart&_.w_mask]=_.head[_.ins_h],_.head[_.ins_h]=_.strstart;while(--_.match_length!==0);_.strstart++}else _.strstart+=_.match_length,_.match_length=0,_.ins_h=_.window[_.strstart],_.ins_h=HASH(_,_.ins_h,_.window[_.strstart+1]);else tt=_tr_tally(_,0,_.window[_.strstart]),_.lookahead--,_.strstart++;if(tt&&(flush_block_only(_,!1),_.strm.avail_out===0))return BS_NEED_MORE}return _.insert=_.strstart<MIN_MATCH-1?_.strstart:MIN_MATCH-1,_e===Z_FINISH$3?(flush_block_only(_,!0),_.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):_.sym_next&&(flush_block_only(_,!1),_.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE},deflate_slow=(_,_e)=>{let et,tt,rt;for(;;){if(_.lookahead<MIN_LOOKAHEAD){if(fill_window(_),_.lookahead<MIN_LOOKAHEAD&&_e===Z_NO_FLUSH$2)return BS_NEED_MORE;if(_.lookahead===0)break}if(et=0,_.lookahead>=MIN_MATCH&&(_.ins_h=HASH(_,_.ins_h,_.window[_.strstart+MIN_MATCH-1]),et=_.prev[_.strstart&_.w_mask]=_.head[_.ins_h],_.head[_.ins_h]=_.strstart),_.prev_length=_.match_length,_.prev_match=_.match_start,_.match_length=MIN_MATCH-1,et!==0&&_.prev_length<_.max_lazy_match&&_.strstart-et<=_.w_size-MIN_LOOKAHEAD&&(_.match_length=longest_match(_,et),_.match_length<=5&&(_.strategy===Z_FILTERED||_.match_length===MIN_MATCH&&_.strstart-_.match_start>4096)&&(_.match_length=MIN_MATCH-1)),_.prev_length>=MIN_MATCH&&_.match_length<=_.prev_length){rt=_.strstart+_.lookahead-MIN_MATCH,tt=_tr_tally(_,_.strstart-1-_.prev_match,_.prev_length-MIN_MATCH),_.lookahead-=_.prev_length-1,_.prev_length-=2;do++_.strstart<=rt&&(_.ins_h=HASH(_,_.ins_h,_.window[_.strstart+MIN_MATCH-1]),et=_.prev[_.strstart&_.w_mask]=_.head[_.ins_h],_.head[_.ins_h]=_.strstart);while(--_.prev_length!==0);if(_.match_available=0,_.match_length=MIN_MATCH-1,_.strstart++,tt&&(flush_block_only(_,!1),_.strm.avail_out===0))return BS_NEED_MORE}else if(_.match_available){if(tt=_tr_tally(_,0,_.window[_.strstart-1]),tt&&flush_block_only(_,!1),_.strstart++,_.lookahead--,_.strm.avail_out===0)return BS_NEED_MORE}else _.match_available=1,_.strstart++,_.lookahead--}return _.match_available&&(tt=_tr_tally(_,0,_.window[_.strstart-1]),_.match_available=0),_.insert=_.strstart<MIN_MATCH-1?_.strstart:MIN_MATCH-1,_e===Z_FINISH$3?(flush_block_only(_,!0),_.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):_.sym_next&&(flush_block_only(_,!1),_.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE},deflate_rle=(_,_e)=>{let et,tt,rt,nt;const at=_.window;for(;;){if(_.lookahead<=MAX_MATCH){if(fill_window(_),_.lookahead<=MAX_MATCH&&_e===Z_NO_FLUSH$2)return BS_NEED_MORE;if(_.lookahead===0)break}if(_.match_length=0,_.lookahead>=MIN_MATCH&&_.strstart>0&&(rt=_.strstart-1,tt=at[rt],tt===at[++rt]&&tt===at[++rt]&&tt===at[++rt])){nt=_.strstart+MAX_MATCH;do;while(tt===at[++rt]&&tt===at[++rt]&&tt===at[++rt]&&tt===at[++rt]&&tt===at[++rt]&&tt===at[++rt]&&tt===at[++rt]&&tt===at[++rt]&&rt<nt);_.match_length=MAX_MATCH-(nt-rt),_.match_length>_.lookahead&&(_.match_length=_.lookahead)}if(_.match_length>=MIN_MATCH?(et=_tr_tally(_,1,_.match_length-MIN_MATCH),_.lookahead-=_.match_length,_.strstart+=_.match_length,_.match_length=0):(et=_tr_tally(_,0,_.window[_.strstart]),_.lookahead--,_.strstart++),et&&(flush_block_only(_,!1),_.strm.avail_out===0))return BS_NEED_MORE}return _.insert=0,_e===Z_FINISH$3?(flush_block_only(_,!0),_.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):_.sym_next&&(flush_block_only(_,!1),_.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE},deflate_huff=(_,_e)=>{let et;for(;;){if(_.lookahead===0&&(fill_window(_),_.lookahead===0)){if(_e===Z_NO_FLUSH$2)return BS_NEED_MORE;break}if(_.match_length=0,et=_tr_tally(_,0,_.window[_.strstart]),_.lookahead--,_.strstart++,et&&(flush_block_only(_,!1),_.strm.avail_out===0))return BS_NEED_MORE}return _.insert=0,_e===Z_FINISH$3?(flush_block_only(_,!0),_.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):_.sym_next&&(flush_block_only(_,!1),_.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE};function Config(_,_e,et,tt,rt){this.good_length=_,this.max_lazy=_e,this.nice_length=et,this.max_chain=tt,this.func=rt}const configuration_table=[new Config(0,0,0,0,deflate_stored),new Config(4,4,8,4,deflate_fast),new Config(4,5,16,8,deflate_fast),new Config(4,6,32,32,deflate_fast),new Config(4,4,16,16,deflate_slow),new Config(8,16,32,32,deflate_slow),new Config(8,16,128,128,deflate_slow),new Config(8,32,128,256,deflate_slow),new Config(32,128,258,1024,deflate_slow),new Config(32,258,258,4096,deflate_slow)],lm_init=_=>{_.window_size=2*_.w_size,zero(_.head),_.max_lazy_match=configuration_table[_.level].max_lazy,_.good_match=configuration_table[_.level].good_length,_.nice_match=configuration_table[_.level].nice_length,_.max_chain_length=configuration_table[_.level].max_chain,_.strstart=0,_.block_start=0,_.lookahead=0,_.insert=0,_.match_length=_.prev_length=MIN_MATCH-1,_.match_available=0,_.ins_h=0};function DeflateState(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Z_DEFLATED$2,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(HEAP_SIZE*2),this.dyn_dtree=new Uint16Array((2*D_CODES+1)*2),this.bl_tree=new Uint16Array((2*BL_CODES+1)*2),zero(this.dyn_ltree),zero(this.dyn_dtree),zero(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(MAX_BITS+1),this.heap=new Uint16Array(2*L_CODES+1),zero(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*L_CODES+1),zero(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const deflateStateCheck=_=>{if(!_)return 1;const _e=_.state;return!_e||_e.strm!==_||_e.status!==INIT_STATE&&_e.status!==GZIP_STATE&&_e.status!==EXTRA_STATE&&_e.status!==NAME_STATE&&_e.status!==COMMENT_STATE&&_e.status!==HCRC_STATE&&_e.status!==BUSY_STATE&&_e.status!==FINISH_STATE?1:0},deflateResetKeep=_=>{if(deflateStateCheck(_))return err(_,Z_STREAM_ERROR$2);_.total_in=_.total_out=0,_.data_type=Z_UNKNOWN;const _e=_.state;return _e.pending=0,_e.pending_out=0,_e.wrap<0&&(_e.wrap=-_e.wrap),_e.status=_e.wrap===2?GZIP_STATE:_e.wrap?INIT_STATE:BUSY_STATE,_.adler=_e.wrap===2?0:1,_e.last_flush=-2,_tr_init(_e),Z_OK$3},deflateReset=_=>{const _e=deflateResetKeep(_);return _e===Z_OK$3&&lm_init(_.state),_e},deflateSetHeader=(_,_e)=>deflateStateCheck(_)||_.state.wrap!==2?Z_STREAM_ERROR$2:(_.state.gzhead=_e,Z_OK$3),deflateInit2=(_,_e,et,tt,rt,nt)=>{if(!_)return Z_STREAM_ERROR$2;let at=1;if(_e===Z_DEFAULT_COMPRESSION$1&&(_e=6),tt<0?(at=0,tt=-tt):tt>15&&(at=2,tt-=16),rt<1||rt>MAX_MEM_LEVEL||et!==Z_DEFLATED$2||tt<8||tt>15||_e<0||_e>9||nt<0||nt>Z_FIXED||tt===8&&at!==1)return err(_,Z_STREAM_ERROR$2);tt===8&&(tt=9);const it=new DeflateState;return _.state=it,it.strm=_,it.status=INIT_STATE,it.wrap=at,it.gzhead=null,it.w_bits=tt,it.w_size=1<<it.w_bits,it.w_mask=it.w_size-1,it.hash_bits=rt+7,it.hash_size=1<<it.hash_bits,it.hash_mask=it.hash_size-1,it.hash_shift=~~((it.hash_bits+MIN_MATCH-1)/MIN_MATCH),it.window=new Uint8Array(it.w_size*2),it.head=new Uint16Array(it.hash_size),it.prev=new Uint16Array(it.w_size),it.lit_bufsize=1<<rt+6,it.pending_buf_size=it.lit_bufsize*4,it.pending_buf=new Uint8Array(it.pending_buf_size),it.sym_buf=it.lit_bufsize,it.sym_end=(it.lit_bufsize-1)*3,it.level=_e,it.strategy=nt,it.method=et,deflateReset(_)},deflateInit=(_,_e)=>deflateInit2(_,_e,Z_DEFLATED$2,MAX_WBITS$1,DEF_MEM_LEVEL,Z_DEFAULT_STRATEGY$1),deflate$2=(_,_e)=>{if(deflateStateCheck(_)||_e>Z_BLOCK$1||_e<0)return _?err(_,Z_STREAM_ERROR$2):Z_STREAM_ERROR$2;const et=_.state;if(!_.output||_.avail_in!==0&&!_.input||et.status===FINISH_STATE&&_e!==Z_FINISH$3)return err(_,_.avail_out===0?Z_BUF_ERROR$1:Z_STREAM_ERROR$2);const tt=et.last_flush;if(et.last_flush=_e,et.pending!==0){if(flush_pending(_),_.avail_out===0)return et.last_flush=-1,Z_OK$3}else if(_.avail_in===0&&rank(_e)<=rank(tt)&&_e!==Z_FINISH$3)return err(_,Z_BUF_ERROR$1);if(et.status===FINISH_STATE&&_.avail_in!==0)return err(_,Z_BUF_ERROR$1);if(et.status===INIT_STATE&&et.wrap===0&&(et.status=BUSY_STATE),et.status===INIT_STATE){let rt=Z_DEFLATED$2+(et.w_bits-8<<4)<<8,nt=-1;if(et.strategy>=Z_HUFFMAN_ONLY||et.level<2?nt=0:et.level<6?nt=1:et.level===6?nt=2:nt=3,rt|=nt<<6,et.strstart!==0&&(rt|=PRESET_DICT),rt+=31-rt%31,putShortMSB(et,rt),et.strstart!==0&&(putShortMSB(et,_.adler>>>16),putShortMSB(et,_.adler&65535)),_.adler=1,et.status=BUSY_STATE,flush_pending(_),et.pending!==0)return et.last_flush=-1,Z_OK$3}if(et.status===GZIP_STATE){if(_.adler=0,put_byte(et,31),put_byte(et,139),put_byte(et,8),et.gzhead)put_byte(et,(et.gzhead.text?1:0)+(et.gzhead.hcrc?2:0)+(et.gzhead.extra?4:0)+(et.gzhead.name?8:0)+(et.gzhead.comment?16:0)),put_byte(et,et.gzhead.time&255),put_byte(et,et.gzhead.time>>8&255),put_byte(et,et.gzhead.time>>16&255),put_byte(et,et.gzhead.time>>24&255),put_byte(et,et.level===9?2:et.strategy>=Z_HUFFMAN_ONLY||et.level<2?4:0),put_byte(et,et.gzhead.os&255),et.gzhead.extra&&et.gzhead.extra.length&&(put_byte(et,et.gzhead.extra.length&255),put_byte(et,et.gzhead.extra.length>>8&255)),et.gzhead.hcrc&&(_.adler=crc32_1(_.adler,et.pending_buf,et.pending,0)),et.gzindex=0,et.status=EXTRA_STATE;else if(put_byte(et,0),put_byte(et,0),put_byte(et,0),put_byte(et,0),put_byte(et,0),put_byte(et,et.level===9?2:et.strategy>=Z_HUFFMAN_ONLY||et.level<2?4:0),put_byte(et,OS_CODE),et.status=BUSY_STATE,flush_pending(_),et.pending!==0)return et.last_flush=-1,Z_OK$3}if(et.status===EXTRA_STATE){if(et.gzhead.extra){let rt=et.pending,nt=(et.gzhead.extra.length&65535)-et.gzindex;for(;et.pending+nt>et.pending_buf_size;){let it=et.pending_buf_size-et.pending;if(et.pending_buf.set(et.gzhead.extra.subarray(et.gzindex,et.gzindex+it),et.pending),et.pending=et.pending_buf_size,et.gzhead.hcrc&&et.pending>rt&&(_.adler=crc32_1(_.adler,et.pending_buf,et.pending-rt,rt)),et.gzindex+=it,flush_pending(_),et.pending!==0)return et.last_flush=-1,Z_OK$3;rt=0,nt-=it}let at=new Uint8Array(et.gzhead.extra);et.pending_buf.set(at.subarray(et.gzindex,et.gzindex+nt),et.pending),et.pending+=nt,et.gzhead.hcrc&&et.pending>rt&&(_.adler=crc32_1(_.adler,et.pending_buf,et.pending-rt,rt)),et.gzindex=0}et.status=NAME_STATE}if(et.status===NAME_STATE){if(et.gzhead.name){let rt=et.pending,nt;do{if(et.pending===et.pending_buf_size){if(et.gzhead.hcrc&&et.pending>rt&&(_.adler=crc32_1(_.adler,et.pending_buf,et.pending-rt,rt)),flush_pending(_),et.pending!==0)return et.last_flush=-1,Z_OK$3;rt=0}et.gzindex<et.gzhead.name.length?nt=et.gzhead.name.charCodeAt(et.gzindex++)&255:nt=0,put_byte(et,nt)}while(nt!==0);et.gzhead.hcrc&&et.pending>rt&&(_.adler=crc32_1(_.adler,et.pending_buf,et.pending-rt,rt)),et.gzindex=0}et.status=COMMENT_STATE}if(et.status===COMMENT_STATE){if(et.gzhead.comment){let rt=et.pending,nt;do{if(et.pending===et.pending_buf_size){if(et.gzhead.hcrc&&et.pending>rt&&(_.adler=crc32_1(_.adler,et.pending_buf,et.pending-rt,rt)),flush_pending(_),et.pending!==0)return et.last_flush=-1,Z_OK$3;rt=0}et.gzindex<et.gzhead.comment.length?nt=et.gzhead.comment.charCodeAt(et.gzindex++)&255:nt=0,put_byte(et,nt)}while(nt!==0);et.gzhead.hcrc&&et.pending>rt&&(_.adler=crc32_1(_.adler,et.pending_buf,et.pending-rt,rt))}et.status=HCRC_STATE}if(et.status===HCRC_STATE){if(et.gzhead.hcrc){if(et.pending+2>et.pending_buf_size&&(flush_pending(_),et.pending!==0))return et.last_flush=-1,Z_OK$3;put_byte(et,_.adler&255),put_byte(et,_.adler>>8&255),_.adler=0}if(et.status=BUSY_STATE,flush_pending(_),et.pending!==0)return et.last_flush=-1,Z_OK$3}if(_.avail_in!==0||et.lookahead!==0||_e!==Z_NO_FLUSH$2&&et.status!==FINISH_STATE){let rt=et.level===0?deflate_stored(et,_e):et.strategy===Z_HUFFMAN_ONLY?deflate_huff(et,_e):et.strategy===Z_RLE?deflate_rle(et,_e):configuration_table[et.level].func(et,_e);if((rt===BS_FINISH_STARTED||rt===BS_FINISH_DONE)&&(et.status=FINISH_STATE),rt===BS_NEED_MORE||rt===BS_FINISH_STARTED)return _.avail_out===0&&(et.last_flush=-1),Z_OK$3;if(rt===BS_BLOCK_DONE&&(_e===Z_PARTIAL_FLUSH?_tr_align(et):_e!==Z_BLOCK$1&&(_tr_stored_block(et,0,0,!1),_e===Z_FULL_FLUSH$1&&(zero(et.head),et.lookahead===0&&(et.strstart=0,et.block_start=0,et.insert=0))),flush_pending(_),_.avail_out===0))return et.last_flush=-1,Z_OK$3}return _e!==Z_FINISH$3?Z_OK$3:et.wrap<=0?Z_STREAM_END$3:(et.wrap===2?(put_byte(et,_.adler&255),put_byte(et,_.adler>>8&255),put_byte(et,_.adler>>16&255),put_byte(et,_.adler>>24&255),put_byte(et,_.total_in&255),put_byte(et,_.total_in>>8&255),put_byte(et,_.total_in>>16&255),put_byte(et,_.total_in>>24&255)):(putShortMSB(et,_.adler>>>16),putShortMSB(et,_.adler&65535)),flush_pending(_),et.wrap>0&&(et.wrap=-et.wrap),et.pending!==0?Z_OK$3:Z_STREAM_END$3)},deflateEnd=_=>{if(deflateStateCheck(_))return Z_STREAM_ERROR$2;const _e=_.state.status;return _.state=null,_e===BUSY_STATE?err(_,Z_DATA_ERROR$2):Z_OK$3},deflateSetDictionary=(_,_e)=>{let et=_e.length;if(deflateStateCheck(_))return Z_STREAM_ERROR$2;const tt=_.state,rt=tt.wrap;if(rt===2||rt===1&&tt.status!==INIT_STATE||tt.lookahead)return Z_STREAM_ERROR$2;if(rt===1&&(_.adler=adler32_1(_.adler,_e,et,0)),tt.wrap=0,et>=tt.w_size){rt===0&&(zero(tt.head),tt.strstart=0,tt.block_start=0,tt.insert=0);let ot=new Uint8Array(tt.w_size);ot.set(_e.subarray(et-tt.w_size,et),0),_e=ot,et=tt.w_size}const nt=_.avail_in,at=_.next_in,it=_.input;for(_.avail_in=et,_.next_in=0,_.input=_e,fill_window(tt);tt.lookahead>=MIN_MATCH;){let ot=tt.strstart,st=tt.lookahead-(MIN_MATCH-1);do tt.ins_h=HASH(tt,tt.ins_h,tt.window[ot+MIN_MATCH-1]),tt.prev[ot&tt.w_mask]=tt.head[tt.ins_h],tt.head[tt.ins_h]=ot,ot++;while(--st);tt.strstart=ot,tt.lookahead=MIN_MATCH-1,fill_window(tt)}return tt.strstart+=tt.lookahead,tt.block_start=tt.strstart,tt.insert=tt.lookahead,tt.lookahead=0,tt.match_length=tt.prev_length=MIN_MATCH-1,tt.match_available=0,_.next_in=at,_.input=it,_.avail_in=nt,tt.wrap=rt,Z_OK$3};var deflateInit_1=deflateInit,deflateInit2_1=deflateInit2,deflateReset_1=deflateReset,deflateResetKeep_1=deflateResetKeep,deflateSetHeader_1=deflateSetHeader,deflate_2$1=deflate$2,deflateEnd_1=deflateEnd,deflateSetDictionary_1=deflateSetDictionary,deflateInfo="pako deflate (from Nodeca project)",deflate_1$2={deflateInit:deflateInit_1,deflateInit2:deflateInit2_1,deflateReset:deflateReset_1,deflateResetKeep:deflateResetKeep_1,deflateSetHeader:deflateSetHeader_1,deflate:deflate_2$1,deflateEnd:deflateEnd_1,deflateSetDictionary:deflateSetDictionary_1,deflateInfo};const _has=(_,_e)=>Object.prototype.hasOwnProperty.call(_,_e);var assign=function(_){const _e=Array.prototype.slice.call(arguments,1);for(;_e.length;){const et=_e.shift();if(!!et){if(typeof et!="object")throw new TypeError(et+"must be non-object");for(const tt in et)_has(et,tt)&&(_[tt]=et[tt])}}return _},flattenChunks=_=>{let _e=0;for(let tt=0,rt=_.length;tt<rt;tt++)_e+=_[tt].length;const et=new Uint8Array(_e);for(let tt=0,rt=0,nt=_.length;tt<nt;tt++){let at=_[tt];et.set(at,rt),rt+=at.length}return et},common={assign,flattenChunks};let STR_APPLY_UIA_OK=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{STR_APPLY_UIA_OK=!1}const _utf8len=new Uint8Array(256);for(let _=0;_<256;_++)_utf8len[_]=_>=252?6:_>=248?5:_>=240?4:_>=224?3:_>=192?2:1;_utf8len[254]=_utf8len[254]=1;var string2buf=_=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(_);let _e,et,tt,rt,nt,at=_.length,it=0;for(rt=0;rt<at;rt++)et=_.charCodeAt(rt),(et&64512)===55296&&rt+1<at&&(tt=_.charCodeAt(rt+1),(tt&64512)===56320&&(et=65536+(et-55296<<10)+(tt-56320),rt++)),it+=et<128?1:et<2048?2:et<65536?3:4;for(_e=new Uint8Array(it),nt=0,rt=0;nt<it;rt++)et=_.charCodeAt(rt),(et&64512)===55296&&rt+1<at&&(tt=_.charCodeAt(rt+1),(tt&64512)===56320&&(et=65536+(et-55296<<10)+(tt-56320),rt++)),et<128?_e[nt++]=et:et<2048?(_e[nt++]=192|et>>>6,_e[nt++]=128|et&63):et<65536?(_e[nt++]=224|et>>>12,_e[nt++]=128|et>>>6&63,_e[nt++]=128|et&63):(_e[nt++]=240|et>>>18,_e[nt++]=128|et>>>12&63,_e[nt++]=128|et>>>6&63,_e[nt++]=128|et&63);return _e};const buf2binstring=(_,_e)=>{if(_e<65534&&_.subarray&&STR_APPLY_UIA_OK)return String.fromCharCode.apply(null,_.length===_e?_:_.subarray(0,_e));let et="";for(let tt=0;tt<_e;tt++)et+=String.fromCharCode(_[tt]);return et};var buf2string=(_,_e)=>{const et=_e||_.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(_.subarray(0,_e));let tt,rt;const nt=new Array(et*2);for(rt=0,tt=0;tt<et;){let at=_[tt++];if(at<128){nt[rt++]=at;continue}let it=_utf8len[at];if(it>4){nt[rt++]=65533,tt+=it-1;continue}for(at&=it===2?31:it===3?15:7;it>1&&tt<et;)at=at<<6|_[tt++]&63,it--;if(it>1){nt[rt++]=65533;continue}at<65536?nt[rt++]=at:(at-=65536,nt[rt++]=55296|at>>10&1023,nt[rt++]=56320|at&1023)}return buf2binstring(nt,rt)},utf8border=(_,_e)=>{_e=_e||_.length,_e>_.length&&(_e=_.length);let et=_e-1;for(;et>=0&&(_[et]&192)===128;)et--;return et<0||et===0?_e:et+_utf8len[_[et]]>_e?et:_e},strings={string2buf,buf2string,utf8border};function ZStream(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var zstream=ZStream;const toString$1=Object.prototype.toString,{Z_NO_FLUSH:Z_NO_FLUSH$1,Z_SYNC_FLUSH,Z_FULL_FLUSH,Z_FINISH:Z_FINISH$2,Z_OK:Z_OK$2,Z_STREAM_END:Z_STREAM_END$2,Z_DEFAULT_COMPRESSION,Z_DEFAULT_STRATEGY,Z_DEFLATED:Z_DEFLATED$1}=constants$2;function Deflate$1(_){this.options=common.assign({level:Z_DEFAULT_COMPRESSION,method:Z_DEFLATED$1,chunkSize:16384,windowBits:15,memLevel:8,strategy:Z_DEFAULT_STRATEGY},_||{});let _e=this.options;_e.raw&&_e.windowBits>0?_e.windowBits=-_e.windowBits:_e.gzip&&_e.windowBits>0&&_e.windowBits<16&&(_e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new zstream,this.strm.avail_out=0;let et=deflate_1$2.deflateInit2(this.strm,_e.level,_e.method,_e.windowBits,_e.memLevel,_e.strategy);if(et!==Z_OK$2)throw new Error(messages[et]);if(_e.header&&deflate_1$2.deflateSetHeader(this.strm,_e.header),_e.dictionary){let tt;if(typeof _e.dictionary=="string"?tt=strings.string2buf(_e.dictionary):toString$1.call(_e.dictionary)==="[object ArrayBuffer]"?tt=new Uint8Array(_e.dictionary):tt=_e.dictionary,et=deflate_1$2.deflateSetDictionary(this.strm,tt),et!==Z_OK$2)throw new Error(messages[et]);this._dict_set=!0}}Deflate$1.prototype.push=function(_,_e){const et=this.strm,tt=this.options.chunkSize;let rt,nt;if(this.ended)return!1;for(_e===~~_e?nt=_e:nt=_e===!0?Z_FINISH$2:Z_NO_FLUSH$1,typeof _=="string"?et.input=strings.string2buf(_):toString$1.call(_)==="[object ArrayBuffer]"?et.input=new Uint8Array(_):et.input=_,et.next_in=0,et.avail_in=et.input.length;;){if(et.avail_out===0&&(et.output=new Uint8Array(tt),et.next_out=0,et.avail_out=tt),(nt===Z_SYNC_FLUSH||nt===Z_FULL_FLUSH)&&et.avail_out<=6){this.onData(et.output.subarray(0,et.next_out)),et.avail_out=0;continue}if(rt=deflate_1$2.deflate(et,nt),rt===Z_STREAM_END$2)return et.next_out>0&&this.onData(et.output.subarray(0,et.next_out)),rt=deflate_1$2.deflateEnd(this.strm),this.onEnd(rt),this.ended=!0,rt===Z_OK$2;if(et.avail_out===0){this.onData(et.output);continue}if(nt>0&&et.next_out>0){this.onData(et.output.subarray(0,et.next_out)),et.avail_out=0;continue}if(et.avail_in===0)break}return!0};Deflate$1.prototype.onData=function(_){this.chunks.push(_)};Deflate$1.prototype.onEnd=function(_){_===Z_OK$2&&(this.result=common.flattenChunks(this.chunks)),this.chunks=[],this.err=_,this.msg=this.strm.msg};function deflate$1(_,_e){const et=new Deflate$1(_e);if(et.push(_,!0),et.err)throw et.msg||messages[et.err];return et.result}function deflateRaw$1(_,_e){return _e=_e||{},_e.raw=!0,deflate$1(_,_e)}function gzip$1(_,_e){return _e=_e||{},_e.gzip=!0,deflate$1(_,_e)}var Deflate_1$1=Deflate$1,deflate_2=deflate$1,deflateRaw_1$1=deflateRaw$1,gzip_1$1=gzip$1,constants$1=constants$2,deflate_1$1={Deflate:Deflate_1$1,deflate:deflate_2,deflateRaw:deflateRaw_1$1,gzip:gzip_1$1,constants:constants$1};const BAD$1=16209,TYPE$1=16191;var inffast=function(_e,et){let tt,rt,nt,at,it,ot,st,lt,gt,ct,wt,Tt,Rt,ht,ut,ft,yt,xt,Ct,pt,dt,vt,St,Et;const mt=_e.state;tt=_e.next_in,St=_e.input,rt=tt+(_e.avail_in-5),nt=_e.next_out,Et=_e.output,at=nt-(et-_e.avail_out),it=nt+(_e.avail_out-257),ot=mt.dmax,st=mt.wsize,lt=mt.whave,gt=mt.wnext,ct=mt.window,wt=mt.hold,Tt=mt.bits,Rt=mt.lencode,ht=mt.distcode,ut=(1<<mt.lenbits)-1,ft=(1<<mt.distbits)-1;e:do{Tt<15&&(wt+=St[tt++]<<Tt,Tt+=8,wt+=St[tt++]<<Tt,Tt+=8),yt=Rt[wt&ut];t:for(;;){if(xt=yt>>>24,wt>>>=xt,Tt-=xt,xt=yt>>>16&255,xt===0)Et[nt++]=yt&65535;else if(xt&16){Ct=yt&65535,xt&=15,xt&&(Tt<xt&&(wt+=St[tt++]<<Tt,Tt+=8),Ct+=wt&(1<<xt)-1,wt>>>=xt,Tt-=xt),Tt<15&&(wt+=St[tt++]<<Tt,Tt+=8,wt+=St[tt++]<<Tt,Tt+=8),yt=ht[wt&ft];r:for(;;){if(xt=yt>>>24,wt>>>=xt,Tt-=xt,xt=yt>>>16&255,xt&16){if(pt=yt&65535,xt&=15,Tt<xt&&(wt+=St[tt++]<<Tt,Tt+=8,Tt<xt&&(wt+=St[tt++]<<Tt,Tt+=8)),pt+=wt&(1<<xt)-1,pt>ot){_e.msg="invalid distance too far back",mt.mode=BAD$1;break e}if(wt>>>=xt,Tt-=xt,xt=nt-at,pt>xt){if(xt=pt-xt,xt>lt&&mt.sane){_e.msg="invalid distance too far back",mt.mode=BAD$1;break e}if(dt=0,vt=ct,gt===0){if(dt+=st-xt,xt<Ct){Ct-=xt;do Et[nt++]=ct[dt++];while(--xt);dt=nt-pt,vt=Et}}else if(gt<xt){if(dt+=st+gt-xt,xt-=gt,xt<Ct){Ct-=xt;do Et[nt++]=ct[dt++];while(--xt);if(dt=0,gt<Ct){xt=gt,Ct-=xt;do Et[nt++]=ct[dt++];while(--xt);dt=nt-pt,vt=Et}}}else if(dt+=gt-xt,xt<Ct){Ct-=xt;do Et[nt++]=ct[dt++];while(--xt);dt=nt-pt,vt=Et}for(;Ct>2;)Et[nt++]=vt[dt++],Et[nt++]=vt[dt++],Et[nt++]=vt[dt++],Ct-=3;Ct&&(Et[nt++]=vt[dt++],Ct>1&&(Et[nt++]=vt[dt++]))}else{dt=nt-pt;do Et[nt++]=Et[dt++],Et[nt++]=Et[dt++],Et[nt++]=Et[dt++],Ct-=3;while(Ct>2);Ct&&(Et[nt++]=Et[dt++],Ct>1&&(Et[nt++]=Et[dt++]))}}else if(xt&64){_e.msg="invalid distance code",mt.mode=BAD$1;break e}else{yt=ht[(yt&65535)+(wt&(1<<xt)-1)];continue r}break}}else if(xt&64)if(xt&32){mt.mode=TYPE$1;break e}else{_e.msg="invalid literal/length code",mt.mode=BAD$1;break e}else{yt=Rt[(yt&65535)+(wt&(1<<xt)-1)];continue t}break}}while(tt<rt&&nt<it);Ct=Tt>>3,tt-=Ct,Tt-=Ct<<3,wt&=(1<<Tt)-1,_e.next_in=tt,_e.next_out=nt,_e.avail_in=tt<rt?5+(rt-tt):5-(tt-rt),_e.avail_out=nt<it?257+(it-nt):257-(nt-it),mt.hold=wt,mt.bits=Tt};const MAXBITS=15,ENOUGH_LENS$1=852,ENOUGH_DISTS$1=592,CODES$1=0,LENS$1=1,DISTS$1=2,lbase=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),lext=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),dbase=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),dext=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),inflate_table=(_,_e,et,tt,rt,nt,at,it)=>{const ot=it.bits;let st=0,lt=0,gt=0,ct=0,wt=0,Tt=0,Rt=0,ht=0,ut=0,ft=0,yt,xt,Ct,pt,dt,vt=null,St;const Et=new Uint16Array(MAXBITS+1),mt=new Uint16Array(MAXBITS+1);let _t=null,bt,Ot,Pt;for(st=0;st<=MAXBITS;st++)Et[st]=0;for(lt=0;lt<tt;lt++)Et[_e[et+lt]]++;for(wt=ot,ct=MAXBITS;ct>=1&&Et[ct]===0;ct--);if(wt>ct&&(wt=ct),ct===0)return rt[nt++]=1<<24|64<<16|0,rt[nt++]=1<<24|64<<16|0,it.bits=1,0;for(gt=1;gt<ct&&Et[gt]===0;gt++);for(wt<gt&&(wt=gt),ht=1,st=1;st<=MAXBITS;st++)if(ht<<=1,ht-=Et[st],ht<0)return-1;if(ht>0&&(_===CODES$1||ct!==1))return-1;for(mt[1]=0,st=1;st<MAXBITS;st++)mt[st+1]=mt[st]+Et[st];for(lt=0;lt<tt;lt++)_e[et+lt]!==0&&(at[mt[_e[et+lt]]++]=lt);if(_===CODES$1?(vt=_t=at,St=20):_===LENS$1?(vt=lbase,_t=lext,St=257):(vt=dbase,_t=dext,St=0),ft=0,lt=0,st=gt,dt=nt,Tt=wt,Rt=0,Ct=-1,ut=1<<wt,pt=ut-1,_===LENS$1&&ut>ENOUGH_LENS$1||_===DISTS$1&&ut>ENOUGH_DISTS$1)return 1;for(;;){bt=st-Rt,at[lt]+1<St?(Ot=0,Pt=at[lt]):at[lt]>=St?(Ot=_t[at[lt]-St],Pt=vt[at[lt]-St]):(Ot=32+64,Pt=0),yt=1<<st-Rt,xt=1<<Tt,gt=xt;do xt-=yt,rt[dt+(ft>>Rt)+xt]=bt<<24|Ot<<16|Pt|0;while(xt!==0);for(yt=1<<st-1;ft&yt;)yt>>=1;if(yt!==0?(ft&=yt-1,ft+=yt):ft=0,lt++,--Et[st]===0){if(st===ct)break;st=_e[et+at[lt]]}if(st>wt&&(ft&pt)!==Ct){for(Rt===0&&(Rt=wt),dt+=gt,Tt=st-Rt,ht=1<<Tt;Tt+Rt<ct&&(ht-=Et[Tt+Rt],!(ht<=0));)Tt++,ht<<=1;if(ut+=1<<Tt,_===LENS$1&&ut>ENOUGH_LENS$1||_===DISTS$1&&ut>ENOUGH_DISTS$1)return 1;Ct=ft&pt,rt[Ct]=wt<<24|Tt<<16|dt-nt|0}}return ft!==0&&(rt[dt+ft]=st-Rt<<24|64<<16|0),it.bits=wt,0};var inftrees=inflate_table;const CODES=0,LENS=1,DISTS=2,{Z_FINISH:Z_FINISH$1,Z_BLOCK,Z_TREES,Z_OK:Z_OK$1,Z_STREAM_END:Z_STREAM_END$1,Z_NEED_DICT:Z_NEED_DICT$1,Z_STREAM_ERROR:Z_STREAM_ERROR$1,Z_DATA_ERROR:Z_DATA_ERROR$1,Z_MEM_ERROR:Z_MEM_ERROR$1,Z_BUF_ERROR,Z_DEFLATED}=constants$2,HEAD=16180,FLAGS=16181,TIME=16182,OS=16183,EXLEN=16184,EXTRA=16185,NAME=16186,COMMENT=16187,HCRC=16188,DICTID=16189,DICT=16190,TYPE=16191,TYPEDO=16192,STORED=16193,COPY_=16194,COPY=16195,TABLE=16196,LENLENS=16197,CODELENS=16198,LEN_=16199,LEN=16200,LENEXT=16201,DIST=16202,DISTEXT=16203,MATCH=16204,LIT=16205,CHECK=16206,LENGTH=16207,DONE=16208,BAD=16209,MEM=16210,SYNC=16211,ENOUGH_LENS=852,ENOUGH_DISTS=592,MAX_WBITS=15,DEF_WBITS=MAX_WBITS,zswap32=_=>(_>>>24&255)+(_>>>8&65280)+((_&65280)<<8)+((_&255)<<24);function InflateState(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const inflateStateCheck=_=>{if(!_)return 1;const _e=_.state;return!_e||_e.strm!==_||_e.mode<HEAD||_e.mode>SYNC?1:0},inflateResetKeep=_=>{if(inflateStateCheck(_))return Z_STREAM_ERROR$1;const _e=_.state;return _.total_in=_.total_out=_e.total=0,_.msg="",_e.wrap&&(_.adler=_e.wrap&1),_e.mode=HEAD,_e.last=0,_e.havedict=0,_e.flags=-1,_e.dmax=32768,_e.head=null,_e.hold=0,_e.bits=0,_e.lencode=_e.lendyn=new Int32Array(ENOUGH_LENS),_e.distcode=_e.distdyn=new Int32Array(ENOUGH_DISTS),_e.sane=1,_e.back=-1,Z_OK$1},inflateReset=_=>{if(inflateStateCheck(_))return Z_STREAM_ERROR$1;const _e=_.state;return _e.wsize=0,_e.whave=0,_e.wnext=0,inflateResetKeep(_)},inflateReset2=(_,_e)=>{let et;if(inflateStateCheck(_))return Z_STREAM_ERROR$1;const tt=_.state;return _e<0?(et=0,_e=-_e):(et=(_e>>4)+5,_e<48&&(_e&=15)),_e&&(_e<8||_e>15)?Z_STREAM_ERROR$1:(tt.window!==null&&tt.wbits!==_e&&(tt.window=null),tt.wrap=et,tt.wbits=_e,inflateReset(_))},inflateInit2=(_,_e)=>{if(!_)return Z_STREAM_ERROR$1;const et=new InflateState;_.state=et,et.strm=_,et.window=null,et.mode=HEAD;const tt=inflateReset2(_,_e);return tt!==Z_OK$1&&(_.state=null),tt},inflateInit=_=>inflateInit2(_,DEF_WBITS);let virgin=!0,lenfix,distfix;const fixedtables=_=>{if(virgin){lenfix=new Int32Array(512),distfix=new Int32Array(32);let _e=0;for(;_e<144;)_.lens[_e++]=8;for(;_e<256;)_.lens[_e++]=9;for(;_e<280;)_.lens[_e++]=7;for(;_e<288;)_.lens[_e++]=8;for(inftrees(LENS,_.lens,0,288,lenfix,0,_.work,{bits:9}),_e=0;_e<32;)_.lens[_e++]=5;inftrees(DISTS,_.lens,0,32,distfix,0,_.work,{bits:5}),virgin=!1}_.lencode=lenfix,_.lenbits=9,_.distcode=distfix,_.distbits=5},updatewindow=(_,_e,et,tt)=>{let rt;const nt=_.state;return nt.window===null&&(nt.wsize=1<<nt.wbits,nt.wnext=0,nt.whave=0,nt.window=new Uint8Array(nt.wsize)),tt>=nt.wsize?(nt.window.set(_e.subarray(et-nt.wsize,et),0),nt.wnext=0,nt.whave=nt.wsize):(rt=nt.wsize-nt.wnext,rt>tt&&(rt=tt),nt.window.set(_e.subarray(et-tt,et-tt+rt),nt.wnext),tt-=rt,tt?(nt.window.set(_e.subarray(et-tt,et),0),nt.wnext=tt,nt.whave=nt.wsize):(nt.wnext+=rt,nt.wnext===nt.wsize&&(nt.wnext=0),nt.whave<nt.wsize&&(nt.whave+=rt))),0},inflate$2=(_,_e)=>{let et,tt,rt,nt,at,it,ot,st,lt,gt,ct,wt,Tt,Rt,ht=0,ut,ft,yt,xt,Ct,pt,dt,vt;const St=new Uint8Array(4);let Et,mt;const _t=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(inflateStateCheck(_)||!_.output||!_.input&&_.avail_in!==0)return Z_STREAM_ERROR$1;et=_.state,et.mode===TYPE&&(et.mode=TYPEDO),at=_.next_out,rt=_.output,ot=_.avail_out,nt=_.next_in,tt=_.input,it=_.avail_in,st=et.hold,lt=et.bits,gt=it,ct=ot,vt=Z_OK$1;e:for(;;)switch(et.mode){case HEAD:if(et.wrap===0){et.mode=TYPEDO;break}for(;lt<16;){if(it===0)break e;it--,st+=tt[nt++]<<lt,lt+=8}if(et.wrap&2&&st===35615){et.wbits===0&&(et.wbits=15),et.check=0,St[0]=st&255,St[1]=st>>>8&255,et.check=crc32_1(et.check,St,2,0),st=0,lt=0,et.mode=FLAGS;break}if(et.head&&(et.head.done=!1),!(et.wrap&1)||(((st&255)<<8)+(st>>8))%31){_.msg="incorrect header check",et.mode=BAD;break}if((st&15)!==Z_DEFLATED){_.msg="unknown compression method",et.mode=BAD;break}if(st>>>=4,lt-=4,dt=(st&15)+8,et.wbits===0&&(et.wbits=dt),dt>15||dt>et.wbits){_.msg="invalid window size",et.mode=BAD;break}et.dmax=1<<et.wbits,et.flags=0,_.adler=et.check=1,et.mode=st&512?DICTID:TYPE,st=0,lt=0;break;case FLAGS:for(;lt<16;){if(it===0)break e;it--,st+=tt[nt++]<<lt,lt+=8}if(et.flags=st,(et.flags&255)!==Z_DEFLATED){_.msg="unknown compression method",et.mode=BAD;break}if(et.flags&57344){_.msg="unknown header flags set",et.mode=BAD;break}et.head&&(et.head.text=st>>8&1),et.flags&512&&et.wrap&4&&(St[0]=st&255,St[1]=st>>>8&255,et.check=crc32_1(et.check,St,2,0)),st=0,lt=0,et.mode=TIME;case TIME:for(;lt<32;){if(it===0)break e;it--,st+=tt[nt++]<<lt,lt+=8}et.head&&(et.head.time=st),et.flags&512&&et.wrap&4&&(St[0]=st&255,St[1]=st>>>8&255,St[2]=st>>>16&255,St[3]=st>>>24&255,et.check=crc32_1(et.check,St,4,0)),st=0,lt=0,et.mode=OS;case OS:for(;lt<16;){if(it===0)break e;it--,st+=tt[nt++]<<lt,lt+=8}et.head&&(et.head.xflags=st&255,et.head.os=st>>8),et.flags&512&&et.wrap&4&&(St[0]=st&255,St[1]=st>>>8&255,et.check=crc32_1(et.check,St,2,0)),st=0,lt=0,et.mode=EXLEN;case EXLEN:if(et.flags&1024){for(;lt<16;){if(it===0)break e;it--,st+=tt[nt++]<<lt,lt+=8}et.length=st,et.head&&(et.head.extra_len=st),et.flags&512&&et.wrap&4&&(St[0]=st&255,St[1]=st>>>8&255,et.check=crc32_1(et.check,St,2,0)),st=0,lt=0}else et.head&&(et.head.extra=null);et.mode=EXTRA;case EXTRA:if(et.flags&1024&&(wt=et.length,wt>it&&(wt=it),wt&&(et.head&&(dt=et.head.extra_len-et.length,et.head.extra||(et.head.extra=new Uint8Array(et.head.extra_len)),et.head.extra.set(tt.subarray(nt,nt+wt),dt)),et.flags&512&&et.wrap&4&&(et.check=crc32_1(et.check,tt,wt,nt)),it-=wt,nt+=wt,et.length-=wt),et.length))break e;et.length=0,et.mode=NAME;case NAME:if(et.flags&2048){if(it===0)break e;wt=0;do dt=tt[nt+wt++],et.head&&dt&&et.length<65536&&(et.head.name+=String.fromCharCode(dt));while(dt&&wt<it);if(et.flags&512&&et.wrap&4&&(et.check=crc32_1(et.check,tt,wt,nt)),it-=wt,nt+=wt,dt)break e}else et.head&&(et.head.name=null);et.length=0,et.mode=COMMENT;case COMMENT:if(et.flags&4096){if(it===0)break e;wt=0;do dt=tt[nt+wt++],et.head&&dt&&et.length<65536&&(et.head.comment+=String.fromCharCode(dt));while(dt&&wt<it);if(et.flags&512&&et.wrap&4&&(et.check=crc32_1(et.check,tt,wt,nt)),it-=wt,nt+=wt,dt)break e}else et.head&&(et.head.comment=null);et.mode=HCRC;case HCRC:if(et.flags&512){for(;lt<16;){if(it===0)break e;it--,st+=tt[nt++]<<lt,lt+=8}if(et.wrap&4&&st!==(et.check&65535)){_.msg="header crc mismatch",et.mode=BAD;break}st=0,lt=0}et.head&&(et.head.hcrc=et.flags>>9&1,et.head.done=!0),_.adler=et.check=0,et.mode=TYPE;break;case DICTID:for(;lt<32;){if(it===0)break e;it--,st+=tt[nt++]<<lt,lt+=8}_.adler=et.check=zswap32(st),st=0,lt=0,et.mode=DICT;case DICT:if(et.havedict===0)return _.next_out=at,_.avail_out=ot,_.next_in=nt,_.avail_in=it,et.hold=st,et.bits=lt,Z_NEED_DICT$1;_.adler=et.check=1,et.mode=TYPE;case TYPE:if(_e===Z_BLOCK||_e===Z_TREES)break e;case TYPEDO:if(et.last){st>>>=lt&7,lt-=lt&7,et.mode=CHECK;break}for(;lt<3;){if(it===0)break e;it--,st+=tt[nt++]<<lt,lt+=8}switch(et.last=st&1,st>>>=1,lt-=1,st&3){case 0:et.mode=STORED;break;case 1:if(fixedtables(et),et.mode=LEN_,_e===Z_TREES){st>>>=2,lt-=2;break e}break;case 2:et.mode=TABLE;break;case 3:_.msg="invalid block type",et.mode=BAD}st>>>=2,lt-=2;break;case STORED:for(st>>>=lt&7,lt-=lt&7;lt<32;){if(it===0)break e;it--,st+=tt[nt++]<<lt,lt+=8}if((st&65535)!==(st>>>16^65535)){_.msg="invalid stored block lengths",et.mode=BAD;break}if(et.length=st&65535,st=0,lt=0,et.mode=COPY_,_e===Z_TREES)break e;case COPY_:et.mode=COPY;case COPY:if(wt=et.length,wt){if(wt>it&&(wt=it),wt>ot&&(wt=ot),wt===0)break e;rt.set(tt.subarray(nt,nt+wt),at),it-=wt,nt+=wt,ot-=wt,at+=wt,et.length-=wt;break}et.mode=TYPE;break;case TABLE:for(;lt<14;){if(it===0)break e;it--,st+=tt[nt++]<<lt,lt+=8}if(et.nlen=(st&31)+257,st>>>=5,lt-=5,et.ndist=(st&31)+1,st>>>=5,lt-=5,et.ncode=(st&15)+4,st>>>=4,lt-=4,et.nlen>286||et.ndist>30){_.msg="too many length or distance symbols",et.mode=BAD;break}et.have=0,et.mode=LENLENS;case LENLENS:for(;et.have<et.ncode;){for(;lt<3;){if(it===0)break e;it--,st+=tt[nt++]<<lt,lt+=8}et.lens[_t[et.have++]]=st&7,st>>>=3,lt-=3}for(;et.have<19;)et.lens[_t[et.have++]]=0;if(et.lencode=et.lendyn,et.lenbits=7,Et={bits:et.lenbits},vt=inftrees(CODES,et.lens,0,19,et.lencode,0,et.work,Et),et.lenbits=Et.bits,vt){_.msg="invalid code lengths set",et.mode=BAD;break}et.have=0,et.mode=CODELENS;case CODELENS:for(;et.have<et.nlen+et.ndist;){for(;ht=et.lencode[st&(1<<et.lenbits)-1],ut=ht>>>24,ft=ht>>>16&255,yt=ht&65535,!(ut<=lt);){if(it===0)break e;it--,st+=tt[nt++]<<lt,lt+=8}if(yt<16)st>>>=ut,lt-=ut,et.lens[et.have++]=yt;else{if(yt===16){for(mt=ut+2;lt<mt;){if(it===0)break e;it--,st+=tt[nt++]<<lt,lt+=8}if(st>>>=ut,lt-=ut,et.have===0){_.msg="invalid bit length repeat",et.mode=BAD;break}dt=et.lens[et.have-1],wt=3+(st&3),st>>>=2,lt-=2}else if(yt===17){for(mt=ut+3;lt<mt;){if(it===0)break e;it--,st+=tt[nt++]<<lt,lt+=8}st>>>=ut,lt-=ut,dt=0,wt=3+(st&7),st>>>=3,lt-=3}else{for(mt=ut+7;lt<mt;){if(it===0)break e;it--,st+=tt[nt++]<<lt,lt+=8}st>>>=ut,lt-=ut,dt=0,wt=11+(st&127),st>>>=7,lt-=7}if(et.have+wt>et.nlen+et.ndist){_.msg="invalid bit length repeat",et.mode=BAD;break}for(;wt--;)et.lens[et.have++]=dt}}if(et.mode===BAD)break;if(et.lens[256]===0){_.msg="invalid code -- missing end-of-block",et.mode=BAD;break}if(et.lenbits=9,Et={bits:et.lenbits},vt=inftrees(LENS,et.lens,0,et.nlen,et.lencode,0,et.work,Et),et.lenbits=Et.bits,vt){_.msg="invalid literal/lengths set",et.mode=BAD;break}if(et.distbits=6,et.distcode=et.distdyn,Et={bits:et.distbits},vt=inftrees(DISTS,et.lens,et.nlen,et.ndist,et.distcode,0,et.work,Et),et.distbits=Et.bits,vt){_.msg="invalid distances set",et.mode=BAD;break}if(et.mode=LEN_,_e===Z_TREES)break e;case LEN_:et.mode=LEN;case LEN:if(it>=6&&ot>=258){_.next_out=at,_.avail_out=ot,_.next_in=nt,_.avail_in=it,et.hold=st,et.bits=lt,inffast(_,ct),at=_.next_out,rt=_.output,ot=_.avail_out,nt=_.next_in,tt=_.input,it=_.avail_in,st=et.hold,lt=et.bits,et.mode===TYPE&&(et.back=-1);break}for(et.back=0;ht=et.lencode[st&(1<<et.lenbits)-1],ut=ht>>>24,ft=ht>>>16&255,yt=ht&65535,!(ut<=lt);){if(it===0)break e;it--,st+=tt[nt++]<<lt,lt+=8}if(ft&&!(ft&240)){for(xt=ut,Ct=ft,pt=yt;ht=et.lencode[pt+((st&(1<<xt+Ct)-1)>>xt)],ut=ht>>>24,ft=ht>>>16&255,yt=ht&65535,!(xt+ut<=lt);){if(it===0)break e;it--,st+=tt[nt++]<<lt,lt+=8}st>>>=xt,lt-=xt,et.back+=xt}if(st>>>=ut,lt-=ut,et.back+=ut,et.length=yt,ft===0){et.mode=LIT;break}if(ft&32){et.back=-1,et.mode=TYPE;break}if(ft&64){_.msg="invalid literal/length code",et.mode=BAD;break}et.extra=ft&15,et.mode=LENEXT;case LENEXT:if(et.extra){for(mt=et.extra;lt<mt;){if(it===0)break e;it--,st+=tt[nt++]<<lt,lt+=8}et.length+=st&(1<<et.extra)-1,st>>>=et.extra,lt-=et.extra,et.back+=et.extra}et.was=et.length,et.mode=DIST;case DIST:for(;ht=et.distcode[st&(1<<et.distbits)-1],ut=ht>>>24,ft=ht>>>16&255,yt=ht&65535,!(ut<=lt);){if(it===0)break e;it--,st+=tt[nt++]<<lt,lt+=8}if(!(ft&240)){for(xt=ut,Ct=ft,pt=yt;ht=et.distcode[pt+((st&(1<<xt+Ct)-1)>>xt)],ut=ht>>>24,ft=ht>>>16&255,yt=ht&65535,!(xt+ut<=lt);){if(it===0)break e;it--,st+=tt[nt++]<<lt,lt+=8}st>>>=xt,lt-=xt,et.back+=xt}if(st>>>=ut,lt-=ut,et.back+=ut,ft&64){_.msg="invalid distance code",et.mode=BAD;break}et.offset=yt,et.extra=ft&15,et.mode=DISTEXT;case DISTEXT:if(et.extra){for(mt=et.extra;lt<mt;){if(it===0)break e;it--,st+=tt[nt++]<<lt,lt+=8}et.offset+=st&(1<<et.extra)-1,st>>>=et.extra,lt-=et.extra,et.back+=et.extra}if(et.offset>et.dmax){_.msg="invalid distance too far back",et.mode=BAD;break}et.mode=MATCH;case MATCH:if(ot===0)break e;if(wt=ct-ot,et.offset>wt){if(wt=et.offset-wt,wt>et.whave&&et.sane){_.msg="invalid distance too far back",et.mode=BAD;break}wt>et.wnext?(wt-=et.wnext,Tt=et.wsize-wt):Tt=et.wnext-wt,wt>et.length&&(wt=et.length),Rt=et.window}else Rt=rt,Tt=at-et.offset,wt=et.length;wt>ot&&(wt=ot),ot-=wt,et.length-=wt;do rt[at++]=Rt[Tt++];while(--wt);et.length===0&&(et.mode=LEN);break;case LIT:if(ot===0)break e;rt[at++]=et.length,ot--,et.mode=LEN;break;case CHECK:if(et.wrap){for(;lt<32;){if(it===0)break e;it--,st|=tt[nt++]<<lt,lt+=8}if(ct-=ot,_.total_out+=ct,et.total+=ct,et.wrap&4&&ct&&(_.adler=et.check=et.flags?crc32_1(et.check,rt,ct,at-ct):adler32_1(et.check,rt,ct,at-ct)),ct=ot,et.wrap&4&&(et.flags?st:zswap32(st))!==et.check){_.msg="incorrect data check",et.mode=BAD;break}st=0,lt=0}et.mode=LENGTH;case LENGTH:if(et.wrap&&et.flags){for(;lt<32;){if(it===0)break e;it--,st+=tt[nt++]<<lt,lt+=8}if(et.wrap&4&&st!==(et.total&4294967295)){_.msg="incorrect length check",et.mode=BAD;break}st=0,lt=0}et.mode=DONE;case DONE:vt=Z_STREAM_END$1;break e;case BAD:vt=Z_DATA_ERROR$1;break e;case MEM:return Z_MEM_ERROR$1;case SYNC:default:return Z_STREAM_ERROR$1}return _.next_out=at,_.avail_out=ot,_.next_in=nt,_.avail_in=it,et.hold=st,et.bits=lt,(et.wsize||ct!==_.avail_out&&et.mode<BAD&&(et.mode<CHECK||_e!==Z_FINISH$1))&&updatewindow(_,_.output,_.next_out,ct-_.avail_out),gt-=_.avail_in,ct-=_.avail_out,_.total_in+=gt,_.total_out+=ct,et.total+=ct,et.wrap&4&&ct&&(_.adler=et.check=et.flags?crc32_1(et.check,rt,ct,_.next_out-ct):adler32_1(et.check,rt,ct,_.next_out-ct)),_.data_type=et.bits+(et.last?64:0)+(et.mode===TYPE?128:0)+(et.mode===LEN_||et.mode===COPY_?256:0),(gt===0&&ct===0||_e===Z_FINISH$1)&&vt===Z_OK$1&&(vt=Z_BUF_ERROR),vt},inflateEnd=_=>{if(inflateStateCheck(_))return Z_STREAM_ERROR$1;let _e=_.state;return _e.window&&(_e.window=null),_.state=null,Z_OK$1},inflateGetHeader=(_,_e)=>{if(inflateStateCheck(_))return Z_STREAM_ERROR$1;const et=_.state;return et.wrap&2?(et.head=_e,_e.done=!1,Z_OK$1):Z_STREAM_ERROR$1},inflateSetDictionary=(_,_e)=>{const et=_e.length;let tt,rt,nt;return inflateStateCheck(_)||(tt=_.state,tt.wrap!==0&&tt.mode!==DICT)?Z_STREAM_ERROR$1:tt.mode===DICT&&(rt=1,rt=adler32_1(rt,_e,et,0),rt!==tt.check)?Z_DATA_ERROR$1:(nt=updatewindow(_,_e,et,et),nt?(tt.mode=MEM,Z_MEM_ERROR$1):(tt.havedict=1,Z_OK$1))};var inflateReset_1=inflateReset,inflateReset2_1=inflateReset2,inflateResetKeep_1=inflateResetKeep,inflateInit_1=inflateInit,inflateInit2_1=inflateInit2,inflate_2$1=inflate$2,inflateEnd_1=inflateEnd,inflateGetHeader_1=inflateGetHeader,inflateSetDictionary_1=inflateSetDictionary,inflateInfo="pako inflate (from Nodeca project)",inflate_1$2={inflateReset:inflateReset_1,inflateReset2:inflateReset2_1,inflateResetKeep:inflateResetKeep_1,inflateInit:inflateInit_1,inflateInit2:inflateInit2_1,inflate:inflate_2$1,inflateEnd:inflateEnd_1,inflateGetHeader:inflateGetHeader_1,inflateSetDictionary:inflateSetDictionary_1,inflateInfo};function GZheader(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var gzheader=GZheader;const toString=Object.prototype.toString,{Z_NO_FLUSH,Z_FINISH,Z_OK,Z_STREAM_END,Z_NEED_DICT,Z_STREAM_ERROR,Z_DATA_ERROR,Z_MEM_ERROR}=constants$2;function Inflate$1(_){this.options=common.assign({chunkSize:1024*64,windowBits:15,to:""},_||{});const _e=this.options;_e.raw&&_e.windowBits>=0&&_e.windowBits<16&&(_e.windowBits=-_e.windowBits,_e.windowBits===0&&(_e.windowBits=-15)),_e.windowBits>=0&&_e.windowBits<16&&!(_&&_.windowBits)&&(_e.windowBits+=32),_e.windowBits>15&&_e.windowBits<48&&(_e.windowBits&15||(_e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new zstream,this.strm.avail_out=0;let et=inflate_1$2.inflateInit2(this.strm,_e.windowBits);if(et!==Z_OK)throw new Error(messages[et]);if(this.header=new gzheader,inflate_1$2.inflateGetHeader(this.strm,this.header),_e.dictionary&&(typeof _e.dictionary=="string"?_e.dictionary=strings.string2buf(_e.dictionary):toString.call(_e.dictionary)==="[object ArrayBuffer]"&&(_e.dictionary=new Uint8Array(_e.dictionary)),_e.raw&&(et=inflate_1$2.inflateSetDictionary(this.strm,_e.dictionary),et!==Z_OK)))throw new Error(messages[et])}Inflate$1.prototype.push=function(_,_e){const et=this.strm,tt=this.options.chunkSize,rt=this.options.dictionary;let nt,at,it;if(this.ended)return!1;for(_e===~~_e?at=_e:at=_e===!0?Z_FINISH:Z_NO_FLUSH,toString.call(_)==="[object ArrayBuffer]"?et.input=new Uint8Array(_):et.input=_,et.next_in=0,et.avail_in=et.input.length;;){for(et.avail_out===0&&(et.output=new Uint8Array(tt),et.next_out=0,et.avail_out=tt),nt=inflate_1$2.inflate(et,at),nt===Z_NEED_DICT&&rt&&(nt=inflate_1$2.inflateSetDictionary(et,rt),nt===Z_OK?nt=inflate_1$2.inflate(et,at):nt===Z_DATA_ERROR&&(nt=Z_NEED_DICT));et.avail_in>0&&nt===Z_STREAM_END&&et.state.wrap>0&&_[et.next_in]!==0;)inflate_1$2.inflateReset(et),nt=inflate_1$2.inflate(et,at);switch(nt){case Z_STREAM_ERROR:case Z_DATA_ERROR:case Z_NEED_DICT:case Z_MEM_ERROR:return this.onEnd(nt),this.ended=!0,!1}if(it=et.avail_out,et.next_out&&(et.avail_out===0||nt===Z_STREAM_END))if(this.options.to==="string"){let ot=strings.utf8border(et.output,et.next_out),st=et.next_out-ot,lt=strings.buf2string(et.output,ot);et.next_out=st,et.avail_out=tt-st,st&&et.output.set(et.output.subarray(ot,ot+st),0),this.onData(lt)}else this.onData(et.output.length===et.next_out?et.output:et.output.subarray(0,et.next_out));if(!(nt===Z_OK&&it===0)){if(nt===Z_STREAM_END)return nt=inflate_1$2.inflateEnd(this.strm),this.onEnd(nt),this.ended=!0,!0;if(et.avail_in===0)break}}return!0};Inflate$1.prototype.onData=function(_){this.chunks.push(_)};Inflate$1.prototype.onEnd=function(_){_===Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=common.flattenChunks(this.chunks)),this.chunks=[],this.err=_,this.msg=this.strm.msg};function inflate$1(_,_e){const et=new Inflate$1(_e);if(et.push(_),et.err)throw et.msg||messages[et.err];return et.result}function inflateRaw$1(_,_e){return _e=_e||{},_e.raw=!0,inflate$1(_,_e)}var Inflate_1$1=Inflate$1,inflate_2=inflate$1,inflateRaw_1$1=inflateRaw$1,ungzip$1=inflate$1,constants=constants$2,inflate_1$1={Inflate:Inflate_1$1,inflate:inflate_2,inflateRaw:inflateRaw_1$1,ungzip:ungzip$1,constants};const{Deflate,deflate,deflateRaw,gzip}=deflate_1$1,{Inflate,inflate,inflateRaw,ungzip}=inflate_1$1;var Deflate_1=Deflate,deflate_1=deflate,deflateRaw_1=deflateRaw,gzip_1=gzip,Inflate_1=Inflate,inflate_1=inflate,inflateRaw_1=inflateRaw,ungzip_1=ungzip,constants_1=constants$2,pako={Deflate:Deflate_1,deflate:deflate_1,deflateRaw:deflateRaw_1,gzip:gzip_1,Inflate:Inflate_1,inflate:inflate_1,inflateRaw:inflateRaw_1,ungzip:ungzip_1,constants:constants_1};function fromBinary(_){const _e=new Uint8Array(_.length);return[..._].forEach((et,tt)=>{_e[tt]=et.charCodeAt(0)}),_e}function importV2Data({data:_,time:_e}){const et=localStorage.getItem("mw-migration-date");return et&&new Date(et)>=_e?!1:(_.bookmarks&&localStorage.setItem("mw-bookmarks",JSON.stringify(_.bookmarks)),_.videoProgress&&localStorage.setItem("video-progress",JSON.stringify(_.videoProgress)),localStorage.setItem("mw-migration-date",_e.toISOString()),!0)}function EmbedMigration(){let _=!1;const _e=et=>{const tt=et.data;tt&&tt.isMigrationData&&!_&&(_=!0,importV2Data({data:tt.data,time:tt.date})&&window.location.reload())};return react.exports.useEffect(()=>(window.addEventListener("message",_e),()=>{window.removeEventListener("message",_e)})),jsxRuntime.exports.jsx("iframe",{src:"https://movie.squeezebox.dev",hidden:!0})}function V2MigrationView(){const[_,_e]=react.exports.useState(!1);return react.exports.useEffect(()=>{const et=new URLSearchParams(window.location.search??"");if(!et.has("m-time")||!et.has("m-data")){_e(!0);return}const tt=JSON.parse(pako.inflate(fromBinary(atob(et.get("m-data"))),{to:"string"})),rt=new Date(et.get("m-time"));importV2Data({data:tt,time:rt}),_e(!0)},[]),react.exports.useEffect(()=>{if(!_)return;const et=new URL(window.location.href),tt=[];et.searchParams.forEach((rt,nt)=>tt.push(nt)),tt.forEach(rt=>et.searchParams.delete(rt)),et.searchParams.append("migrated","1"),et.hash=conf().NORMAL_ROUTER?"":`/search/${MWMediaType.MOVIE}`,et.pathname=conf().NORMAL_ROUTER?`/search/${MWMediaType.MOVIE}`:"",window.location.href=et.toString()},[_]),null}function Bookmarks(){const{t:_}=useTranslation(),{getFilteredBookmarks:_e,setItemBookmark:et}=useBookmarkContext(),tt=_e(),[rt,nt]=react.exports.useState(!1),[at]=useAutoAnimate();return tt.length===0?null:jsxRuntime.exports.jsxs("div",{children:[jsxRuntime.exports.jsx(SectionHeading,{title:_("search.bookmarks")||"Bookmarks",icon:Icons.BOOKMARK,children:jsxRuntime.exports.jsx(EditButton,{editing:rt,onEdit:nt})}),jsxRuntime.exports.jsx(MediaGrid,{ref:at,children:tt.map(it=>jsxRuntime.exports.jsx(WatchedMediaCard,{media:it,closable:rt,onClose:()=>et(it,!1)},it.id))})]})}function Watched(){const{t:_}=useTranslation(),{getFilteredBookmarks:_e}=useBookmarkContext(),{getFilteredWatched:et,removeProgress:tt}=useWatchedContext(),[rt,nt]=react.exports.useState(!1),[at]=useAutoAnimate(),it=_e(),ot=et().filter(st=>!getIfBookmarkedFromPortable(it,st.item.meta));return ot.length===0?null:jsxRuntime.exports.jsxs("div",{children:[jsxRuntime.exports.jsx(SectionHeading,{title:_("search.continueWatching")||"Continue Watching",icon:Icons.CLOCK,children:jsxRuntime.exports.jsx(EditButton,{editing:rt,onEdit:nt})}),jsxRuntime.exports.jsx(MediaGrid,{ref:at,children:ot.map(st=>jsxRuntime.exports.jsx(WatchedMediaCard,{media:st.item.meta,closable:rt,onClose:()=>tt(st.item.meta.id)},st.item.meta.id))})]})}function NewDomainModal(){const[_,_e]=react.exports.useState(new URLSearchParams(window.location.search).get("migrated")==="1"),[et,tt]=react.exports.useState(!1),rt=useHistory(),{t:nt}=useTranslation();react.exports.useEffect(()=>{const gt=new URLSearchParams(rt.location.search);gt.delete("migrated"),rt.replace({search:gt.toString()})},[rt]),react.exports.useEffect(()=>{setTimeout(()=>{tt(!0)},500)},[]);const at=1e3*60*60*24,it=["January","February","March","April","May","June","July","August","September","October","November","December"],ot=new Date(localStorage.getItem("firstVisitToSite")||Date.now());localStorage.setItem("firstVisitToSite",ot.toISOString());const st=new Date(ot.getTime()+14*at),lt=`${st.getDate()} ${it[st.getMonth()]} ${st.getFullYear()}`;return jsxRuntime.exports.jsx(Modal,{show:_&&et,children:jsxRuntime.exports.jsxs(ModalCard,{children:[jsxRuntime.exports.jsxs("div",{className:"mb-12",children:[jsxRuntime.exports.jsx("div",{className:"absolute left-0 top-0 h-[300px] w-full -translate-y-1/2 opacity-50",style:{backgroundImage:"radial-gradient(ellipse 70% 9rem, #7831C1 0%, transparent 100%)"}}),jsxRuntime.exports.jsx("div",{className:"relative flex items-center justify-center",children:jsxRuntime.exports.jsx("div",{className:"rounded-full bg-bink-200 py-4 px-12 text-center text-sm font-bold text-white md:text-xl",children:nt("v3.newDomain")})})]}),jsxRuntime.exports.jsxs("div",{className:"space-y-6",children:[jsxRuntime.exports.jsx("h2",{className:"text-2xl font-bold text-white",children:nt("v3.newSiteTitle")}),jsxRuntime.exports.jsx("p",{className:"leading-7",children:jsxRuntime.exports.jsxs(Trans,{i18nKey:"v3.newDomainText",values:{date:lt},children:[jsxRuntime.exports.jsx("span",{className:"text-slate-300"}),jsxRuntime.exports.jsx("span",{className:"font-bold text-white"})]})}),jsxRuntime.exports.jsx("p",{children:nt("v3.tireless")})]}),jsxRuntime.exports.jsx("div",{className:"mt-16 mb-6 flex items-center justify-center",children:jsxRuntime.exports.jsx(Button,{icon:Icons.PLAY,onClick:()=>_e(!1),children:nt("v3.leaveAnnouncement")})})]})})}function HomeView(){return jsxRuntime.exports.jsxs("div",{className:"mb-16",children:[jsxRuntime.exports.jsx(EmbedMigration,{}),jsxRuntime.exports.jsx(NewDomainModal,{}),jsxRuntime.exports.jsx(Bookmarks,{}),jsxRuntime.exports.jsx(Watched,{})]})}function SearchLoadingView(){const{t:_}=useTranslation(),[_e]=useSearchQuery();return jsxRuntime.exports.jsx(Loading,{className:"mt-40 mb-24 ",text:_(`search.loading_${_e.type}`)||_("search.loading")||"Fetching your favourite shows..."})}function SearchSuffix(_){const{t:_e}=useTranslation(),et=_.failed?Icons.WARNING:Icons.EYE_SLASH;return jsxRuntime.exports.jsxs("div",{className:"mt-40 mb-24  flex flex-col items-center justify-center space-y-3 text-center",children:[jsxRuntime.exports.jsx(IconPatch,{icon:et,className:`text-xl ${_.failed?"text-red-400":"text-bink-600"}`}),_.failed?null:jsxRuntime.exports.jsx("div",{children:(_.results??0)>0?jsxRuntime.exports.jsx("p",{children:_e("search.allResults")}):jsxRuntime.exports.jsx("p",{children:_e("search.noResults")})}),_.failed?jsxRuntime.exports.jsx("div",{children:jsxRuntime.exports.jsx("p",{children:_e("search.allFailed")})}):null]})}function SearchResultsView({searchQuery:_}){const{t:_e}=useTranslation(),[et,tt]=react.exports.useState([]),[rt,nt,at]=useLoading(it=>searchForMedia(it));return react.exports.useEffect(()=>{async function it(ot){const st=await rt(ot);!st||tt(st)}_.searchQuery!==""&&it(_)},[_,rt]),nt?jsxRuntime.exports.jsx(SearchLoadingView,{}):at?jsxRuntime.exports.jsx(SearchSuffix,{failed:!0}):et?jsxRuntime.exports.jsxs("div",{children:[et.length>0?jsxRuntime.exports.jsxs("div",{children:[jsxRuntime.exports.jsx(SectionHeading,{title:_e("search.headingTitle")||"Search results",icon:Icons.SEARCH}),jsxRuntime.exports.jsx(MediaGrid,{children:et.map(it=>jsxRuntime.exports.jsx(WatchedMediaCard,{media:it},it.id.toString()))})]}):null,jsxRuntime.exports.jsx(SearchSuffix,{results:et.length})]}):null}function SearchResultsPartial({search:_}){const[_e,et]=react.exports.useState(!1),[tt,rt]=react.exports.useState(!1),nt=useDebounce(_,500);return react.exports.useEffect(()=>{et(_.searchQuery!==""),rt(_.searchQuery!=="")},[_]),react.exports.useEffect(()=>{rt(!1)},[nt]),react.exports.useMemo(()=>tt?jsxRuntime.exports.jsx(SearchLoadingView,{}):_e?jsxRuntime.exports.jsx(SearchResultsView,{searchQuery:nt}):jsxRuntime.exports.jsx(HomeView,{}),[tt,_e,nt])}function SearchView(){const{t:_}=useTranslation(),[_e,et,tt]=useSearchQuery(),[rt,nt]=react.exports.useState(!1),at=useBannerSize(),it=react.exports.useCallback(({status:ot})=>nt(ot===Sticky.STATUS_FIXED),[nt]);return jsxRuntime.exports.jsxs(jsxRuntime.exports.Fragment,{children:[jsxRuntime.exports.jsxs("div",{className:"relative z-10 mb-16 sm:mb-24",children:[jsxRuntime.exports.jsx(HelmetExport,{children:jsxRuntime.exports.jsx("title",{children:_("global.name")})}),jsxRuntime.exports.jsx(Navigation,{bg:rt}),jsxRuntime.exports.jsx(ThinContainer,{children:jsxRuntime.exports.jsxs("div",{className:"mt-44 space-y-16 text-center",children:[jsxRuntime.exports.jsx("div",{className:"absolute left-0 bottom-0 right-0 flex h-0 justify-center",children:jsxRuntime.exports.jsx("div",{className:"absolute bottom-4 h-[100vh] w-[3000px] rounded-[100%] bg-denim-300 md:w-[200vw]"})}),jsxRuntime.exports.jsx("div",{className:"relative z-10 mb-16",children:jsxRuntime.exports.jsx(Title,{className:"mx-auto max-w-xs",children:_("search.title")})}),jsxRuntime.exports.jsx("div",{className:"relative z-30",children:jsxRuntime.exports.jsx(Sticky,{enabled:!0,top:16+at,onStateChange:it,children:jsxRuntime.exports.jsx(SearchBarInput,{onChange:et,value:_e,onUnFocus:tt,placeholder:_("search.placeholder")||"What do you want to watch?"})})})]})})]}),jsxRuntime.exports.jsx(WideContainer,{children:jsxRuntime.exports.jsx(SearchResultsPartial,{search:_e})})]})}function DeveloperView(){return jsxRuntime.exports.jsxs("div",{className:"py-48",children:[jsxRuntime.exports.jsx(Navigation,{}),jsxRuntime.exports.jsxs(ThinContainer,{classNames:"flex flex-col space-y-4",children:[jsxRuntime.exports.jsx(Title,{className:"mb-8",children:"Developer tools"}),jsxRuntime.exports.jsx(ArrowLink,{to:"/dev/providers",direction:"right",linkText:"Provider tester"}),jsxRuntime.exports.jsx(ArrowLink,{to:"/dev/embeds",direction:"right",linkText:"Embed scraper tester"}),jsxRuntime.exports.jsx(ArrowLink,{to:"/dev/video",direction:"right",linkText:"Video tester"})]})]})}function Dropdown(_){return jsxRuntime.exports.jsx("div",{className:"relative my-4 max-w-[18rem]",children:jsxRuntime.exports.jsx(Mt,{value:_.selectedItem,onChange:_.setSelectedItem,children:({open:_e})=>jsxRuntime.exports.jsxs(jsxRuntime.exports.Fragment,{children:[jsxRuntime.exports.jsxs(Mt.Button,{className:"relative w-full cursor-default rounded-lg bg-denim-500 py-2 pl-3 pr-10 text-left text-white shadow-md focus:outline-none focus-visible:border-indigo-500 focus-visible:ring-2 focus-visible:ring-bink-500  focus-visible:ring-opacity-75 focus-visible:ring-offset-2 focus-visible:ring-offset-bink-300 sm:text-sm",children:[jsxRuntime.exports.jsx("span",{className:"block truncate",children:_.selectedItem.name}),jsxRuntime.exports.jsx("span",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2",children:jsxRuntime.exports.jsx(Icon,{icon:Icons.CHEVRON_DOWN,className:`transform transition-transform ${_e?"rotate-180":""}`})})]}),jsxRuntime.exports.jsx(Je,{as:react.exports.Fragment,leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:jsxRuntime.exports.jsx(Mt.Options,{className:"absolute bottom-11 left-0 right-0 z-10 mt-1 max-h-60 overflow-auto rounded-md bg-denim-500 py-1 text-white shadow-lg ring-1 ring-black ring-opacity-5 scrollbar-thin scrollbar-track-denim-400 scrollbar-thumb-denim-200 focus:outline-none sm:bottom-10 sm:text-sm",children:_.options.map(et=>jsxRuntime.exports.jsx(Mt.Option,{className:({active:tt})=>`relative cursor-default select-none py-2 pl-10 pr-4 ${tt?"bg-denim-400 text-bink-700":"text-white"}`,value:et,children:et.name},et.id))})})]})})})}const testData$1={streamUrl:"http://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4",type:MWStreamType.MP4},testMeta={imdbId:"",tmdbId:"",meta:{id:"hello-world",title:"Big Buck Bunny",type:MWMediaType.MOVIE,seasons:void 0,year:"2000"}};function VideoTesterView(){const[_,_e]=react.exports.useState(null),[et,tt]=react.exports.useState(MWStreamType.MP4),[rt,nt]=react.exports.useState(""),at=react.exports.useCallback(it=>{_e({streamUrl:it,type:et})},[et]);return _?jsxRuntime.exports.jsxs("div",{className:"fixed top-0 left-0 h-[100dvh] w-screen",children:[jsxRuntime.exports.jsx(HelmetExport,{children:jsxRuntime.exports.jsx("html",{"data-full":"true"})}),jsxRuntime.exports.jsxs(VideoPlayer,{includeSafeArea:!0,autoPlay:!0,onGoBack:()=>_e(null),children:[jsxRuntime.exports.jsx(MetaController,{data:{captions:[],meta:testMeta},linkedCaptions:[]}),jsxRuntime.exports.jsx(SourceController,{source:_.streamUrl,type:MWStreamType.MP4,quality:MWStreamQuality.Q720P})]})]}):jsxRuntime.exports.jsxs("div",{className:"py-64",children:[jsxRuntime.exports.jsx(Navigation,{}),jsxRuntime.exports.jsxs(ThinContainer,{classNames:"flex items-start flex-col space-y-4",children:[jsxRuntime.exports.jsx("div",{className:"w-48",children:jsxRuntime.exports.jsx(Dropdown,{options:[{id:MWStreamType.MP4,name:"Mp4"},{id:MWStreamType.HLS,name:"hls/m3u8"}],selectedItem:{id:et,name:et},setSelectedItem:it=>tt(it.id)})}),jsxRuntime.exports.jsxs("div",{className:"mb-4 flex gap-4",children:[jsxRuntime.exports.jsx("input",{type:"text",placeholder:"stream url here...",value:rt,onChange:it=>nt(it.target.value)}),jsxRuntime.exports.jsx(Button,{onClick:()=>at(rt),children:"Play video"})]}),jsxRuntime.exports.jsx(Button,{onClick:()=>_e({streamUrl:testData$1.streamUrl,type:testData$1.type}),children:"Play default video"})]})]})}const testData=[{imdbId:"tt10954562",tmdbId:"572716",meta:{id:"439596",title:"Hamilton",type:MWMediaType.MOVIE,year:"2020",seasons:void 0}},{imdbId:"tt11126994",tmdbId:"94605",meta:{id:"222333",title:"Arcane",type:MWMediaType.SERIES,year:"2021",seasons:[{id:"230301",number:1,title:"Season 1"}],seasonData:{id:"230301",number:1,title:"Season 1",episodes:[{id:"4243445",number:1,title:"Welcome to the Playground"}]}}}];function MediaSelector$1(_){const _e=testData;return jsxRuntime.exports.jsxs("div",{className:"flex flex-col space-y-4",children:[jsxRuntime.exports.jsx(Title,{className:"mb-8",children:"Choose media"}),_e.map(et=>jsxRuntime.exports.jsx(ArrowLink,{onClick:()=>_.onSelect(et),direction:"right",linkText:`${et.meta.title} (${et.meta.type})`},et.imdbId))]})}function MediaScraper$1(_){const[_e,et]=react.exports.useState(null),[tt,rt]=react.exports.useState(0),[nt,at,it]=useLoading(async ot=>{const st=getProviders().find(gt=>gt.id===_.id);if(!st)throw new Error("provider not found");const lt=await runProvider(st,{progress(gt){console.log(`SCRAPING AT ${gt}%`),rt(gt)},media:ot,type:ot.meta.type});console.log("got data",lt),et(lt)});return react.exports.useEffect(()=>{_.media&&nt(_.media)},[_.media,nt]),at?jsxRuntime.exports.jsxs("p",{children:["Scraping... (",tt,"%)"]}):it?jsxRuntime.exports.jsx("p",{children:"Errored, check console"}):jsxRuntime.exports.jsxs("div",{children:[jsxRuntime.exports.jsx(Title,{className:"mb-8",children:"Output data"}),jsxRuntime.exports.jsx("code",{children:jsxRuntime.exports.jsx("pre",{children:JSON.stringify(_e,null,2)})})]})}function ProviderSelector(_){const _e=getProviders();return jsxRuntime.exports.jsxs("div",{className:"flex flex-col space-y-4",children:[jsxRuntime.exports.jsx(Title,{className:"mb-8",children:"Choose provider"}),_e.map(et=>jsxRuntime.exports.jsx(ArrowLink,{onClick:()=>_.onSelect(et.id),direction:"right",linkText:et.displayName},et.id))]})}function ProviderTesterView(){const[_,_e]=react.exports.useState(null),[et,tt]=react.exports.useState(null);let rt=null;return et?_?rt=jsxRuntime.exports.jsx(MediaScraper$1,{id:et,media:_}):rt=jsxRuntime.exports.jsx(MediaSelector$1,{onSelect:nt=>_e(nt)}):rt=jsxRuntime.exports.jsx(ProviderSelector,{onSelect:nt=>tt(nt)}),jsxRuntime.exports.jsxs("div",{className:"py-48",children:[jsxRuntime.exports.jsx(Navigation,{}),jsxRuntime.exports.jsx("div",{className:"mx-8 overflow-x-auto",children:rt})]})}function MediaSelector(_){const[_e,et]=react.exports.useState(""),tt=react.exports.useCallback(rt=>{_.onSelect({type:_.embedType,url:rt})},[_]);return jsxRuntime.exports.jsxs("div",{className:"flex flex-col space-y-4",children:[jsxRuntime.exports.jsx(Title,{className:"mb-8",children:"Input embed url"}),jsxRuntime.exports.jsxs("div",{className:"mb-4 flex gap-4",children:[jsxRuntime.exports.jsx("input",{type:"text",placeholder:"embed url here...",value:_e,onChange:rt=>et(rt.target.value)}),jsxRuntime.exports.jsx(Button,{onClick:()=>tt(_e),children:"Run scraper"})]})]})}function MediaScraper(_){const[_e,et]=react.exports.useState(null),[tt,rt]=react.exports.useState(0),[nt,at,it]=useLoading(async ot=>{const st=await runEmbedScraper(_.scraper,{url:ot,progress(lt){console.log(`SCRAPING AT ${lt}%`),rt(lt)}});console.log("got data",st),et(st)});return react.exports.useEffect(()=>{_.embed&&nt(_.embed.url)},[_.embed,nt]),at?jsxRuntime.exports.jsxs("p",{children:["Scraping... (",tt,"%)"]}):it?jsxRuntime.exports.jsx("p",{children:"Errored, check console"}):jsxRuntime.exports.jsxs("div",{children:[jsxRuntime.exports.jsx(Title,{className:"mb-8",children:"Output data"}),jsxRuntime.exports.jsx("code",{children:jsxRuntime.exports.jsx("pre",{children:JSON.stringify(_e,null,2)})})]})}function EmbedScraperSelector(_){const _e=getEmbeds();return jsxRuntime.exports.jsxs("div",{className:"flex flex-col space-y-4",children:[jsxRuntime.exports.jsx(Title,{className:"mb-8",children:"Choose embed scraper"}),_e.map(et=>jsxRuntime.exports.jsx(ArrowLink,{onClick:()=>_.onSelect(et.id),direction:"right",linkText:et.displayName},et.id))]})}function EmbedTesterView(){const[_,_e]=react.exports.useState(null),[et,tt]=react.exports.useState(null),rt=react.exports.useMemo(()=>getEmbeds().find(at=>at.id===et),[et]);let nt=null;return!et||!rt?nt=jsxRuntime.exports.jsx(EmbedScraperSelector,{onSelect:at=>tt(at)}):_?nt=jsxRuntime.exports.jsx(MediaScraper,{scraper:rt,embed:_}):nt=jsxRuntime.exports.jsx(MediaSelector,{embedType:rt.for,onSelect:at=>_e(at)}),jsxRuntime.exports.jsxs("div",{className:"py-48",children:[jsxRuntime.exports.jsx(Navigation,{}),jsxRuntime.exports.jsx("div",{className:"mx-8 overflow-x-auto",children:nt})]})}function Banner(_){const[_e]=useBanner("internet"),et={error:"bg-[#C93957] text-white"},tt={error:Icons.CIRCLE_EXCLAMATION};return jsxRuntime.exports.jsx("div",{ref:_e,children:jsxRuntime.exports.jsx("div",{className:[et[_.type],"flex items-center justify-center p-1"].join(" "),children:jsxRuntime.exports.jsxs("div",{className:"flex items-center space-x-3",children:[jsxRuntime.exports.jsx(Icon,{icon:tt[_.type]}),jsxRuntime.exports.jsx("div",{children:_.children})]})})})}function useIsOnline(){const[_,_e]=react.exports.useState(!0),et=react.exports.useRef(!0);return react.exports.useEffect(()=>{let tt=0,rt=null;const nt=setInterval(()=>{if(tt+=1,et.current&&tt<10)return;tt=0,rt&&rt.abort(),rt=new AbortController;const at=rt.signal;fetch("/ping.txt",{signal:at}).then(()=>{_e(!0),et.current=!0}).catch(it=>{it.name!=="AbortError"&&(_e(!1),et.current=!1)})},5e3);return()=>{clearInterval(nt),rt&&rt.abort()}},[]),_}function Layout(_){const{t:_e}=useTranslation(),et=useIsOnline(),tt=useBannerSize();return jsxRuntime.exports.jsxs("div",{children:[jsxRuntime.exports.jsx("div",{className:"fixed inset-x-0 z-[1000]",children:et?null:jsxRuntime.exports.jsx(Banner,{type:"error",children:_e("errors.offline")})}),jsxRuntime.exports.jsx("div",{style:{paddingTop:`${tt}px`},className:"flex min-h-screen flex-col",children:_.children})]})}function App(){return jsxRuntime.exports.jsx(WatchedContextProvider,{children:jsxRuntime.exports.jsx(BookmarkContextProvider,{children:jsxRuntime.exports.jsx(BannerContextProvider,{children:jsxRuntime.exports.jsx(Layout,{children:jsxRuntime.exports.jsxs(Switch,{children:[jsxRuntime.exports.jsx(Route,{exact:!0,path:"/v2-migration",component:V2MigrationView}),jsxRuntime.exports.jsx(Route,{exact:!0,path:"/",children:jsxRuntime.exports.jsx(Redirect,{to:`/search/${MWMediaType.MOVIE}`})}),jsxRuntime.exports.jsx(Route,{exact:!0,path:"/media/:media",component:MediaView}),jsxRuntime.exports.jsx(Route,{exact:!0,path:"/media/:media/:season/:episode",component:MediaView}),jsxRuntime.exports.jsx(Route,{exact:!0,path:"/search/:type/:query?",component:SearchView}),jsxRuntime.exports.jsx(Route,{exact:!0,path:"/dev",component:DeveloperView}),jsxRuntime.exports.jsx(Route,{exact:!0,path:"/dev/video",component:VideoTesterView}),jsxRuntime.exports.jsx(Route,{exact:!0,path:"/dev/providers",component:ProviderTesterView}),jsxRuntime.exports.jsx(Route,{exact:!0,path:"/dev/embeds",component:EmbedTesterView}),jsxRuntime.exports.jsx(Route,{path:"*",component:NotFoundPage})]})})})})})}var dist={},ga4={},gtag={};(function(_){Object.defineProperty(_,"__esModule",{value:!0}),_.default=void 0;var _e=function(){for(var rt=arguments.length,nt=new Array(rt),at=0;at<rt;at++)nt[at]=arguments[at];if(typeof window<"u"){var it;typeof window.gtag>"u"&&(window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)}),(it=window).gtag.apply(it,nt)}},et=_e;_.default=et})(gtag);var format$1={};(function(_){Object.defineProperty(_,"__esModule",{value:!0}),_.default=at;var _e=/^(a|an|and|as|at|but|by|en|for|if|in|nor|of|on|or|per|the|to|vs?\.?|via)$/i;function et(it){return it.toString().trim().replace(/[A-Za-z0-9\u00C0-\u00FF]+[^\s-]*/g,function(ot,st,lt){return st>0&&st+ot.length!==lt.length&&ot.search(_e)>-1&&lt.charAt(st-2)!==":"&&(lt.charAt(st+ot.length)!=="-"||lt.charAt(st-1)==="-")&&lt.charAt(st-1).search(/[^\s-]/)<0?ot.toLowerCase():ot.substr(1).search(/[A-Z]|\../)>-1?ot:ot.charAt(0).toUpperCase()+ot.substr(1)})}function tt(it){return typeof it=="string"&&it.indexOf("@")!==-1}var rt="REDACTED (Potential Email Address)";function nt(it){return tt(it)?(console.warn("This arg looks like an email address, redacting."),rt):it}function at(){var it=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",ot=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,st=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,lt=it||"";return ot&&(lt=et(it)),st&&(lt=nt(lt)),lt}})(format$1);(function(_){Object.defineProperty(_,"__esModule",{value:!0}),_.default=_.GA4=void 0;var _e=at(gtag),et=at(format$1),tt=["eventCategory","eventAction","eventLabel","eventValue","hitType"],rt=["title","location"],nt=["page","hitType"];function at(Ot){return Ot&&Ot.__esModule?Ot:{default:Ot}}function it(Ot,Pt){if(Ot==null)return{};var Dt=ot(Ot,Pt),It,kt;if(Object.getOwnPropertySymbols){var Lt=Object.getOwnPropertySymbols(Ot);for(kt=0;kt<Lt.length;kt++)It=Lt[kt],!(Pt.indexOf(It)>=0)&&(!Object.prototype.propertyIsEnumerable.call(Ot,It)||(Dt[It]=Ot[It]))}return Dt}function ot(Ot,Pt){if(Ot==null)return{};var Dt={},It=Object.keys(Ot),kt,Lt;for(Lt=0;Lt<It.length;Lt++)kt=It[Lt],!(Pt.indexOf(kt)>=0)&&(Dt[kt]=Ot[kt]);return Dt}function st(Ot){return st=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Pt){return typeof Pt}:function(Pt){return Pt&&typeof Symbol=="function"&&Pt.constructor===Symbol&&Pt!==Symbol.prototype?"symbol":typeof Pt},st(Ot)}function lt(Ot){return wt(Ot)||ct(Ot)||ft(Ot)||gt()}function gt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ct(Ot){if(typeof Symbol<"u"&&Ot[Symbol.iterator]!=null||Ot["@@iterator"]!=null)return Array.from(Ot)}function wt(Ot){if(Array.isArray(Ot))return yt(Ot)}function Tt(Ot,Pt){var Dt=Object.keys(Ot);if(Object.getOwnPropertySymbols){var It=Object.getOwnPropertySymbols(Ot);Pt&&(It=It.filter(function(kt){return Object.getOwnPropertyDescriptor(Ot,kt).enumerable})),Dt.push.apply(Dt,It)}return Dt}function Rt(Ot){for(var Pt=1;Pt<arguments.length;Pt++){var Dt=arguments[Pt]!=null?arguments[Pt]:{};Pt%2?Tt(Object(Dt),!0).forEach(function(It){St(Ot,It,Dt[It])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Ot,Object.getOwnPropertyDescriptors(Dt)):Tt(Object(Dt)).forEach(function(It){Object.defineProperty(Ot,It,Object.getOwnPropertyDescriptor(Dt,It))})}return Ot}function ht(Ot,Pt){return Ct(Ot)||xt(Ot,Pt)||ft(Ot,Pt)||ut()}function ut(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ft(Ot,Pt){if(!!Ot){if(typeof Ot=="string")return yt(Ot,Pt);var Dt=Object.prototype.toString.call(Ot).slice(8,-1);if(Dt==="Object"&&Ot.constructor&&(Dt=Ot.constructor.name),Dt==="Map"||Dt==="Set")return Array.from(Ot);if(Dt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Dt))return yt(Ot,Pt)}}function yt(Ot,Pt){(Pt==null||Pt>Ot.length)&&(Pt=Ot.length);for(var Dt=0,It=new Array(Pt);Dt<Pt;Dt++)It[Dt]=Ot[Dt];return It}function xt(Ot,Pt){var Dt=Ot==null?null:typeof Symbol<"u"&&Ot[Symbol.iterator]||Ot["@@iterator"];if(Dt!=null){var It,kt,Lt,At,$t=[],jt=!0,Nt=!1;try{if(Lt=(Dt=Dt.call(Ot)).next,Pt===0){if(Object(Dt)!==Dt)return;jt=!1}else for(;!(jt=(It=Lt.call(Dt)).done)&&($t.push(It.value),$t.length!==Pt);jt=!0);}catch(Ft){Nt=!0,kt=Ft}finally{try{if(!jt&&Dt.return!=null&&(At=Dt.return(),Object(At)!==At))return}finally{if(Nt)throw kt}}return $t}}function Ct(Ot){if(Array.isArray(Ot))return Ot}function pt(Ot,Pt){if(!(Ot instanceof Pt))throw new TypeError("Cannot call a class as a function")}function dt(Ot,Pt){for(var Dt=0;Dt<Pt.length;Dt++){var It=Pt[Dt];It.enumerable=It.enumerable||!1,It.configurable=!0,"value"in It&&(It.writable=!0),Object.defineProperty(Ot,Et(It.key),It)}}function vt(Ot,Pt,Dt){return Pt&&dt(Ot.prototype,Pt),Dt&&dt(Ot,Dt),Object.defineProperty(Ot,"prototype",{writable:!1}),Ot}function St(Ot,Pt,Dt){return Pt=Et(Pt),Pt in Ot?Object.defineProperty(Ot,Pt,{value:Dt,enumerable:!0,configurable:!0,writable:!0}):Ot[Pt]=Dt,Ot}function Et(Ot){var Pt=mt(Ot,"string");return st(Pt)==="symbol"?Pt:String(Pt)}function mt(Ot,Pt){if(st(Ot)!=="object"||Ot===null)return Ot;var Dt=Ot[Symbol.toPrimitive];if(Dt!==void 0){var It=Dt.call(Ot,Pt||"default");if(st(It)!=="object")return It;throw new TypeError("@@toPrimitive must return a primitive value.")}return(Pt==="string"?String:Number)(Ot)}var _t=function(){function Ot(){var Pt=this;pt(this,Ot),St(this,"reset",function(){Pt.isInitialized=!1,Pt._testMode=!1,Pt._currentMeasurementId,Pt._hasLoadedGA=!1,Pt._isQueuing=!1,Pt._queueGtag=[]}),St(this,"_gtag",function(){for(var Dt=arguments.length,It=new Array(Dt),kt=0;kt<Dt;kt++)It[kt]=arguments[kt];Pt._testMode||Pt._isQueuing?Pt._queueGtag.push(It):_e.default.apply(void 0,It)}),St(this,"_loadGA",function(Dt,It){if(!(typeof window>"u"||typeof document>"u")&&!Pt._hasLoadedGA){var kt=document.createElement("script");kt.async=!0,kt.src="https://www.googletagmanager.com/gtag/js?id=".concat(Dt),It&&kt.setAttribute("nonce",It),document.body.appendChild(kt),window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)},Pt._hasLoadedGA=!0}}),St(this,"_toGtagOptions",function(Dt){if(!!Dt){var It={cookieUpdate:"cookie_update",cookieExpires:"cookie_expires",cookieDomain:"cookie_domain",cookieFlags:"cookie_flags",userId:"user_id",clientId:"client_id",anonymizeIp:"anonymize_ip",contentGroup1:"content_group1",contentGroup2:"content_group2",contentGroup3:"content_group3",contentGroup4:"content_group4",contentGroup5:"content_group5",allowAdFeatures:"allow_google_signals",allowAdPersonalizationSignals:"allow_ad_personalization_signals",nonInteraction:"non_interaction",page:"page_path",hitCallback:"event_callback"},kt=Object.entries(Dt).reduce(function(Lt,At){var $t=ht(At,2),jt=$t[0],Nt=$t[1];return It[jt]?Lt[It[jt]]=Nt:Lt[jt]=Nt,Lt},{});return kt}}),St(this,"initialize",function(Dt){var It=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Dt)throw new Error("Require GA_MEASUREMENT_ID");var kt=typeof Dt=="string"?[{trackingId:Dt}]:Dt;Pt._currentMeasurementId=kt[0].trackingId;var Lt=It.gaOptions,At=It.gtagOptions,$t=It.nonce,jt=It.testMode,Nt=jt===void 0?!1:jt;if(Pt._testMode=Nt,Nt||Pt._loadGA(Pt._currentMeasurementId,$t),Pt.isInitialized||(Pt._gtag("js",new Date),kt.forEach(function(Ut){var Ht=Rt(Rt(Rt({},Pt._toGtagOptions(Rt(Rt({},Lt),Ut.gaOptions))),At),Ut.gtagOptions);Object.keys(Ht).length?Pt._gtag("config",Ut.trackingId,Ht):Pt._gtag("config",Ut.trackingId)})),Pt.isInitialized=!0,!Nt){var Ft=lt(Pt._queueGtag);for(Pt._queueGtag=[],Pt._isQueuing=!1;Ft.length;){var Bt=Ft.shift();Pt._gtag.apply(Pt,lt(Bt)),Bt[0]==="get"&&(Pt._isQueuing=!0)}}}),St(this,"set",function(Dt){if(!Dt){console.warn("`fieldsObject` is required in .set()");return}if(st(Dt)!=="object"){console.warn("Expected `fieldsObject` arg to be an Object");return}Object.keys(Dt).length===0&&console.warn("empty `fieldsObject` given to .set()"),Pt._gaCommand("set",Dt)}),St(this,"_gaCommandSendEvent",function(Dt,It,kt,Lt,At){Pt._gtag("event",It,Rt(Rt({event_category:Dt,event_label:kt,value:Lt},At&&{non_interaction:At.nonInteraction}),Pt._toGtagOptions(At)))}),St(this,"_gaCommandSendEventParameters",function(){for(var Dt=arguments.length,It=new Array(Dt),kt=0;kt<Dt;kt++)It[kt]=arguments[kt];if(typeof It[0]=="string")Pt._gaCommandSendEvent.apply(Pt,lt(It.slice(1)));else{var Lt=It[0],At=Lt.eventCategory,$t=Lt.eventAction,jt=Lt.eventLabel,Nt=Lt.eventValue;Lt.hitType;var Ft=it(Lt,tt);Pt._gaCommandSendEvent(At,$t,jt,Nt,Ft)}}),St(this,"_gaCommandSendTiming",function(Dt,It,kt,Lt){Pt._gtag("event","timing_complete",{name:It,value:kt,event_category:Dt,event_label:Lt})}),St(this,"_gaCommandSendPageview",function(Dt,It){if(It&&Object.keys(It).length){var kt=Pt._toGtagOptions(It),Lt=kt.title,At=kt.location,$t=it(kt,rt);Pt._gtag("event","page_view",Rt(Rt(Rt(Rt({},Dt&&{page_path:Dt}),Lt&&{page_title:Lt}),At&&{page_location:At}),$t))}else Dt?Pt._gtag("event","page_view",{page_path:Dt}):Pt._gtag("event","page_view")}),St(this,"_gaCommandSendPageviewParameters",function(){for(var Dt=arguments.length,It=new Array(Dt),kt=0;kt<Dt;kt++)It[kt]=arguments[kt];if(typeof It[0]=="string")Pt._gaCommandSendPageview.apply(Pt,lt(It.slice(1)));else{var Lt=It[0],At=Lt.page;Lt.hitType;var $t=it(Lt,nt);Pt._gaCommandSendPageview(At,$t)}}),St(this,"_gaCommandSend",function(){for(var Dt=arguments.length,It=new Array(Dt),kt=0;kt<Dt;kt++)It[kt]=arguments[kt];var Lt=typeof It[0]=="string"?It[0]:It[0].hitType;switch(Lt){case"event":Pt._gaCommandSendEventParameters.apply(Pt,It);break;case"pageview":Pt._gaCommandSendPageviewParameters.apply(Pt,It);break;case"timing":Pt._gaCommandSendTiming.apply(Pt,lt(It.slice(1)));break;case"screenview":case"transaction":case"item":case"social":case"exception":console.warn("Unsupported send command: ".concat(Lt));break;default:console.warn("Send command doesn't exist: ".concat(Lt))}}),St(this,"_gaCommandSet",function(){for(var Dt=arguments.length,It=new Array(Dt),kt=0;kt<Dt;kt++)It[kt]=arguments[kt];typeof It[0]=="string"&&(It[0]=St({},It[0],It[1])),Pt._gtag("set",Pt._toGtagOptions(It[0]))}),St(this,"_gaCommand",function(Dt){for(var It=arguments.length,kt=new Array(It>1?It-1:0),Lt=1;Lt<It;Lt++)kt[Lt-1]=arguments[Lt];switch(Dt){case"send":Pt._gaCommandSend.apply(Pt,kt);break;case"set":Pt._gaCommandSet.apply(Pt,kt);break;default:console.warn("Command doesn't exist: ".concat(Dt))}}),St(this,"ga",function(){for(var Dt=arguments.length,It=new Array(Dt),kt=0;kt<Dt;kt++)It[kt]=arguments[kt];if(typeof It[0]=="string")Pt._gaCommand.apply(Pt,It);else{var Lt=It[0];Pt._gtag("get",Pt._currentMeasurementId,"client_id",function(At){Pt._isQueuing=!1;var $t=Pt._queueGtag;for(Lt({get:function(Ft){return Ft==="clientId"?At:Ft==="trackingId"?Pt._currentMeasurementId:Ft==="apiVersion"?"1":void 0}});$t.length;){var jt=$t.shift();Pt._gtag.apply(Pt,lt(jt))}}),Pt._isQueuing=!0}return Pt.ga}),St(this,"event",function(Dt,It){if(typeof Dt=="string")Pt._gtag("event",Dt,Pt._toGtagOptions(It));else{var kt=Dt.action,Lt=Dt.category,At=Dt.label,$t=Dt.value,jt=Dt.nonInteraction,Nt=Dt.transport;if(!Lt||!kt){console.warn("args.category AND args.action are required in event()");return}var Ft={hitType:"event",eventCategory:(0,et.default)(Lt),eventAction:(0,et.default)(kt)};At&&(Ft.eventLabel=(0,et.default)(At)),typeof $t<"u"&&(typeof $t!="number"?console.warn("Expected `args.value` arg to be a Number."):Ft.eventValue=$t),typeof jt<"u"&&(typeof jt!="boolean"?console.warn("`args.nonInteraction` must be a boolean."):Ft.nonInteraction=jt),typeof Nt<"u"&&(typeof Nt!="string"?console.warn("`args.transport` must be a string."):(["beacon","xhr","image"].indexOf(Nt)===-1&&console.warn("`args.transport` must be either one of these values: `beacon`, `xhr` or `image`"),Ft.transport=Nt)),Pt._gaCommand("send",Ft)}}),St(this,"send",function(Dt){Pt._gaCommand("send",Dt)}),this.reset()}return vt(Ot,[{key:"gtag",value:function(){this._gtag.apply(this,arguments)}}]),Ot}();_.GA4=_t;var bt=new _t;_.default=bt})(ga4);(function(_){function _e(it){return _e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ot){return typeof ot}:function(ot){return ot&&typeof Symbol=="function"&&ot.constructor===Symbol&&ot!==Symbol.prototype?"symbol":typeof ot},_e(it)}Object.defineProperty(_,"__esModule",{value:!0}),_.default=_.ReactGAImplementation=void 0;var et=rt(ga4);function tt(it){if(typeof WeakMap!="function")return null;var ot=new WeakMap,st=new WeakMap;return(tt=function(gt){return gt?st:ot})(it)}function rt(it,ot){if(!ot&&it&&it.__esModule)return it;if(it===null||_e(it)!=="object"&&typeof it!="function")return{default:it};var st=tt(ot);if(st&&st.has(it))return st.get(it);var lt={},gt=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ct in it)if(ct!=="default"&&Object.prototype.hasOwnProperty.call(it,ct)){var wt=gt?Object.getOwnPropertyDescriptor(it,ct):null;wt&&(wt.get||wt.set)?Object.defineProperty(lt,ct,wt):lt[ct]=it[ct]}return lt.default=it,st&&st.set(it,lt),lt}var nt=et.GA4;_.ReactGAImplementation=nt;var at=et.default;_.default=at})(dist);const ReactGA=getDefaultExportFromCjs(dist);ReactGA.initialize([{trackingId:GA_ID}]);function _assertThisInitialized(_){if(_===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _}function _inherits(_,_e){if(typeof _e!="function"&&_e!==null)throw new TypeError("Super expression must either be null or a function");_.prototype=Object.create(_e&&_e.prototype,{constructor:{value:_,writable:!0,configurable:!0}}),Object.defineProperty(_,"prototype",{writable:!1}),_e&&_setPrototypeOf$1(_,_e)}function _possibleConstructorReturn(_,_e){if(_e&&(_typeof$2(_e)==="object"||typeof _e=="function"))return _e;if(_e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(_)}function _getPrototypeOf(_){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(et){return et.__proto__||Object.getPrototypeOf(et)},_getPrototypeOf(_)}function _iterableToArray(_){if(typeof Symbol<"u"&&_[Symbol.iterator]!=null||_["@@iterator"]!=null)return Array.from(_)}function _toArray(_){return _arrayWithHoles(_)||_iterableToArray(_)||_unsupportedIterableToArray(_)||_nonIterableRest()}function ownKeys$6(_,_e){var et=Object.keys(_);if(Object.getOwnPropertySymbols){var tt=Object.getOwnPropertySymbols(_);_e&&(tt=tt.filter(function(rt){return Object.getOwnPropertyDescriptor(_,rt).enumerable})),et.push.apply(et,tt)}return et}function _objectSpread$6(_){for(var _e=1;_e<arguments.length;_e++){var et=arguments[_e]!=null?arguments[_e]:{};_e%2?ownKeys$6(Object(et),!0).forEach(function(tt){_defineProperty$3(_,tt,et[tt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(et)):ownKeys$6(Object(et)).forEach(function(tt){Object.defineProperty(_,tt,Object.getOwnPropertyDescriptor(et,tt))})}return _}var consoleLogger={type:"logger",log:function(_e){this.output("log",_e)},warn:function(_e){this.output("warn",_e)},error:function(_e){this.output("error",_e)},output:function(_e,et){console&&console[_e]&&console[_e].apply(console,et)}},Logger=function(){function _(_e){var et=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};_classCallCheck$2(this,_),this.init(_e,et)}return _createClass$2(_,[{key:"init",value:function(et){var tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=tt.prefix||"i18next:",this.logger=et||consoleLogger,this.options=tt,this.debug=tt.debug}},{key:"setDebug",value:function(et){this.debug=et}},{key:"log",value:function(){for(var et=arguments.length,tt=new Array(et),rt=0;rt<et;rt++)tt[rt]=arguments[rt];return this.forward(tt,"log","",!0)}},{key:"warn",value:function(){for(var et=arguments.length,tt=new Array(et),rt=0;rt<et;rt++)tt[rt]=arguments[rt];return this.forward(tt,"warn","",!0)}},{key:"error",value:function(){for(var et=arguments.length,tt=new Array(et),rt=0;rt<et;rt++)tt[rt]=arguments[rt];return this.forward(tt,"error","")}},{key:"deprecate",value:function(){for(var et=arguments.length,tt=new Array(et),rt=0;rt<et;rt++)tt[rt]=arguments[rt];return this.forward(tt,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(et,tt,rt,nt){return nt&&!this.debug?null:(typeof et[0]=="string"&&(et[0]="".concat(rt).concat(this.prefix," ").concat(et[0])),this.logger[tt](et))}},{key:"create",value:function(et){return new _(this.logger,_objectSpread$6(_objectSpread$6({},{prefix:"".concat(this.prefix,":").concat(et,":")}),this.options))}},{key:"clone",value:function(et){return et=et||this.options,et.prefix=et.prefix||this.prefix,new _(this.logger,et)}}]),_}(),baseLogger=new Logger,EventEmitter=function(){function _(){_classCallCheck$2(this,_),this.observers={}}return _createClass$2(_,[{key:"on",value:function(et,tt){var rt=this;return et.split(" ").forEach(function(nt){rt.observers[nt]=rt.observers[nt]||[],rt.observers[nt].push(tt)}),this}},{key:"off",value:function(et,tt){if(!!this.observers[et]){if(!tt){delete this.observers[et];return}this.observers[et]=this.observers[et].filter(function(rt){return rt!==tt})}}},{key:"emit",value:function(et){for(var tt=arguments.length,rt=new Array(tt>1?tt-1:0),nt=1;nt<tt;nt++)rt[nt-1]=arguments[nt];if(this.observers[et]){var at=[].concat(this.observers[et]);at.forEach(function(ot){ot.apply(void 0,rt)})}if(this.observers["*"]){var it=[].concat(this.observers["*"]);it.forEach(function(ot){ot.apply(ot,[et].concat(rt))})}}}]),_}();function defer(){var _,_e,et=new Promise(function(tt,rt){_=tt,_e=rt});return et.resolve=_,et.reject=_e,et}function makeString(_){return _==null?"":""+_}function copy(_,_e,et){_.forEach(function(tt){_e[tt]&&(et[tt]=_e[tt])})}function getLastOfPath(_,_e,et){function tt(it){return it&&it.indexOf("###")>-1?it.replace(/###/g,"."):it}function rt(){return!_||typeof _=="string"}for(var nt=typeof _e!="string"?[].concat(_e):_e.split(".");nt.length>1;){if(rt())return{};var at=tt(nt.shift());!_[at]&&et&&(_[at]=new et),Object.prototype.hasOwnProperty.call(_,at)?_=_[at]:_={}}return rt()?{}:{obj:_,k:tt(nt.shift())}}function setPath(_,_e,et){var tt=getLastOfPath(_,_e,Object),rt=tt.obj,nt=tt.k;rt[nt]=et}function pushPath(_,_e,et,tt){var rt=getLastOfPath(_,_e,Object),nt=rt.obj,at=rt.k;nt[at]=nt[at]||[],tt&&(nt[at]=nt[at].concat(et)),tt||nt[at].push(et)}function getPath(_,_e){var et=getLastOfPath(_,_e),tt=et.obj,rt=et.k;if(!!tt)return tt[rt]}function getPathWithDefaults(_,_e,et){var tt=getPath(_,et);return tt!==void 0?tt:getPath(_e,et)}function deepExtend(_,_e,et){for(var tt in _e)tt!=="__proto__"&&tt!=="constructor"&&(tt in _?typeof _[tt]=="string"||_[tt]instanceof String||typeof _e[tt]=="string"||_e[tt]instanceof String?et&&(_[tt]=_e[tt]):deepExtend(_[tt],_e[tt],et):_[tt]=_e[tt]);return _}function regexEscape(_){return _.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var _entityMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function escape$1(_){return typeof _=="string"?_.replace(/[&<>"'\/]/g,function(_e){return _entityMap[_e]}):_}var isIE10=typeof window<"u"&&window.navigator&&typeof window.navigator.userAgentData>"u"&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1,chars=[" ",",","?","!",";"];function looksLikeObjectPath(_,_e,et){_e=_e||"",et=et||"";var tt=chars.filter(function(it){return _e.indexOf(it)<0&&et.indexOf(it)<0});if(tt.length===0)return!0;var rt=new RegExp("(".concat(tt.map(function(it){return it==="?"?"\\?":it}).join("|"),")")),nt=!rt.test(_);if(!nt){var at=_.indexOf(et);at>0&&!rt.test(_.substring(0,at))&&(nt=!0)}return nt}function ownKeys$5(_,_e){var et=Object.keys(_);if(Object.getOwnPropertySymbols){var tt=Object.getOwnPropertySymbols(_);_e&&(tt=tt.filter(function(rt){return Object.getOwnPropertyDescriptor(_,rt).enumerable})),et.push.apply(et,tt)}return et}function _objectSpread$5(_){for(var _e=1;_e<arguments.length;_e++){var et=arguments[_e]!=null?arguments[_e]:{};_e%2?ownKeys$5(Object(et),!0).forEach(function(tt){_defineProperty$3(_,tt,et[tt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(et)):ownKeys$5(Object(et)).forEach(function(tt){Object.defineProperty(_,tt,Object.getOwnPropertyDescriptor(et,tt))})}return _}function _createSuper$3(_){var _e=_isNativeReflectConstruct$3();return function(){var tt=_getPrototypeOf(_),rt;if(_e){var nt=_getPrototypeOf(this).constructor;rt=Reflect.construct(tt,arguments,nt)}else rt=tt.apply(this,arguments);return _possibleConstructorReturn(this,rt)}}function _isNativeReflectConstruct$3(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function deepFind(_,_e){var et=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!!_){if(_[_e])return _[_e];for(var tt=_e.split(et),rt=_,nt=0;nt<tt.length;++nt){if(!rt||typeof rt[tt[nt]]=="string"&&nt+1<tt.length)return;if(rt[tt[nt]]===void 0){for(var at=2,it=tt.slice(nt,nt+at).join(et),ot=rt[it];ot===void 0&&tt.length>nt+at;)at++,it=tt.slice(nt,nt+at).join(et),ot=rt[it];if(ot===void 0)return;if(ot===null)return null;if(_e.endsWith(it)){if(typeof ot=="string")return ot;if(it&&typeof ot[it]=="string")return ot[it]}var st=tt.slice(nt+at).join(et);return st?deepFind(ot,st,et):void 0}rt=rt[tt[nt]]}return rt}}var ResourceStore=function(_){_inherits(et,_);var _e=_createSuper$3(et);function et(tt){var rt,nt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};return _classCallCheck$2(this,et),rt=_e.call(this),isIE10&&EventEmitter.call(_assertThisInitialized(rt)),rt.data=tt||{},rt.options=nt,rt.options.keySeparator===void 0&&(rt.options.keySeparator="."),rt.options.ignoreJSONStructure===void 0&&(rt.options.ignoreJSONStructure=!0),rt}return _createClass$2(et,[{key:"addNamespaces",value:function(rt){this.options.ns.indexOf(rt)<0&&this.options.ns.push(rt)}},{key:"removeNamespaces",value:function(rt){var nt=this.options.ns.indexOf(rt);nt>-1&&this.options.ns.splice(nt,1)}},{key:"getResource",value:function(rt,nt,at){var it=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},ot=it.keySeparator!==void 0?it.keySeparator:this.options.keySeparator,st=it.ignoreJSONStructure!==void 0?it.ignoreJSONStructure:this.options.ignoreJSONStructure,lt=[rt,nt];at&&typeof at!="string"&&(lt=lt.concat(at)),at&&typeof at=="string"&&(lt=lt.concat(ot?at.split(ot):at)),rt.indexOf(".")>-1&&(lt=rt.split("."));var gt=getPath(this.data,lt);return gt||!st||typeof at!="string"?gt:deepFind(this.data&&this.data[rt]&&this.data[rt][nt],at,ot)}},{key:"addResource",value:function(rt,nt,at,it){var ot=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1},st=this.options.keySeparator;st===void 0&&(st=".");var lt=[rt,nt];at&&(lt=lt.concat(st?at.split(st):at)),rt.indexOf(".")>-1&&(lt=rt.split("."),it=nt,nt=lt[1]),this.addNamespaces(nt),setPath(this.data,lt,it),ot.silent||this.emit("added",rt,nt,at,it)}},{key:"addResources",value:function(rt,nt,at){var it=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(var ot in at)(typeof at[ot]=="string"||Object.prototype.toString.apply(at[ot])==="[object Array]")&&this.addResource(rt,nt,ot,at[ot],{silent:!0});it.silent||this.emit("added",rt,nt,at)}},{key:"addResourceBundle",value:function(rt,nt,at,it,ot){var st=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1},lt=[rt,nt];rt.indexOf(".")>-1&&(lt=rt.split("."),it=at,at=nt,nt=lt[1]),this.addNamespaces(nt);var gt=getPath(this.data,lt)||{};it?deepExtend(gt,at,ot):gt=_objectSpread$5(_objectSpread$5({},gt),at),setPath(this.data,lt,gt),st.silent||this.emit("added",rt,nt,at)}},{key:"removeResourceBundle",value:function(rt,nt){this.hasResourceBundle(rt,nt)&&delete this.data[rt][nt],this.removeNamespaces(nt),this.emit("removed",rt,nt)}},{key:"hasResourceBundle",value:function(rt,nt){return this.getResource(rt,nt)!==void 0}},{key:"getResourceBundle",value:function(rt,nt){return nt||(nt=this.options.defaultNS),this.options.compatibilityAPI==="v1"?_objectSpread$5(_objectSpread$5({},{}),this.getResource(rt,nt)):this.getResource(rt,nt)}},{key:"getDataByLanguage",value:function(rt){return this.data[rt]}},{key:"hasLanguageSomeTranslations",value:function(rt){var nt=this.getDataByLanguage(rt),at=nt&&Object.keys(nt)||[];return!!at.find(function(it){return nt[it]&&Object.keys(nt[it]).length>0})}},{key:"toJSON",value:function(){return this.data}}]),et}(EventEmitter),postProcessor={processors:{},addPostProcessor:function(_e){this.processors[_e.name]=_e},handle:function(_e,et,tt,rt,nt){var at=this;return _e.forEach(function(it){at.processors[it]&&(et=at.processors[it].process(et,tt,rt,nt))}),et}};function ownKeys$4(_,_e){var et=Object.keys(_);if(Object.getOwnPropertySymbols){var tt=Object.getOwnPropertySymbols(_);_e&&(tt=tt.filter(function(rt){return Object.getOwnPropertyDescriptor(_,rt).enumerable})),et.push.apply(et,tt)}return et}function _objectSpread$4(_){for(var _e=1;_e<arguments.length;_e++){var et=arguments[_e]!=null?arguments[_e]:{};_e%2?ownKeys$4(Object(et),!0).forEach(function(tt){_defineProperty$3(_,tt,et[tt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(et)):ownKeys$4(Object(et)).forEach(function(tt){Object.defineProperty(_,tt,Object.getOwnPropertyDescriptor(et,tt))})}return _}function _createSuper$2(_){var _e=_isNativeReflectConstruct$2();return function(){var tt=_getPrototypeOf(_),rt;if(_e){var nt=_getPrototypeOf(this).constructor;rt=Reflect.construct(tt,arguments,nt)}else rt=tt.apply(this,arguments);return _possibleConstructorReturn(this,rt)}}function _isNativeReflectConstruct$2(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var checkedLoadedFor={},Translator=function(_){_inherits(et,_);var _e=_createSuper$2(et);function et(tt){var rt,nt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return _classCallCheck$2(this,et),rt=_e.call(this),isIE10&&EventEmitter.call(_assertThisInitialized(rt)),copy(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],tt,_assertThisInitialized(rt)),rt.options=nt,rt.options.keySeparator===void 0&&(rt.options.keySeparator="."),rt.logger=baseLogger.create("translator"),rt}return _createClass$2(et,[{key:"changeLanguage",value:function(rt){rt&&(this.language=rt)}},{key:"exists",value:function(rt){var nt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(rt==null)return!1;var at=this.resolve(rt,nt);return at&&at.res!==void 0}},{key:"extractFromKey",value:function(rt,nt){var at=nt.nsSeparator!==void 0?nt.nsSeparator:this.options.nsSeparator;at===void 0&&(at=":");var it=nt.keySeparator!==void 0?nt.keySeparator:this.options.keySeparator,ot=nt.ns||this.options.defaultNS||[],st=at&&rt.indexOf(at)>-1,lt=!this.options.userDefinedKeySeparator&&!nt.keySeparator&&!this.options.userDefinedNsSeparator&&!nt.nsSeparator&&!looksLikeObjectPath(rt,at,it);if(st&&!lt){var gt=rt.match(this.interpolator.nestingRegexp);if(gt&&gt.length>0)return{key:rt,namespaces:ot};var ct=rt.split(at);(at!==it||at===it&&this.options.ns.indexOf(ct[0])>-1)&&(ot=ct.shift()),rt=ct.join(it)}return typeof ot=="string"&&(ot=[ot]),{key:rt,namespaces:ot}}},{key:"translate",value:function(rt,nt,at){var it=this;if(_typeof$2(nt)!=="object"&&this.options.overloadTranslationOptionHandler&&(nt=this.options.overloadTranslationOptionHandler(arguments)),nt||(nt={}),rt==null)return"";Array.isArray(rt)||(rt=[String(rt)]);var ot=nt.returnDetails!==void 0?nt.returnDetails:this.options.returnDetails,st=nt.keySeparator!==void 0?nt.keySeparator:this.options.keySeparator,lt=this.extractFromKey(rt[rt.length-1],nt),gt=lt.key,ct=lt.namespaces,wt=ct[ct.length-1],Tt=nt.lng||this.language,Rt=nt.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(Tt&&Tt.toLowerCase()==="cimode"){if(Rt){var ht=nt.nsSeparator||this.options.nsSeparator;return ot?(ut.res="".concat(wt).concat(ht).concat(gt),ut):"".concat(wt).concat(ht).concat(gt)}return ot?(ut.res=gt,ut):gt}var ut=this.resolve(rt,nt),ft=ut&&ut.res,yt=ut&&ut.usedKey||gt,xt=ut&&ut.exactUsedKey||gt,Ct=Object.prototype.toString.apply(ft),pt=["[object Number]","[object Function]","[object RegExp]"],dt=nt.joinArrays!==void 0?nt.joinArrays:this.options.joinArrays,vt=!this.i18nFormat||this.i18nFormat.handleAsObject,St=typeof ft!="string"&&typeof ft!="boolean"&&typeof ft!="number";if(vt&&ft&&St&&pt.indexOf(Ct)<0&&!(typeof dt=="string"&&Ct==="[object Array]")){if(!nt.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");var Et=this.options.returnedObjectHandler?this.options.returnedObjectHandler(yt,ft,_objectSpread$4(_objectSpread$4({},nt),{},{ns:ct})):"key '".concat(gt," (").concat(this.language,")' returned an object instead of string.");return ot?(ut.res=Et,ut):Et}if(st){var mt=Ct==="[object Array]",_t=mt?[]:{},bt=mt?xt:yt;for(var Ot in ft)if(Object.prototype.hasOwnProperty.call(ft,Ot)){var Pt="".concat(bt).concat(st).concat(Ot);_t[Ot]=this.translate(Pt,_objectSpread$4(_objectSpread$4({},nt),{joinArrays:!1,ns:ct})),_t[Ot]===Pt&&(_t[Ot]=ft[Ot])}ft=_t}}else if(vt&&typeof dt=="string"&&Ct==="[object Array]")ft=ft.join(dt),ft&&(ft=this.extendTranslation(ft,rt,nt,at));else{var Dt=!1,It=!1,kt=nt.count!==void 0&&typeof nt.count!="string",Lt=et.hasDefaultValue(nt),At=kt?this.pluralResolver.getSuffix(Tt,nt.count,nt):"",$t=nt["defaultValue".concat(At)]||nt.defaultValue;!this.isValidLookup(ft)&&Lt&&(Dt=!0,ft=$t),this.isValidLookup(ft)||(It=!0,ft=gt);var jt=nt.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey,Nt=jt&&It?void 0:ft,Ft=Lt&&$t!==ft&&this.options.updateMissing;if(It||Dt||Ft){if(this.logger.log(Ft?"updateKey":"missingKey",Tt,wt,gt,Ft?$t:ft),st){var Bt=this.resolve(gt,_objectSpread$4(_objectSpread$4({},nt),{},{keySeparator:!1}));Bt&&Bt.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}var Ut=[],Ht=this.languageUtils.getFallbackCodes(this.options.fallbackLng,nt.lng||this.language);if(this.options.saveMissingTo==="fallback"&&Ht&&Ht[0])for(var Kt=0;Kt<Ht.length;Kt++)Ut.push(Ht[Kt]);else this.options.saveMissingTo==="all"?Ut=this.languageUtils.toResolveHierarchy(nt.lng||this.language):Ut.push(nt.lng||this.language);var Gt=function(Vt,zt,Yt){var Xt=Lt&&Yt!==ft?Yt:Nt;it.options.missingKeyHandler?it.options.missingKeyHandler(Vt,wt,zt,Xt,Ft,nt):it.backendConnector&&it.backendConnector.saveMissing&&it.backendConnector.saveMissing(Vt,wt,zt,Xt,Ft,nt),it.emit("missingKey",Vt,wt,zt,ft)};this.options.saveMissing&&(this.options.saveMissingPlurals&&kt?Ut.forEach(function(Wt){it.pluralResolver.getSuffixes(Wt,nt).forEach(function(Vt){Gt([Wt],gt+Vt,nt["defaultValue".concat(Vt)]||$t)})}):Gt(Ut,gt,$t))}ft=this.extendTranslation(ft,rt,nt,ut,at),It&&ft===gt&&this.options.appendNamespaceToMissingKey&&(ft="".concat(wt,":").concat(gt)),(It||Dt)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?ft=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?"".concat(wt,":").concat(gt):gt,Dt?ft:void 0):ft=this.options.parseMissingKeyHandler(ft))}return ot?(ut.res=ft,ut):ft}},{key:"extendTranslation",value:function(rt,nt,at,it,ot){var st=this;if(this.i18nFormat&&this.i18nFormat.parse)rt=this.i18nFormat.parse(rt,_objectSpread$4(_objectSpread$4({},this.options.interpolation.defaultVariables),at),it.usedLng,it.usedNS,it.usedKey,{resolved:it});else if(!at.skipInterpolation){at.interpolation&&this.interpolator.init(_objectSpread$4(_objectSpread$4({},at),{interpolation:_objectSpread$4(_objectSpread$4({},this.options.interpolation),at.interpolation)}));var lt=typeof rt=="string"&&(at&&at.interpolation&&at.interpolation.skipOnVariables!==void 0?at.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables),gt;if(lt){var ct=rt.match(this.interpolator.nestingRegexp);gt=ct&&ct.length}var wt=at.replace&&typeof at.replace!="string"?at.replace:at;if(this.options.interpolation.defaultVariables&&(wt=_objectSpread$4(_objectSpread$4({},this.options.interpolation.defaultVariables),wt)),rt=this.interpolator.interpolate(rt,wt,at.lng||this.language,at),lt){var Tt=rt.match(this.interpolator.nestingRegexp),Rt=Tt&&Tt.length;gt<Rt&&(at.nest=!1)}at.nest!==!1&&(rt=this.interpolator.nest(rt,function(){for(var ft=arguments.length,yt=new Array(ft),xt=0;xt<ft;xt++)yt[xt]=arguments[xt];return ot&&ot[0]===yt[0]&&!at.context?(st.logger.warn("It seems you are nesting recursively key: ".concat(yt[0]," in key: ").concat(nt[0])),null):st.translate.apply(st,yt.concat([nt]))},at)),at.interpolation&&this.interpolator.reset()}var ht=at.postProcess||this.options.postProcess,ut=typeof ht=="string"?[ht]:ht;return rt!=null&&ut&&ut.length&&at.applyPostProcessor!==!1&&(rt=postProcessor.handle(ut,rt,nt,this.options&&this.options.postProcessPassResolved?_objectSpread$4({i18nResolved:it},at):at,this)),rt}},{key:"resolve",value:function(rt){var nt=this,at=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},it,ot,st,lt,gt;return typeof rt=="string"&&(rt=[rt]),rt.forEach(function(ct){if(!nt.isValidLookup(it)){var wt=nt.extractFromKey(ct,at),Tt=wt.key;ot=Tt;var Rt=wt.namespaces;nt.options.fallbackNS&&(Rt=Rt.concat(nt.options.fallbackNS));var ht=at.count!==void 0&&typeof at.count!="string",ut=ht&&!at.ordinal&&at.count===0&&nt.pluralResolver.shouldUseIntlApi(),ft=at.context!==void 0&&(typeof at.context=="string"||typeof at.context=="number")&&at.context!=="",yt=at.lngs?at.lngs:nt.languageUtils.toResolveHierarchy(at.lng||nt.language,at.fallbackLng);Rt.forEach(function(xt){nt.isValidLookup(it)||(gt=xt,!checkedLoadedFor["".concat(yt[0],"-").concat(xt)]&&nt.utils&&nt.utils.hasLoadedNamespace&&!nt.utils.hasLoadedNamespace(gt)&&(checkedLoadedFor["".concat(yt[0],"-").concat(xt)]=!0,nt.logger.warn('key "'.concat(ot,'" for languages "').concat(yt.join(", "),`" won't get resolved as namespace "`).concat(gt,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),yt.forEach(function(Ct){if(!nt.isValidLookup(it)){lt=Ct;var pt=[Tt];if(nt.i18nFormat&&nt.i18nFormat.addLookupKeys)nt.i18nFormat.addLookupKeys(pt,Tt,Ct,xt,at);else{var dt;ht&&(dt=nt.pluralResolver.getSuffix(Ct,at.count,at));var vt="".concat(nt.options.pluralSeparator,"zero");if(ht&&(pt.push(Tt+dt),ut&&pt.push(Tt+vt)),ft){var St="".concat(Tt).concat(nt.options.contextSeparator).concat(at.context);pt.push(St),ht&&(pt.push(St+dt),ut&&pt.push(St+vt))}}for(var Et;Et=pt.pop();)nt.isValidLookup(it)||(st=Et,it=nt.getResource(Ct,xt,Et,at))}}))})}}),{res:it,usedKey:ot,exactUsedKey:st,usedLng:lt,usedNS:gt}}},{key:"isValidLookup",value:function(rt){return rt!==void 0&&!(!this.options.returnNull&&rt===null)&&!(!this.options.returnEmptyString&&rt==="")}},{key:"getResource",value:function(rt,nt,at){var it=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(rt,nt,at,it):this.resourceStore.getResource(rt,nt,at,it)}}],[{key:"hasDefaultValue",value:function(rt){var nt="defaultValue";for(var at in rt)if(Object.prototype.hasOwnProperty.call(rt,at)&&nt===at.substring(0,nt.length)&&rt[at]!==void 0)return!0;return!1}}]),et}(EventEmitter);function capitalize(_){return _.charAt(0).toUpperCase()+_.slice(1)}var LanguageUtil=function(){function _(_e){_classCallCheck$2(this,_),this.options=_e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=baseLogger.create("languageUtils")}return _createClass$2(_,[{key:"getScriptPartFromCode",value:function(et){if(!et||et.indexOf("-")<0)return null;var tt=et.split("-");return tt.length===2||(tt.pop(),tt[tt.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(tt.join("-"))}},{key:"getLanguagePartFromCode",value:function(et){if(!et||et.indexOf("-")<0)return et;var tt=et.split("-");return this.formatLanguageCode(tt[0])}},{key:"formatLanguageCode",value:function(et){if(typeof et=="string"&&et.indexOf("-")>-1){var tt=["hans","hant","latn","cyrl","cans","mong","arab"],rt=et.split("-");return this.options.lowerCaseLng?rt=rt.map(function(nt){return nt.toLowerCase()}):rt.length===2?(rt[0]=rt[0].toLowerCase(),rt[1]=rt[1].toUpperCase(),tt.indexOf(rt[1].toLowerCase())>-1&&(rt[1]=capitalize(rt[1].toLowerCase()))):rt.length===3&&(rt[0]=rt[0].toLowerCase(),rt[1].length===2&&(rt[1]=rt[1].toUpperCase()),rt[0]!=="sgn"&&rt[2].length===2&&(rt[2]=rt[2].toUpperCase()),tt.indexOf(rt[1].toLowerCase())>-1&&(rt[1]=capitalize(rt[1].toLowerCase())),tt.indexOf(rt[2].toLowerCase())>-1&&(rt[2]=capitalize(rt[2].toLowerCase()))),rt.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?et.toLowerCase():et}},{key:"isSupportedCode",value:function(et){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(et=this.getLanguagePartFromCode(et)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(et)>-1}},{key:"getBestMatchFromCodes",value:function(et){var tt=this;if(!et)return null;var rt;return et.forEach(function(nt){if(!rt){var at=tt.formatLanguageCode(nt);(!tt.options.supportedLngs||tt.isSupportedCode(at))&&(rt=at)}}),!rt&&this.options.supportedLngs&&et.forEach(function(nt){if(!rt){var at=tt.getLanguagePartFromCode(nt);if(tt.isSupportedCode(at))return rt=at;rt=tt.options.supportedLngs.find(function(it){if(it.indexOf(at)===0)return it})}}),rt||(rt=this.getFallbackCodes(this.options.fallbackLng)[0]),rt}},{key:"getFallbackCodes",value:function(et,tt){if(!et)return[];if(typeof et=="function"&&(et=et(tt)),typeof et=="string"&&(et=[et]),Object.prototype.toString.apply(et)==="[object Array]")return et;if(!tt)return et.default||[];var rt=et[tt];return rt||(rt=et[this.getScriptPartFromCode(tt)]),rt||(rt=et[this.formatLanguageCode(tt)]),rt||(rt=et[this.getLanguagePartFromCode(tt)]),rt||(rt=et.default),rt||[]}},{key:"toResolveHierarchy",value:function(et,tt){var rt=this,nt=this.getFallbackCodes(tt||this.options.fallbackLng||[],et),at=[],it=function(st){!st||(rt.isSupportedCode(st)?at.push(st):rt.logger.warn("rejecting language code not found in supportedLngs: ".concat(st)))};return typeof et=="string"&&et.indexOf("-")>-1?(this.options.load!=="languageOnly"&&it(this.formatLanguageCode(et)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&it(this.getScriptPartFromCode(et)),this.options.load!=="currentOnly"&&it(this.getLanguagePartFromCode(et))):typeof et=="string"&&it(this.formatLanguageCode(et)),nt.forEach(function(ot){at.indexOf(ot)<0&&it(rt.formatLanguageCode(ot))}),at}}]),_}(),sets=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],_rulesPluralsTypes={1:function(_e){return Number(_e>1)},2:function(_e){return Number(_e!=1)},3:function(_e){return 0},4:function(_e){return Number(_e%10==1&&_e%100!=11?0:_e%10>=2&&_e%10<=4&&(_e%100<10||_e%100>=20)?1:2)},5:function(_e){return Number(_e==0?0:_e==1?1:_e==2?2:_e%100>=3&&_e%100<=10?3:_e%100>=11?4:5)},6:function(_e){return Number(_e==1?0:_e>=2&&_e<=4?1:2)},7:function(_e){return Number(_e==1?0:_e%10>=2&&_e%10<=4&&(_e%100<10||_e%100>=20)?1:2)},8:function(_e){return Number(_e==1?0:_e==2?1:_e!=8&&_e!=11?2:3)},9:function(_e){return Number(_e>=2)},10:function(_e){return Number(_e==1?0:_e==2?1:_e<7?2:_e<11?3:4)},11:function(_e){return Number(_e==1||_e==11?0:_e==2||_e==12?1:_e>2&&_e<20?2:3)},12:function(_e){return Number(_e%10!=1||_e%100==11)},13:function(_e){return Number(_e!==0)},14:function(_e){return Number(_e==1?0:_e==2?1:_e==3?2:3)},15:function(_e){return Number(_e%10==1&&_e%100!=11?0:_e%10>=2&&(_e%100<10||_e%100>=20)?1:2)},16:function(_e){return Number(_e%10==1&&_e%100!=11?0:_e!==0?1:2)},17:function(_e){return Number(_e==1||_e%10==1&&_e%100!=11?0:1)},18:function(_e){return Number(_e==0?0:_e==1?1:2)},19:function(_e){return Number(_e==1?0:_e==0||_e%100>1&&_e%100<11?1:_e%100>10&&_e%100<20?2:3)},20:function(_e){return Number(_e==1?0:_e==0||_e%100>0&&_e%100<20?1:2)},21:function(_e){return Number(_e%100==1?1:_e%100==2?2:_e%100==3||_e%100==4?3:0)},22:function(_e){return Number(_e==1?0:_e==2?1:(_e<0||_e>10)&&_e%10==0?2:3)}},deprecatedJsonVersions=["v1","v2","v3"],suffixesOrder={zero:0,one:1,two:2,few:3,many:4,other:5};function createRules(){var _={};return sets.forEach(function(_e){_e.lngs.forEach(function(et){_[et]={numbers:_e.nr,plurals:_rulesPluralsTypes[_e.fc]}})}),_}var PluralResolver=function(){function _(_e){var et=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};_classCallCheck$2(this,_),this.languageUtils=_e,this.options=et,this.logger=baseLogger.create("pluralResolver"),(!this.options.compatibilityJSON||this.options.compatibilityJSON==="v4")&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=createRules()}return _createClass$2(_,[{key:"addRule",value:function(et,tt){this.rules[et]=tt}},{key:"getRule",value:function(et){var tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(et,{type:tt.ordinal?"ordinal":"cardinal"})}catch{return}return this.rules[et]||this.rules[this.languageUtils.getLanguagePartFromCode(et)]}},{key:"needsPlural",value:function(et){var tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},rt=this.getRule(et,tt);return this.shouldUseIntlApi()?rt&&rt.resolvedOptions().pluralCategories.length>1:rt&&rt.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(et,tt){var rt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(et,rt).map(function(nt){return"".concat(tt).concat(nt)})}},{key:"getSuffixes",value:function(et){var tt=this,rt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},nt=this.getRule(et,rt);return nt?this.shouldUseIntlApi()?nt.resolvedOptions().pluralCategories.sort(function(at,it){return suffixesOrder[at]-suffixesOrder[it]}).map(function(at){return"".concat(tt.options.prepend).concat(at)}):nt.numbers.map(function(at){return tt.getSuffix(et,at,rt)}):[]}},{key:"getSuffix",value:function(et,tt){var rt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},nt=this.getRule(et,rt);return nt?this.shouldUseIntlApi()?"".concat(this.options.prepend).concat(nt.select(tt)):this.getSuffixRetroCompatible(nt,tt):(this.logger.warn("no plural rule found for: ".concat(et)),"")}},{key:"getSuffixRetroCompatible",value:function(et,tt){var rt=this,nt=et.noAbs?et.plurals(tt):et.plurals(Math.abs(tt)),at=et.numbers[nt];this.options.simplifyPluralSuffix&&et.numbers.length===2&&et.numbers[0]===1&&(at===2?at="plural":at===1&&(at=""));var it=function(){return rt.options.prepend&&at.toString()?rt.options.prepend+at.toString():at.toString()};return this.options.compatibilityJSON==="v1"?at===1?"":typeof at=="number"?"_plural_".concat(at.toString()):it():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&et.numbers.length===2&&et.numbers[0]===1?it():this.options.prepend&&nt.toString()?this.options.prepend+nt.toString():nt.toString()}},{key:"shouldUseIntlApi",value:function(){return!deprecatedJsonVersions.includes(this.options.compatibilityJSON)}}]),_}();function ownKeys$3(_,_e){var et=Object.keys(_);if(Object.getOwnPropertySymbols){var tt=Object.getOwnPropertySymbols(_);_e&&(tt=tt.filter(function(rt){return Object.getOwnPropertyDescriptor(_,rt).enumerable})),et.push.apply(et,tt)}return et}function _objectSpread$3(_){for(var _e=1;_e<arguments.length;_e++){var et=arguments[_e]!=null?arguments[_e]:{};_e%2?ownKeys$3(Object(et),!0).forEach(function(tt){_defineProperty$3(_,tt,et[tt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(et)):ownKeys$3(Object(et)).forEach(function(tt){Object.defineProperty(_,tt,Object.getOwnPropertyDescriptor(et,tt))})}return _}var Interpolator=function(){function _(){var _e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};_classCallCheck$2(this,_),this.logger=baseLogger.create("interpolator"),this.options=_e,this.format=_e.interpolation&&_e.interpolation.format||function(et){return et},this.init(_e)}return _createClass$2(_,[{key:"init",value:function(){var et=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};et.interpolation||(et.interpolation={escapeValue:!0});var tt=et.interpolation;this.escape=tt.escape!==void 0?tt.escape:escape$1,this.escapeValue=tt.escapeValue!==void 0?tt.escapeValue:!0,this.useRawValueToEscape=tt.useRawValueToEscape!==void 0?tt.useRawValueToEscape:!1,this.prefix=tt.prefix?regexEscape(tt.prefix):tt.prefixEscaped||"{{",this.suffix=tt.suffix?regexEscape(tt.suffix):tt.suffixEscaped||"}}",this.formatSeparator=tt.formatSeparator?tt.formatSeparator:tt.formatSeparator||",",this.unescapePrefix=tt.unescapeSuffix?"":tt.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":tt.unescapeSuffix||"",this.nestingPrefix=tt.nestingPrefix?regexEscape(tt.nestingPrefix):tt.nestingPrefixEscaped||regexEscape("$t("),this.nestingSuffix=tt.nestingSuffix?regexEscape(tt.nestingSuffix):tt.nestingSuffixEscaped||regexEscape(")"),this.nestingOptionsSeparator=tt.nestingOptionsSeparator?tt.nestingOptionsSeparator:tt.nestingOptionsSeparator||",",this.maxReplaces=tt.maxReplaces?tt.maxReplaces:1e3,this.alwaysFormat=tt.alwaysFormat!==void 0?tt.alwaysFormat:!1,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var et="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(et,"g");var tt="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(tt,"g");var rt="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(rt,"g")}},{key:"interpolate",value:function(et,tt,rt,nt){var at=this,it,ot,st,lt=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function gt(ht){return ht.replace(/\$/g,"$$$$")}var ct=function(ut){if(ut.indexOf(at.formatSeparator)<0){var ft=getPathWithDefaults(tt,lt,ut);return at.alwaysFormat?at.format(ft,void 0,rt,_objectSpread$3(_objectSpread$3(_objectSpread$3({},nt),tt),{},{interpolationkey:ut})):ft}var yt=ut.split(at.formatSeparator),xt=yt.shift().trim(),Ct=yt.join(at.formatSeparator).trim();return at.format(getPathWithDefaults(tt,lt,xt),Ct,rt,_objectSpread$3(_objectSpread$3(_objectSpread$3({},nt),tt),{},{interpolationkey:xt}))};this.resetRegExp();var wt=nt&&nt.missingInterpolationHandler||this.options.missingInterpolationHandler,Tt=nt&&nt.interpolation&&nt.interpolation.skipOnVariables!==void 0?nt.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables,Rt=[{regex:this.regexpUnescape,safeValue:function(ut){return gt(ut)}},{regex:this.regexp,safeValue:function(ut){return at.escapeValue?gt(at.escape(ut)):gt(ut)}}];return Rt.forEach(function(ht){for(st=0;it=ht.regex.exec(et);){var ut=it[1].trim();if(ot=ct(ut),ot===void 0)if(typeof wt=="function"){var ft=wt(et,it,nt);ot=typeof ft=="string"?ft:""}else if(nt&&nt.hasOwnProperty(ut))ot="";else if(Tt){ot=it[0];continue}else at.logger.warn("missed to pass in variable ".concat(ut," for interpolating ").concat(et)),ot="";else typeof ot!="string"&&!at.useRawValueToEscape&&(ot=makeString(ot));var yt=ht.safeValue(ot);if(et=et.replace(it[0],yt),Tt?(ht.regex.lastIndex+=ot.length,ht.regex.lastIndex-=it[0].length):ht.regex.lastIndex=0,st++,st>=at.maxReplaces)break}}),et}},{key:"nest",value:function(et,tt){var rt=this,nt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},at,it,ot;function st(wt,Tt){var Rt=this.nestingOptionsSeparator;if(wt.indexOf(Rt)<0)return wt;var ht=wt.split(new RegExp("".concat(Rt,"[ ]*{"))),ut="{".concat(ht[1]);wt=ht[0],ut=this.interpolate(ut,ot);var ft=ut.match(/'/g),yt=ut.match(/"/g);(ft&&ft.length%2===0&&!yt||yt.length%2!==0)&&(ut=ut.replace(/'/g,'"'));try{ot=JSON.parse(ut),Tt&&(ot=_objectSpread$3(_objectSpread$3({},Tt),ot))}catch(xt){return this.logger.warn("failed parsing options string in nesting for key ".concat(wt),xt),"".concat(wt).concat(Rt).concat(ut)}return delete ot.defaultValue,wt}for(;at=this.nestingRegexp.exec(et);){var lt=[];ot=_objectSpread$3({},nt),ot.applyPostProcessor=!1,delete ot.defaultValue;var gt=!1;if(at[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(at[1])){var ct=at[1].split(this.formatSeparator).map(function(wt){return wt.trim()});at[1]=ct.shift(),lt=ct,gt=!0}if(it=tt(st.call(this,at[1].trim(),ot),ot),it&&at[0]===et&&typeof it!="string")return it;typeof it!="string"&&(it=makeString(it)),it||(this.logger.warn("missed to resolve ".concat(at[1]," for nesting ").concat(et)),it=""),gt&&(it=lt.reduce(function(wt,Tt){return rt.format(wt,Tt,nt.lng,_objectSpread$3(_objectSpread$3({},nt),{},{interpolationkey:at[1].trim()}))},it.trim())),et=et.replace(at[0],it),this.regexp.lastIndex=0}return et}}]),_}();function ownKeys$2(_,_e){var et=Object.keys(_);if(Object.getOwnPropertySymbols){var tt=Object.getOwnPropertySymbols(_);_e&&(tt=tt.filter(function(rt){return Object.getOwnPropertyDescriptor(_,rt).enumerable})),et.push.apply(et,tt)}return et}function _objectSpread$2(_){for(var _e=1;_e<arguments.length;_e++){var et=arguments[_e]!=null?arguments[_e]:{};_e%2?ownKeys$2(Object(et),!0).forEach(function(tt){_defineProperty$3(_,tt,et[tt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(et)):ownKeys$2(Object(et)).forEach(function(tt){Object.defineProperty(_,tt,Object.getOwnPropertyDescriptor(et,tt))})}return _}function parseFormatStr(_){var _e=_.toLowerCase().trim(),et={};if(_.indexOf("(")>-1){var tt=_.split("(");_e=tt[0].toLowerCase().trim();var rt=tt[1].substring(0,tt[1].length-1);if(_e==="currency"&&rt.indexOf(":")<0)et.currency||(et.currency=rt.trim());else if(_e==="relativetime"&&rt.indexOf(":")<0)et.range||(et.range=rt.trim());else{var nt=rt.split(";");nt.forEach(function(at){if(!!at){var it=at.split(":"),ot=_toArray(it),st=ot[0],lt=ot.slice(1),gt=lt.join(":").trim().replace(/^'+|'+$/g,"");et[st.trim()]||(et[st.trim()]=gt),gt==="false"&&(et[st.trim()]=!1),gt==="true"&&(et[st.trim()]=!0),isNaN(gt)||(et[st.trim()]=parseInt(gt,10))}})}}return{formatName:_e,formatOptions:et}}function createCachedFormatter(_){var _e={};return function(tt,rt,nt){var at=rt+JSON.stringify(nt),it=_e[at];return it||(it=_(rt,nt),_e[at]=it),it(tt)}}var Formatter=function(){function _(){var _e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};_classCallCheck$2(this,_),this.logger=baseLogger.create("formatter"),this.options=_e,this.formats={number:createCachedFormatter(function(et,tt){var rt=new Intl.NumberFormat(et,tt);return function(nt){return rt.format(nt)}}),currency:createCachedFormatter(function(et,tt){var rt=new Intl.NumberFormat(et,_objectSpread$2(_objectSpread$2({},tt),{},{style:"currency"}));return function(nt){return rt.format(nt)}}),datetime:createCachedFormatter(function(et,tt){var rt=new Intl.DateTimeFormat(et,_objectSpread$2({},tt));return function(nt){return rt.format(nt)}}),relativetime:createCachedFormatter(function(et,tt){var rt=new Intl.RelativeTimeFormat(et,_objectSpread$2({},tt));return function(nt){return rt.format(nt,tt.range||"day")}}),list:createCachedFormatter(function(et,tt){var rt=new Intl.ListFormat(et,_objectSpread$2({},tt));return function(nt){return rt.format(nt)}})},this.init(_e)}return _createClass$2(_,[{key:"init",value:function(et){var tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}},rt=tt.interpolation;this.formatSeparator=rt.formatSeparator?rt.formatSeparator:rt.formatSeparator||","}},{key:"add",value:function(et,tt){this.formats[et.toLowerCase().trim()]=tt}},{key:"addCached",value:function(et,tt){this.formats[et.toLowerCase().trim()]=createCachedFormatter(tt)}},{key:"format",value:function(et,tt,rt,nt){var at=this,it=tt.split(this.formatSeparator),ot=it.reduce(function(st,lt){var gt=parseFormatStr(lt),ct=gt.formatName,wt=gt.formatOptions;if(at.formats[ct]){var Tt=st;try{var Rt=nt&&nt.formatParams&&nt.formatParams[nt.interpolationkey]||{},ht=Rt.locale||Rt.lng||nt.locale||nt.lng||rt;Tt=at.formats[ct](st,ht,_objectSpread$2(_objectSpread$2(_objectSpread$2({},wt),nt),Rt))}catch(ut){at.logger.warn(ut)}return Tt}else at.logger.warn("there was no format function for ".concat(ct));return st},et);return ot}}]),_}();function ownKeys$1(_,_e){var et=Object.keys(_);if(Object.getOwnPropertySymbols){var tt=Object.getOwnPropertySymbols(_);_e&&(tt=tt.filter(function(rt){return Object.getOwnPropertyDescriptor(_,rt).enumerable})),et.push.apply(et,tt)}return et}function _objectSpread$1(_){for(var _e=1;_e<arguments.length;_e++){var et=arguments[_e]!=null?arguments[_e]:{};_e%2?ownKeys$1(Object(et),!0).forEach(function(tt){_defineProperty$3(_,tt,et[tt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(et)):ownKeys$1(Object(et)).forEach(function(tt){Object.defineProperty(_,tt,Object.getOwnPropertyDescriptor(et,tt))})}return _}function _createSuper$1(_){var _e=_isNativeReflectConstruct$1();return function(){var tt=_getPrototypeOf(_),rt;if(_e){var nt=_getPrototypeOf(this).constructor;rt=Reflect.construct(tt,arguments,nt)}else rt=tt.apply(this,arguments);return _possibleConstructorReturn(this,rt)}}function _isNativeReflectConstruct$1(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function removePending(_,_e){_.pending[_e]!==void 0&&(delete _.pending[_e],_.pendingCount--)}var Connector=function(_){_inherits(et,_);var _e=_createSuper$1(et);function et(tt,rt,nt){var at,it=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return _classCallCheck$2(this,et),at=_e.call(this),isIE10&&EventEmitter.call(_assertThisInitialized(at)),at.backend=tt,at.store=rt,at.services=nt,at.languageUtils=nt.languageUtils,at.options=it,at.logger=baseLogger.create("backendConnector"),at.waitingReads=[],at.maxParallelReads=it.maxParallelReads||10,at.readingCalls=0,at.maxRetries=it.maxRetries>=0?it.maxRetries:5,at.retryTimeout=it.retryTimeout>=1?it.retryTimeout:350,at.state={},at.queue=[],at.backend&&at.backend.init&&at.backend.init(nt,it.backend,it),at}return _createClass$2(et,[{key:"queueLoad",value:function(rt,nt,at,it){var ot=this,st={},lt={},gt={},ct={};return rt.forEach(function(wt){var Tt=!0;nt.forEach(function(Rt){var ht="".concat(wt,"|").concat(Rt);!at.reload&&ot.store.hasResourceBundle(wt,Rt)?ot.state[ht]=2:ot.state[ht]<0||(ot.state[ht]===1?lt[ht]===void 0&&(lt[ht]=!0):(ot.state[ht]=1,Tt=!1,lt[ht]===void 0&&(lt[ht]=!0),st[ht]===void 0&&(st[ht]=!0),ct[Rt]===void 0&&(ct[Rt]=!0)))}),Tt||(gt[wt]=!0)}),(Object.keys(st).length||Object.keys(lt).length)&&this.queue.push({pending:lt,pendingCount:Object.keys(lt).length,loaded:{},errors:[],callback:it}),{toLoad:Object.keys(st),pending:Object.keys(lt),toLoadLanguages:Object.keys(gt),toLoadNamespaces:Object.keys(ct)}}},{key:"loaded",value:function(rt,nt,at){var it=rt.split("|"),ot=it[0],st=it[1];nt&&this.emit("failedLoading",ot,st,nt),at&&this.store.addResourceBundle(ot,st,at),this.state[rt]=nt?-1:2;var lt={};this.queue.forEach(function(gt){pushPath(gt.loaded,[ot],st),removePending(gt,rt),nt&&gt.errors.push(nt),gt.pendingCount===0&&!gt.done&&(Object.keys(gt.loaded).forEach(function(ct){lt[ct]||(lt[ct]={});var wt=gt.loaded[ct];wt.length&&wt.forEach(function(Tt){lt[ct][Tt]===void 0&&(lt[ct][Tt]=!0)})}),gt.done=!0,gt.errors.length?gt.callback(gt.errors):gt.callback())}),this.emit("loaded",lt),this.queue=this.queue.filter(function(gt){return!gt.done})}},{key:"read",value:function(rt,nt,at){var it=this,ot=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,st=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,lt=arguments.length>5?arguments[5]:void 0;if(!rt.length)return lt(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:rt,ns:nt,fcName:at,tried:ot,wait:st,callback:lt});return}this.readingCalls++;var gt=function(Rt,ht){if(it.readingCalls--,it.waitingReads.length>0){var ut=it.waitingReads.shift();it.read(ut.lng,ut.ns,ut.fcName,ut.tried,ut.wait,ut.callback)}if(Rt&&ht&&ot<it.maxRetries){setTimeout(function(){it.read.call(it,rt,nt,at,ot+1,st*2,lt)},st);return}lt(Rt,ht)},ct=this.backend[at].bind(this.backend);if(ct.length===2){try{var wt=ct(rt,nt);wt&&typeof wt.then=="function"?wt.then(function(Tt){return gt(null,Tt)}).catch(gt):gt(null,wt)}catch(Tt){gt(Tt)}return}return ct(rt,nt,gt)}},{key:"prepareLoading",value:function(rt,nt){var at=this,it=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},ot=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),ot&&ot();typeof rt=="string"&&(rt=this.languageUtils.toResolveHierarchy(rt)),typeof nt=="string"&&(nt=[nt]);var st=this.queueLoad(rt,nt,it,ot);if(!st.toLoad.length)return st.pending.length||ot(),null;st.toLoad.forEach(function(lt){at.loadOne(lt)})}},{key:"load",value:function(rt,nt,at){this.prepareLoading(rt,nt,{},at)}},{key:"reload",value:function(rt,nt,at){this.prepareLoading(rt,nt,{reload:!0},at)}},{key:"loadOne",value:function(rt){var nt=this,at=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",it=rt.split("|"),ot=it[0],st=it[1];this.read(ot,st,"read",void 0,void 0,function(lt,gt){lt&&nt.logger.warn("".concat(at,"loading namespace ").concat(st," for language ").concat(ot," failed"),lt),!lt&&gt&&nt.logger.log("".concat(at,"loaded namespace ").concat(st," for language ").concat(ot),gt),nt.loaded(rt,lt,gt)})}},{key:"saveMissing",value:function(rt,nt,at,it,ot){var st=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},lt=arguments.length>6&&arguments[6]!==void 0?arguments[6]:function(){};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(nt)){this.logger.warn('did not save key "'.concat(at,'" as the namespace "').concat(nt,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(at==null||at==="")){if(this.backend&&this.backend.create){var gt=_objectSpread$1(_objectSpread$1({},st),{},{isUpdate:ot}),ct=this.backend.create.bind(this.backend);if(ct.length<6)try{var wt;ct.length===5?wt=ct(rt,nt,at,it,gt):wt=ct(rt,nt,at,it),wt&&typeof wt.then=="function"?wt.then(function(Tt){return lt(null,Tt)}).catch(lt):lt(null,wt)}catch(Tt){lt(Tt)}else ct(rt,nt,at,it,lt,gt)}!rt||!rt[0]||this.store.addResource(rt[0],nt,at,it)}}}]),et}(EventEmitter);function get$1(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(_e){var et={};if(_typeof$2(_e[1])==="object"&&(et=_e[1]),typeof _e[1]=="string"&&(et.defaultValue=_e[1]),typeof _e[2]=="string"&&(et.tDescription=_e[2]),_typeof$2(_e[2])==="object"||_typeof$2(_e[3])==="object"){var tt=_e[3]||_e[2];Object.keys(tt).forEach(function(rt){et[rt]=tt[rt]})}return et},interpolation:{escapeValue:!0,format:function(_e,et,tt,rt){return _e},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function transformOptions(_){return typeof _.ns=="string"&&(_.ns=[_.ns]),typeof _.fallbackLng=="string"&&(_.fallbackLng=[_.fallbackLng]),typeof _.fallbackNS=="string"&&(_.fallbackNS=[_.fallbackNS]),_.supportedLngs&&_.supportedLngs.indexOf("cimode")<0&&(_.supportedLngs=_.supportedLngs.concat(["cimode"])),_}function ownKeys(_,_e){var et=Object.keys(_);if(Object.getOwnPropertySymbols){var tt=Object.getOwnPropertySymbols(_);_e&&(tt=tt.filter(function(rt){return Object.getOwnPropertyDescriptor(_,rt).enumerable})),et.push.apply(et,tt)}return et}function _objectSpread(_){for(var _e=1;_e<arguments.length;_e++){var et=arguments[_e]!=null?arguments[_e]:{};_e%2?ownKeys(Object(et),!0).forEach(function(tt){_defineProperty$3(_,tt,et[tt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(et)):ownKeys(Object(et)).forEach(function(tt){Object.defineProperty(_,tt,Object.getOwnPropertyDescriptor(et,tt))})}return _}function _createSuper(_){var _e=_isNativeReflectConstruct();return function(){var tt=_getPrototypeOf(_),rt;if(_e){var nt=_getPrototypeOf(this).constructor;rt=Reflect.construct(tt,arguments,nt)}else rt=tt.apply(this,arguments);return _possibleConstructorReturn(this,rt)}}function _isNativeReflectConstruct(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function noop(){}function bindMemberFunctions(_){var _e=Object.getOwnPropertyNames(Object.getPrototypeOf(_));_e.forEach(function(et){typeof _[et]=="function"&&(_[et]=_[et].bind(_))})}var I18n=function(_){_inherits(et,_);var _e=_createSuper(et);function et(){var tt,rt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},nt=arguments.length>1?arguments[1]:void 0;if(_classCallCheck$2(this,et),tt=_e.call(this),isIE10&&EventEmitter.call(_assertThisInitialized(tt)),tt.options=transformOptions(rt),tt.services={},tt.logger=baseLogger,tt.modules={external:[]},bindMemberFunctions(_assertThisInitialized(tt)),nt&&!tt.isInitialized&&!rt.isClone){if(!tt.options.initImmediate)return tt.init(rt,nt),_possibleConstructorReturn(tt,_assertThisInitialized(tt));setTimeout(function(){tt.init(rt,nt)},0)}return tt}return _createClass$2(et,[{key:"init",value:function(){var rt=this,nt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},at=arguments.length>1?arguments[1]:void 0;typeof nt=="function"&&(at=nt,nt={}),!nt.defaultNS&&nt.defaultNS!==!1&&nt.ns&&(typeof nt.ns=="string"?nt.defaultNS=nt.ns:nt.ns.indexOf("translation")<0&&(nt.defaultNS=nt.ns[0]));var it=get$1();this.options=_objectSpread(_objectSpread(_objectSpread({},it),this.options),transformOptions(nt)),this.options.compatibilityAPI!=="v1"&&(this.options.interpolation=_objectSpread(_objectSpread({},it.interpolation),this.options.interpolation)),nt.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=nt.keySeparator),nt.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=nt.nsSeparator);function ot(ut){return ut?typeof ut=="function"?new ut:ut:null}if(!this.options.isClone){this.modules.logger?baseLogger.init(ot(this.modules.logger),this.options):baseLogger.init(null,this.options);var st;this.modules.formatter?st=this.modules.formatter:typeof Intl<"u"&&(st=Formatter);var lt=new LanguageUtil(this.options);this.store=new ResourceStore(this.options.resources,this.options);var gt=this.services;gt.logger=baseLogger,gt.resourceStore=this.store,gt.languageUtils=lt,gt.pluralResolver=new PluralResolver(lt,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),st&&(!this.options.interpolation.format||this.options.interpolation.format===it.interpolation.format)&&(gt.formatter=ot(st),gt.formatter.init(gt,this.options),this.options.interpolation.format=gt.formatter.format.bind(gt.formatter)),gt.interpolator=new Interpolator(this.options),gt.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},gt.backendConnector=new Connector(ot(this.modules.backend),gt.resourceStore,gt,this.options),gt.backendConnector.on("*",function(ut){for(var ft=arguments.length,yt=new Array(ft>1?ft-1:0),xt=1;xt<ft;xt++)yt[xt-1]=arguments[xt];rt.emit.apply(rt,[ut].concat(yt))}),this.modules.languageDetector&&(gt.languageDetector=ot(this.modules.languageDetector),gt.languageDetector.init&&gt.languageDetector.init(gt,this.options.detection,this.options)),this.modules.i18nFormat&&(gt.i18nFormat=ot(this.modules.i18nFormat),gt.i18nFormat.init&&gt.i18nFormat.init(this)),this.translator=new Translator(this.services,this.options),this.translator.on("*",function(ut){for(var ft=arguments.length,yt=new Array(ft>1?ft-1:0),xt=1;xt<ft;xt++)yt[xt-1]=arguments[xt];rt.emit.apply(rt,[ut].concat(yt))}),this.modules.external.forEach(function(ut){ut.init&&ut.init(rt)})}if(this.format=this.options.interpolation.format,at||(at=noop),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){var ct=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);ct.length>0&&ct[0]!=="dev"&&(this.options.lng=ct[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined");var wt=["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"];wt.forEach(function(ut){rt[ut]=function(){var ft;return(ft=rt.store)[ut].apply(ft,arguments)}});var Tt=["addResource","addResources","addResourceBundle","removeResourceBundle"];Tt.forEach(function(ut){rt[ut]=function(){var ft;return(ft=rt.store)[ut].apply(ft,arguments),rt}});var Rt=defer(),ht=function(){var ft=function(xt,Ct){rt.isInitialized&&!rt.initializedStoreOnce&&rt.logger.warn("init: i18next is already initialized. You should call init just once!"),rt.isInitialized=!0,rt.options.isClone||rt.logger.log("initialized",rt.options),rt.emit("initialized",rt.options),Rt.resolve(Ct),at(xt,Ct)};if(rt.languages&&rt.options.compatibilityAPI!=="v1"&&!rt.isInitialized)return ft(null,rt.t.bind(rt));rt.changeLanguage(rt.options.lng,ft)};return this.options.resources||!this.options.initImmediate?ht():setTimeout(ht,0),Rt}},{key:"loadResources",value:function(rt){var nt=this,at=arguments.length>1&&arguments[1]!==void 0?arguments[1]:noop,it=at,ot=typeof rt=="string"?rt:this.language;if(typeof rt=="function"&&(it=rt),!this.options.resources||this.options.partialBundledLanguages){if(ot&&ot.toLowerCase()==="cimode")return it();var st=[],lt=function(wt){if(!!wt){var Tt=nt.services.languageUtils.toResolveHierarchy(wt);Tt.forEach(function(Rt){st.indexOf(Rt)<0&&st.push(Rt)})}};if(ot)lt(ot);else{var gt=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);gt.forEach(function(ct){return lt(ct)})}this.options.preload&&this.options.preload.forEach(function(ct){return lt(ct)}),this.services.backendConnector.load(st,this.options.ns,function(ct){!ct&&!nt.resolvedLanguage&&nt.language&&nt.setResolvedLanguage(nt.language),it(ct)})}else it(null)}},{key:"reloadResources",value:function(rt,nt,at){var it=defer();return rt||(rt=this.languages),nt||(nt=this.options.ns),at||(at=noop),this.services.backendConnector.reload(rt,nt,function(ot){it.resolve(),at(ot)}),it}},{key:"use",value:function(rt){if(!rt)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!rt.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return rt.type==="backend"&&(this.modules.backend=rt),(rt.type==="logger"||rt.log&&rt.warn&&rt.error)&&(this.modules.logger=rt),rt.type==="languageDetector"&&(this.modules.languageDetector=rt),rt.type==="i18nFormat"&&(this.modules.i18nFormat=rt),rt.type==="postProcessor"&&postProcessor.addPostProcessor(rt),rt.type==="formatter"&&(this.modules.formatter=rt),rt.type==="3rdParty"&&this.modules.external.push(rt),this}},{key:"setResolvedLanguage",value:function(rt){if(!(!rt||!this.languages)&&!(["cimode","dev"].indexOf(rt)>-1))for(var nt=0;nt<this.languages.length;nt++){var at=this.languages[nt];if(!(["cimode","dev"].indexOf(at)>-1)&&this.store.hasLanguageSomeTranslations(at)){this.resolvedLanguage=at;break}}}},{key:"changeLanguage",value:function(rt,nt){var at=this;this.isLanguageChangingTo=rt;var it=defer();this.emit("languageChanging",rt);var ot=function(ct){at.language=ct,at.languages=at.services.languageUtils.toResolveHierarchy(ct),at.resolvedLanguage=void 0,at.setResolvedLanguage(ct)},st=function(ct,wt){wt?(ot(wt),at.translator.changeLanguage(wt),at.isLanguageChangingTo=void 0,at.emit("languageChanged",wt),at.logger.log("languageChanged",wt)):at.isLanguageChangingTo=void 0,it.resolve(function(){return at.t.apply(at,arguments)}),nt&&nt(ct,function(){return at.t.apply(at,arguments)})},lt=function(ct){!rt&&!ct&&at.services.languageDetector&&(ct=[]);var wt=typeof ct=="string"?ct:at.services.languageUtils.getBestMatchFromCodes(ct);wt&&(at.language||ot(wt),at.translator.language||at.translator.changeLanguage(wt),at.services.languageDetector&&at.services.languageDetector.cacheUserLanguage&&at.services.languageDetector.cacheUserLanguage(wt)),at.loadResources(wt,function(Tt){st(Tt,wt)})};return!rt&&this.services.languageDetector&&!this.services.languageDetector.async?lt(this.services.languageDetector.detect()):!rt&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(lt):this.services.languageDetector.detect(lt):lt(rt),it}},{key:"getFixedT",value:function(rt,nt,at){var it=this,ot=function st(lt,gt){var ct;if(_typeof$2(gt)!=="object"){for(var wt=arguments.length,Tt=new Array(wt>2?wt-2:0),Rt=2;Rt<wt;Rt++)Tt[Rt-2]=arguments[Rt];ct=it.options.overloadTranslationOptionHandler([lt,gt].concat(Tt))}else ct=_objectSpread({},gt);ct.lng=ct.lng||st.lng,ct.lngs=ct.lngs||st.lngs,ct.ns=ct.ns||st.ns,ct.keyPrefix=ct.keyPrefix||at||st.keyPrefix;var ht=it.options.keySeparator||".",ut=ct.keyPrefix?"".concat(ct.keyPrefix).concat(ht).concat(lt):lt;return it.t(ut,ct)};return typeof rt=="string"?ot.lng=rt:ot.lngs=rt,ot.ns=nt,ot.keyPrefix=at,ot}},{key:"t",value:function(){var rt;return this.translator&&(rt=this.translator).translate.apply(rt,arguments)}},{key:"exists",value:function(){var rt;return this.translator&&(rt=this.translator).exists.apply(rt,arguments)}},{key:"setDefaultNamespace",value:function(rt){this.options.defaultNS=rt}},{key:"hasLoadedNamespace",value:function(rt){var nt=this,at=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var it=this.resolvedLanguage||this.languages[0],ot=this.options?this.options.fallbackLng:!1,st=this.languages[this.languages.length-1];if(it.toLowerCase()==="cimode")return!0;var lt=function(wt,Tt){var Rt=nt.services.backendConnector.state["".concat(wt,"|").concat(Tt)];return Rt===-1||Rt===2};if(at.precheck){var gt=at.precheck(this,lt);if(gt!==void 0)return gt}return!!(this.hasResourceBundle(it,rt)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||lt(it,rt)&&(!ot||lt(st,rt)))}},{key:"loadNamespaces",value:function(rt,nt){var at=this,it=defer();return this.options.ns?(typeof rt=="string"&&(rt=[rt]),rt.forEach(function(ot){at.options.ns.indexOf(ot)<0&&at.options.ns.push(ot)}),this.loadResources(function(ot){it.resolve(),nt&&nt(ot)}),it):(nt&&nt(),Promise.resolve())}},{key:"loadLanguages",value:function(rt,nt){var at=defer();typeof rt=="string"&&(rt=[rt]);var it=this.options.preload||[],ot=rt.filter(function(st){return it.indexOf(st)<0});return ot.length?(this.options.preload=it.concat(ot),this.loadResources(function(st){at.resolve(),nt&&nt(st)}),at):(nt&&nt(),Promise.resolve())}},{key:"dir",value:function(rt){if(rt||(rt=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!rt)return"rtl";var nt=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],at=this.services&&this.services.languageUtils||new LanguageUtil(get$1());return nt.indexOf(at.getLanguagePartFromCode(rt))>-1||rt.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}},{key:"cloneInstance",value:function(){var rt=this,nt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},at=arguments.length>1&&arguments[1]!==void 0?arguments[1]:noop,it=_objectSpread(_objectSpread(_objectSpread({},this.options),nt),{isClone:!0}),ot=new et(it);(nt.debug!==void 0||nt.prefix!==void 0)&&(ot.logger=ot.logger.clone(nt));var st=["store","services","language"];return st.forEach(function(lt){ot[lt]=rt[lt]}),ot.services=_objectSpread({},this.services),ot.services.utils={hasLoadedNamespace:ot.hasLoadedNamespace.bind(ot)},ot.translator=new Translator(ot.services,ot.options),ot.translator.on("*",function(lt){for(var gt=arguments.length,ct=new Array(gt>1?gt-1:0),wt=1;wt<gt;wt++)ct[wt-1]=arguments[wt];ot.emit.apply(ot,[lt].concat(ct))}),ot.init(it,at),ot.translator.options=ot.options,ot.translator.backendConnector.services.utils={hasLoadedNamespace:ot.hasLoadedNamespace.bind(ot)},ot}},{key:"toJSON",value:function(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}]),et}(EventEmitter);_defineProperty$3(I18n,"createInstance",function(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},_e=arguments.length>1?arguments[1]:void 0;return new I18n(_,_e)});var instance=I18n.createInstance();instance.createInstance=I18n.createInstance;instance.createInstance;instance.dir;instance.init;instance.loadResources;instance.reloadResources;instance.use;instance.changeLanguage;instance.getFixedT;instance.t;instance.exists;instance.setDefaultNamespace;instance.hasLoadedNamespace;instance.loadNamespaces;instance.loadLanguages;var arr=[],each=arr.forEach,slice=arr.slice;function defaults(_){return each.call(slice.call(arguments,1),function(_e){if(_e)for(var et in _e)_[et]===void 0&&(_[et]=_e[et])}),_}var fieldContentRegExp=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,serializeCookie=function(_e,et,tt){var rt=tt||{};rt.path=rt.path||"/";var nt=encodeURIComponent(et),at="".concat(_e,"=").concat(nt);if(rt.maxAge>0){var it=rt.maxAge-0;if(Number.isNaN(it))throw new Error("maxAge should be a Number");at+="; Max-Age=".concat(Math.floor(it))}if(rt.domain){if(!fieldContentRegExp.test(rt.domain))throw new TypeError("option domain is invalid");at+="; Domain=".concat(rt.domain)}if(rt.path){if(!fieldContentRegExp.test(rt.path))throw new TypeError("option path is invalid");at+="; Path=".concat(rt.path)}if(rt.expires){if(typeof rt.expires.toUTCString!="function")throw new TypeError("option expires is invalid");at+="; Expires=".concat(rt.expires.toUTCString())}if(rt.httpOnly&&(at+="; HttpOnly"),rt.secure&&(at+="; Secure"),rt.sameSite){var ot=typeof rt.sameSite=="string"?rt.sameSite.toLowerCase():rt.sameSite;switch(ot){case!0:at+="; SameSite=Strict";break;case"lax":at+="; SameSite=Lax";break;case"strict":at+="; SameSite=Strict";break;case"none":at+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return at},cookie={create:function(_e,et,tt,rt){var nt=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};tt&&(nt.expires=new Date,nt.expires.setTime(nt.expires.getTime()+tt*60*1e3)),rt&&(nt.domain=rt),document.cookie=serializeCookie(_e,encodeURIComponent(et),nt)},read:function(_e){for(var et="".concat(_e,"="),tt=document.cookie.split(";"),rt=0;rt<tt.length;rt++){for(var nt=tt[rt];nt.charAt(0)===" ";)nt=nt.substring(1,nt.length);if(nt.indexOf(et)===0)return nt.substring(et.length,nt.length)}return null},remove:function(_e){this.create(_e,"",-1)}},cookie$1={name:"cookie",lookup:function(_e){var et;if(_e.lookupCookie&&typeof document<"u"){var tt=cookie.read(_e.lookupCookie);tt&&(et=tt)}return et},cacheUserLanguage:function(_e,et){et.lookupCookie&&typeof document<"u"&&cookie.create(et.lookupCookie,_e,et.cookieMinutes,et.cookieDomain,et.cookieOptions)}},querystring={name:"querystring",lookup:function(_e){var et;if(typeof window<"u"){var tt=window.location.search;!window.location.search&&window.location.hash&&window.location.hash.indexOf("?")>-1&&(tt=window.location.hash.substring(window.location.hash.indexOf("?")));for(var rt=tt.substring(1),nt=rt.split("&"),at=0;at<nt.length;at++){var it=nt[at].indexOf("=");if(it>0){var ot=nt[at].substring(0,it);ot===_e.lookupQuerystring&&(et=nt[at].substring(it+1))}}}return et}},hasLocalStorageSupport=null,localStorageAvailable=function(){if(hasLocalStorageSupport!==null)return hasLocalStorageSupport;try{hasLocalStorageSupport=window!=="undefined"&&window.localStorage!==null;var _e="i18next.translate.boo";window.localStorage.setItem(_e,"foo"),window.localStorage.removeItem(_e)}catch{hasLocalStorageSupport=!1}return hasLocalStorageSupport},localStorage$1={name:"localStorage",lookup:function(_e){var et;if(_e.lookupLocalStorage&&localStorageAvailable()){var tt=window.localStorage.getItem(_e.lookupLocalStorage);tt&&(et=tt)}return et},cacheUserLanguage:function(_e,et){et.lookupLocalStorage&&localStorageAvailable()&&window.localStorage.setItem(et.lookupLocalStorage,_e)}},hasSessionStorageSupport=null,sessionStorageAvailable=function(){if(hasSessionStorageSupport!==null)return hasSessionStorageSupport;try{hasSessionStorageSupport=window!=="undefined"&&window.sessionStorage!==null;var _e="i18next.translate.boo";window.sessionStorage.setItem(_e,"foo"),window.sessionStorage.removeItem(_e)}catch{hasSessionStorageSupport=!1}return hasSessionStorageSupport},sessionStorage={name:"sessionStorage",lookup:function(_e){var et;if(_e.lookupSessionStorage&&sessionStorageAvailable()){var tt=window.sessionStorage.getItem(_e.lookupSessionStorage);tt&&(et=tt)}return et},cacheUserLanguage:function(_e,et){et.lookupSessionStorage&&sessionStorageAvailable()&&window.sessionStorage.setItem(et.lookupSessionStorage,_e)}},navigator$1={name:"navigator",lookup:function(_e){var et=[];if(typeof navigator<"u"){if(navigator.languages)for(var tt=0;tt<navigator.languages.length;tt++)et.push(navigator.languages[tt]);navigator.userLanguage&&et.push(navigator.userLanguage),navigator.language&&et.push(navigator.language)}return et.length>0?et:void 0}},htmlTag={name:"htmlTag",lookup:function(_e){var et,tt=_e.htmlTag||(typeof document<"u"?document.documentElement:null);return tt&&typeof tt.getAttribute=="function"&&(et=tt.getAttribute("lang")),et}},path={name:"path",lookup:function(_e){var et;if(typeof window<"u"){var tt=window.location.pathname.match(/\/([a-zA-Z-]*)/g);if(tt instanceof Array)if(typeof _e.lookupFromPathIndex=="number"){if(typeof tt[_e.lookupFromPathIndex]!="string")return;et=tt[_e.lookupFromPathIndex].replace("/","")}else et=tt[0].replace("/","")}return et}},subdomain={name:"subdomain",lookup:function(_e){var et=typeof _e.lookupFromSubdomainIndex=="number"?_e.lookupFromSubdomainIndex+1:1,tt=typeof window<"u"&&window.location&&window.location.hostname&&window.location.hostname.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(!!tt)return tt[et]}};function getDefaults(){return{order:["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"],lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"]}}var Browser=function(){function _(_e){var et=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};_classCallCheck$2(this,_),this.type="languageDetector",this.detectors={},this.init(_e,et)}return _createClass$2(_,[{key:"init",value:function(et){var tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},rt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=et,this.options=defaults(tt,this.options||{},getDefaults()),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=rt,this.addDetector(cookie$1),this.addDetector(querystring),this.addDetector(localStorage$1),this.addDetector(sessionStorage),this.addDetector(navigator$1),this.addDetector(htmlTag),this.addDetector(path),this.addDetector(subdomain)}},{key:"addDetector",value:function(et){this.detectors[et.name]=et}},{key:"detect",value:function(et){var tt=this;et||(et=this.options.order);var rt=[];return et.forEach(function(nt){if(tt.detectors[nt]){var at=tt.detectors[nt].lookup(tt.options);at&&typeof at=="string"&&(at=[at]),at&&(rt=rt.concat(at))}}),this.services.languageUtils.getBestMatchFromCodes?rt:rt.length>0?rt[0]:null}},{key:"cacheUserLanguage",value:function(et,tt){var rt=this;tt||(tt=this.options.caches),tt&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(et)>-1||tt.forEach(function(nt){rt.detectors[nt]&&rt.detectors[nt].cacheUserLanguage(et,rt.options)}))}}]),_}();Browser.type="languageDetector";const global$1={name:"SkoolTV"},search={loading_series:"Fetching your favourite series...",loading_movie:"Fetching your favourite movies...",loading:"Loading...",allResults:"That's all we have!",noResults:"We couldn't find anything!",allFailed:"Failed to find media, try again!",headingTitle:"Search results",bookmarks:"Bookmarks",continueWatching:"Continue Watching",title:"froozles > sabo",placeholder:"What do you want to watch?"},media={movie:"Movie",series:"Series",stopEditing:"Stop editing",errors:{genericTitle:"Whoops, it broke!",failedMeta:"Failed to load meta",mediaFailed:"We failed to request the media you asked for, check your internet connection and try again.",videoFailed:"We encountered an error while playing the video you requested. If this keeps happening please report the issue to the <0>Discord server</0> or on <1>GitHub</1>."}},seasons={seasonAndEpisode:"S{{season}} E{{episode}}"},notFound={genericTitle:"Not found",backArrow:"Back to home",media:{title:"Couldn't find that media",description:"We couldn't find the media you requested. Either it's been removed or you tampered with the URL"},provider:{title:"This provider has been disabled",description:"We had issues with the provider or it was too unstable to use, so we had to disable it."},page:{title:"Couldn't find that page",description:"We looked everywhere: under the bins, in the closet, behind the proxy but ultimately couldn't find the page you are looking for."}},searchBar={movie:"Movie",series:"Series",Search:"Search"},videoPlayer={findingBestVideo:"Finding the best video for you",noVideos:"Whoops, couldn't find any videos for you",loading:"Loading...",backToHome:"Back to home",backToHomeShort:"Back",seasonAndEpisode:"S{{season}} E{{episode}}",buttons:{episodes:"Episodes",source:"Source",captions:"Captions",download:"Download"},popouts:{sources:"Sources",seasons:"Seasons",captions:"Captions",episode:"E{{index}} - {{title}}",noCaptions:"No captions",linkedCaptions:"Linked captions",noEmbeds:"No embeds were found for this source",errors:{loadingWentWong:"Something went wrong loading the episodes for {{seasonTitle}}",embedsError:"Something went wrong loading the embeds for this thing that you like"}},errors:{fatalError:"The video player encounted a fatal error, please report it to the <0>Discord server</0> or on <1>GitHub</1>."}},v3={newSiteTitle:"New version now released!",newDomain:"https://movie-web.app",newDomainText:"movie-web will soon be moving to a new domain: <0>https://movie-web.app</0>. Make sure to update all your bookmarks as <1>the old website will stop working on {{date}}.</1>",tireless:"We've worked tirelessly on this new update, we hope you will enjoy what we've been cooking up for the past months.",leaveAnnouncement:"Take me there!"},casting={casting:"Casting to device..."},errors={offline:"Check your internet connection"},en={global:global$1,search,media,seasons,notFound,searchBar,videoPlayer,v3,casting,errors};instance.use(Browser).use(initReactI18next).init({fallbackLng:"en",resources:{en:{translation:en}},interpolation:{escapeValue:!1}});const index="";var main={};Object.defineProperty(main,"__esModule",{value:!0});var unpack_1=main.unpack=main.detect=void 0;function detect(_){return _.replace(" ","").startsWith("eval(function(p,a,c,k,e,")}main.detect=detect;function unpack(_){let{payload:_e,symtab:et,radix:tt,count:rt}=it(_);if(rt!=et.length)throw Error("Malformed p.a.c.k.e.r. symtab.");let nt;try{nt=new Unbaser(tt)}catch{throw Error("Unknown p.a.c.k.e.r. encoding.")}function at(st){const lt=st;let gt;return tt==1?gt=et[parseInt(lt)]:gt=et[nt.unbase(lt)],gt||lt}return _=_e.replace(/\b\w+\b/g,at),_;function it(st){const lt=[/}\('(.*)', *(\d+|\[\]), *(\d+), *'(.*)'\.split\('\|'\), *(\d+), *(.*)\)\)/,/}\('(.*)', *(\d+|\[\]), *(\d+), *'(.*)'\.split\('\|'\)/];for(const gt of lt){const ct=gt.exec(st);if(ct){let wt=ct;wt[2]=="[]";try{return{payload:wt[1],symtab:wt[4].split("|"),radix:parseInt(wt[2]),count:parseInt(wt[3])}}catch{throw Error("Corrupted p.a.c.k.e.r. data.")}}}throw Error("Could not make sense of p.a.c.k.e.r data (unexpected code structure)")}function ot(st){return st}}unpack_1=main.unpack=unpack;class Unbaser{constructor(_e){if(this.ALPHABET={62:"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",95:"' !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~'"},this.dictionary={},this.base=_e,36<_e&&_e<62&&(this.ALPHABET[_e]=this.ALPHABET[_e]||this.ALPHABET[62].substr(0,_e)),2<=_e&&_e<=36)this.unbase=et=>parseInt(et,_e);else{try{[...this.ALPHABET[_e]].forEach((et,tt)=>{this.dictionary[et]=tt})}catch{throw Error("Unsupported base encoding.")}this.unbase=this._dictunbaser}}_dictunbaser(_e){let et=0;return[..._e].reverse().forEach((tt,rt)=>{et=et+Math.pow(this.base,rt)*this.dictionary[tt]}),et}}var cryptoJs={exports:{}};function commonjsRequire(_){throw new Error('Could not dynamically require "'+_+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var core={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(__viteBrowserExternal$1);var hasRequiredCore;function requireCore(){return hasRequiredCore||(hasRequiredCore=1,function(_,_e){(function(et,tt){_.exports=tt()})(commonjsGlobal$1,function(){var et=et||function(tt,rt){var nt;if(typeof window<"u"&&window.crypto&&(nt=window.crypto),typeof self<"u"&&self.crypto&&(nt=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(nt=globalThis.crypto),!nt&&typeof window<"u"&&window.msCrypto&&(nt=window.msCrypto),!nt&&typeof commonjsGlobal$1<"u"&&commonjsGlobal$1.crypto&&(nt=commonjsGlobal$1.crypto),!nt&&typeof commonjsRequire=="function")try{nt=require$$0}catch{}var at=function(){if(nt){if(typeof nt.getRandomValues=="function")try{return nt.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof nt.randomBytes=="function")try{return nt.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},it=Object.create||function(){function ft(){}return function(yt){var xt;return ft.prototype=yt,xt=new ft,ft.prototype=null,xt}}(),ot={},st=ot.lib={},lt=st.Base=function(){return{extend:function(ft){var yt=it(this);return ft&&yt.mixIn(ft),(!yt.hasOwnProperty("init")||this.init===yt.init)&&(yt.init=function(){yt.$super.init.apply(this,arguments)}),yt.init.prototype=yt,yt.$super=this,yt},create:function(){var ft=this.extend();return ft.init.apply(ft,arguments),ft},init:function(){},mixIn:function(ft){for(var yt in ft)ft.hasOwnProperty(yt)&&(this[yt]=ft[yt]);ft.hasOwnProperty("toString")&&(this.toString=ft.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),gt=st.WordArray=lt.extend({init:function(ft,yt){ft=this.words=ft||[],yt!=rt?this.sigBytes=yt:this.sigBytes=ft.length*4},toString:function(ft){return(ft||wt).stringify(this)},concat:function(ft){var yt=this.words,xt=ft.words,Ct=this.sigBytes,pt=ft.sigBytes;if(this.clamp(),Ct%4)for(var dt=0;dt<pt;dt++){var vt=xt[dt>>>2]>>>24-dt%4*8&255;yt[Ct+dt>>>2]|=vt<<24-(Ct+dt)%4*8}else for(var St=0;St<pt;St+=4)yt[Ct+St>>>2]=xt[St>>>2];return this.sigBytes+=pt,this},clamp:function(){var ft=this.words,yt=this.sigBytes;ft[yt>>>2]&=4294967295<<32-yt%4*8,ft.length=tt.ceil(yt/4)},clone:function(){var ft=lt.clone.call(this);return ft.words=this.words.slice(0),ft},random:function(ft){for(var yt=[],xt=0;xt<ft;xt+=4)yt.push(at());return new gt.init(yt,ft)}}),ct=ot.enc={},wt=ct.Hex={stringify:function(ft){for(var yt=ft.words,xt=ft.sigBytes,Ct=[],pt=0;pt<xt;pt++){var dt=yt[pt>>>2]>>>24-pt%4*8&255;Ct.push((dt>>>4).toString(16)),Ct.push((dt&15).toString(16))}return Ct.join("")},parse:function(ft){for(var yt=ft.length,xt=[],Ct=0;Ct<yt;Ct+=2)xt[Ct>>>3]|=parseInt(ft.substr(Ct,2),16)<<24-Ct%8*4;return new gt.init(xt,yt/2)}},Tt=ct.Latin1={stringify:function(ft){for(var yt=ft.words,xt=ft.sigBytes,Ct=[],pt=0;pt<xt;pt++){var dt=yt[pt>>>2]>>>24-pt%4*8&255;Ct.push(String.fromCharCode(dt))}return Ct.join("")},parse:function(ft){for(var yt=ft.length,xt=[],Ct=0;Ct<yt;Ct++)xt[Ct>>>2]|=(ft.charCodeAt(Ct)&255)<<24-Ct%4*8;return new gt.init(xt,yt)}},Rt=ct.Utf8={stringify:function(ft){try{return decodeURIComponent(escape(Tt.stringify(ft)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(ft){return Tt.parse(unescape(encodeURIComponent(ft)))}},ht=st.BufferedBlockAlgorithm=lt.extend({reset:function(){this._data=new gt.init,this._nDataBytes=0},_append:function(ft){typeof ft=="string"&&(ft=Rt.parse(ft)),this._data.concat(ft),this._nDataBytes+=ft.sigBytes},_process:function(ft){var yt,xt=this._data,Ct=xt.words,pt=xt.sigBytes,dt=this.blockSize,vt=dt*4,St=pt/vt;ft?St=tt.ceil(St):St=tt.max((St|0)-this._minBufferSize,0);var Et=St*dt,mt=tt.min(Et*4,pt);if(Et){for(var _t=0;_t<Et;_t+=dt)this._doProcessBlock(Ct,_t);yt=Ct.splice(0,Et),xt.sigBytes-=mt}return new gt.init(yt,mt)},clone:function(){var ft=lt.clone.call(this);return ft._data=this._data.clone(),ft},_minBufferSize:0});st.Hasher=ht.extend({cfg:lt.extend(),init:function(ft){this.cfg=this.cfg.extend(ft),this.reset()},reset:function(){ht.reset.call(this),this._doReset()},update:function(ft){return this._append(ft),this._process(),this},finalize:function(ft){ft&&this._append(ft);var yt=this._doFinalize();return yt},blockSize:16,_createHelper:function(ft){return function(yt,xt){return new ft.init(xt).finalize(yt)}},_createHmacHelper:function(ft){return function(yt,xt){return new ut.HMAC.init(ft,xt).finalize(yt)}}});var ut=ot.algo={};return ot}(Math);return et})}(core)),core.exports}var x64Core={exports:{}},hasRequiredX64Core;function requireX64Core(){return hasRequiredX64Core||(hasRequiredX64Core=1,function(_,_e){(function(et,tt){_.exports=tt(requireCore())})(commonjsGlobal$1,function(et){return function(tt){var rt=et,nt=rt.lib,at=nt.Base,it=nt.WordArray,ot=rt.x64={};ot.Word=at.extend({init:function(st,lt){this.high=st,this.low=lt}}),ot.WordArray=at.extend({init:function(st,lt){st=this.words=st||[],lt!=tt?this.sigBytes=lt:this.sigBytes=st.length*8},toX32:function(){for(var st=this.words,lt=st.length,gt=[],ct=0;ct<lt;ct++){var wt=st[ct];gt.push(wt.high),gt.push(wt.low)}return it.create(gt,this.sigBytes)},clone:function(){for(var st=at.clone.call(this),lt=st.words=this.words.slice(0),gt=lt.length,ct=0;ct<gt;ct++)lt[ct]=lt[ct].clone();return st}})}(),et})}(x64Core)),x64Core.exports}var libTypedarrays={exports:{}},hasRequiredLibTypedarrays;function requireLibTypedarrays(){return hasRequiredLibTypedarrays||(hasRequiredLibTypedarrays=1,function(_,_e){(function(et,tt){_.exports=tt(requireCore())})(commonjsGlobal$1,function(et){return function(){if(typeof ArrayBuffer=="function"){var tt=et,rt=tt.lib,nt=rt.WordArray,at=nt.init,it=nt.init=function(ot){if(ot instanceof ArrayBuffer&&(ot=new Uint8Array(ot)),(ot instanceof Int8Array||typeof Uint8ClampedArray<"u"&&ot instanceof Uint8ClampedArray||ot instanceof Int16Array||ot instanceof Uint16Array||ot instanceof Int32Array||ot instanceof Uint32Array||ot instanceof Float32Array||ot instanceof Float64Array)&&(ot=new Uint8Array(ot.buffer,ot.byteOffset,ot.byteLength)),ot instanceof Uint8Array){for(var st=ot.byteLength,lt=[],gt=0;gt<st;gt++)lt[gt>>>2]|=ot[gt]<<24-gt%4*8;at.call(this,lt,st)}else at.apply(this,arguments)};it.prototype=nt}}(),et.lib.WordArray})}(libTypedarrays)),libTypedarrays.exports}var encUtf16={exports:{}},hasRequiredEncUtf16;function requireEncUtf16(){return hasRequiredEncUtf16||(hasRequiredEncUtf16=1,function(_,_e){(function(et,tt){_.exports=tt(requireCore())})(commonjsGlobal$1,function(et){return function(){var tt=et,rt=tt.lib,nt=rt.WordArray,at=tt.enc;at.Utf16=at.Utf16BE={stringify:function(ot){for(var st=ot.words,lt=ot.sigBytes,gt=[],ct=0;ct<lt;ct+=2){var wt=st[ct>>>2]>>>16-ct%4*8&65535;gt.push(String.fromCharCode(wt))}return gt.join("")},parse:function(ot){for(var st=ot.length,lt=[],gt=0;gt<st;gt++)lt[gt>>>1]|=ot.charCodeAt(gt)<<16-gt%2*16;return nt.create(lt,st*2)}},at.Utf16LE={stringify:function(ot){for(var st=ot.words,lt=ot.sigBytes,gt=[],ct=0;ct<lt;ct+=2){var wt=it(st[ct>>>2]>>>16-ct%4*8&65535);gt.push(String.fromCharCode(wt))}return gt.join("")},parse:function(ot){for(var st=ot.length,lt=[],gt=0;gt<st;gt++)lt[gt>>>1]|=it(ot.charCodeAt(gt)<<16-gt%2*16);return nt.create(lt,st*2)}};function it(ot){return ot<<8&4278255360|ot>>>8&16711935}}(),et.enc.Utf16})}(encUtf16)),encUtf16.exports}var encBase64={exports:{}},hasRequiredEncBase64;function requireEncBase64(){return hasRequiredEncBase64||(hasRequiredEncBase64=1,function(_,_e){(function(et,tt){_.exports=tt(requireCore())})(commonjsGlobal$1,function(et){return function(){var tt=et,rt=tt.lib,nt=rt.WordArray,at=tt.enc;at.Base64={stringify:function(ot){var st=ot.words,lt=ot.sigBytes,gt=this._map;ot.clamp();for(var ct=[],wt=0;wt<lt;wt+=3)for(var Tt=st[wt>>>2]>>>24-wt%4*8&255,Rt=st[wt+1>>>2]>>>24-(wt+1)%4*8&255,ht=st[wt+2>>>2]>>>24-(wt+2)%4*8&255,ut=Tt<<16|Rt<<8|ht,ft=0;ft<4&&wt+ft*.75<lt;ft++)ct.push(gt.charAt(ut>>>6*(3-ft)&63));var yt=gt.charAt(64);if(yt)for(;ct.length%4;)ct.push(yt);return ct.join("")},parse:function(ot){var st=ot.length,lt=this._map,gt=this._reverseMap;if(!gt){gt=this._reverseMap=[];for(var ct=0;ct<lt.length;ct++)gt[lt.charCodeAt(ct)]=ct}var wt=lt.charAt(64);if(wt){var Tt=ot.indexOf(wt);Tt!==-1&&(st=Tt)}return it(ot,st,gt)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function it(ot,st,lt){for(var gt=[],ct=0,wt=0;wt<st;wt++)if(wt%4){var Tt=lt[ot.charCodeAt(wt-1)]<<wt%4*2,Rt=lt[ot.charCodeAt(wt)]>>>6-wt%4*2,ht=Tt|Rt;gt[ct>>>2]|=ht<<24-ct%4*8,ct++}return nt.create(gt,ct)}}(),et.enc.Base64})}(encBase64)),encBase64.exports}var encBase64url={exports:{}},hasRequiredEncBase64url;function requireEncBase64url(){return hasRequiredEncBase64url||(hasRequiredEncBase64url=1,function(_,_e){(function(et,tt){_.exports=tt(requireCore())})(commonjsGlobal$1,function(et){return function(){var tt=et,rt=tt.lib,nt=rt.WordArray,at=tt.enc;at.Base64url={stringify:function(ot,st=!0){var lt=ot.words,gt=ot.sigBytes,ct=st?this._safe_map:this._map;ot.clamp();for(var wt=[],Tt=0;Tt<gt;Tt+=3)for(var Rt=lt[Tt>>>2]>>>24-Tt%4*8&255,ht=lt[Tt+1>>>2]>>>24-(Tt+1)%4*8&255,ut=lt[Tt+2>>>2]>>>24-(Tt+2)%4*8&255,ft=Rt<<16|ht<<8|ut,yt=0;yt<4&&Tt+yt*.75<gt;yt++)wt.push(ct.charAt(ft>>>6*(3-yt)&63));var xt=ct.charAt(64);if(xt)for(;wt.length%4;)wt.push(xt);return wt.join("")},parse:function(ot,st=!0){var lt=ot.length,gt=st?this._safe_map:this._map,ct=this._reverseMap;if(!ct){ct=this._reverseMap=[];for(var wt=0;wt<gt.length;wt++)ct[gt.charCodeAt(wt)]=wt}var Tt=gt.charAt(64);if(Tt){var Rt=ot.indexOf(Tt);Rt!==-1&&(lt=Rt)}return it(ot,lt,ct)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function it(ot,st,lt){for(var gt=[],ct=0,wt=0;wt<st;wt++)if(wt%4){var Tt=lt[ot.charCodeAt(wt-1)]<<wt%4*2,Rt=lt[ot.charCodeAt(wt)]>>>6-wt%4*2,ht=Tt|Rt;gt[ct>>>2]|=ht<<24-ct%4*8,ct++}return nt.create(gt,ct)}}(),et.enc.Base64url})}(encBase64url)),encBase64url.exports}var md5={exports:{}},hasRequiredMd5;function requireMd5(){return hasRequiredMd5||(hasRequiredMd5=1,function(_,_e){(function(et,tt){_.exports=tt(requireCore())})(commonjsGlobal$1,function(et){return function(tt){var rt=et,nt=rt.lib,at=nt.WordArray,it=nt.Hasher,ot=rt.algo,st=[];(function(){for(var Rt=0;Rt<64;Rt++)st[Rt]=tt.abs(tt.sin(Rt+1))*4294967296|0})();var lt=ot.MD5=it.extend({_doReset:function(){this._hash=new at.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(Rt,ht){for(var ut=0;ut<16;ut++){var ft=ht+ut,yt=Rt[ft];Rt[ft]=(yt<<8|yt>>>24)&16711935|(yt<<24|yt>>>8)&4278255360}var xt=this._hash.words,Ct=Rt[ht+0],pt=Rt[ht+1],dt=Rt[ht+2],vt=Rt[ht+3],St=Rt[ht+4],Et=Rt[ht+5],mt=Rt[ht+6],_t=Rt[ht+7],bt=Rt[ht+8],Ot=Rt[ht+9],Pt=Rt[ht+10],Dt=Rt[ht+11],It=Rt[ht+12],kt=Rt[ht+13],Lt=Rt[ht+14],At=Rt[ht+15],$t=xt[0],jt=xt[1],Nt=xt[2],Ft=xt[3];$t=gt($t,jt,Nt,Ft,Ct,7,st[0]),Ft=gt(Ft,$t,jt,Nt,pt,12,st[1]),Nt=gt(Nt,Ft,$t,jt,dt,17,st[2]),jt=gt(jt,Nt,Ft,$t,vt,22,st[3]),$t=gt($t,jt,Nt,Ft,St,7,st[4]),Ft=gt(Ft,$t,jt,Nt,Et,12,st[5]),Nt=gt(Nt,Ft,$t,jt,mt,17,st[6]),jt=gt(jt,Nt,Ft,$t,_t,22,st[7]),$t=gt($t,jt,Nt,Ft,bt,7,st[8]),Ft=gt(Ft,$t,jt,Nt,Ot,12,st[9]),Nt=gt(Nt,Ft,$t,jt,Pt,17,st[10]),jt=gt(jt,Nt,Ft,$t,Dt,22,st[11]),$t=gt($t,jt,Nt,Ft,It,7,st[12]),Ft=gt(Ft,$t,jt,Nt,kt,12,st[13]),Nt=gt(Nt,Ft,$t,jt,Lt,17,st[14]),jt=gt(jt,Nt,Ft,$t,At,22,st[15]),$t=ct($t,jt,Nt,Ft,pt,5,st[16]),Ft=ct(Ft,$t,jt,Nt,mt,9,st[17]),Nt=ct(Nt,Ft,$t,jt,Dt,14,st[18]),jt=ct(jt,Nt,Ft,$t,Ct,20,st[19]),$t=ct($t,jt,Nt,Ft,Et,5,st[20]),Ft=ct(Ft,$t,jt,Nt,Pt,9,st[21]),Nt=ct(Nt,Ft,$t,jt,At,14,st[22]),jt=ct(jt,Nt,Ft,$t,St,20,st[23]),$t=ct($t,jt,Nt,Ft,Ot,5,st[24]),Ft=ct(Ft,$t,jt,Nt,Lt,9,st[25]),Nt=ct(Nt,Ft,$t,jt,vt,14,st[26]),jt=ct(jt,Nt,Ft,$t,bt,20,st[27]),$t=ct($t,jt,Nt,Ft,kt,5,st[28]),Ft=ct(Ft,$t,jt,Nt,dt,9,st[29]),Nt=ct(Nt,Ft,$t,jt,_t,14,st[30]),jt=ct(jt,Nt,Ft,$t,It,20,st[31]),$t=wt($t,jt,Nt,Ft,Et,4,st[32]),Ft=wt(Ft,$t,jt,Nt,bt,11,st[33]),Nt=wt(Nt,Ft,$t,jt,Dt,16,st[34]),jt=wt(jt,Nt,Ft,$t,Lt,23,st[35]),$t=wt($t,jt,Nt,Ft,pt,4,st[36]),Ft=wt(Ft,$t,jt,Nt,St,11,st[37]),Nt=wt(Nt,Ft,$t,jt,_t,16,st[38]),jt=wt(jt,Nt,Ft,$t,Pt,23,st[39]),$t=wt($t,jt,Nt,Ft,kt,4,st[40]),Ft=wt(Ft,$t,jt,Nt,Ct,11,st[41]),Nt=wt(Nt,Ft,$t,jt,vt,16,st[42]),jt=wt(jt,Nt,Ft,$t,mt,23,st[43]),$t=wt($t,jt,Nt,Ft,Ot,4,st[44]),Ft=wt(Ft,$t,jt,Nt,It,11,st[45]),Nt=wt(Nt,Ft,$t,jt,At,16,st[46]),jt=wt(jt,Nt,Ft,$t,dt,23,st[47]),$t=Tt($t,jt,Nt,Ft,Ct,6,st[48]),Ft=Tt(Ft,$t,jt,Nt,_t,10,st[49]),Nt=Tt(Nt,Ft,$t,jt,Lt,15,st[50]),jt=Tt(jt,Nt,Ft,$t,Et,21,st[51]),$t=Tt($t,jt,Nt,Ft,It,6,st[52]),Ft=Tt(Ft,$t,jt,Nt,vt,10,st[53]),Nt=Tt(Nt,Ft,$t,jt,Pt,15,st[54]),jt=Tt(jt,Nt,Ft,$t,pt,21,st[55]),$t=Tt($t,jt,Nt,Ft,bt,6,st[56]),Ft=Tt(Ft,$t,jt,Nt,At,10,st[57]),Nt=Tt(Nt,Ft,$t,jt,mt,15,st[58]),jt=Tt(jt,Nt,Ft,$t,kt,21,st[59]),$t=Tt($t,jt,Nt,Ft,St,6,st[60]),Ft=Tt(Ft,$t,jt,Nt,Dt,10,st[61]),Nt=Tt(Nt,Ft,$t,jt,dt,15,st[62]),jt=Tt(jt,Nt,Ft,$t,Ot,21,st[63]),xt[0]=xt[0]+$t|0,xt[1]=xt[1]+jt|0,xt[2]=xt[2]+Nt|0,xt[3]=xt[3]+Ft|0},_doFinalize:function(){var Rt=this._data,ht=Rt.words,ut=this._nDataBytes*8,ft=Rt.sigBytes*8;ht[ft>>>5]|=128<<24-ft%32;var yt=tt.floor(ut/4294967296),xt=ut;ht[(ft+64>>>9<<4)+15]=(yt<<8|yt>>>24)&16711935|(yt<<24|yt>>>8)&4278255360,ht[(ft+64>>>9<<4)+14]=(xt<<8|xt>>>24)&16711935|(xt<<24|xt>>>8)&4278255360,Rt.sigBytes=(ht.length+1)*4,this._process();for(var Ct=this._hash,pt=Ct.words,dt=0;dt<4;dt++){var vt=pt[dt];pt[dt]=(vt<<8|vt>>>24)&16711935|(vt<<24|vt>>>8)&4278255360}return Ct},clone:function(){var Rt=it.clone.call(this);return Rt._hash=this._hash.clone(),Rt}});function gt(Rt,ht,ut,ft,yt,xt,Ct){var pt=Rt+(ht&ut|~ht&ft)+yt+Ct;return(pt<<xt|pt>>>32-xt)+ht}function ct(Rt,ht,ut,ft,yt,xt,Ct){var pt=Rt+(ht&ft|ut&~ft)+yt+Ct;return(pt<<xt|pt>>>32-xt)+ht}function wt(Rt,ht,ut,ft,yt,xt,Ct){var pt=Rt+(ht^ut^ft)+yt+Ct;return(pt<<xt|pt>>>32-xt)+ht}function Tt(Rt,ht,ut,ft,yt,xt,Ct){var pt=Rt+(ut^(ht|~ft))+yt+Ct;return(pt<<xt|pt>>>32-xt)+ht}rt.MD5=it._createHelper(lt),rt.HmacMD5=it._createHmacHelper(lt)}(Math),et.MD5})}(md5)),md5.exports}var sha1={exports:{}},hasRequiredSha1;function requireSha1(){return hasRequiredSha1||(hasRequiredSha1=1,function(_,_e){(function(et,tt){_.exports=tt(requireCore())})(commonjsGlobal$1,function(et){return function(){var tt=et,rt=tt.lib,nt=rt.WordArray,at=rt.Hasher,it=tt.algo,ot=[],st=it.SHA1=at.extend({_doReset:function(){this._hash=new nt.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(lt,gt){for(var ct=this._hash.words,wt=ct[0],Tt=ct[1],Rt=ct[2],ht=ct[3],ut=ct[4],ft=0;ft<80;ft++){if(ft<16)ot[ft]=lt[gt+ft]|0;else{var yt=ot[ft-3]^ot[ft-8]^ot[ft-14]^ot[ft-16];ot[ft]=yt<<1|yt>>>31}var xt=(wt<<5|wt>>>27)+ut+ot[ft];ft<20?xt+=(Tt&Rt|~Tt&ht)+1518500249:ft<40?xt+=(Tt^Rt^ht)+1859775393:ft<60?xt+=(Tt&Rt|Tt&ht|Rt&ht)-1894007588:xt+=(Tt^Rt^ht)-899497514,ut=ht,ht=Rt,Rt=Tt<<30|Tt>>>2,Tt=wt,wt=xt}ct[0]=ct[0]+wt|0,ct[1]=ct[1]+Tt|0,ct[2]=ct[2]+Rt|0,ct[3]=ct[3]+ht|0,ct[4]=ct[4]+ut|0},_doFinalize:function(){var lt=this._data,gt=lt.words,ct=this._nDataBytes*8,wt=lt.sigBytes*8;return gt[wt>>>5]|=128<<24-wt%32,gt[(wt+64>>>9<<4)+14]=Math.floor(ct/4294967296),gt[(wt+64>>>9<<4)+15]=ct,lt.sigBytes=gt.length*4,this._process(),this._hash},clone:function(){var lt=at.clone.call(this);return lt._hash=this._hash.clone(),lt}});tt.SHA1=at._createHelper(st),tt.HmacSHA1=at._createHmacHelper(st)}(),et.SHA1})}(sha1)),sha1.exports}var sha256={exports:{}},hasRequiredSha256;function requireSha256(){return hasRequiredSha256||(hasRequiredSha256=1,function(_,_e){(function(et,tt){_.exports=tt(requireCore())})(commonjsGlobal$1,function(et){return function(tt){var rt=et,nt=rt.lib,at=nt.WordArray,it=nt.Hasher,ot=rt.algo,st=[],lt=[];(function(){function wt(ut){for(var ft=tt.sqrt(ut),yt=2;yt<=ft;yt++)if(!(ut%yt))return!1;return!0}function Tt(ut){return(ut-(ut|0))*4294967296|0}for(var Rt=2,ht=0;ht<64;)wt(Rt)&&(ht<8&&(st[ht]=Tt(tt.pow(Rt,1/2))),lt[ht]=Tt(tt.pow(Rt,1/3)),ht++),Rt++})();var gt=[],ct=ot.SHA256=it.extend({_doReset:function(){this._hash=new at.init(st.slice(0))},_doProcessBlock:function(wt,Tt){for(var Rt=this._hash.words,ht=Rt[0],ut=Rt[1],ft=Rt[2],yt=Rt[3],xt=Rt[4],Ct=Rt[5],pt=Rt[6],dt=Rt[7],vt=0;vt<64;vt++){if(vt<16)gt[vt]=wt[Tt+vt]|0;else{var St=gt[vt-15],Et=(St<<25|St>>>7)^(St<<14|St>>>18)^St>>>3,mt=gt[vt-2],_t=(mt<<15|mt>>>17)^(mt<<13|mt>>>19)^mt>>>10;gt[vt]=Et+gt[vt-7]+_t+gt[vt-16]}var bt=xt&Ct^~xt&pt,Ot=ht&ut^ht&ft^ut&ft,Pt=(ht<<30|ht>>>2)^(ht<<19|ht>>>13)^(ht<<10|ht>>>22),Dt=(xt<<26|xt>>>6)^(xt<<21|xt>>>11)^(xt<<7|xt>>>25),It=dt+Dt+bt+lt[vt]+gt[vt],kt=Pt+Ot;dt=pt,pt=Ct,Ct=xt,xt=yt+It|0,yt=ft,ft=ut,ut=ht,ht=It+kt|0}Rt[0]=Rt[0]+ht|0,Rt[1]=Rt[1]+ut|0,Rt[2]=Rt[2]+ft|0,Rt[3]=Rt[3]+yt|0,Rt[4]=Rt[4]+xt|0,Rt[5]=Rt[5]+Ct|0,Rt[6]=Rt[6]+pt|0,Rt[7]=Rt[7]+dt|0},_doFinalize:function(){var wt=this._data,Tt=wt.words,Rt=this._nDataBytes*8,ht=wt.sigBytes*8;return Tt[ht>>>5]|=128<<24-ht%32,Tt[(ht+64>>>9<<4)+14]=tt.floor(Rt/4294967296),Tt[(ht+64>>>9<<4)+15]=Rt,wt.sigBytes=Tt.length*4,this._process(),this._hash},clone:function(){var wt=it.clone.call(this);return wt._hash=this._hash.clone(),wt}});rt.SHA256=it._createHelper(ct),rt.HmacSHA256=it._createHmacHelper(ct)}(Math),et.SHA256})}(sha256)),sha256.exports}var sha224={exports:{}},hasRequiredSha224;function requireSha224(){return hasRequiredSha224||(hasRequiredSha224=1,function(_,_e){(function(et,tt,rt){_.exports=tt(requireCore(),requireSha256())})(commonjsGlobal$1,function(et){return function(){var tt=et,rt=tt.lib,nt=rt.WordArray,at=tt.algo,it=at.SHA256,ot=at.SHA224=it.extend({_doReset:function(){this._hash=new nt.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var st=it._doFinalize.call(this);return st.sigBytes-=4,st}});tt.SHA224=it._createHelper(ot),tt.HmacSHA224=it._createHmacHelper(ot)}(),et.SHA224})}(sha224)),sha224.exports}var sha512={exports:{}},hasRequiredSha512;function requireSha512(){return hasRequiredSha512||(hasRequiredSha512=1,function(_,_e){(function(et,tt,rt){_.exports=tt(requireCore(),requireX64Core())})(commonjsGlobal$1,function(et){return function(){var tt=et,rt=tt.lib,nt=rt.Hasher,at=tt.x64,it=at.Word,ot=at.WordArray,st=tt.algo;function lt(){return it.create.apply(it,arguments)}var gt=[lt(1116352408,3609767458),lt(1899447441,602891725),lt(3049323471,3964484399),lt(3921009573,2173295548),lt(961987163,4081628472),lt(1508970993,3053834265),lt(2453635748,2937671579),lt(2870763221,3664609560),lt(3624381080,2734883394),lt(310598401,1164996542),lt(607225278,1323610764),lt(1426881987,3590304994),lt(1925078388,4068182383),lt(2162078206,991336113),lt(2614888103,633803317),lt(3248222580,3479774868),lt(3835390401,2666613458),lt(4022224774,944711139),lt(264347078,2341262773),lt(604807628,2007800933),lt(770255983,1495990901),lt(1249150122,1856431235),lt(1555081692,3175218132),lt(1996064986,2198950837),lt(2554220882,3999719339),lt(2821834349,766784016),lt(2952996808,2566594879),lt(3210313671,3203337956),lt(3336571891,1034457026),lt(3584528711,2466948901),lt(113926993,3758326383),lt(338241895,168717936),lt(666307205,1188179964),lt(773529912,1546045734),lt(1294757372,1522805485),lt(1396182291,2643833823),lt(1695183700,2343527390),lt(1986661051,1014477480),lt(2177026350,1206759142),lt(2456956037,344077627),lt(2730485921,1290863460),lt(2820302411,3158454273),lt(3259730800,3505952657),lt(3345764771,106217008),lt(3516065817,3606008344),lt(3600352804,1432725776),lt(4094571909,1467031594),lt(275423344,851169720),lt(430227734,3100823752),lt(506948616,1363258195),lt(659060556,3750685593),lt(883997877,3785050280),lt(958139571,3318307427),lt(1322822218,3812723403),lt(1537002063,2003034995),lt(1747873779,3602036899),lt(1955562222,1575990012),lt(2024104815,1125592928),lt(2227730452,2716904306),lt(2361852424,442776044),lt(2428436474,593698344),lt(2756734187,3733110249),lt(3204031479,2999351573),lt(3329325298,3815920427),lt(3391569614,3928383900),lt(3515267271,566280711),lt(3940187606,3454069534),lt(4118630271,4000239992),lt(116418474,1914138554),lt(174292421,2731055270),lt(289380356,3203993006),lt(460393269,320620315),lt(685471733,587496836),lt(852142971,1086792851),lt(1017036298,365543100),lt(1126000580,2618297676),lt(1288033470,3409855158),lt(1501505948,4234509866),lt(1607167915,987167468),lt(1816402316,1246189591)],ct=[];(function(){for(var Tt=0;Tt<80;Tt++)ct[Tt]=lt()})();var wt=st.SHA512=nt.extend({_doReset:function(){this._hash=new ot.init([new it.init(1779033703,4089235720),new it.init(3144134277,2227873595),new it.init(1013904242,4271175723),new it.init(2773480762,1595750129),new it.init(1359893119,2917565137),new it.init(2600822924,725511199),new it.init(528734635,4215389547),new it.init(1541459225,327033209)])},_doProcessBlock:function(Tt,Rt){for(var ht=this._hash.words,ut=ht[0],ft=ht[1],yt=ht[2],xt=ht[3],Ct=ht[4],pt=ht[5],dt=ht[6],vt=ht[7],St=ut.high,Et=ut.low,mt=ft.high,_t=ft.low,bt=yt.high,Ot=yt.low,Pt=xt.high,Dt=xt.low,It=Ct.high,kt=Ct.low,Lt=pt.high,At=pt.low,$t=dt.high,jt=dt.low,Nt=vt.high,Ft=vt.low,Bt=St,Ut=Et,Ht=mt,Kt=_t,Gt=bt,Wt=Ot,Vt=Pt,zt=Dt,Yt=It,Xt=kt,Qt=Lt,qt=At,er=$t,tr=jt,Zt=Nt,Jt=Ft,nr=0;nr<80;nr++){var rr,ir,lr=ct[nr];if(nr<16)ir=lr.high=Tt[Rt+nr*2]|0,rr=lr.low=Tt[Rt+nr*2+1]|0;else{var ar=ct[nr-15],ur=ar.high,sr=ar.low,fr=(ur>>>1|sr<<31)^(ur>>>8|sr<<24)^ur>>>7,hr=(sr>>>1|ur<<31)^(sr>>>8|ur<<24)^(sr>>>7|ur<<25),yr=ct[nr-2],pr=yr.high,vr=yr.low,xr=(pr>>>19|vr<<13)^(pr<<3|vr>>>29)^pr>>>6,Sr=(vr>>>19|pr<<13)^(vr<<3|pr>>>29)^(vr>>>6|pr<<26),_r=ct[nr-7],Pr=_r.high,cr=_r.low,dr=ct[nr-16],Tr=dr.high,or=dr.low;rr=hr+cr,ir=fr+Pr+(rr>>>0<hr>>>0?1:0),rr=rr+Sr,ir=ir+xr+(rr>>>0<Sr>>>0?1:0),rr=rr+or,ir=ir+Tr+(rr>>>0<or>>>0?1:0),lr.high=ir,lr.low=rr}var gr=Yt&Qt^~Yt&er,Er=Xt&qt^~Xt&tr,Ar=Bt&Ht^Bt&Gt^Ht&Gt,Ir=Ut&Kt^Ut&Wt^Kt&Wt,Lr=(Bt>>>28|Ut<<4)^(Bt<<30|Ut>>>2)^(Bt<<25|Ut>>>7),br=(Ut>>>28|Bt<<4)^(Ut<<30|Bt>>>2)^(Ut<<25|Bt>>>7),Mr=(Yt>>>14|Xt<<18)^(Yt>>>18|Xt<<14)^(Yt<<23|Xt>>>9),$r=(Xt>>>14|Yt<<18)^(Xt>>>18|Yt<<14)^(Xt<<23|Yt>>>9),Rr=gt[nr],Dr=Rr.high,Or=Rr.low,mr=Jt+$r,wr=Zt+Mr+(mr>>>0<Jt>>>0?1:0),mr=mr+Er,wr=wr+gr+(mr>>>0<Er>>>0?1:0),mr=mr+Or,wr=wr+Dr+(mr>>>0<Or>>>0?1:0),mr=mr+rr,wr=wr+ir+(mr>>>0<rr>>>0?1:0),jr=br+Ir,Nr=Lr+Ar+(jr>>>0<br>>>0?1:0);Zt=er,Jt=tr,er=Qt,tr=qt,Qt=Yt,qt=Xt,Xt=zt+mr|0,Yt=Vt+wr+(Xt>>>0<zt>>>0?1:0)|0,Vt=Gt,zt=Wt,Gt=Ht,Wt=Kt,Ht=Bt,Kt=Ut,Ut=mr+jr|0,Bt=wr+Nr+(Ut>>>0<mr>>>0?1:0)|0}Et=ut.low=Et+Ut,ut.high=St+Bt+(Et>>>0<Ut>>>0?1:0),_t=ft.low=_t+Kt,ft.high=mt+Ht+(_t>>>0<Kt>>>0?1:0),Ot=yt.low=Ot+Wt,yt.high=bt+Gt+(Ot>>>0<Wt>>>0?1:0),Dt=xt.low=Dt+zt,xt.high=Pt+Vt+(Dt>>>0<zt>>>0?1:0),kt=Ct.low=kt+Xt,Ct.high=It+Yt+(kt>>>0<Xt>>>0?1:0),At=pt.low=At+qt,pt.high=Lt+Qt+(At>>>0<qt>>>0?1:0),jt=dt.low=jt+tr,dt.high=$t+er+(jt>>>0<tr>>>0?1:0),Ft=vt.low=Ft+Jt,vt.high=Nt+Zt+(Ft>>>0<Jt>>>0?1:0)},_doFinalize:function(){var Tt=this._data,Rt=Tt.words,ht=this._nDataBytes*8,ut=Tt.sigBytes*8;Rt[ut>>>5]|=128<<24-ut%32,Rt[(ut+128>>>10<<5)+30]=Math.floor(ht/4294967296),Rt[(ut+128>>>10<<5)+31]=ht,Tt.sigBytes=Rt.length*4,this._process();var ft=this._hash.toX32();return ft},clone:function(){var Tt=nt.clone.call(this);return Tt._hash=this._hash.clone(),Tt},blockSize:1024/32});tt.SHA512=nt._createHelper(wt),tt.HmacSHA512=nt._createHmacHelper(wt)}(),et.SHA512})}(sha512)),sha512.exports}var sha384={exports:{}},hasRequiredSha384;function requireSha384(){return hasRequiredSha384||(hasRequiredSha384=1,function(_,_e){(function(et,tt,rt){_.exports=tt(requireCore(),requireX64Core(),requireSha512())})(commonjsGlobal$1,function(et){return function(){var tt=et,rt=tt.x64,nt=rt.Word,at=rt.WordArray,it=tt.algo,ot=it.SHA512,st=it.SHA384=ot.extend({_doReset:function(){this._hash=new at.init([new nt.init(3418070365,3238371032),new nt.init(1654270250,914150663),new nt.init(2438529370,812702999),new nt.init(355462360,4144912697),new nt.init(1731405415,4290775857),new nt.init(2394180231,1750603025),new nt.init(3675008525,1694076839),new nt.init(1203062813,3204075428)])},_doFinalize:function(){var lt=ot._doFinalize.call(this);return lt.sigBytes-=16,lt}});tt.SHA384=ot._createHelper(st),tt.HmacSHA384=ot._createHmacHelper(st)}(),et.SHA384})}(sha384)),sha384.exports}var sha3={exports:{}},hasRequiredSha3;function requireSha3(){return hasRequiredSha3||(hasRequiredSha3=1,function(_,_e){(function(et,tt,rt){_.exports=tt(requireCore(),requireX64Core())})(commonjsGlobal$1,function(et){return function(tt){var rt=et,nt=rt.lib,at=nt.WordArray,it=nt.Hasher,ot=rt.x64,st=ot.Word,lt=rt.algo,gt=[],ct=[],wt=[];(function(){for(var ht=1,ut=0,ft=0;ft<24;ft++){gt[ht+5*ut]=(ft+1)*(ft+2)/2%64;var yt=ut%5,xt=(2*ht+3*ut)%5;ht=yt,ut=xt}for(var ht=0;ht<5;ht++)for(var ut=0;ut<5;ut++)ct[ht+5*ut]=ut+(2*ht+3*ut)%5*5;for(var Ct=1,pt=0;pt<24;pt++){for(var dt=0,vt=0,St=0;St<7;St++){if(Ct&1){var Et=(1<<St)-1;Et<32?vt^=1<<Et:dt^=1<<Et-32}Ct&128?Ct=Ct<<1^113:Ct<<=1}wt[pt]=st.create(dt,vt)}})();var Tt=[];(function(){for(var ht=0;ht<25;ht++)Tt[ht]=st.create()})();var Rt=lt.SHA3=it.extend({cfg:it.cfg.extend({outputLength:512}),_doReset:function(){for(var ht=this._state=[],ut=0;ut<25;ut++)ht[ut]=new st.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(ht,ut){for(var ft=this._state,yt=this.blockSize/2,xt=0;xt<yt;xt++){var Ct=ht[ut+2*xt],pt=ht[ut+2*xt+1];Ct=(Ct<<8|Ct>>>24)&16711935|(Ct<<24|Ct>>>8)&4278255360,pt=(pt<<8|pt>>>24)&16711935|(pt<<24|pt>>>8)&4278255360;var dt=ft[xt];dt.high^=pt,dt.low^=Ct}for(var vt=0;vt<24;vt++){for(var St=0;St<5;St++){for(var Et=0,mt=0,_t=0;_t<5;_t++){var dt=ft[St+5*_t];Et^=dt.high,mt^=dt.low}var bt=Tt[St];bt.high=Et,bt.low=mt}for(var St=0;St<5;St++)for(var Ot=Tt[(St+4)%5],Pt=Tt[(St+1)%5],Dt=Pt.high,It=Pt.low,Et=Ot.high^(Dt<<1|It>>>31),mt=Ot.low^(It<<1|Dt>>>31),_t=0;_t<5;_t++){var dt=ft[St+5*_t];dt.high^=Et,dt.low^=mt}for(var kt=1;kt<25;kt++){var Et,mt,dt=ft[kt],Lt=dt.high,At=dt.low,$t=gt[kt];$t<32?(Et=Lt<<$t|At>>>32-$t,mt=At<<$t|Lt>>>32-$t):(Et=At<<$t-32|Lt>>>64-$t,mt=Lt<<$t-32|At>>>64-$t);var jt=Tt[ct[kt]];jt.high=Et,jt.low=mt}var Nt=Tt[0],Ft=ft[0];Nt.high=Ft.high,Nt.low=Ft.low;for(var St=0;St<5;St++)for(var _t=0;_t<5;_t++){var kt=St+5*_t,dt=ft[kt],Bt=Tt[kt],Ut=Tt[(St+1)%5+5*_t],Ht=Tt[(St+2)%5+5*_t];dt.high=Bt.high^~Ut.high&Ht.high,dt.low=Bt.low^~Ut.low&Ht.low}var dt=ft[0],Kt=wt[vt];dt.high^=Kt.high,dt.low^=Kt.low}},_doFinalize:function(){var ht=this._data,ut=ht.words;this._nDataBytes*8;var ft=ht.sigBytes*8,yt=this.blockSize*32;ut[ft>>>5]|=1<<24-ft%32,ut[(tt.ceil((ft+1)/yt)*yt>>>5)-1]|=128,ht.sigBytes=ut.length*4,this._process();for(var xt=this._state,Ct=this.cfg.outputLength/8,pt=Ct/8,dt=[],vt=0;vt<pt;vt++){var St=xt[vt],Et=St.high,mt=St.low;Et=(Et<<8|Et>>>24)&16711935|(Et<<24|Et>>>8)&4278255360,mt=(mt<<8|mt>>>24)&16711935|(mt<<24|mt>>>8)&4278255360,dt.push(mt),dt.push(Et)}return new at.init(dt,Ct)},clone:function(){for(var ht=it.clone.call(this),ut=ht._state=this._state.slice(0),ft=0;ft<25;ft++)ut[ft]=ut[ft].clone();return ht}});rt.SHA3=it._createHelper(Rt),rt.HmacSHA3=it._createHmacHelper(Rt)}(Math),et.SHA3})}(sha3)),sha3.exports}var ripemd160={exports:{}},hasRequiredRipemd160;function requireRipemd160(){return hasRequiredRipemd160||(hasRequiredRipemd160=1,function(_,_e){(function(et,tt){_.exports=tt(requireCore())})(commonjsGlobal$1,function(et){return function(tt){var rt=et,nt=rt.lib,at=nt.WordArray,it=nt.Hasher,ot=rt.algo,st=at.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),lt=at.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),gt=at.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),ct=at.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),wt=at.create([0,1518500249,1859775393,2400959708,2840853838]),Tt=at.create([1352829926,1548603684,1836072691,2053994217,0]),Rt=ot.RIPEMD160=it.extend({_doReset:function(){this._hash=at.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(pt,dt){for(var vt=0;vt<16;vt++){var St=dt+vt,Et=pt[St];pt[St]=(Et<<8|Et>>>24)&16711935|(Et<<24|Et>>>8)&4278255360}var mt=this._hash.words,_t=wt.words,bt=Tt.words,Ot=st.words,Pt=lt.words,Dt=gt.words,It=ct.words,kt,Lt,At,$t,jt,Nt,Ft,Bt,Ut,Ht;Nt=kt=mt[0],Ft=Lt=mt[1],Bt=At=mt[2],Ut=$t=mt[3],Ht=jt=mt[4];for(var Kt,vt=0;vt<80;vt+=1)Kt=kt+pt[dt+Ot[vt]]|0,vt<16?Kt+=ht(Lt,At,$t)+_t[0]:vt<32?Kt+=ut(Lt,At,$t)+_t[1]:vt<48?Kt+=ft(Lt,At,$t)+_t[2]:vt<64?Kt+=yt(Lt,At,$t)+_t[3]:Kt+=xt(Lt,At,$t)+_t[4],Kt=Kt|0,Kt=Ct(Kt,Dt[vt]),Kt=Kt+jt|0,kt=jt,jt=$t,$t=Ct(At,10),At=Lt,Lt=Kt,Kt=Nt+pt[dt+Pt[vt]]|0,vt<16?Kt+=xt(Ft,Bt,Ut)+bt[0]:vt<32?Kt+=yt(Ft,Bt,Ut)+bt[1]:vt<48?Kt+=ft(Ft,Bt,Ut)+bt[2]:vt<64?Kt+=ut(Ft,Bt,Ut)+bt[3]:Kt+=ht(Ft,Bt,Ut)+bt[4],Kt=Kt|0,Kt=Ct(Kt,It[vt]),Kt=Kt+Ht|0,Nt=Ht,Ht=Ut,Ut=Ct(Bt,10),Bt=Ft,Ft=Kt;Kt=mt[1]+At+Ut|0,mt[1]=mt[2]+$t+Ht|0,mt[2]=mt[3]+jt+Nt|0,mt[3]=mt[4]+kt+Ft|0,mt[4]=mt[0]+Lt+Bt|0,mt[0]=Kt},_doFinalize:function(){var pt=this._data,dt=pt.words,vt=this._nDataBytes*8,St=pt.sigBytes*8;dt[St>>>5]|=128<<24-St%32,dt[(St+64>>>9<<4)+14]=(vt<<8|vt>>>24)&16711935|(vt<<24|vt>>>8)&4278255360,pt.sigBytes=(dt.length+1)*4,this._process();for(var Et=this._hash,mt=Et.words,_t=0;_t<5;_t++){var bt=mt[_t];mt[_t]=(bt<<8|bt>>>24)&16711935|(bt<<24|bt>>>8)&4278255360}return Et},clone:function(){var pt=it.clone.call(this);return pt._hash=this._hash.clone(),pt}});function ht(pt,dt,vt){return pt^dt^vt}function ut(pt,dt,vt){return pt&dt|~pt&vt}function ft(pt,dt,vt){return(pt|~dt)^vt}function yt(pt,dt,vt){return pt&vt|dt&~vt}function xt(pt,dt,vt){return pt^(dt|~vt)}function Ct(pt,dt){return pt<<dt|pt>>>32-dt}rt.RIPEMD160=it._createHelper(Rt),rt.HmacRIPEMD160=it._createHmacHelper(Rt)}(),et.RIPEMD160})}(ripemd160)),ripemd160.exports}var hmac={exports:{}},hasRequiredHmac;function requireHmac(){return hasRequiredHmac||(hasRequiredHmac=1,function(_,_e){(function(et,tt){_.exports=tt(requireCore())})(commonjsGlobal$1,function(et){(function(){var tt=et,rt=tt.lib,nt=rt.Base,at=tt.enc,it=at.Utf8,ot=tt.algo;ot.HMAC=nt.extend({init:function(st,lt){st=this._hasher=new st.init,typeof lt=="string"&&(lt=it.parse(lt));var gt=st.blockSize,ct=gt*4;lt.sigBytes>ct&&(lt=st.finalize(lt)),lt.clamp();for(var wt=this._oKey=lt.clone(),Tt=this._iKey=lt.clone(),Rt=wt.words,ht=Tt.words,ut=0;ut<gt;ut++)Rt[ut]^=1549556828,ht[ut]^=909522486;wt.sigBytes=Tt.sigBytes=ct,this.reset()},reset:function(){var st=this._hasher;st.reset(),st.update(this._iKey)},update:function(st){return this._hasher.update(st),this},finalize:function(st){var lt=this._hasher,gt=lt.finalize(st);lt.reset();var ct=lt.finalize(this._oKey.clone().concat(gt));return ct}})})()})}(hmac)),hmac.exports}var pbkdf2={exports:{}},hasRequiredPbkdf2;function requirePbkdf2(){return hasRequiredPbkdf2||(hasRequiredPbkdf2=1,function(_,_e){(function(et,tt,rt){_.exports=tt(requireCore(),requireSha1(),requireHmac())})(commonjsGlobal$1,function(et){return function(){var tt=et,rt=tt.lib,nt=rt.Base,at=rt.WordArray,it=tt.algo,ot=it.SHA1,st=it.HMAC,lt=it.PBKDF2=nt.extend({cfg:nt.extend({keySize:128/32,hasher:ot,iterations:1}),init:function(gt){this.cfg=this.cfg.extend(gt)},compute:function(gt,ct){for(var wt=this.cfg,Tt=st.create(wt.hasher,gt),Rt=at.create(),ht=at.create([1]),ut=Rt.words,ft=ht.words,yt=wt.keySize,xt=wt.iterations;ut.length<yt;){var Ct=Tt.update(ct).finalize(ht);Tt.reset();for(var pt=Ct.words,dt=pt.length,vt=Ct,St=1;St<xt;St++){vt=Tt.finalize(vt),Tt.reset();for(var Et=vt.words,mt=0;mt<dt;mt++)pt[mt]^=Et[mt]}Rt.concat(Ct),ft[0]++}return Rt.sigBytes=yt*4,Rt}});tt.PBKDF2=function(gt,ct,wt){return lt.create(wt).compute(gt,ct)}}(),et.PBKDF2})}(pbkdf2)),pbkdf2.exports}var evpkdf={exports:{}},hasRequiredEvpkdf;function requireEvpkdf(){return hasRequiredEvpkdf||(hasRequiredEvpkdf=1,function(_,_e){(function(et,tt,rt){_.exports=tt(requireCore(),requireSha1(),requireHmac())})(commonjsGlobal$1,function(et){return function(){var tt=et,rt=tt.lib,nt=rt.Base,at=rt.WordArray,it=tt.algo,ot=it.MD5,st=it.EvpKDF=nt.extend({cfg:nt.extend({keySize:128/32,hasher:ot,iterations:1}),init:function(lt){this.cfg=this.cfg.extend(lt)},compute:function(lt,gt){for(var ct,wt=this.cfg,Tt=wt.hasher.create(),Rt=at.create(),ht=Rt.words,ut=wt.keySize,ft=wt.iterations;ht.length<ut;){ct&&Tt.update(ct),ct=Tt.update(lt).finalize(gt),Tt.reset();for(var yt=1;yt<ft;yt++)ct=Tt.finalize(ct),Tt.reset();Rt.concat(ct)}return Rt.sigBytes=ut*4,Rt}});tt.EvpKDF=function(lt,gt,ct){return st.create(ct).compute(lt,gt)}}(),et.EvpKDF})}(evpkdf)),evpkdf.exports}var cipherCore={exports:{}},hasRequiredCipherCore;function requireCipherCore(){return hasRequiredCipherCore||(hasRequiredCipherCore=1,function(_,_e){(function(et,tt,rt){_.exports=tt(requireCore(),requireEvpkdf())})(commonjsGlobal$1,function(et){et.lib.Cipher||function(tt){var rt=et,nt=rt.lib,at=nt.Base,it=nt.WordArray,ot=nt.BufferedBlockAlgorithm,st=rt.enc;st.Utf8;var lt=st.Base64,gt=rt.algo,ct=gt.EvpKDF,wt=nt.Cipher=ot.extend({cfg:at.extend(),createEncryptor:function(Et,mt){return this.create(this._ENC_XFORM_MODE,Et,mt)},createDecryptor:function(Et,mt){return this.create(this._DEC_XFORM_MODE,Et,mt)},init:function(Et,mt,_t){this.cfg=this.cfg.extend(_t),this._xformMode=Et,this._key=mt,this.reset()},reset:function(){ot.reset.call(this),this._doReset()},process:function(Et){return this._append(Et),this._process()},finalize:function(Et){Et&&this._append(Et);var mt=this._doFinalize();return mt},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function Et(mt){return typeof mt=="string"?St:pt}return function(mt){return{encrypt:function(_t,bt,Ot){return Et(bt).encrypt(mt,_t,bt,Ot)},decrypt:function(_t,bt,Ot){return Et(bt).decrypt(mt,_t,bt,Ot)}}}}()});nt.StreamCipher=wt.extend({_doFinalize:function(){var Et=this._process(!0);return Et},blockSize:1});var Tt=rt.mode={},Rt=nt.BlockCipherMode=at.extend({createEncryptor:function(Et,mt){return this.Encryptor.create(Et,mt)},createDecryptor:function(Et,mt){return this.Decryptor.create(Et,mt)},init:function(Et,mt){this._cipher=Et,this._iv=mt}}),ht=Tt.CBC=function(){var Et=Rt.extend();Et.Encryptor=Et.extend({processBlock:function(_t,bt){var Ot=this._cipher,Pt=Ot.blockSize;mt.call(this,_t,bt,Pt),Ot.encryptBlock(_t,bt),this._prevBlock=_t.slice(bt,bt+Pt)}}),Et.Decryptor=Et.extend({processBlock:function(_t,bt){var Ot=this._cipher,Pt=Ot.blockSize,Dt=_t.slice(bt,bt+Pt);Ot.decryptBlock(_t,bt),mt.call(this,_t,bt,Pt),this._prevBlock=Dt}});function mt(_t,bt,Ot){var Pt,Dt=this._iv;Dt?(Pt=Dt,this._iv=tt):Pt=this._prevBlock;for(var It=0;It<Ot;It++)_t[bt+It]^=Pt[It]}return Et}(),ut=rt.pad={},ft=ut.Pkcs7={pad:function(Et,mt){for(var _t=mt*4,bt=_t-Et.sigBytes%_t,Ot=bt<<24|bt<<16|bt<<8|bt,Pt=[],Dt=0;Dt<bt;Dt+=4)Pt.push(Ot);var It=it.create(Pt,bt);Et.concat(It)},unpad:function(Et){var mt=Et.words[Et.sigBytes-1>>>2]&255;Et.sigBytes-=mt}};nt.BlockCipher=wt.extend({cfg:wt.cfg.extend({mode:ht,padding:ft}),reset:function(){var Et;wt.reset.call(this);var mt=this.cfg,_t=mt.iv,bt=mt.mode;this._xformMode==this._ENC_XFORM_MODE?Et=bt.createEncryptor:(Et=bt.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==Et?this._mode.init(this,_t&&_t.words):(this._mode=Et.call(bt,this,_t&&_t.words),this._mode.__creator=Et)},_doProcessBlock:function(Et,mt){this._mode.processBlock(Et,mt)},_doFinalize:function(){var Et,mt=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(mt.pad(this._data,this.blockSize),Et=this._process(!0)):(Et=this._process(!0),mt.unpad(Et)),Et},blockSize:128/32});var yt=nt.CipherParams=at.extend({init:function(Et){this.mixIn(Et)},toString:function(Et){return(Et||this.formatter).stringify(this)}}),xt=rt.format={},Ct=xt.OpenSSL={stringify:function(Et){var mt,_t=Et.ciphertext,bt=Et.salt;return bt?mt=it.create([1398893684,1701076831]).concat(bt).concat(_t):mt=_t,mt.toString(lt)},parse:function(Et){var mt,_t=lt.parse(Et),bt=_t.words;return bt[0]==1398893684&&bt[1]==1701076831&&(mt=it.create(bt.slice(2,4)),bt.splice(0,4),_t.sigBytes-=16),yt.create({ciphertext:_t,salt:mt})}},pt=nt.SerializableCipher=at.extend({cfg:at.extend({format:Ct}),encrypt:function(Et,mt,_t,bt){bt=this.cfg.extend(bt);var Ot=Et.createEncryptor(_t,bt),Pt=Ot.finalize(mt),Dt=Ot.cfg;return yt.create({ciphertext:Pt,key:_t,iv:Dt.iv,algorithm:Et,mode:Dt.mode,padding:Dt.padding,blockSize:Et.blockSize,formatter:bt.format})},decrypt:function(Et,mt,_t,bt){bt=this.cfg.extend(bt),mt=this._parse(mt,bt.format);var Ot=Et.createDecryptor(_t,bt).finalize(mt.ciphertext);return Ot},_parse:function(Et,mt){return typeof Et=="string"?mt.parse(Et,this):Et}}),dt=rt.kdf={},vt=dt.OpenSSL={execute:function(Et,mt,_t,bt){bt||(bt=it.random(64/8));var Ot=ct.create({keySize:mt+_t}).compute(Et,bt),Pt=it.create(Ot.words.slice(mt),_t*4);return Ot.sigBytes=mt*4,yt.create({key:Ot,iv:Pt,salt:bt})}},St=nt.PasswordBasedCipher=pt.extend({cfg:pt.cfg.extend({kdf:vt}),encrypt:function(Et,mt,_t,bt){bt=this.cfg.extend(bt);var Ot=bt.kdf.execute(_t,Et.keySize,Et.ivSize);bt.iv=Ot.iv;var Pt=pt.encrypt.call(this,Et,mt,Ot.key,bt);return Pt.mixIn(Ot),Pt},decrypt:function(Et,mt,_t,bt){bt=this.cfg.extend(bt),mt=this._parse(mt,bt.format);var Ot=bt.kdf.execute(_t,Et.keySize,Et.ivSize,mt.salt);bt.iv=Ot.iv;var Pt=pt.decrypt.call(this,Et,mt,Ot.key,bt);return Pt}})}()})}(cipherCore)),cipherCore.exports}var modeCfb={exports:{}},hasRequiredModeCfb;function requireModeCfb(){return hasRequiredModeCfb||(hasRequiredModeCfb=1,function(_,_e){(function(et,tt,rt){_.exports=tt(requireCore(),requireCipherCore())})(commonjsGlobal$1,function(et){return et.mode.CFB=function(){var tt=et.lib.BlockCipherMode.extend();tt.Encryptor=tt.extend({processBlock:function(nt,at){var it=this._cipher,ot=it.blockSize;rt.call(this,nt,at,ot,it),this._prevBlock=nt.slice(at,at+ot)}}),tt.Decryptor=tt.extend({processBlock:function(nt,at){var it=this._cipher,ot=it.blockSize,st=nt.slice(at,at+ot);rt.call(this,nt,at,ot,it),this._prevBlock=st}});function rt(nt,at,it,ot){var st,lt=this._iv;lt?(st=lt.slice(0),this._iv=void 0):st=this._prevBlock,ot.encryptBlock(st,0);for(var gt=0;gt<it;gt++)nt[at+gt]^=st[gt]}return tt}(),et.mode.CFB})}(modeCfb)),modeCfb.exports}var modeCtr={exports:{}},hasRequiredModeCtr;function requireModeCtr(){return hasRequiredModeCtr||(hasRequiredModeCtr=1,function(_,_e){(function(et,tt,rt){_.exports=tt(requireCore(),requireCipherCore())})(commonjsGlobal$1,function(et){return et.mode.CTR=function(){var tt=et.lib.BlockCipherMode.extend(),rt=tt.Encryptor=tt.extend({processBlock:function(nt,at){var it=this._cipher,ot=it.blockSize,st=this._iv,lt=this._counter;st&&(lt=this._counter=st.slice(0),this._iv=void 0);var gt=lt.slice(0);it.encryptBlock(gt,0),lt[ot-1]=lt[ot-1]+1|0;for(var ct=0;ct<ot;ct++)nt[at+ct]^=gt[ct]}});return tt.Decryptor=rt,tt}(),et.mode.CTR})}(modeCtr)),modeCtr.exports}var modeCtrGladman={exports:{}},hasRequiredModeCtrGladman;function requireModeCtrGladman(){return hasRequiredModeCtrGladman||(hasRequiredModeCtrGladman=1,function(_,_e){(function(et,tt,rt){_.exports=tt(requireCore(),requireCipherCore())})(commonjsGlobal$1,function(et){return et.mode.CTRGladman=function(){var tt=et.lib.BlockCipherMode.extend();function rt(it){if((it>>24&255)===255){var ot=it>>16&255,st=it>>8&255,lt=it&255;ot===255?(ot=0,st===255?(st=0,lt===255?lt=0:++lt):++st):++ot,it=0,it+=ot<<16,it+=st<<8,it+=lt}else it+=1<<24;return it}function nt(it){return(it[0]=rt(it[0]))===0&&(it[1]=rt(it[1])),it}var at=tt.Encryptor=tt.extend({processBlock:function(it,ot){var st=this._cipher,lt=st.blockSize,gt=this._iv,ct=this._counter;gt&&(ct=this._counter=gt.slice(0),this._iv=void 0),nt(ct);var wt=ct.slice(0);st.encryptBlock(wt,0);for(var Tt=0;Tt<lt;Tt++)it[ot+Tt]^=wt[Tt]}});return tt.Decryptor=at,tt}(),et.mode.CTRGladman})}(modeCtrGladman)),modeCtrGladman.exports}var modeOfb={exports:{}},hasRequiredModeOfb;function requireModeOfb(){return hasRequiredModeOfb||(hasRequiredModeOfb=1,function(_,_e){(function(et,tt,rt){_.exports=tt(requireCore(),requireCipherCore())})(commonjsGlobal$1,function(et){return et.mode.OFB=function(){var tt=et.lib.BlockCipherMode.extend(),rt=tt.Encryptor=tt.extend({processBlock:function(nt,at){var it=this._cipher,ot=it.blockSize,st=this._iv,lt=this._keystream;st&&(lt=this._keystream=st.slice(0),this._iv=void 0),it.encryptBlock(lt,0);for(var gt=0;gt<ot;gt++)nt[at+gt]^=lt[gt]}});return tt.Decryptor=rt,tt}(),et.mode.OFB})}(modeOfb)),modeOfb.exports}var modeEcb={exports:{}},hasRequiredModeEcb;function requireModeEcb(){return hasRequiredModeEcb||(hasRequiredModeEcb=1,function(_,_e){(function(et,tt,rt){_.exports=tt(requireCore(),requireCipherCore())})(commonjsGlobal$1,function(et){return et.mode.ECB=function(){var tt=et.lib.BlockCipherMode.extend();return tt.Encryptor=tt.extend({processBlock:function(rt,nt){this._cipher.encryptBlock(rt,nt)}}),tt.Decryptor=tt.extend({processBlock:function(rt,nt){this._cipher.decryptBlock(rt,nt)}}),tt}(),et.mode.ECB})}(modeEcb)),modeEcb.exports}var padAnsix923={exports:{}},hasRequiredPadAnsix923;function requirePadAnsix923(){return hasRequiredPadAnsix923||(hasRequiredPadAnsix923=1,function(_,_e){(function(et,tt,rt){_.exports=tt(requireCore(),requireCipherCore())})(commonjsGlobal$1,function(et){return et.pad.AnsiX923={pad:function(tt,rt){var nt=tt.sigBytes,at=rt*4,it=at-nt%at,ot=nt+it-1;tt.clamp(),tt.words[ot>>>2]|=it<<24-ot%4*8,tt.sigBytes+=it},unpad:function(tt){var rt=tt.words[tt.sigBytes-1>>>2]&255;tt.sigBytes-=rt}},et.pad.Ansix923})}(padAnsix923)),padAnsix923.exports}var padIso10126={exports:{}},hasRequiredPadIso10126;function requirePadIso10126(){return hasRequiredPadIso10126||(hasRequiredPadIso10126=1,function(_,_e){(function(et,tt,rt){_.exports=tt(requireCore(),requireCipherCore())})(commonjsGlobal$1,function(et){return et.pad.Iso10126={pad:function(tt,rt){var nt=rt*4,at=nt-tt.sigBytes%nt;tt.concat(et.lib.WordArray.random(at-1)).concat(et.lib.WordArray.create([at<<24],1))},unpad:function(tt){var rt=tt.words[tt.sigBytes-1>>>2]&255;tt.sigBytes-=rt}},et.pad.Iso10126})}(padIso10126)),padIso10126.exports}var padIso97971={exports:{}},hasRequiredPadIso97971;function requirePadIso97971(){return hasRequiredPadIso97971||(hasRequiredPadIso97971=1,function(_,_e){(function(et,tt,rt){_.exports=tt(requireCore(),requireCipherCore())})(commonjsGlobal$1,function(et){return et.pad.Iso97971={pad:function(tt,rt){tt.concat(et.lib.WordArray.create([2147483648],1)),et.pad.ZeroPadding.pad(tt,rt)},unpad:function(tt){et.pad.ZeroPadding.unpad(tt),tt.sigBytes--}},et.pad.Iso97971})}(padIso97971)),padIso97971.exports}var padZeropadding={exports:{}},hasRequiredPadZeropadding;function requirePadZeropadding(){return hasRequiredPadZeropadding||(hasRequiredPadZeropadding=1,function(_,_e){(function(et,tt,rt){_.exports=tt(requireCore(),requireCipherCore())})(commonjsGlobal$1,function(et){return et.pad.ZeroPadding={pad:function(tt,rt){var nt=rt*4;tt.clamp(),tt.sigBytes+=nt-(tt.sigBytes%nt||nt)},unpad:function(tt){for(var rt=tt.words,nt=tt.sigBytes-1,nt=tt.sigBytes-1;nt>=0;nt--)if(rt[nt>>>2]>>>24-nt%4*8&255){tt.sigBytes=nt+1;break}}},et.pad.ZeroPadding})}(padZeropadding)),padZeropadding.exports}var padNopadding={exports:{}},hasRequiredPadNopadding;function requirePadNopadding(){return hasRequiredPadNopadding||(hasRequiredPadNopadding=1,function(_,_e){(function(et,tt,rt){_.exports=tt(requireCore(),requireCipherCore())})(commonjsGlobal$1,function(et){return et.pad.NoPadding={pad:function(){},unpad:function(){}},et.pad.NoPadding})}(padNopadding)),padNopadding.exports}var formatHex={exports:{}},hasRequiredFormatHex;function requireFormatHex(){return hasRequiredFormatHex||(hasRequiredFormatHex=1,function(_,_e){(function(et,tt,rt){_.exports=tt(requireCore(),requireCipherCore())})(commonjsGlobal$1,function(et){return function(tt){var rt=et,nt=rt.lib,at=nt.CipherParams,it=rt.enc,ot=it.Hex,st=rt.format;st.Hex={stringify:function(lt){return lt.ciphertext.toString(ot)},parse:function(lt){var gt=ot.parse(lt);return at.create({ciphertext:gt})}}}(),et.format.Hex})}(formatHex)),formatHex.exports}var aes={exports:{}},hasRequiredAes;function requireAes(){return hasRequiredAes||(hasRequiredAes=1,function(_,_e){(function(et,tt,rt){_.exports=tt(requireCore(),requireEncBase64(),requireMd5(),requireEvpkdf(),requireCipherCore())})(commonjsGlobal$1,function(et){return function(){var tt=et,rt=tt.lib,nt=rt.BlockCipher,at=tt.algo,it=[],ot=[],st=[],lt=[],gt=[],ct=[],wt=[],Tt=[],Rt=[],ht=[];(function(){for(var yt=[],xt=0;xt<256;xt++)xt<128?yt[xt]=xt<<1:yt[xt]=xt<<1^283;for(var Ct=0,pt=0,xt=0;xt<256;xt++){var dt=pt^pt<<1^pt<<2^pt<<3^pt<<4;dt=dt>>>8^dt&255^99,it[Ct]=dt,ot[dt]=Ct;var vt=yt[Ct],St=yt[vt],Et=yt[St],mt=yt[dt]*257^dt*16843008;st[Ct]=mt<<24|mt>>>8,lt[Ct]=mt<<16|mt>>>16,gt[Ct]=mt<<8|mt>>>24,ct[Ct]=mt;var mt=Et*16843009^St*65537^vt*257^Ct*16843008;wt[dt]=mt<<24|mt>>>8,Tt[dt]=mt<<16|mt>>>16,Rt[dt]=mt<<8|mt>>>24,ht[dt]=mt,Ct?(Ct=vt^yt[yt[yt[Et^vt]]],pt^=yt[yt[pt]]):Ct=pt=1}})();var ut=[0,1,2,4,8,16,32,64,128,27,54],ft=at.AES=nt.extend({_doReset:function(){var yt;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var xt=this._keyPriorReset=this._key,Ct=xt.words,pt=xt.sigBytes/4,dt=this._nRounds=pt+6,vt=(dt+1)*4,St=this._keySchedule=[],Et=0;Et<vt;Et++)Et<pt?St[Et]=Ct[Et]:(yt=St[Et-1],Et%pt?pt>6&&Et%pt==4&&(yt=it[yt>>>24]<<24|it[yt>>>16&255]<<16|it[yt>>>8&255]<<8|it[yt&255]):(yt=yt<<8|yt>>>24,yt=it[yt>>>24]<<24|it[yt>>>16&255]<<16|it[yt>>>8&255]<<8|it[yt&255],yt^=ut[Et/pt|0]<<24),St[Et]=St[Et-pt]^yt);for(var mt=this._invKeySchedule=[],_t=0;_t<vt;_t++){var Et=vt-_t;if(_t%4)var yt=St[Et];else var yt=St[Et-4];_t<4||Et<=4?mt[_t]=yt:mt[_t]=wt[it[yt>>>24]]^Tt[it[yt>>>16&255]]^Rt[it[yt>>>8&255]]^ht[it[yt&255]]}}},encryptBlock:function(yt,xt){this._doCryptBlock(yt,xt,this._keySchedule,st,lt,gt,ct,it)},decryptBlock:function(yt,xt){var Ct=yt[xt+1];yt[xt+1]=yt[xt+3],yt[xt+3]=Ct,this._doCryptBlock(yt,xt,this._invKeySchedule,wt,Tt,Rt,ht,ot);var Ct=yt[xt+1];yt[xt+1]=yt[xt+3],yt[xt+3]=Ct},_doCryptBlock:function(yt,xt,Ct,pt,dt,vt,St,Et){for(var mt=this._nRounds,_t=yt[xt]^Ct[0],bt=yt[xt+1]^Ct[1],Ot=yt[xt+2]^Ct[2],Pt=yt[xt+3]^Ct[3],Dt=4,It=1;It<mt;It++){var kt=pt[_t>>>24]^dt[bt>>>16&255]^vt[Ot>>>8&255]^St[Pt&255]^Ct[Dt++],Lt=pt[bt>>>24]^dt[Ot>>>16&255]^vt[Pt>>>8&255]^St[_t&255]^Ct[Dt++],At=pt[Ot>>>24]^dt[Pt>>>16&255]^vt[_t>>>8&255]^St[bt&255]^Ct[Dt++],$t=pt[Pt>>>24]^dt[_t>>>16&255]^vt[bt>>>8&255]^St[Ot&255]^Ct[Dt++];_t=kt,bt=Lt,Ot=At,Pt=$t}var kt=(Et[_t>>>24]<<24|Et[bt>>>16&255]<<16|Et[Ot>>>8&255]<<8|Et[Pt&255])^Ct[Dt++],Lt=(Et[bt>>>24]<<24|Et[Ot>>>16&255]<<16|Et[Pt>>>8&255]<<8|Et[_t&255])^Ct[Dt++],At=(Et[Ot>>>24]<<24|Et[Pt>>>16&255]<<16|Et[_t>>>8&255]<<8|Et[bt&255])^Ct[Dt++],$t=(Et[Pt>>>24]<<24|Et[_t>>>16&255]<<16|Et[bt>>>8&255]<<8|Et[Ot&255])^Ct[Dt++];yt[xt]=kt,yt[xt+1]=Lt,yt[xt+2]=At,yt[xt+3]=$t},keySize:256/32});tt.AES=nt._createHelper(ft)}(),et.AES})}(aes)),aes.exports}var tripledes={exports:{}},hasRequiredTripledes;function requireTripledes(){return hasRequiredTripledes||(hasRequiredTripledes=1,function(_,_e){(function(et,tt,rt){_.exports=tt(requireCore(),requireEncBase64(),requireMd5(),requireEvpkdf(),requireCipherCore())})(commonjsGlobal$1,function(et){return function(){var tt=et,rt=tt.lib,nt=rt.WordArray,at=rt.BlockCipher,it=tt.algo,ot=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],st=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],lt=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],gt=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],ct=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],wt=it.DES=at.extend({_doReset:function(){for(var ut=this._key,ft=ut.words,yt=[],xt=0;xt<56;xt++){var Ct=ot[xt]-1;yt[xt]=ft[Ct>>>5]>>>31-Ct%32&1}for(var pt=this._subKeys=[],dt=0;dt<16;dt++){for(var vt=pt[dt]=[],St=lt[dt],xt=0;xt<24;xt++)vt[xt/6|0]|=yt[(st[xt]-1+St)%28]<<31-xt%6,vt[4+(xt/6|0)]|=yt[28+(st[xt+24]-1+St)%28]<<31-xt%6;vt[0]=vt[0]<<1|vt[0]>>>31;for(var xt=1;xt<7;xt++)vt[xt]=vt[xt]>>>(xt-1)*4+3;vt[7]=vt[7]<<5|vt[7]>>>27}for(var Et=this._invSubKeys=[],xt=0;xt<16;xt++)Et[xt]=pt[15-xt]},encryptBlock:function(ut,ft){this._doCryptBlock(ut,ft,this._subKeys)},decryptBlock:function(ut,ft){this._doCryptBlock(ut,ft,this._invSubKeys)},_doCryptBlock:function(ut,ft,yt){this._lBlock=ut[ft],this._rBlock=ut[ft+1],Tt.call(this,4,252645135),Tt.call(this,16,65535),Rt.call(this,2,858993459),Rt.call(this,8,16711935),Tt.call(this,1,1431655765);for(var xt=0;xt<16;xt++){for(var Ct=yt[xt],pt=this._lBlock,dt=this._rBlock,vt=0,St=0;St<8;St++)vt|=gt[St][((dt^Ct[St])&ct[St])>>>0];this._lBlock=dt,this._rBlock=pt^vt}var Et=this._lBlock;this._lBlock=this._rBlock,this._rBlock=Et,Tt.call(this,1,1431655765),Rt.call(this,8,16711935),Rt.call(this,2,858993459),Tt.call(this,16,65535),Tt.call(this,4,252645135),ut[ft]=this._lBlock,ut[ft+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function Tt(ut,ft){var yt=(this._lBlock>>>ut^this._rBlock)&ft;this._rBlock^=yt,this._lBlock^=yt<<ut}function Rt(ut,ft){var yt=(this._rBlock>>>ut^this._lBlock)&ft;this._lBlock^=yt,this._rBlock^=yt<<ut}tt.DES=at._createHelper(wt);var ht=it.TripleDES=at.extend({_doReset:function(){var ut=this._key,ft=ut.words;if(ft.length!==2&&ft.length!==4&&ft.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var yt=ft.slice(0,2),xt=ft.length<4?ft.slice(0,2):ft.slice(2,4),Ct=ft.length<6?ft.slice(0,2):ft.slice(4,6);this._des1=wt.createEncryptor(nt.create(yt)),this._des2=wt.createEncryptor(nt.create(xt)),this._des3=wt.createEncryptor(nt.create(Ct))},encryptBlock:function(ut,ft){this._des1.encryptBlock(ut,ft),this._des2.decryptBlock(ut,ft),this._des3.encryptBlock(ut,ft)},decryptBlock:function(ut,ft){this._des3.decryptBlock(ut,ft),this._des2.encryptBlock(ut,ft),this._des1.decryptBlock(ut,ft)},keySize:192/32,ivSize:64/32,blockSize:64/32});tt.TripleDES=at._createHelper(ht)}(),et.TripleDES})}(tripledes)),tripledes.exports}var rc4={exports:{}},hasRequiredRc4;function requireRc4(){return hasRequiredRc4||(hasRequiredRc4=1,function(_,_e){(function(et,tt,rt){_.exports=tt(requireCore(),requireEncBase64(),requireMd5(),requireEvpkdf(),requireCipherCore())})(commonjsGlobal$1,function(et){return function(){var tt=et,rt=tt.lib,nt=rt.StreamCipher,at=tt.algo,it=at.RC4=nt.extend({_doReset:function(){for(var lt=this._key,gt=lt.words,ct=lt.sigBytes,wt=this._S=[],Tt=0;Tt<256;Tt++)wt[Tt]=Tt;for(var Tt=0,Rt=0;Tt<256;Tt++){var ht=Tt%ct,ut=gt[ht>>>2]>>>24-ht%4*8&255;Rt=(Rt+wt[Tt]+ut)%256;var ft=wt[Tt];wt[Tt]=wt[Rt],wt[Rt]=ft}this._i=this._j=0},_doProcessBlock:function(lt,gt){lt[gt]^=ot.call(this)},keySize:256/32,ivSize:0});function ot(){for(var lt=this._S,gt=this._i,ct=this._j,wt=0,Tt=0;Tt<4;Tt++){gt=(gt+1)%256,ct=(ct+lt[gt])%256;var Rt=lt[gt];lt[gt]=lt[ct],lt[ct]=Rt,wt|=lt[(lt[gt]+lt[ct])%256]<<24-Tt*8}return this._i=gt,this._j=ct,wt}tt.RC4=nt._createHelper(it);var st=at.RC4Drop=it.extend({cfg:it.cfg.extend({drop:192}),_doReset:function(){it._doReset.call(this);for(var lt=this.cfg.drop;lt>0;lt--)ot.call(this)}});tt.RC4Drop=nt._createHelper(st)}(),et.RC4})}(rc4)),rc4.exports}var rabbit={exports:{}},hasRequiredRabbit;function requireRabbit(){return hasRequiredRabbit||(hasRequiredRabbit=1,function(_,_e){(function(et,tt,rt){_.exports=tt(requireCore(),requireEncBase64(),requireMd5(),requireEvpkdf(),requireCipherCore())})(commonjsGlobal$1,function(et){return function(){var tt=et,rt=tt.lib,nt=rt.StreamCipher,at=tt.algo,it=[],ot=[],st=[],lt=at.Rabbit=nt.extend({_doReset:function(){for(var ct=this._key.words,wt=this.cfg.iv,Tt=0;Tt<4;Tt++)ct[Tt]=(ct[Tt]<<8|ct[Tt]>>>24)&16711935|(ct[Tt]<<24|ct[Tt]>>>8)&4278255360;var Rt=this._X=[ct[0],ct[3]<<16|ct[2]>>>16,ct[1],ct[0]<<16|ct[3]>>>16,ct[2],ct[1]<<16|ct[0]>>>16,ct[3],ct[2]<<16|ct[1]>>>16],ht=this._C=[ct[2]<<16|ct[2]>>>16,ct[0]&4294901760|ct[1]&65535,ct[3]<<16|ct[3]>>>16,ct[1]&4294901760|ct[2]&65535,ct[0]<<16|ct[0]>>>16,ct[2]&4294901760|ct[3]&65535,ct[1]<<16|ct[1]>>>16,ct[3]&4294901760|ct[0]&65535];this._b=0;for(var Tt=0;Tt<4;Tt++)gt.call(this);for(var Tt=0;Tt<8;Tt++)ht[Tt]^=Rt[Tt+4&7];if(wt){var ut=wt.words,ft=ut[0],yt=ut[1],xt=(ft<<8|ft>>>24)&16711935|(ft<<24|ft>>>8)&4278255360,Ct=(yt<<8|yt>>>24)&16711935|(yt<<24|yt>>>8)&4278255360,pt=xt>>>16|Ct&4294901760,dt=Ct<<16|xt&65535;ht[0]^=xt,ht[1]^=pt,ht[2]^=Ct,ht[3]^=dt,ht[4]^=xt,ht[5]^=pt,ht[6]^=Ct,ht[7]^=dt;for(var Tt=0;Tt<4;Tt++)gt.call(this)}},_doProcessBlock:function(ct,wt){var Tt=this._X;gt.call(this),it[0]=Tt[0]^Tt[5]>>>16^Tt[3]<<16,it[1]=Tt[2]^Tt[7]>>>16^Tt[5]<<16,it[2]=Tt[4]^Tt[1]>>>16^Tt[7]<<16,it[3]=Tt[6]^Tt[3]>>>16^Tt[1]<<16;for(var Rt=0;Rt<4;Rt++)it[Rt]=(it[Rt]<<8|it[Rt]>>>24)&16711935|(it[Rt]<<24|it[Rt]>>>8)&4278255360,ct[wt+Rt]^=it[Rt]},blockSize:128/32,ivSize:64/32});function gt(){for(var ct=this._X,wt=this._C,Tt=0;Tt<8;Tt++)ot[Tt]=wt[Tt];wt[0]=wt[0]+1295307597+this._b|0,wt[1]=wt[1]+3545052371+(wt[0]>>>0<ot[0]>>>0?1:0)|0,wt[2]=wt[2]+886263092+(wt[1]>>>0<ot[1]>>>0?1:0)|0,wt[3]=wt[3]+1295307597+(wt[2]>>>0<ot[2]>>>0?1:0)|0,wt[4]=wt[4]+3545052371+(wt[3]>>>0<ot[3]>>>0?1:0)|0,wt[5]=wt[5]+886263092+(wt[4]>>>0<ot[4]>>>0?1:0)|0,wt[6]=wt[6]+1295307597+(wt[5]>>>0<ot[5]>>>0?1:0)|0,wt[7]=wt[7]+3545052371+(wt[6]>>>0<ot[6]>>>0?1:0)|0,this._b=wt[7]>>>0<ot[7]>>>0?1:0;for(var Tt=0;Tt<8;Tt++){var Rt=ct[Tt]+wt[Tt],ht=Rt&65535,ut=Rt>>>16,ft=((ht*ht>>>17)+ht*ut>>>15)+ut*ut,yt=((Rt&4294901760)*Rt|0)+((Rt&65535)*Rt|0);st[Tt]=ft^yt}ct[0]=st[0]+(st[7]<<16|st[7]>>>16)+(st[6]<<16|st[6]>>>16)|0,ct[1]=st[1]+(st[0]<<8|st[0]>>>24)+st[7]|0,ct[2]=st[2]+(st[1]<<16|st[1]>>>16)+(st[0]<<16|st[0]>>>16)|0,ct[3]=st[3]+(st[2]<<8|st[2]>>>24)+st[1]|0,ct[4]=st[4]+(st[3]<<16|st[3]>>>16)+(st[2]<<16|st[2]>>>16)|0,ct[5]=st[5]+(st[4]<<8|st[4]>>>24)+st[3]|0,ct[6]=st[6]+(st[5]<<16|st[5]>>>16)+(st[4]<<16|st[4]>>>16)|0,ct[7]=st[7]+(st[6]<<8|st[6]>>>24)+st[5]|0}tt.Rabbit=nt._createHelper(lt)}(),et.Rabbit})}(rabbit)),rabbit.exports}var rabbitLegacy={exports:{}},hasRequiredRabbitLegacy;function requireRabbitLegacy(){return hasRequiredRabbitLegacy||(hasRequiredRabbitLegacy=1,function(_,_e){(function(et,tt,rt){_.exports=tt(requireCore(),requireEncBase64(),requireMd5(),requireEvpkdf(),requireCipherCore())})(commonjsGlobal$1,function(et){return function(){var tt=et,rt=tt.lib,nt=rt.StreamCipher,at=tt.algo,it=[],ot=[],st=[],lt=at.RabbitLegacy=nt.extend({_doReset:function(){var ct=this._key.words,wt=this.cfg.iv,Tt=this._X=[ct[0],ct[3]<<16|ct[2]>>>16,ct[1],ct[0]<<16|ct[3]>>>16,ct[2],ct[1]<<16|ct[0]>>>16,ct[3],ct[2]<<16|ct[1]>>>16],Rt=this._C=[ct[2]<<16|ct[2]>>>16,ct[0]&4294901760|ct[1]&65535,ct[3]<<16|ct[3]>>>16,ct[1]&4294901760|ct[2]&65535,ct[0]<<16|ct[0]>>>16,ct[2]&4294901760|ct[3]&65535,ct[1]<<16|ct[1]>>>16,ct[3]&4294901760|ct[0]&65535];this._b=0;for(var ht=0;ht<4;ht++)gt.call(this);for(var ht=0;ht<8;ht++)Rt[ht]^=Tt[ht+4&7];if(wt){var ut=wt.words,ft=ut[0],yt=ut[1],xt=(ft<<8|ft>>>24)&16711935|(ft<<24|ft>>>8)&4278255360,Ct=(yt<<8|yt>>>24)&16711935|(yt<<24|yt>>>8)&4278255360,pt=xt>>>16|Ct&4294901760,dt=Ct<<16|xt&65535;Rt[0]^=xt,Rt[1]^=pt,Rt[2]^=Ct,Rt[3]^=dt,Rt[4]^=xt,Rt[5]^=pt,Rt[6]^=Ct,Rt[7]^=dt;for(var ht=0;ht<4;ht++)gt.call(this)}},_doProcessBlock:function(ct,wt){var Tt=this._X;gt.call(this),it[0]=Tt[0]^Tt[5]>>>16^Tt[3]<<16,it[1]=Tt[2]^Tt[7]>>>16^Tt[5]<<16,it[2]=Tt[4]^Tt[1]>>>16^Tt[7]<<16,it[3]=Tt[6]^Tt[3]>>>16^Tt[1]<<16;for(var Rt=0;Rt<4;Rt++)it[Rt]=(it[Rt]<<8|it[Rt]>>>24)&16711935|(it[Rt]<<24|it[Rt]>>>8)&4278255360,ct[wt+Rt]^=it[Rt]},blockSize:128/32,ivSize:64/32});function gt(){for(var ct=this._X,wt=this._C,Tt=0;Tt<8;Tt++)ot[Tt]=wt[Tt];wt[0]=wt[0]+1295307597+this._b|0,wt[1]=wt[1]+3545052371+(wt[0]>>>0<ot[0]>>>0?1:0)|0,wt[2]=wt[2]+886263092+(wt[1]>>>0<ot[1]>>>0?1:0)|0,wt[3]=wt[3]+1295307597+(wt[2]>>>0<ot[2]>>>0?1:0)|0,wt[4]=wt[4]+3545052371+(wt[3]>>>0<ot[3]>>>0?1:0)|0,wt[5]=wt[5]+886263092+(wt[4]>>>0<ot[4]>>>0?1:0)|0,wt[6]=wt[6]+1295307597+(wt[5]>>>0<ot[5]>>>0?1:0)|0,wt[7]=wt[7]+3545052371+(wt[6]>>>0<ot[6]>>>0?1:0)|0,this._b=wt[7]>>>0<ot[7]>>>0?1:0;for(var Tt=0;Tt<8;Tt++){var Rt=ct[Tt]+wt[Tt],ht=Rt&65535,ut=Rt>>>16,ft=((ht*ht>>>17)+ht*ut>>>15)+ut*ut,yt=((Rt&4294901760)*Rt|0)+((Rt&65535)*Rt|0);st[Tt]=ft^yt}ct[0]=st[0]+(st[7]<<16|st[7]>>>16)+(st[6]<<16|st[6]>>>16)|0,ct[1]=st[1]+(st[0]<<8|st[0]>>>24)+st[7]|0,ct[2]=st[2]+(st[1]<<16|st[1]>>>16)+(st[0]<<16|st[0]>>>16)|0,ct[3]=st[3]+(st[2]<<8|st[2]>>>24)+st[1]|0,ct[4]=st[4]+(st[3]<<16|st[3]>>>16)+(st[2]<<16|st[2]>>>16)|0,ct[5]=st[5]+(st[4]<<8|st[4]>>>24)+st[3]|0,ct[6]=st[6]+(st[5]<<16|st[5]>>>16)+(st[4]<<16|st[4]>>>16)|0,ct[7]=st[7]+(st[6]<<8|st[6]>>>24)+st[5]|0}tt.RabbitLegacy=nt._createHelper(lt)}(),et.RabbitLegacy})}(rabbitLegacy)),rabbitLegacy.exports}(function(_,_e){(function(et,tt,rt){_.exports=tt(requireCore(),requireX64Core(),requireLibTypedarrays(),requireEncUtf16(),requireEncBase64(),requireEncBase64url(),requireMd5(),requireSha1(),requireSha256(),requireSha224(),requireSha512(),requireSha384(),requireSha3(),requireRipemd160(),requireHmac(),requirePbkdf2(),requireEvpkdf(),requireCipherCore(),requireModeCfb(),requireModeCtr(),requireModeCtrGladman(),requireModeOfb(),requireModeEcb(),requirePadAnsix923(),requirePadIso10126(),requirePadIso97971(),requirePadZeropadding(),requirePadNopadding(),requireFormatHex(),requireAes(),requireTripledes(),requireRc4(),requireRabbit(),requireRabbitLegacy())})(commonjsGlobal$1,function(et){return et})})(cryptoJs);const CryptoJS=cryptoJs.exports,format={stringify:_=>{const _e=_.ciphertext.toString(CryptoJS.enc.Base64),et=_.iv.toString()||"",tt=_.salt.toString()||"";return JSON.stringify({ct:_e,iv:et,salt:tt})},parse:_=>{const _e=JSON.parse(_),et=CryptoJS.enc.Base64.parse(_e.ct),tt=CryptoJS.enc.Hex.parse(_e.iv)||"",rt=CryptoJS.enc.Hex.parse(_e.s)||"";return CryptoJS.lib.CipherParams.create({ciphertext:et,iv:tt,salt:rt})}};registerProvider({id:"gdriveplayer",displayName:"gdriveplayer",disabled:!0,rank:69,type:[MWMediaType.MOVIE],async scrape({progress,media:{imdbId}}){progress(10);const streamRes=await proxiedFetch("https://database.gdriveplayer.us/player.php",{params:{imdb:imdbId}});progress(90);const page=new DOMParser().parseFromString(streamRes,"text/html"),script=Array.from(page.querySelectorAll("script")).find(_=>{var _e;return(_e=_.textContent)==null?void 0:_e.includes("eval")});if(!script||!script.textContent)throw new Error("Could not find stream");const data=unpack_1(script.textContent).split("var data=\\'")[1].split("\\'")[0].replace(/\\/g,""),decryptedData=unpack_1(CryptoJS.AES.decrypt(data,"alsfheafsjklNIWORNiolNIOWNKLNXakjsfwnBdwjbwfkjbJjkopfjweopjASoiwnrflakefneiofrt",{format}).toString(CryptoJS.enc.Utf8)),sources=JSON.parse(JSON.stringify(eval(decryptedData.split("sources:")[1].split(",image")[0].replace(/\\/g,"").replace(/document\.referrer/g,'""')))),source=sources[sources.length-1];let quality;return source.label==="720p"?quality=MWStreamQuality.Q720P:quality=MWStreamQuality.QUNKNOWN,{stream:{streamUrl:`https:${source.file}`,type:source.type,quality,captions:[]},embeds:[]}}});const flixHqBase="https://c.delusionz.xyz/movies/flixhq";registerProvider({id:"flixhq",displayName:"FlixHQ",rank:100,type:[MWMediaType.MOVIE],async scrape({media:_,progress:_e}){const tt=(await proxiedFetch(`/${encodeURIComponent(_.meta.title)}`,{baseURL:flixHqBase})).results.find(ot=>compareTitle(ot.title,_.meta.title)&&ot.releaseDate===_.meta.year);if(!tt)throw new Error("No watchable item found");const rt=tt.id;_e(25);const nt=await proxiedFetch("/info",{baseURL:flixHqBase,params:{id:rt}});_e(75);const it=(await proxiedFetch("/watch",{baseURL:flixHqBase,params:{episodeId:nt.episodes[0].id,mediaId:rt}})).sources.reduce((ot,st)=>st.quality>ot.quality?st:ot);return{embeds:[],stream:{streamUrl:it.url,quality:MWStreamQuality.QUNKNOWN,type:it.isM3U8?MWStreamType.HLS:MWStreamType.MP4,captions:[]}}}});const nanoid=customAlphabet("0123456789abcdef",32),qualityMap$1={"360p":MWStreamQuality.Q360P,"480p":MWStreamQuality.Q480P,"720p":MWStreamQuality.Q720P,"1080p":MWStreamQuality.Q1080P},iv=atob("d0VpcGhUbiE="),key$1=atob("MTIzZDZjZWRmNjI2ZHk1NDIzM2FhMXc2"),apiUrls=[atob("aHR0cHM6Ly9zaG93Ym94LnNoZWd1Lm5ldC9hcGkvYXBpX2NsaWVudC9pbmRleC8="),atob("aHR0cHM6Ly9tYnBhcGkuc2hlZ3UubmV0L2FwaS9hcGlfY2xpZW50L2luZGV4Lw==")],appKey=atob("bW92aWVib3g="),appId=atob("Y29tLnRkby5zaG93Ym94"),crypto$1={encrypt(_){return CryptoJS.TripleDES.encrypt(_,CryptoJS.enc.Utf8.parse(key$1),{iv:CryptoJS.enc.Utf8.parse(iv)}).toString()},getVerify(_,_e,et){return _?CryptoJS.MD5(CryptoJS.MD5(_e).toString()+et+_).toString():null}},expiry=()=>Math.floor(Date.now()/1e3+60*60*12),get=(_,_e=!1)=>{const et={childmode:"0",app_version:"11.5",appid:appId,lang:"en",expired_date:`${expiry()}`,platform:"android",channel:"Website"},tt=crypto$1.encrypt(JSON.stringify({...et,..._})),rt=CryptoJS.MD5(appKey).toString(),nt=crypto$1.getVerify(tt,appKey,key$1),at=JSON.stringify({app_key:rt,verify:nt,encrypt_data:tt}),it=btoa(at),ot=new URLSearchParams;ot.append("data",it),ot.append("appid","27"),ot.append("platform","android"),ot.append("version","129"),ot.append("medium","Website");const st=_e?apiUrls[1]:apiUrls[0];return proxiedFetch(st,{method:"POST",parseResponse:JSON.parse,headers:{Platform:"android","Content-Type":"application/x-www-form-urlencoded"},body:`${ot.toString()}&token${nanoid()}`})},getBestQuality=_=>_.find(_e=>_e.quality==="1080p"&&_e.path)??_.find(_e=>_e.quality==="720p"&&_e.path)??_.find(_e=>_e.quality==="480p"&&_e.path)??_.find(_e=>_e.quality==="360p"&&_e.path);registerProvider({id:"superstream",displayName:"Superstream",rank:200,type:[MWMediaType.MOVIE,MWMediaType.SERIES],async scrape({media:_,episode:_e,progress:et}){var wt,Tt;const tt={module:"Search3",page:"1",type:"all",keyword:_.meta.title,pagelimit:"20"},rt=(await get(tt,!0)).data;et(33);const nt=rt.find(Rt=>compareTitle(Rt.title,_.meta.title)&&Rt.year===Number(_.meta.year));if(!nt)throw new Error("No entry found on SuperStream");const at=nt.id;if(_.meta.type===MWMediaType.MOVIE){const ht=(await get({uid:"",module:"Movie_downloadurl_v3",mid:at,oss:"1",group:""})).data;et(50);const ut=getBestQuality(ht.list);if(!ut)throw new Error("No quality could be found.");const ft={fid:ut.fid,uid:"",module:"Movie_srt_list_v2",mid:at},xt=(await get(ft)).data.list.map(Ct=>({needsProxy:!0,langIso:Ct.language,url:Ct.subtitles[0].file_path,type:MWCaptionType.SRT}));return{embeds:[],stream:{streamUrl:ut.path,quality:qualityMap$1[ut.quality],type:MWStreamType.MP4,captions:xt}}}if(_.meta.type!==MWMediaType.SERIES)throw new Error("Unsupported type");const it={uid:"",module:"TV_downloadurl_v3",tid:at,season:_.meta.seasonData.number.toString(),episode:(((wt=_.meta.seasonData.episodes.find(Rt=>Rt.id===_e))==null?void 0:wt.number)??1).toString(),oss:"1",group:""},ot=(await get(it)).data;et(66);const st=getBestQuality(ot.list);if(!st)throw new Error("No quality could be found.");const lt={fid:st.fid,uid:"",module:"TV_srt_list_v2",episode:((Tt=_.meta.seasonData.episodes.find(Rt=>Rt.id===_e))==null?void 0:Tt.number)??1,tid:at,season:_.meta.seasonData.number.toString()},ct=(await get(lt)).data.list.map(Rt=>({needsProxy:!0,langIso:Rt.language,url:Rt.subtitles[0].file_path,type:MWCaptionType.SRT}));return{embeds:[],stream:{quality:qualityMap$1[st.quality],streamUrl:st.path,type:MWStreamType.MP4,captions:ct}}}});const netfilmBase="https://net-film.vercel.app",qualityMap={360:MWStreamQuality.Q360P,480:MWStreamQuality.Q480P,720:MWStreamQuality.Q720P,1080:MWStreamQuality.Q1080P};registerProvider({id:"netfilm",displayName:"NetFilm",rank:15,type:[MWMediaType.MOVIE,MWMediaType.SERIES],disabled:!0,async scrape({media:_,episode:_e,progress:et}){var Tt;const rt=(await proxiedFetch(`/api/search?keyword=${encodeURIComponent(_.meta.title)}`,{baseURL:netfilmBase})).data.results;if(et(25),_.meta.type===MWMediaType.MOVIE){const Rt=rt.find(xt=>xt.name===_.meta.title&&xt.releaseTime===_.meta.year);if(!Rt)throw new Error("No watchable item found");const ht=Rt.id;et(75);const ut=await proxiedFetch(`/api/episode?id=${ht}`,{baseURL:netfilmBase}),{qualities:ft}=ut.data,yt=ft.reduce((xt,Ct)=>Ct.quality>xt.quality?Ct:xt);return{embeds:[],stream:{streamUrl:yt.url,quality:qualityMap[yt.quality],type:MWStreamType.HLS,captions:[]}}}if(_.meta.type!==MWMediaType.SERIES)throw new Error("Unsupported type");const nt=_.meta.seasonData.number,it=rt.filter(Rt=>Rt.name.includes(_.meta.title)).map(Rt=>({...Rt,season:parseInt(Rt.name.split(" ").at(-1),10)||1})).find(Rt=>Rt.season===nt);et(50);const ot=await proxiedFetch(`/api/detail?id=${it.id}&category=${it.categoryTag[0].id}`,{baseURL:netfilmBase}),st=(Tt=_.meta.seasonData.episodes.find(Rt=>Rt.id===_e))==null?void 0:Tt.number,lt=ot.data.episodeVo.find(Rt=>Rt.seriesNo===st);et(75);const gt=await proxiedFetch(`/api/episode?id=${it.id}&category=1&episode=${lt.id}`,{baseURL:netfilmBase}),{qualities:ct}=gt.data,wt=ct.reduce((Rt,ht)=>ht.quality>Rt.quality?ht:Rt);return{embeds:[],stream:{streamUrl:wt.url,quality:qualityMap[wt.quality],type:MWStreamType.HLS,captions:[]}}}});var MWEmbedType=(_=>(_.M4UFREE="m4ufree",_.STREAMM4U="streamm4u",_.PLAYM4U="playm4u",_))(MWEmbedType||{});const HOST$1="m4ufree.com",URL_BASE$1=`https://${HOST$1}`,URL_SEARCH=`${URL_BASE$1}/search`,URL_AJAX=`${URL_BASE$1}/ajax`,URL_AJAX_TV=`${URL_BASE$1}/ajaxtv`,REGEX_TITLE_AND_YEAR=/(.*) \(?(\d*|\d*-|\d*-\d*)\)?$/,REGEX_TYPE=/.*-(movie|tvshow)-online-free-m4ufree\.html/,REGEX_COOKIES=/XSRF-TOKEN=(.*?);.*laravel_session=(.*?);/,REGEX_SEASON_EPISODE=/S(\d*)-E(\d*)/;function toDom(_){return new DOMParser().parseFromString(_,"text/html")}registerProvider({id:"m4ufree",displayName:"m4ufree",rank:-1,disabled:!0,type:[MWMediaType.MOVIE,MWMediaType.SERIES],async scrape({media:_,type:_e,episode:et,season:tt}){var ut,ft,yt,xt,Ct;const rt=((ft=(ut=_.meta.seasons)==null?void 0:ut.find(pt=>pt.id===tt))==null?void 0:ft.number)||1,nt=_.meta.type===MWMediaType.SERIES?((yt=_.meta.seasonData.episodes.find(pt=>pt.id===et))==null?void 0:yt.number)||1:void 0,at=[],it=await proxiedFetch(`${URL_SEARCH}/${encodeURIComponent(_.meta.title)}.html`);let ot=toDom(it);const lt=[...ot.querySelectorAll(".item")].map(pt=>{var Ot;const dt=(Ot=pt.querySelector(".tiptitle p"))==null?void 0:Ot.innerHTML;if(!dt)return;let vt=REGEX_TITLE_AND_YEAR.exec(dt);if(!vt||!vt[1]||!vt[2])return;const St=vt[1],Et=Number(vt[2].slice(0,4)),mt=pt.querySelector("a");if(!mt)return;const _t=mt.href;if(vt=REGEX_TYPE.exec(_t),!vt||!vt[1])return;let bt=vt[1];return bt=bt==="tvshow"?"show":"movie",{type:bt,title:St,year:Et,href:_t}}).filter(pt=>pt).find(pt=>pt&&pt.title===_.meta.title&&pt.year.toString()===_.meta.year);if(!lt)return{embeds:at};let gt="";const ct=await proxiedFetch(lt.href,{onResponse(pt){gt=pt.response.headers.get("X-Set-Cookie")}});ot=toDom(ct);let wt=REGEX_COOKIES.exec(gt);if(!wt||!wt[1]||!wt[2])throw new Error("No regexResults, yikesssssss kinda gross idk");const Tt=`XSRF-TOKEN=${wt[1]}; laravel_session=${wt[2]}`,Rt=(xt=ot.querySelector('meta[name="csrf-token"]'))==null?void 0:xt.getAttribute("content");if(!Rt)return{embeds:at};if(_e===MWMediaType.SERIES){const dt=[...ot.querySelectorAll(".episode")].map(Et=>{if(wt=REGEX_SEASON_EPISODE.exec(Et.innerHTML),!wt||!wt[1]||!wt[2])return;const mt=Number(wt[1]),_t=Number(wt[2]);return{id:Et.getAttribute("idepisode"),episode:mt,season:_t}}).filter(Et=>Et).find(Et=>Et&&Et.episode===nt&&Et.season===rt);if(!dt)return{embeds:at};const vt=`idepisode=${dt.id}&_token=${Rt}`,St=await proxiedFetch(URL_AJAX_TV,{method:"POST",headers:{Accept:"*/*","Accept-Encoding":"gzip, deflate, br","Accept-Language":"en-US,en;q=0.9","Content-Type":"application/x-www-form-urlencoded;charset=UTF-8","X-Requested-With":"XMLHttpRequest","Sec-CH-UA":'"Not?A_Brand";v="8", "Chromium";v="108", "Microsoft Edge";v="108"',"Sec-CH-UA-Mobile":"?0","Sec-CH-UA-Platform":'"Linux"',"Sec-Fetch-Site":"same-origin","Sec-Fetch-Mode":"cors","Sec-Fetch-Dest":"empty","X-Cookie":Tt,"X-Origin":URL_BASE$1,"X-Referer":lt.href},body:vt});ot=toDom(St)}const ht=[...ot.querySelectorAll(".singlemv")].map(pt=>pt.getAttribute("data"));for(const pt of ht){const dt=`m4u=${pt}&_token=${Rt}`,vt=await proxiedFetch(URL_AJAX,{method:"POST",headers:{Accept:"*/*","Accept-Encoding":"gzip, deflate, br","Accept-Language":"en-US,en;q=0.9","Content-Type":"application/x-www-form-urlencoded;charset=UTF-8","X-Requested-With":"XMLHttpRequest","Sec-CH-UA":'"Not?A_Brand";v="8", "Chromium";v="108", "Microsoft Edge";v="108"',"Sec-CH-UA-Mobile":"?0","Sec-CH-UA-Platform":'"Linux"',"Sec-Fetch-Site":"same-origin","Sec-Fetch-Mode":"cors","Sec-Fetch-Dest":"empty","X-Cookie":Tt,"X-Origin":URL_BASE$1,"X-Referer":lt.href},body:dt}),Et=(Ct=toDom(vt).querySelector("iframe"))==null?void 0:Ct.src,mt=bt=>bt.startsWith("https://streamm4u.club")?MWEmbedType.STREAMM4U:bt.startsWith("https://play.playm4u.xyz")?MWEmbedType.PLAYM4U:null;if(!Et)continue;const _t=mt(Et);_t&&at.push({url:Et,type:_t})}return console.log(at),{embeds:at}}});const HOST="streamm4u.club",URL_BASE=`https://${HOST}`,URL_API=`${URL_BASE}/api`,URL_API_SOURCE=`${URL_API}/source`;async function scrape(_){const _e=[],et=_.split("/").pop();console.log(`${URL_API_SOURCE}/${et}`);const tt=await proxiedFetch(`${URL_API_SOURCE}/${et}`,{method:"POST",body:`r=&d=${HOST}`});if(tt.success){const rt=tt.data;for(const nt of rt)_e.push({streamUrl:nt.file,quality:nt.label,type:nt.type,captions:[]})}return _e}registerEmbedScraper({id:"streamm4u",displayName:"streamm4u",for:MWEmbedType.STREAMM4U,rank:100,async getStream({progress:_,url:_e}){const tt=(await scrape(_e)).sort((rt,nt)=>Number(nt.quality.replace("p",""))-Number(rt.quality.replace("p","")))[0];if(!tt)throw new Error("No source found");return _(100),tt}});registerEmbedScraper({id:"playm4u",displayName:"playm4u",for:MWEmbedType.PLAYM4U,rank:0,async getStream(){return{streamUrl:"",quality:MWStreamQuality.Q1080P,captions:[],type:MWStreamType.MP4}}});initializeScraperStore();var Gr;const key=((Gr=window==null?void 0:window.__CONFIG__)==null?void 0:Gr.VITE_KEY)??{}.VITE_KEY??null;key&&window.initMW(conf().PROXY_URLS,key);initializeChromecast();registerSW({onNeedRefresh(){window.location.reload()}});const LazyLoadedApp=React$1.lazy(async()=>(await initializeStores(),{default:App}));function TheRouter(_){return conf().NORMAL_ROUTER?jsxRuntime.exports.jsx(BrowserRouter,{children:_.children}):jsxRuntime.exports.jsx(HashRouter,{children:_.children})}ReactDOM.render(jsxRuntime.exports.jsx(React$1.StrictMode,{children:jsxRuntime.exports.jsx(ErrorBoundary,{children:jsxRuntime.exports.jsx(TheRouter,{children:jsxRuntime.exports.jsx(react.exports.Suspense,{fallback:"",children:jsxRuntime.exports.jsx(LazyLoadedApp,{})})})})}),document.getElementById("root"));
